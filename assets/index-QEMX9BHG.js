var dD=Object.defineProperty;var pD=(n,t,e)=>t in n?dD(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var _1=(n,t,e)=>pD(n,typeof t!="symbol"?t+"":t,e);function mD(n,t){for(var e=0;e<t.length;e++){const i=t[e];if(typeof i!="string"&&!Array.isArray(i)){for(const a in i)if(a!=="default"&&!(a in n)){const o=Object.getOwnPropertyDescriptor(i,a);o&&Object.defineProperty(n,a,o.get?o:{enumerable:!0,get:()=>i[a]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function e(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(a){if(a.ep)return;a.ep=!0;const o=e(a);fetch(a.href,o)}})();function Qy(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var y1={exports:{}},xm={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OE;function gD(){if(OE)return xm;OE=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(i,a,o){var u=null;if(o!==void 0&&(u=""+o),a.key!==void 0&&(u=""+a.key),"key"in a){o={};for(var h in a)h!=="key"&&(o[h]=a[h])}else o=a;return a=o.ref,{$$typeof:n,type:i,key:u,ref:a!==void 0?a:null,props:o}}return xm.Fragment=t,xm.jsx=e,xm.jsxs=e,xm}var LE;function vD(){return LE||(LE=1,y1.exports=gD()),y1.exports}var Oe=vD(),x1={exports:{}},_n={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zE;function _D(){if(zE)return _n;zE=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),u=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),_=Symbol.iterator;function x(Z){return Z===null||typeof Z!="object"?null:(Z=_&&Z[_]||Z["@@iterator"],typeof Z=="function"?Z:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,R={};function w(Z,ht,Tt){this.props=Z,this.context=ht,this.refs=R,this.updater=Tt||b}w.prototype.isReactComponent={},w.prototype.setState=function(Z,ht){if(typeof Z!="object"&&typeof Z!="function"&&Z!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Z,ht,"setState")},w.prototype.forceUpdate=function(Z){this.updater.enqueueForceUpdate(this,Z,"forceUpdate")};function M(){}M.prototype=w.prototype;function C(Z,ht,Tt){this.props=Z,this.context=ht,this.refs=R,this.updater=Tt||b}var U=C.prototype=new M;U.constructor=C,E(U,w.prototype),U.isPureReactComponent=!0;var D=Array.isArray,z={H:null,A:null,T:null,S:null},B=Object.prototype.hasOwnProperty;function F(Z,ht,Tt,Ft,rt,Lt){return Tt=Lt.ref,{$$typeof:n,type:Z,key:ht,ref:Tt!==void 0?Tt:null,props:Lt}}function G(Z,ht){return F(Z.type,ht,void 0,void 0,void 0,Z.props)}function L(Z){return typeof Z=="object"&&Z!==null&&Z.$$typeof===n}function O(Z){var ht={"=":"=0",":":"=2"};return"$"+Z.replace(/[=:]/g,function(Tt){return ht[Tt]})}var V=/\/+/g;function et(Z,ht){return typeof Z=="object"&&Z!==null&&Z.key!=null?O(""+Z.key):ht.toString(36)}function W(){}function j(Z){switch(Z.status){case"fulfilled":return Z.value;case"rejected":throw Z.reason;default:switch(typeof Z.status=="string"?Z.then(W,W):(Z.status="pending",Z.then(function(ht){Z.status==="pending"&&(Z.status="fulfilled",Z.value=ht)},function(ht){Z.status==="pending"&&(Z.status="rejected",Z.reason=ht)})),Z.status){case"fulfilled":return Z.value;case"rejected":throw Z.reason}}throw Z}function ut(Z,ht,Tt,Ft,rt){var Lt=typeof Z;(Lt==="undefined"||Lt==="boolean")&&(Z=null);var Et=!1;if(Z===null)Et=!0;else switch(Lt){case"bigint":case"string":case"number":Et=!0;break;case"object":switch(Z.$$typeof){case n:case t:Et=!0;break;case v:return Et=Z._init,ut(Et(Z._payload),ht,Tt,Ft,rt)}}if(Et)return rt=rt(Z),Et=Ft===""?"."+et(Z,0):Ft,D(rt)?(Tt="",Et!=null&&(Tt=Et.replace(V,"$&/")+"/"),ut(rt,ht,Tt,"",function(we){return we})):rt!=null&&(L(rt)&&(rt=G(rt,Tt+(rt.key==null||Z&&Z.key===rt.key?"":(""+rt.key).replace(V,"$&/")+"/")+Et)),ht.push(rt)),1;Et=0;var Nt=Ft===""?".":Ft+":";if(D(Z))for(var Qt=0;Qt<Z.length;Qt++)Ft=Z[Qt],Lt=Nt+et(Ft,Qt),Et+=ut(Ft,ht,Tt,Lt,rt);else if(Qt=x(Z),typeof Qt=="function")for(Z=Qt.call(Z),Qt=0;!(Ft=Z.next()).done;)Ft=Ft.value,Lt=Nt+et(Ft,Qt++),Et+=ut(Ft,ht,Tt,Lt,rt);else if(Lt==="object"){if(typeof Z.then=="function")return ut(j(Z),ht,Tt,Ft,rt);throw ht=String(Z),Error("Objects are not valid as a React child (found: "+(ht==="[object Object]"?"object with keys {"+Object.keys(Z).join(", ")+"}":ht)+"). If you meant to render a collection of children, use an array instead.")}return Et}function tt(Z,ht,Tt){if(Z==null)return Z;var Ft=[],rt=0;return ut(Z,Ft,"","",function(Lt){return ht.call(Tt,Lt,rt++)}),Ft}function pt(Z){if(Z._status===-1){var ht=Z._result;ht=ht(),ht.then(function(Tt){(Z._status===0||Z._status===-1)&&(Z._status=1,Z._result=Tt)},function(Tt){(Z._status===0||Z._status===-1)&&(Z._status=2,Z._result=Tt)}),Z._status===-1&&(Z._status=0,Z._result=ht)}if(Z._status===1)return Z._result.default;throw Z._result}var ot=typeof reportError=="function"?reportError:function(Z){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ht=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Z=="object"&&Z!==null&&typeof Z.message=="string"?String(Z.message):String(Z),error:Z});if(!window.dispatchEvent(ht))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Z);return}console.error(Z)};function Dt(){}return _n.Children={map:tt,forEach:function(Z,ht,Tt){tt(Z,function(){ht.apply(this,arguments)},Tt)},count:function(Z){var ht=0;return tt(Z,function(){ht++}),ht},toArray:function(Z){return tt(Z,function(ht){return ht})||[]},only:function(Z){if(!L(Z))throw Error("React.Children.only expected to receive a single React element child.");return Z}},_n.Component=w,_n.Fragment=e,_n.Profiler=a,_n.PureComponent=C,_n.StrictMode=i,_n.Suspense=d,_n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=z,_n.act=function(){throw Error("act(...) is not supported in production builds of React.")},_n.cache=function(Z){return function(){return Z.apply(null,arguments)}},_n.cloneElement=function(Z,ht,Tt){if(Z==null)throw Error("The argument must be a React element, but you passed "+Z+".");var Ft=E({},Z.props),rt=Z.key,Lt=void 0;if(ht!=null)for(Et in ht.ref!==void 0&&(Lt=void 0),ht.key!==void 0&&(rt=""+ht.key),ht)!B.call(ht,Et)||Et==="key"||Et==="__self"||Et==="__source"||Et==="ref"&&ht.ref===void 0||(Ft[Et]=ht[Et]);var Et=arguments.length-2;if(Et===1)Ft.children=Tt;else if(1<Et){for(var Nt=Array(Et),Qt=0;Qt<Et;Qt++)Nt[Qt]=arguments[Qt+2];Ft.children=Nt}return F(Z.type,rt,void 0,void 0,Lt,Ft)},_n.createContext=function(Z){return Z={$$typeof:u,_currentValue:Z,_currentValue2:Z,_threadCount:0,Provider:null,Consumer:null},Z.Provider=Z,Z.Consumer={$$typeof:o,_context:Z},Z},_n.createElement=function(Z,ht,Tt){var Ft,rt={},Lt=null;if(ht!=null)for(Ft in ht.key!==void 0&&(Lt=""+ht.key),ht)B.call(ht,Ft)&&Ft!=="key"&&Ft!=="__self"&&Ft!=="__source"&&(rt[Ft]=ht[Ft]);var Et=arguments.length-2;if(Et===1)rt.children=Tt;else if(1<Et){for(var Nt=Array(Et),Qt=0;Qt<Et;Qt++)Nt[Qt]=arguments[Qt+2];rt.children=Nt}if(Z&&Z.defaultProps)for(Ft in Et=Z.defaultProps,Et)rt[Ft]===void 0&&(rt[Ft]=Et[Ft]);return F(Z,Lt,void 0,void 0,null,rt)},_n.createRef=function(){return{current:null}},_n.forwardRef=function(Z){return{$$typeof:h,render:Z}},_n.isValidElement=L,_n.lazy=function(Z){return{$$typeof:v,_payload:{_status:-1,_result:Z},_init:pt}},_n.memo=function(Z,ht){return{$$typeof:p,type:Z,compare:ht===void 0?null:ht}},_n.startTransition=function(Z){var ht=z.T,Tt={};z.T=Tt;try{var Ft=Z(),rt=z.S;rt!==null&&rt(Tt,Ft),typeof Ft=="object"&&Ft!==null&&typeof Ft.then=="function"&&Ft.then(Dt,ot)}catch(Lt){ot(Lt)}finally{z.T=ht}},_n.unstable_useCacheRefresh=function(){return z.H.useCacheRefresh()},_n.use=function(Z){return z.H.use(Z)},_n.useActionState=function(Z,ht,Tt){return z.H.useActionState(Z,ht,Tt)},_n.useCallback=function(Z,ht){return z.H.useCallback(Z,ht)},_n.useContext=function(Z){return z.H.useContext(Z)},_n.useDebugValue=function(){},_n.useDeferredValue=function(Z,ht){return z.H.useDeferredValue(Z,ht)},_n.useEffect=function(Z,ht){return z.H.useEffect(Z,ht)},_n.useId=function(){return z.H.useId()},_n.useImperativeHandle=function(Z,ht,Tt){return z.H.useImperativeHandle(Z,ht,Tt)},_n.useInsertionEffect=function(Z,ht){return z.H.useInsertionEffect(Z,ht)},_n.useLayoutEffect=function(Z,ht){return z.H.useLayoutEffect(Z,ht)},_n.useMemo=function(Z,ht){return z.H.useMemo(Z,ht)},_n.useOptimistic=function(Z,ht){return z.H.useOptimistic(Z,ht)},_n.useReducer=function(Z,ht,Tt){return z.H.useReducer(Z,ht,Tt)},_n.useRef=function(Z){return z.H.useRef(Z)},_n.useState=function(Z){return z.H.useState(Z)},_n.useSyncExternalStore=function(Z,ht,Tt){return z.H.useSyncExternalStore(Z,ht,Tt)},_n.useTransition=function(){return z.H.useTransition()},_n.version="19.0.0",_n}var BE;function tp(){return BE||(BE=1,x1.exports=_D()),x1.exports}var kt=tp();const Xm=Qy(kt),IE=mD({__proto__:null,default:Xm},[kt]);var S1={exports:{}},Sm={},b1={exports:{}},M1={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PE;function yD(){return PE||(PE=1,function(n){function t(tt,pt){var ot=tt.length;tt.push(pt);t:for(;0<ot;){var Dt=ot-1>>>1,Z=tt[Dt];if(0<a(Z,pt))tt[Dt]=pt,tt[ot]=Z,ot=Dt;else break t}}function e(tt){return tt.length===0?null:tt[0]}function i(tt){if(tt.length===0)return null;var pt=tt[0],ot=tt.pop();if(ot!==pt){tt[0]=ot;t:for(var Dt=0,Z=tt.length,ht=Z>>>1;Dt<ht;){var Tt=2*(Dt+1)-1,Ft=tt[Tt],rt=Tt+1,Lt=tt[rt];if(0>a(Ft,ot))rt<Z&&0>a(Lt,Ft)?(tt[Dt]=Lt,tt[rt]=ot,Dt=rt):(tt[Dt]=Ft,tt[Tt]=ot,Dt=Tt);else if(rt<Z&&0>a(Lt,ot))tt[Dt]=Lt,tt[rt]=ot,Dt=rt;else break t}}return pt}function a(tt,pt){var ot=tt.sortIndex-pt.sortIndex;return ot!==0?ot:tt.id-pt.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var u=Date,h=u.now();n.unstable_now=function(){return u.now()-h}}var d=[],p=[],v=1,_=null,x=3,b=!1,E=!1,R=!1,w=typeof setTimeout=="function"?setTimeout:null,M=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;function U(tt){for(var pt=e(p);pt!==null;){if(pt.callback===null)i(p);else if(pt.startTime<=tt)i(p),pt.sortIndex=pt.expirationTime,t(d,pt);else break;pt=e(p)}}function D(tt){if(R=!1,U(tt),!E)if(e(d)!==null)E=!0,j();else{var pt=e(p);pt!==null&&ut(D,pt.startTime-tt)}}var z=!1,B=-1,F=5,G=-1;function L(){return!(n.unstable_now()-G<F)}function O(){if(z){var tt=n.unstable_now();G=tt;var pt=!0;try{t:{E=!1,R&&(R=!1,M(B),B=-1),b=!0;var ot=x;try{e:{for(U(tt),_=e(d);_!==null&&!(_.expirationTime>tt&&L());){var Dt=_.callback;if(typeof Dt=="function"){_.callback=null,x=_.priorityLevel;var Z=Dt(_.expirationTime<=tt);if(tt=n.unstable_now(),typeof Z=="function"){_.callback=Z,U(tt),pt=!0;break e}_===e(d)&&i(d),U(tt)}else i(d);_=e(d)}if(_!==null)pt=!0;else{var ht=e(p);ht!==null&&ut(D,ht.startTime-tt),pt=!1}}break t}finally{_=null,x=ot,b=!1}pt=void 0}}finally{pt?V():z=!1}}}var V;if(typeof C=="function")V=function(){C(O)};else if(typeof MessageChannel<"u"){var et=new MessageChannel,W=et.port2;et.port1.onmessage=O,V=function(){W.postMessage(null)}}else V=function(){w(O,0)};function j(){z||(z=!0,V())}function ut(tt,pt){B=w(function(){tt(n.unstable_now())},pt)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(tt){tt.callback=null},n.unstable_continueExecution=function(){E||b||(E=!0,j())},n.unstable_forceFrameRate=function(tt){0>tt||125<tt?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<tt?Math.floor(1e3/tt):5},n.unstable_getCurrentPriorityLevel=function(){return x},n.unstable_getFirstCallbackNode=function(){return e(d)},n.unstable_next=function(tt){switch(x){case 1:case 2:case 3:var pt=3;break;default:pt=x}var ot=x;x=pt;try{return tt()}finally{x=ot}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(tt,pt){switch(tt){case 1:case 2:case 3:case 4:case 5:break;default:tt=3}var ot=x;x=tt;try{return pt()}finally{x=ot}},n.unstable_scheduleCallback=function(tt,pt,ot){var Dt=n.unstable_now();switch(typeof ot=="object"&&ot!==null?(ot=ot.delay,ot=typeof ot=="number"&&0<ot?Dt+ot:Dt):ot=Dt,tt){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=ot+Z,tt={id:v++,callback:pt,priorityLevel:tt,startTime:ot,expirationTime:Z,sortIndex:-1},ot>Dt?(tt.sortIndex=ot,t(p,tt),e(d)===null&&tt===e(p)&&(R?(M(B),B=-1):R=!0,ut(D,ot-Dt))):(tt.sortIndex=Z,t(d,tt),E||b||(E=!0,j())),tt},n.unstable_shouldYield=L,n.unstable_wrapCallback=function(tt){var pt=x;return function(){var ot=x;x=pt;try{return tt.apply(this,arguments)}finally{x=ot}}}}(M1)),M1}var HE;function Bb(){return HE||(HE=1,b1.exports=yD()),b1.exports}var E1={exports:{}},er={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FE;function xD(){if(FE)return er;FE=1;var n=tp();function t(d){var p="https://react.dev/errors/"+d;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)p+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+d+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var i={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},a=Symbol.for("react.portal");function o(d,p,v){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:_==null?null:""+_,children:d,containerInfo:p,implementation:v}}var u=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(d,p){if(d==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return er.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,er.createPortal=function(d,p){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(t(299));return o(d,p,null,v)},er.flushSync=function(d){var p=u.T,v=i.p;try{if(u.T=null,i.p=2,d)return d()}finally{u.T=p,i.p=v,i.d.f()}},er.preconnect=function(d,p){typeof d=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,i.d.C(d,p))},er.prefetchDNS=function(d){typeof d=="string"&&i.d.D(d)},er.preinit=function(d,p){if(typeof d=="string"&&p&&typeof p.as=="string"){var v=p.as,_=h(v,p.crossOrigin),x=typeof p.integrity=="string"?p.integrity:void 0,b=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;v==="style"?i.d.S(d,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:_,integrity:x,fetchPriority:b}):v==="script"&&i.d.X(d,{crossOrigin:_,integrity:x,fetchPriority:b,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},er.preinitModule=function(d,p){if(typeof d=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var v=h(p.as,p.crossOrigin);i.d.M(d,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&i.d.M(d)},er.preload=function(d,p){if(typeof d=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var v=p.as,_=h(v,p.crossOrigin);i.d.L(d,v,{crossOrigin:_,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},er.preloadModule=function(d,p){if(typeof d=="string")if(p){var v=h(p.as,p.crossOrigin);i.d.m(d,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else i.d.m(d)},er.requestFormReset=function(d){i.d.r(d)},er.unstable_batchedUpdates=function(d,p){return d(p)},er.useFormState=function(d,p,v){return u.H.useFormState(d,p,v)},er.useFormStatus=function(){return u.H.useHostTransitionStatus()},er.version="19.0.0",er}var GE;function SD(){if(GE)return E1.exports;GE=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),E1.exports=xD(),E1.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VE;function bD(){if(VE)return Sm;VE=1;var n=Bb(),t=tp(),e=SD();function i(r){var s="https://react.dev/errors/"+r;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)s+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}var o=Symbol.for("react.element"),u=Symbol.for("react.transitional.element"),h=Symbol.for("react.portal"),d=Symbol.for("react.fragment"),p=Symbol.for("react.strict_mode"),v=Symbol.for("react.profiler"),_=Symbol.for("react.provider"),x=Symbol.for("react.consumer"),b=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),w=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),U=Symbol.for("react.offscreen"),D=Symbol.for("react.memo_cache_sentinel"),z=Symbol.iterator;function B(r){return r===null||typeof r!="object"?null:(r=z&&r[z]||r["@@iterator"],typeof r=="function"?r:null)}var F=Symbol.for("react.client.reference");function G(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===F?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case d:return"Fragment";case h:return"Portal";case v:return"Profiler";case p:return"StrictMode";case R:return"Suspense";case w:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case b:return(r.displayName||"Context")+".Provider";case x:return(r._context.displayName||"Context")+".Consumer";case E:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case M:return s=r.displayName||null,s!==null?s:G(r.type)||"Memo";case C:s=r._payload,r=r._init;try{return G(r(s))}catch{}}return null}var L=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,O=Object.assign,V,et;function W(r){if(V===void 0)try{throw Error()}catch(f){var s=f.stack.trim().match(/\n( *(at )?)/);V=s&&s[1]||"",et=-1<f.stack.indexOf(`
    at`)?" (<anonymous>)":-1<f.stack.indexOf("@")?"@unknown:0:0":""}return`
`+V+r+et}var j=!1;function ut(r,s){if(!r||j)return"";j=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var m={DetermineComponentFrameRoot:function(){try{if(s){var ie=function(){throw Error()};if(Object.defineProperty(ie.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ie,[])}catch(Vt){var Ut=Vt}Reflect.construct(r,[],ie)}else{try{ie.call()}catch(Vt){Ut=Vt}r.call(ie.prototype)}}else{try{throw Error()}catch(Vt){Ut=Vt}(ie=r())&&typeof ie.catch=="function"&&ie.catch(function(){})}}catch(Vt){if(Vt&&Ut&&typeof Vt.stack=="string")return[Vt.stack,Ut.stack]}return[null,null]}};m.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(m.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(m.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var T=m.DetermineComponentFrameRoot(),I=T[0],X=T[1];if(I&&X){var it=I.split(`
`),gt=X.split(`
`);for(y=m=0;m<it.length&&!it[m].includes("DetermineComponentFrameRoot");)m++;for(;y<gt.length&&!gt[y].includes("DetermineComponentFrameRoot");)y++;if(m===it.length||y===gt.length)for(m=it.length-1,y=gt.length-1;1<=m&&0<=y&&it[m]!==gt[y];)y--;for(;1<=m&&0<=y;m--,y--)if(it[m]!==gt[y]){if(m!==1||y!==1)do if(m--,y--,0>y||it[m]!==gt[y]){var Zt=`
`+it[m].replace(" at new "," at ");return r.displayName&&Zt.includes("<anonymous>")&&(Zt=Zt.replace("<anonymous>",r.displayName)),Zt}while(1<=m&&0<=y);break}}}finally{j=!1,Error.prepareStackTrace=f}return(f=r?r.displayName||r.name:"")?W(f):""}function tt(r){switch(r.tag){case 26:case 27:case 5:return W(r.type);case 16:return W("Lazy");case 13:return W("Suspense");case 19:return W("SuspenseList");case 0:case 15:return r=ut(r.type,!1),r;case 11:return r=ut(r.type.render,!1),r;case 1:return r=ut(r.type,!0),r;default:return""}}function pt(r){try{var s="";do s+=tt(r),r=r.return;while(r);return s}catch(f){return`
Error generating stack: `+f.message+`
`+f.stack}}function ot(r){var s=r,f=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,s.flags&4098&&(f=s.return),r=s.return;while(r)}return s.tag===3?f:null}function Dt(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function Z(r){if(ot(r)!==r)throw Error(i(188))}function ht(r){var s=r.alternate;if(!s){if(s=ot(r),s===null)throw Error(i(188));return s!==r?null:r}for(var f=r,m=s;;){var y=f.return;if(y===null)break;var T=y.alternate;if(T===null){if(m=y.return,m!==null){f=m;continue}break}if(y.child===T.child){for(T=y.child;T;){if(T===f)return Z(y),r;if(T===m)return Z(y),s;T=T.sibling}throw Error(i(188))}if(f.return!==m.return)f=y,m=T;else{for(var I=!1,X=y.child;X;){if(X===f){I=!0,f=y,m=T;break}if(X===m){I=!0,m=y,f=T;break}X=X.sibling}if(!I){for(X=T.child;X;){if(X===f){I=!0,f=T,m=y;break}if(X===m){I=!0,m=T,f=y;break}X=X.sibling}if(!I)throw Error(i(189))}}if(f.alternate!==m)throw Error(i(190))}if(f.tag!==3)throw Error(i(188));return f.stateNode.current===f?r:s}function Tt(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r;for(r=r.child;r!==null;){if(s=Tt(r),s!==null)return s;r=r.sibling}return null}var Ft=Array.isArray,rt=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Lt={pending:!1,data:null,method:null,action:null},Et=[],Nt=-1;function Qt(r){return{current:r}}function we(r){0>Nt||(r.current=Et[Nt],Et[Nt]=null,Nt--)}function re(r,s){Nt++,Et[Nt]=r.current,r.current=s}var ke=Qt(null),Jt=Qt(null),Yt=Qt(null),Q=Qt(null);function Me(r,s){switch(re(Yt,s),re(Jt,r),re(ke,null),r=s.nodeType,r){case 9:case 11:s=(s=s.documentElement)&&(s=s.namespaceURI)?lE(s):0;break;default:if(r=r===8?s.parentNode:s,s=r.tagName,r=r.namespaceURI)r=lE(r),s=cE(r,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}we(ke),re(ke,s)}function ee(){we(ke),we(Jt),we(Yt)}function pe(r){r.memoizedState!==null&&re(Q,r);var s=ke.current,f=cE(s,r.type);s!==f&&(re(Jt,r),re(ke,f))}function se(r){Jt.current===r&&(we(ke),we(Jt)),Q.current===r&&(we(Q),mm._currentValue=Lt)}var Be=Object.prototype.hasOwnProperty,he=n.unstable_scheduleCallback,K=n.unstable_cancelCallback,k=n.unstable_shouldYield,xt=n.unstable_requestPaint,Pt=n.unstable_now,$t=n.unstable_getCurrentPriorityLevel,Xt=n.unstable_ImmediatePriority,Re=n.unstable_UserBlockingPriority,de=n.unstable_NormalPriority,_e=n.unstable_LowPriority,an=n.unstable_IdlePriority,ae=n.log,Ae=n.unstable_setDisableYieldValue,Ce=null,me=null;function ye(r){if(me&&typeof me.onCommitFiberRoot=="function")try{me.onCommitFiberRoot(Ce,r,void 0,(r.current.flags&128)===128)}catch{}}function lt(r){if(typeof ae=="function"&&Ae(r),me&&typeof me.setStrictMode=="function")try{me.setStrictMode(Ce,r)}catch{}}var wt=Math.clz32?Math.clz32:St,le=Math.log,ct=Math.LN2;function St(r){return r>>>=0,r===0?32:31-(le(r)/ct|0)|0}var Rt=128,Gt=4194304;function ge(r){var s=r&42;if(s!==0)return s;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function ve(r,s){var f=r.pendingLanes;if(f===0)return 0;var m=0,y=r.suspendedLanes,T=r.pingedLanes,I=r.warmLanes;r=r.finishedLanes!==0;var X=f&134217727;return X!==0?(f=X&~y,f!==0?m=ge(f):(T&=X,T!==0?m=ge(T):r||(I=X&~I,I!==0&&(m=ge(I))))):(X=f&~y,X!==0?m=ge(X):T!==0?m=ge(T):r||(I=f&~I,I!==0&&(m=ge(I)))),m===0?0:s!==0&&s!==m&&!(s&y)&&(y=m&-m,I=s&-s,y>=I||y===32&&(I&4194176)!==0)?s:m}function Ie(r,s){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&s)===0}function mn(r,s){switch(r){case 1:case 2:case 4:case 8:return s+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Bn(){var r=Rt;return Rt<<=1,!(Rt&4194176)&&(Rt=128),r}function rn(){var r=Gt;return Gt<<=1,!(Gt&62914560)&&(Gt=4194304),r}function gi(r){for(var s=[],f=0;31>f;f++)s.push(r);return s}function bi(r,s){r.pendingLanes|=s,s!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function Nl(r,s,f,m,y,T){var I=r.pendingLanes;r.pendingLanes=f,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=f,r.entangledLanes&=f,r.errorRecoveryDisabledLanes&=f,r.shellSuspendCounter=0;var X=r.entanglements,it=r.expirationTimes,gt=r.hiddenUpdates;for(f=I&~f;0<f;){var Zt=31-wt(f),ie=1<<Zt;X[Zt]=0,it[Zt]=-1;var Ut=gt[Zt];if(Ut!==null)for(gt[Zt]=null,Zt=0;Zt<Ut.length;Zt++){var Vt=Ut[Zt];Vt!==null&&(Vt.lane&=-536870913)}f&=~ie}m!==0&&Ps(r,m,0),T!==0&&y===0&&r.tag!==0&&(r.suspendedLanes|=T&~(I&~s))}function Ps(r,s,f){r.pendingLanes|=s,r.suspendedLanes&=~s;var m=31-wt(s);r.entangledLanes|=s,r.entanglements[m]=r.entanglements[m]|1073741824|f&4194218}function ca(r,s){var f=r.entangledLanes|=s;for(r=r.entanglements;f;){var m=31-wt(f),y=1<<m;y&s|r[m]&s&&(r[m]|=s),f&=~y}}function Ca(r){return r&=-r,2<r?8<r?r&134217727?32:268435456:8:2}function Rr(){var r=rt.p;return r!==0?r:(r=window.event,r===void 0?32:wE(r.type))}function ua(r,s){var f=rt.p;try{return rt.p=r,s()}finally{rt.p=f}}var Fe=Math.random().toString(36).slice(2),fi="__reactFiber$"+Fe,un="__reactProps$"+Fe,H="__reactContainer$"+Fe,q="__reactEvents$"+Fe,ft="__reactListeners$"+Fe,Ct="__reactHandles$"+Fe,Ht="__reactResources$"+Fe,Bt="__reactMarker$"+Fe;function ue(r){delete r[fi],delete r[un],delete r[q],delete r[ft],delete r[Ct]}function ne(r){var s=r[fi];if(s)return s;for(var f=r.parentNode;f;){if(s=f[H]||f[fi]){if(f=s.alternate,s.child!==null||f!==null&&f.child!==null)for(r=hE(r);r!==null;){if(f=r[fi])return f;r=hE(r)}return s}r=f,f=r.parentNode}return null}function P(r){if(r=r[fi]||r[H]){var s=r.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return r}return null}function $(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r.stateNode;throw Error(i(33))}function at(r){var s=r[Ht];return s||(s=r[Ht]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function nt(r){r[Bt]=!0}var dt=new Set,bt={};function It(r,s){Wt(r,s),Wt(r+"Capture",s)}function Wt(r,s){for(bt[r]=s,r=0;r<s.length;r++)dt.add(s[r])}var Kt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),xe=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),be={},Se={};function Ye(r){return Be.call(Se,r)?!0:Be.call(be,r)?!1:xe.test(r)?Se[r]=!0:(be[r]=!0,!1)}function Le(r,s,f){if(Ye(s))if(f===null)r.removeAttribute(s);else{switch(typeof f){case"undefined":case"function":case"symbol":r.removeAttribute(s);return;case"boolean":var m=s.toLowerCase().slice(0,5);if(m!=="data-"&&m!=="aria-"){r.removeAttribute(s);return}}r.setAttribute(s,""+f)}}function Mn(r,s,f){if(f===null)r.removeAttribute(s);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(s);return}r.setAttribute(s,""+f)}}function Pe(r,s,f,m){if(m===null)r.removeAttribute(f);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(f);return}r.setAttributeNS(s,f,""+m)}}function Ne(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Ue(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function ri(r){var s=Ue(r)?"checked":"value",f=Object.getOwnPropertyDescriptor(r.constructor.prototype,s),m=""+r[s];if(!r.hasOwnProperty(s)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var y=f.get,T=f.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return y.call(this)},set:function(I){m=""+I,T.call(this,I)}}),Object.defineProperty(r,s,{enumerable:f.enumerable}),{getValue:function(){return m},setValue:function(I){m=""+I},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function We(r){r._valueTracker||(r._valueTracker=ri(r))}function sn(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var f=s.getValue(),m="";return r&&(m=Ue(r)?r.checked?"true":"false":r.value),r=m,r!==f?(s.setValue(r),!0):!1}function Vn(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var fn=/[\n"\\]/g;function je(r){return r.replace(fn,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function on(r,s,f,m,y,T,I,X){r.name="",I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"?r.type=I:r.removeAttribute("type"),s!=null?I==="number"?(s===0&&r.value===""||r.value!=s)&&(r.value=""+Ne(s)):r.value!==""+Ne(s)&&(r.value=""+Ne(s)):I!=="submit"&&I!=="reset"||r.removeAttribute("value"),s!=null?In(r,I,Ne(s)):f!=null?In(r,I,Ne(f)):m!=null&&r.removeAttribute("value"),y==null&&T!=null&&(r.defaultChecked=!!T),y!=null&&(r.checked=y&&typeof y!="function"&&typeof y!="symbol"),X!=null&&typeof X!="function"&&typeof X!="symbol"&&typeof X!="boolean"?r.name=""+Ne(X):r.removeAttribute("name")}function vi(r,s,f,m,y,T,I,X){if(T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(r.type=T),s!=null||f!=null){if(!(T!=="submit"&&T!=="reset"||s!=null))return;f=f!=null?""+Ne(f):"",s=s!=null?""+Ne(s):f,X||s===r.value||(r.value=s),r.defaultValue=s}m=m??y,m=typeof m!="function"&&typeof m!="symbol"&&!!m,r.checked=X?r.checked:!!m,r.defaultChecked=!!m,I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"&&(r.name=I)}function In(r,s,f){s==="number"&&Vn(r.ownerDocument)===r||r.defaultValue===""+f||(r.defaultValue=""+f)}function Pn(r,s,f,m){if(r=r.options,s){s={};for(var y=0;y<f.length;y++)s["$"+f[y]]=!0;for(f=0;f<r.length;f++)y=s.hasOwnProperty("$"+r[f].value),r[f].selected!==y&&(r[f].selected=y),y&&m&&(r[f].defaultSelected=!0)}else{for(f=""+Ne(f),s=null,y=0;y<r.length;y++){if(r[y].value===f){r[y].selected=!0,m&&(r[y].defaultSelected=!0);return}s!==null||r[y].disabled||(s=r[y])}s!==null&&(s.selected=!0)}}function na(r,s,f){if(s!=null&&(s=""+Ne(s),s!==r.value&&(r.value=s),f==null)){r.defaultValue!==s&&(r.defaultValue=s);return}r.defaultValue=f!=null?""+Ne(f):""}function Qr(r,s,f,m){if(s==null){if(m!=null){if(f!=null)throw Error(i(92));if(Ft(m)){if(1<m.length)throw Error(i(93));m=m[0]}f=m}f==null&&(f=""),s=f}f=Ne(s),r.defaultValue=f,m=r.textContent,m===f&&m!==""&&m!==null&&(r.value=m)}function Da(r,s){if(s){var f=r.firstChild;if(f&&f===r.lastChild&&f.nodeType===3){f.nodeValue=s;return}}r.textContent=s}var vh=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function zu(r,s,f){var m=s.indexOf("--")===0;f==null||typeof f=="boolean"||f===""?m?r.setProperty(s,""):s==="float"?r.cssFloat="":r[s]="":m?r.setProperty(s,f):typeof f!="number"||f===0||vh.has(s)?s==="float"?r.cssFloat=f:r[s]=(""+f).trim():r[s]=f+"px"}function cp(r,s,f){if(s!=null&&typeof s!="object")throw Error(i(62));if(r=r.style,f!=null){for(var m in f)!f.hasOwnProperty(m)||s!=null&&s.hasOwnProperty(m)||(m.indexOf("--")===0?r.setProperty(m,""):m==="float"?r.cssFloat="":r[m]="");for(var y in s)m=s[y],s.hasOwnProperty(y)&&f[y]!==m&&zu(r,y,m)}else for(var T in s)s.hasOwnProperty(T)&&zu(r,T,s[T])}function Bu(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var pg=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),mg=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Iu(r){return mg.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}var _h=null;function Pu(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Ul=null,Ol=null;function yh(r){var s=P(r);if(s&&(r=s.stateNode)){var f=r[un]||null;t:switch(r=s.stateNode,s.type){case"input":if(on(r,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name),s=f.name,f.type==="radio"&&s!=null){for(f=r;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll('input[name="'+je(""+s)+'"][type="radio"]'),s=0;s<f.length;s++){var m=f[s];if(m!==r&&m.form===r.form){var y=m[un]||null;if(!y)throw Error(i(90));on(m,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(s=0;s<f.length;s++)m=f[s],m.form===r.form&&sn(m)}break t;case"textarea":na(r,f.value,f.defaultValue);break t;case"select":s=f.value,s!=null&&Pn(r,!!f.multiple,s,!1)}}}var xh=!1;function up(r,s,f){if(xh)return r(s,f);xh=!0;try{var m=r(s);return m}finally{if(xh=!1,(Ul!==null||Ol!==null)&&(ec(),Ul&&(s=Ul,r=Ol,Ol=Ul=null,yh(s),r)))for(s=0;s<r.length;s++)yh(r[s])}}function Ec(r,s){var f=r.stateNode;if(f===null)return null;var m=f[un]||null;if(m===null)return null;f=m[s];t:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(r=r.type,m=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!m;break t;default:r=!1}if(r)return null;if(f&&typeof f!="function")throw Error(i(231,s,typeof f));return f}var Hu=!1;if(Kt)try{var Tc={};Object.defineProperty(Tc,"passive",{get:function(){Hu=!0}}),window.addEventListener("test",Tc,Tc),window.removeEventListener("test",Tc,Tc)}catch{Hu=!1}var Hs=null,fp=null,Sh=null;function hp(){if(Sh)return Sh;var r,s=fp,f=s.length,m,y="value"in Hs?Hs.value:Hs.textContent,T=y.length;for(r=0;r<f&&s[r]===y[r];r++);var I=f-r;for(m=1;m<=I&&s[f-m]===y[T-m];m++);return Sh=y.slice(r,1<m?1-m:void 0)}function Uo(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function Ac(){return!0}function Fu(){return!1}function Na(r){function s(f,m,y,T,I){this._reactName=f,this._targetInst=y,this.type=m,this.nativeEvent=T,this.target=I,this.currentTarget=null;for(var X in r)r.hasOwnProperty(X)&&(f=r[X],this[X]=f?f(T):T[X]);return this.isDefaultPrevented=(T.defaultPrevented!=null?T.defaultPrevented:T.returnValue===!1)?Ac:Fu,this.isPropagationStopped=Fu,this}return O(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=Ac)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=Ac)},persist:function(){},isPersistent:Ac}),s}var Oo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},wc=Na(Oo),Rc=O({},Oo,{view:0,detail:0}),gg=Na(Rc),Fs,Cc,Dc,Nc=O({},Rc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Vu,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Dc&&(Dc&&r.type==="mousemove"?(Fs=r.screenX-Dc.screenX,Cc=r.screenY-Dc.screenY):Cc=Fs=0,Dc=r),Fs)},movementY:function(r){return"movementY"in r?r.movementY:Cc}}),dp=Na(Nc),vg=O({},Nc,{dataTransfer:0}),Ix=Na(vg),fa=O({},Rc,{relatedTarget:0}),bh=Na(fa),_g=O({},Oo,{animationName:0,elapsedTime:0,pseudoElement:0}),yg=Na(_g),xg=O({},Oo,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),Sg=Na(xg),Gu=O({},Oo,{data:0}),Mh=Na(Gu),bg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Mg={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Eg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pp(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=Eg[r])?!!s[r]:!1}function Vu(){return pp}var Tg=O({},Rc,{key:function(r){if(r.key){var s=bg[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=Uo(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Mg[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Vu,charCode:function(r){return r.type==="keypress"?Uo(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Uo(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),mp=Na(Tg),gp=O({},Nc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Eh=Na(gp),Ag=O({},Rc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Vu}),vp=Na(Ag),wg=O({},Oo,{propertyName:0,elapsedTime:0,pseudoElement:0}),Gs=Na(wg),_p=O({},Nc,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),Px=Na(_p),Rg=O({},Oo,{newState:0,oldState:0}),Lo=Na(Rg),Vs=[9,13,27,32],ku=Kt&&"CompositionEvent"in window,Ll=null;Kt&&"documentMode"in document&&(Ll=document.documentMode);var Xu=Kt&&"TextEvent"in window&&!Ll,Yu=Kt&&(!ku||Ll&&8<Ll&&11>=Ll),zo=" ",ha=!1;function qu(r,s){switch(r){case"keyup":return Vs.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function yp(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Bo=!1;function Zu(r,s){switch(r){case"compositionend":return yp(s);case"keypress":return s.which!==32?null:(ha=!0,zo);case"textInput":return r=s.data,r===zo&&ha?null:r;default:return null}}function xp(r,s){if(Bo)return r==="compositionend"||!ku&&qu(r,s)?(r=hp(),Sh=fp=Hs=null,Bo=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Yu&&s.locale!=="ko"?null:s.data;default:return null}}var Th={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Sp(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!Th[r.type]:s==="textarea"}function Ya(r,s,f,m){Ul?Ol?Ol.push(m):Ol=[m]:Ul=m,s=Rv(s,"onChange"),0<s.length&&(f=new wc("onChange","change",null,f,m),r.push({event:f,listeners:s}))}var Uc=null,zl=null;function Cg(r){iE(r,0)}function Wu(r){var s=$(r);if(sn(s))return r}function Ah(r,s){if(r==="change")return s}var wh=!1;if(Kt){var Rh;if(Kt){var Oc="oninput"in document;if(!Oc){var Lc=document.createElement("div");Lc.setAttribute("oninput","return;"),Oc=typeof Lc.oninput=="function"}Rh=Oc}else Rh=!1;wh=Rh&&(!document.documentMode||9<document.documentMode)}function _i(){Uc&&(Uc.detachEvent("onpropertychange",Dg),zl=Uc=null)}function Dg(r){if(r.propertyName==="value"&&Wu(zl)){var s=[];Ya(s,zl,r,Pu(r)),up(Cg,s)}}function Hx(r,s,f){r==="focusin"?(_i(),Uc=s,zl=f,Uc.attachEvent("onpropertychange",Dg)):r==="focusout"&&_i()}function Ng(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Wu(zl)}function ju(r,s){if(r==="click")return Wu(s)}function Io(r,s){if(r==="input"||r==="change")return Wu(s)}function Ug(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var qa=typeof Object.is=="function"?Object.is:Ug;function Jr(r,s){if(qa(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var f=Object.keys(r),m=Object.keys(s);if(f.length!==m.length)return!1;for(m=0;m<f.length;m++){var y=f[m];if(!Be.call(s,y)||!qa(r[y],s[y]))return!1}return!0}function Za(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function bp(r,s){var f=Za(r);r=0;for(var m;f;){if(f.nodeType===3){if(m=r+f.textContent.length,r<=s&&m>=s)return{node:f,offset:s-r};r=m}t:{for(;f;){if(f.nextSibling){f=f.nextSibling;break t}f=f.parentNode}f=void 0}f=Za(f)}}function Mp(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?Mp(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function Ep(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var s=Vn(r.document);s instanceof r.HTMLIFrameElement;){try{var f=typeof s.contentWindow.location.href=="string"}catch{f=!1}if(f)r=s.contentWindow;else break;s=Vn(r.document)}return s}function Ku(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}function Tp(r,s){var f=Ep(s);s=r.focusedElem;var m=r.selectionRange;if(f!==s&&s&&s.ownerDocument&&Mp(s.ownerDocument.documentElement,s)){if(m!==null&&Ku(s)){if(r=m.start,f=m.end,f===void 0&&(f=r),"selectionStart"in s)s.selectionStart=r,s.selectionEnd=Math.min(f,s.value.length);else if(f=(r=s.ownerDocument||document)&&r.defaultView||window,f.getSelection){f=f.getSelection();var y=s.textContent.length,T=Math.min(m.start,y);m=m.end===void 0?T:Math.min(m.end,y),!f.extend&&T>m&&(y=m,m=T,T=y),y=bp(s,T);var I=bp(s,m);y&&I&&(f.rangeCount!==1||f.anchorNode!==y.node||f.anchorOffset!==y.offset||f.focusNode!==I.node||f.focusOffset!==I.offset)&&(r=r.createRange(),r.setStart(y.node,y.offset),f.removeAllRanges(),T>m?(f.addRange(r),f.extend(I.node,I.offset)):(r.setEnd(I.node,I.offset),f.addRange(r)))}}for(r=[],f=s;f=f.parentNode;)f.nodeType===1&&r.push({element:f,left:f.scrollLeft,top:f.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<r.length;s++)f=r[s],f.element.scrollLeft=f.left,f.element.scrollTop=f.top}}var Ch=Kt&&"documentMode"in document&&11>=document.documentMode,Bl=null,Ap=null,zc=null,Dh=!1;function Cr(r,s,f){var m=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;Dh||Bl==null||Bl!==Vn(m)||(m=Bl,"selectionStart"in m&&Ku(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),zc&&Jr(zc,m)||(zc=m,m=Rv(Ap,"onSelect"),0<m.length&&(s=new wc("onSelect","select",null,s,f),r.push({event:s,listeners:m}),s.target=Bl)))}function ks(r,s){var f={};return f[r.toLowerCase()]=s.toLowerCase(),f["Webkit"+r]="webkit"+s,f["Moz"+r]="moz"+s,f}var Il={animationend:ks("Animation","AnimationEnd"),animationiteration:ks("Animation","AnimationIteration"),animationstart:ks("Animation","AnimationStart"),transitionrun:ks("Transition","TransitionRun"),transitionstart:ks("Transition","TransitionStart"),transitioncancel:ks("Transition","TransitionCancel"),transitionend:ks("Transition","TransitionEnd")},wp={},Nh={};Kt&&(Nh=document.createElement("div").style,"AnimationEvent"in window||(delete Il.animationend.animation,delete Il.animationiteration.animation,delete Il.animationstart.animation),"TransitionEvent"in window||delete Il.transitionend.transition);function Vi(r){if(wp[r])return wp[r];if(!Il[r])return r;var s=Il[r],f;for(f in s)if(s.hasOwnProperty(f)&&f in Nh)return wp[r]=s[f];return r}var Rp=Vi("animationend"),Wa=Vi("animationiteration"),Cp=Vi("animationstart"),Xs=Vi("transitionrun"),Bc=Vi("transitionstart"),Po=Vi("transitioncancel"),Uh=Vi("transitionend"),Oh=new Map,Ys="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function Dr(r,s){Oh.set(r,s),It(s,[r])}var da=[],vs=0,qs=0;function Qu(){for(var r=vs,s=qs=vs=0;s<r;){var f=da[s];da[s++]=null;var m=da[s];da[s++]=null;var y=da[s];da[s++]=null;var T=da[s];if(da[s++]=null,m!==null&&y!==null){var I=m.pending;I===null?y.next=y:(y.next=I.next,I.next=y),m.pending=y}T!==0&&$u(f,y,T)}}function Ju(r,s,f,m){da[vs++]=r,da[vs++]=s,da[vs++]=f,da[vs++]=m,qs|=m,r.lanes|=m,r=r.alternate,r!==null&&(r.lanes|=m)}function Pl(r,s,f,m){return Ju(r,s,f,m),tf(r)}function Zs(r,s){return Ju(r,null,null,s),tf(r)}function $u(r,s,f){r.lanes|=f;var m=r.alternate;m!==null&&(m.lanes|=f);for(var y=!1,T=r.return;T!==null;)T.childLanes|=f,m=T.alternate,m!==null&&(m.childLanes|=f),T.tag===22&&(r=T.stateNode,r===null||r._visibility&1||(y=!0)),r=T,T=T.return;y&&s!==null&&r.tag===3&&(T=r.stateNode,y=31-wt(f),T=T.hiddenUpdates,r=T[y],r===null?T[y]=[s]:r.push(s),s.lane=f|536870912)}function tf(r){if(50<Fr)throw Fr=0,mo=null,Error(i(185));for(var s=r.return;s!==null;)r=s,s=r.return;return r.tag===3?r.stateNode:null}var Ho={},Lh=new WeakMap;function ja(r,s){if(typeof r=="object"&&r!==null){var f=Lh.get(r);return f!==void 0?f:(s={value:r,source:s,stack:pt(s)},Lh.set(r,s),s)}return{value:r,source:s,stack:pt(s)}}var Hl=[],Fo=0,va=null,ef=0,si=[],ur=0,Ws=null,_s=1,js="";function Ua(r,s){Hl[Fo++]=ef,Hl[Fo++]=va,va=r,ef=s}function Dp(r,s,f){si[ur++]=_s,si[ur++]=js,si[ur++]=Ws,Ws=r;var m=_s;r=js;var y=32-wt(m)-1;m&=~(1<<y),f+=1;var T=32-wt(s)+y;if(30<T){var I=y-y%5;T=(m&(1<<I)-1).toString(32),m>>=I,y-=I,_s=1<<32-wt(s)+y|f<<y|m,js=T+r}else _s=1<<T|f<<y|m,js=r}function nf(r){r.return!==null&&(Ua(r,1),Dp(r,1,0))}function Go(r){for(;r===va;)va=Hl[--Fo],Hl[Fo]=null,ef=Hl[--Fo],Hl[Fo]=null;for(;r===Ws;)Ws=si[--ur],si[ur]=null,js=si[--ur],si[ur]=null,_s=si[--ur],si[ur]=null}var _a=null,ia=null,Cn=!1,Nr=null,Ur=!1,af=Error(i(519));function Fl(r){var s=Error(i(418,""));throw ys(ja(s,r)),af}function Og(r){var s=r.stateNode,f=r.type,m=r.memoizedProps;switch(s[fi]=r,s[un]=m,f){case"dialog":Nn("cancel",s),Nn("close",s);break;case"iframe":case"object":case"embed":Nn("load",s);break;case"video":case"audio":for(f=0;f<um.length;f++)Nn(um[f],s);break;case"source":Nn("error",s);break;case"img":case"image":case"link":Nn("error",s),Nn("load",s);break;case"details":Nn("toggle",s);break;case"input":Nn("invalid",s),vi(s,m.value,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name,!0),We(s);break;case"select":Nn("invalid",s);break;case"textarea":Nn("invalid",s),Qr(s,m.value,m.defaultValue,m.children),We(s)}f=m.children,typeof f!="string"&&typeof f!="number"&&typeof f!="bigint"||s.textContent===""+f||m.suppressHydrationWarning===!0||oE(s.textContent,f)?(m.popover!=null&&(Nn("beforetoggle",s),Nn("toggle",s)),m.onScroll!=null&&Nn("scroll",s),m.onScrollEnd!=null&&Nn("scrollend",s),m.onClick!=null&&(s.onclick=Cv),s=!0):s=!1,s||Fl(r)}function Lg(r){for(_a=r.return;_a;)switch(_a.tag){case 3:case 27:Ur=!0;return;case 5:case 13:Ur=!1;return;default:_a=_a.return}}function Ic(r){if(r!==_a)return!1;if(!Cn)return Lg(r),Cn=!0,!1;var s=!1,f;if((f=r.tag!==3&&r.tag!==27)&&((f=r.tag===5)&&(f=r.type,f=!(f!=="form"&&f!=="button")||r1(r.type,r.memoizedProps)),f=!f),f&&(s=!0),s&&ia&&Fl(r),Lg(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));t:{for(r=r.nextSibling,s=0;r;){if(r.nodeType===8)if(f=r.data,f==="/$"){if(s===0){ia=vo(r.nextSibling);break t}s--}else f!=="$"&&f!=="$!"&&f!=="$?"||s++;r=r.nextSibling}ia=null}}else ia=_a?vo(r.stateNode.nextSibling):null;return!0}function Pc(){ia=_a=null,Cn=!1}function ys(r){Nr===null?Nr=[r]:Nr.push(r)}var Vo=Error(i(460)),Np=Error(i(474)),zh={then:function(){}};function zg(r){return r=r.status,r==="fulfilled"||r==="rejected"}function rf(){}function ko(r,s,f){switch(f=r[f],f===void 0?r.push(s):f!==s&&(s.then(rf,rf),s=f),s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,r===Vo?Error(i(483)):r;default:if(typeof s.status=="string")s.then(rf,rf);else{if(r=Qn,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=s,r.status="pending",r.then(function(m){if(s.status==="pending"){var y=s;y.status="fulfilled",y.value=m}},function(m){if(s.status==="pending"){var y=s;y.status="rejected",y.reason=m}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,r===Vo?Error(i(483)):r}throw Hc=s,Vo}}var Hc=null;function kn(){if(Hc===null)throw Error(i(459));var r=Hc;return Hc=null,r}var Xo=null,sf=0;function of(r){var s=sf;return sf+=1,Xo===null&&(Xo=[]),ko(Xo,r,s)}function lf(r,s){s=s.props.ref,r.ref=s!==void 0?s:null}function Bh(r,s){throw s.$$typeof===o?Error(i(525)):(r=Object.prototype.toString.call(s),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r)))}function Bg(r){var s=r._init;return s(r._payload)}function Ig(r){function s(_t,mt){if(r){var Mt=_t.deletions;Mt===null?(_t.deletions=[mt],_t.flags|=16):Mt.push(mt)}}function f(_t,mt){if(!r)return null;for(;mt!==null;)s(_t,mt),mt=mt.sibling;return null}function m(_t){for(var mt=new Map;_t!==null;)_t.key!==null?mt.set(_t.key,_t):mt.set(_t.index,_t),_t=_t.sibling;return mt}function y(_t,mt){return _t=Ba(_t,mt),_t.index=0,_t.sibling=null,_t}function T(_t,mt,Mt){return _t.index=Mt,r?(Mt=_t.alternate,Mt!==null?(Mt=Mt.index,Mt<mt?(_t.flags|=33554434,mt):Mt):(_t.flags|=33554434,mt)):(_t.flags|=1048576,mt)}function I(_t){return r&&_t.alternate===null&&(_t.flags|=33554434),_t}function X(_t,mt,Mt,te){return mt===null||mt.tag!==6?(mt=qi(Mt,_t.mode,te),mt.return=_t,mt):(mt=y(mt,Mt),mt.return=_t,mt)}function it(_t,mt,Mt,te){var ze=Mt.type;return ze===d?Zt(_t,mt,Mt.props.children,te,Mt.key):mt!==null&&(mt.elementType===ze||typeof ze=="object"&&ze!==null&&ze.$$typeof===C&&Bg(ze)===mt.type)?(mt=y(mt,Mt.props),lf(mt,Mt),mt.return=_t,mt):(mt=tu(Mt.type,Mt.key,Mt.props,null,_t.mode,te),lf(mt,Mt),mt.return=_t,mt)}function gt(_t,mt,Mt,te){return mt===null||mt.tag!==4||mt.stateNode.containerInfo!==Mt.containerInfo||mt.stateNode.implementation!==Mt.implementation?(mt=xf(Mt,_t.mode,te),mt.return=_t,mt):(mt=y(mt,Mt.children||[]),mt.return=_t,mt)}function Zt(_t,mt,Mt,te,ze){return mt===null||mt.tag!==7?(mt=cl(Mt,_t.mode,te,ze),mt.return=_t,mt):(mt=y(mt,Mt),mt.return=_t,mt)}function ie(_t,mt,Mt){if(typeof mt=="string"&&mt!==""||typeof mt=="number"||typeof mt=="bigint")return mt=qi(""+mt,_t.mode,Mt),mt.return=_t,mt;if(typeof mt=="object"&&mt!==null){switch(mt.$$typeof){case u:return Mt=tu(mt.type,mt.key,mt.props,null,_t.mode,Mt),lf(Mt,mt),Mt.return=_t,Mt;case h:return mt=xf(mt,_t.mode,Mt),mt.return=_t,mt;case C:var te=mt._init;return mt=te(mt._payload),ie(_t,mt,Mt)}if(Ft(mt)||B(mt))return mt=cl(mt,_t.mode,Mt,null),mt.return=_t,mt;if(typeof mt.then=="function")return ie(_t,of(mt),Mt);if(mt.$$typeof===b)return ie(_t,$h(_t,mt),Mt);Bh(_t,mt)}return null}function Ut(_t,mt,Mt,te){var ze=mt!==null?mt.key:null;if(typeof Mt=="string"&&Mt!==""||typeof Mt=="number"||typeof Mt=="bigint")return ze!==null?null:X(_t,mt,""+Mt,te);if(typeof Mt=="object"&&Mt!==null){switch(Mt.$$typeof){case u:return Mt.key===ze?it(_t,mt,Mt,te):null;case h:return Mt.key===ze?gt(_t,mt,Mt,te):null;case C:return ze=Mt._init,Mt=ze(Mt._payload),Ut(_t,mt,Mt,te)}if(Ft(Mt)||B(Mt))return ze!==null?null:Zt(_t,mt,Mt,te,null);if(typeof Mt.then=="function")return Ut(_t,mt,of(Mt),te);if(Mt.$$typeof===b)return Ut(_t,mt,$h(_t,Mt),te);Bh(_t,Mt)}return null}function Vt(_t,mt,Mt,te,ze){if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return _t=_t.get(Mt)||null,X(mt,_t,""+te,ze);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case u:return _t=_t.get(te.key===null?Mt:te.key)||null,it(mt,_t,te,ze);case h:return _t=_t.get(te.key===null?Mt:te.key)||null,gt(mt,_t,te,ze);case C:var Rn=te._init;return te=Rn(te._payload),Vt(_t,mt,Mt,te,ze)}if(Ft(te)||B(te))return _t=_t.get(Mt)||null,Zt(mt,_t,te,ze,null);if(typeof te.then=="function")return Vt(_t,mt,Mt,of(te),ze);if(te.$$typeof===b)return Vt(_t,mt,Mt,$h(mt,te),ze);Bh(mt,te)}return null}function Ve(_t,mt,Mt,te){for(var ze=null,Rn=null,Xe=mt,Je=mt=0,Ta=null;Xe!==null&&Je<Mt.length;Je++){Xe.index>Je?(Ta=Xe,Xe=null):Ta=Xe.sibling;var Xn=Ut(_t,Xe,Mt[Je],te);if(Xn===null){Xe===null&&(Xe=Ta);break}r&&Xe&&Xn.alternate===null&&s(_t,Xe),mt=T(Xn,mt,Je),Rn===null?ze=Xn:Rn.sibling=Xn,Rn=Xn,Xe=Ta}if(Je===Mt.length)return f(_t,Xe),Cn&&Ua(_t,Je),ze;if(Xe===null){for(;Je<Mt.length;Je++)Xe=ie(_t,Mt[Je],te),Xe!==null&&(mt=T(Xe,mt,Je),Rn===null?ze=Xe:Rn.sibling=Xe,Rn=Xe);return Cn&&Ua(_t,Je),ze}for(Xe=m(Xe);Je<Mt.length;Je++)Ta=Vt(Xe,_t,Je,Mt[Je],te),Ta!==null&&(r&&Ta.alternate!==null&&Xe.delete(Ta.key===null?Je:Ta.key),mt=T(Ta,mt,Je),Rn===null?ze=Ta:Rn.sibling=Ta,Rn=Ta);return r&&Xe.forEach(function(cu){return s(_t,cu)}),Cn&&Ua(_t,Je),ze}function ln(_t,mt,Mt,te){if(Mt==null)throw Error(i(151));for(var ze=null,Rn=null,Xe=mt,Je=mt=0,Ta=null,Xn=Mt.next();Xe!==null&&!Xn.done;Je++,Xn=Mt.next()){Xe.index>Je?(Ta=Xe,Xe=null):Ta=Xe.sibling;var cu=Ut(_t,Xe,Xn.value,te);if(cu===null){Xe===null&&(Xe=Ta);break}r&&Xe&&cu.alternate===null&&s(_t,Xe),mt=T(cu,mt,Je),Rn===null?ze=cu:Rn.sibling=cu,Rn=cu,Xe=Ta}if(Xn.done)return f(_t,Xe),Cn&&Ua(_t,Je),ze;if(Xe===null){for(;!Xn.done;Je++,Xn=Mt.next())Xn=ie(_t,Xn.value,te),Xn!==null&&(mt=T(Xn,mt,Je),Rn===null?ze=Xn:Rn.sibling=Xn,Rn=Xn);return Cn&&Ua(_t,Je),ze}for(Xe=m(Xe);!Xn.done;Je++,Xn=Mt.next())Xn=Vt(Xe,_t,Je,Xn.value,te),Xn!==null&&(r&&Xn.alternate!==null&&Xe.delete(Xn.key===null?Je:Xn.key),mt=T(Xn,mt,Je),Rn===null?ze=Xn:Rn.sibling=Xn,Rn=Xn);return r&&Xe.forEach(function(hD){return s(_t,hD)}),Cn&&Ua(_t,Je),ze}function ji(_t,mt,Mt,te){if(typeof Mt=="object"&&Mt!==null&&Mt.type===d&&Mt.key===null&&(Mt=Mt.props.children),typeof Mt=="object"&&Mt!==null){switch(Mt.$$typeof){case u:t:{for(var ze=Mt.key;mt!==null;){if(mt.key===ze){if(ze=Mt.type,ze===d){if(mt.tag===7){f(_t,mt.sibling),te=y(mt,Mt.props.children),te.return=_t,_t=te;break t}}else if(mt.elementType===ze||typeof ze=="object"&&ze!==null&&ze.$$typeof===C&&Bg(ze)===mt.type){f(_t,mt.sibling),te=y(mt,Mt.props),lf(te,Mt),te.return=_t,_t=te;break t}f(_t,mt);break}else s(_t,mt);mt=mt.sibling}Mt.type===d?(te=cl(Mt.props.children,_t.mode,te,Mt.key),te.return=_t,_t=te):(te=tu(Mt.type,Mt.key,Mt.props,null,_t.mode,te),lf(te,Mt),te.return=_t,_t=te)}return I(_t);case h:t:{for(ze=Mt.key;mt!==null;){if(mt.key===ze)if(mt.tag===4&&mt.stateNode.containerInfo===Mt.containerInfo&&mt.stateNode.implementation===Mt.implementation){f(_t,mt.sibling),te=y(mt,Mt.children||[]),te.return=_t,_t=te;break t}else{f(_t,mt);break}else s(_t,mt);mt=mt.sibling}te=xf(Mt,_t.mode,te),te.return=_t,_t=te}return I(_t);case C:return ze=Mt._init,Mt=ze(Mt._payload),ji(_t,mt,Mt,te)}if(Ft(Mt))return Ve(_t,mt,Mt,te);if(B(Mt)){if(ze=B(Mt),typeof ze!="function")throw Error(i(150));return Mt=ze.call(Mt),ln(_t,mt,Mt,te)}if(typeof Mt.then=="function")return ji(_t,mt,of(Mt),te);if(Mt.$$typeof===b)return ji(_t,mt,$h(_t,Mt),te);Bh(_t,Mt)}return typeof Mt=="string"&&Mt!==""||typeof Mt=="number"||typeof Mt=="bigint"?(Mt=""+Mt,mt!==null&&mt.tag===6?(f(_t,mt.sibling),te=y(mt,Mt),te.return=_t,_t=te):(f(_t,mt),te=qi(Mt,_t.mode,te),te.return=_t,_t=te),I(_t)):f(_t,mt)}return function(_t,mt,Mt,te){try{sf=0;var ze=ji(_t,mt,Mt,te);return Xo=null,ze}catch(Xe){if(Xe===Vo)throw Xe;var Rn=Bi(29,Xe,null,_t.mode);return Rn.lanes=te,Rn.return=_t,Rn}finally{}}}var Ks=Ig(!0),Qs=Ig(!1),Gl=Qt(null),Vl=Qt(0);function Yo(r,s){r=po,re(Vl,r),re(Gl,s),po=r|s.baseLanes}function Ih(){re(Vl,po),re(Gl,Gl.current)}function cf(){po=Vl.current,we(Gl),we(Vl)}var Ka=Qt(null),xs=null;function Js(r){var s=r.alternate;re(ki,ki.current&1),re(Ka,r),xs===null&&(s===null||Gl.current!==null||s.memoizedState!==null)&&(xs=r)}function Up(r){if(r.tag===22){if(re(ki,ki.current),re(Ka,r),xs===null){var s=r.alternate;s!==null&&s.memoizedState!==null&&(xs=r)}}else $s()}function $s(){re(ki,ki.current),re(Ka,Ka.current)}function Ss(r){we(Ka),xs===r&&(xs=null),we(ki)}var ki=Qt(0);function Fc(r){for(var s=r;s!==null;){if(s.tag===13){var f=s.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||f.data==="$?"||f.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if(s.flags&128)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var En=typeof AbortController<"u"?AbortController:function(){var r=[],s=this.signal={aborted:!1,addEventListener:function(f,m){r.push(m)}};this.abort=function(){s.aborted=!0,r.forEach(function(f){return f()})}},Fx=n.unstable_scheduleCallback,fr=n.unstable_NormalPriority,Di={$$typeof:b,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Op(){return{controller:new En,data:new Map,refCount:0}}function qo(r){r.refCount--,r.refCount===0&&Fx(fr,function(){r.controller.abort()})}var bs=null,Zo=0,kl=0,Wo=null;function Gx(r,s){if(bs===null){var f=bs=[];Zo=0,kl=Kx(),Wo={status:"pending",value:void 0,then:function(m){f.push(m)}}}return Zo++,s.then(Lp,Lp),s}function Lp(){if(--Zo===0&&bs!==null){Wo!==null&&(Wo.status="fulfilled");var r=bs;bs=null,kl=0,Wo=null;for(var s=0;s<r.length;s++)(0,r[s])()}}function jo(r,s){var f=[],m={status:"pending",value:null,reason:null,then:function(y){f.push(y)}};return r.then(function(){m.status="fulfilled",m.value=s;for(var y=0;y<f.length;y++)(0,f[y])(s)},function(y){for(m.status="rejected",m.reason=y,y=0;y<f.length;y++)(0,f[y])(void 0)}),m}var Ph=L.S;L.S=function(r,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&Gx(r,s),Ph!==null&&Ph(r,s)};var to=Qt(null);function uf(){var r=to.current;return r!==null?r:Qn.pooledCache}function Gc(r,s){s===null?re(to,to.current):re(to,s.pool)}function eo(){var r=uf();return r===null?null:{parent:Di._currentValue,pool:r}}var no=0,gn=null,Yn=null,Xi=null,Qe=!1,Ko=!1,Qo=!1,Vc=0,Jo=0,kc=null,Vx=0;function Ti(){throw Error(i(321))}function Xl(r,s){if(s===null)return!1;for(var f=0;f<s.length&&f<r.length;f++)if(!qa(r[f],s[f]))return!1;return!0}function zp(r,s,f,m,y,T){return no=T,gn=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,L.H=r===null||r.memoizedState===null?tl:ao,Qo=!1,T=f(m,y),Qo=!1,Ko&&(T=Hg(s,f,m,y)),Pg(r),T}function Pg(r){L.H=Es;var s=Yn!==null&&Yn.next!==null;if(no=0,Xi=Yn=gn=null,Qe=!1,Jo=0,kc=null,s)throw Error(i(300));r===null||Qi||(r=r.dependencies,r!==null&&Wc(r)&&(Qi=!0))}function Hg(r,s,f,m){gn=r;var y=0;do{if(Ko&&(kc=null),Jo=0,Ko=!1,25<=y)throw Error(i(301));if(y+=1,Xi=Yn=null,r.updateQueue!=null){var T=r.updateQueue;T.lastEffect=null,T.events=null,T.stores=null,T.memoCache!=null&&(T.memoCache.index=0)}L.H=Zl,T=s(f,m)}while(Ko);return T}function kx(){var r=L.H,s=r.useState()[0];return s=typeof s.then=="function"?hf(s):s,r=r.useState()[0],(Yn!==null?Yn.memoizedState:null)!==r&&(gn.flags|=1024),s}function Bp(){var r=Vc!==0;return Vc=0,r}function ff(r,s,f){s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~f}function Hh(r){if(Qe){for(r=r.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Qe=!1}no=0,Xi=Yn=gn=null,Ko=!1,Jo=Vc=0,kc=null}function pa(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xi===null?gn.memoizedState=Xi=r:Xi=Xi.next=r,Xi}function Ni(){if(Yn===null){var r=gn.alternate;r=r!==null?r.memoizedState:null}else r=Yn.next;var s=Xi===null?gn.memoizedState:Xi.next;if(s!==null)Xi=s,Yn=r;else{if(r===null)throw gn.alternate===null?Error(i(467)):Error(i(310));Yn=r,r={memoizedState:Yn.memoizedState,baseState:Yn.baseState,baseQueue:Yn.baseQueue,queue:Yn.queue,next:null},Xi===null?gn.memoizedState=Xi=r:Xi=Xi.next=r}return Xi}var Fh;Fh=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function hf(r){var s=Jo;return Jo+=1,kc===null&&(kc=[]),r=ko(kc,r,s),s=gn,(Xi===null?s.memoizedState:Xi.next)===null&&(s=s.alternate,L.H=s===null||s.memoizedState===null?tl:ao),r}function Xc(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return hf(r);if(r.$$typeof===b)return ya(r)}throw Error(i(438,String(r)))}function $r(r){var s=null,f=gn.updateQueue;if(f!==null&&(s=f.memoCache),s==null){var m=gn.alternate;m!==null&&(m=m.updateQueue,m!==null&&(m=m.memoCache,m!=null&&(s={data:m.data.map(function(y){return y.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),f===null&&(f=Fh(),gn.updateQueue=f),f.memoCache=s,f=s.data[s.index],f===void 0)for(f=s.data[s.index]=Array(r),m=0;m<r;m++)f[m]=D;return s.index++,f}function yi(r,s){return typeof s=="function"?s(r):s}function ts(r){var s=Ni();return Qa(s,Yn,r)}function Qa(r,s,f){var m=r.queue;if(m===null)throw Error(i(311));m.lastRenderedReducer=f;var y=r.baseQueue,T=m.pending;if(T!==null){if(y!==null){var I=y.next;y.next=T.next,T.next=I}s.baseQueue=y=T,m.pending=null}if(T=r.baseState,y===null)r.memoizedState=T;else{s=y.next;var X=I=null,it=null,gt=s,Zt=!1;do{var ie=gt.lane&-536870913;if(ie!==gt.lane?(qe&ie)===ie:(no&ie)===ie){var Ut=gt.revertLane;if(Ut===0)it!==null&&(it=it.next={lane:0,revertLane:0,action:gt.action,hasEagerState:gt.hasEagerState,eagerState:gt.eagerState,next:null}),ie===kl&&(Zt=!0);else if((no&Ut)===Ut){gt=gt.next,Ut===kl&&(Zt=!0);continue}else ie={lane:0,revertLane:gt.revertLane,action:gt.action,hasEagerState:gt.hasEagerState,eagerState:gt.eagerState,next:null},it===null?(X=it=ie,I=T):it=it.next=ie,gn.lanes|=Ut,os|=Ut;ie=gt.action,Qo&&f(T,ie),T=gt.hasEagerState?gt.eagerState:f(T,ie)}else Ut={lane:ie,revertLane:gt.revertLane,action:gt.action,hasEagerState:gt.hasEagerState,eagerState:gt.eagerState,next:null},it===null?(X=it=Ut,I=T):it=it.next=Ut,gn.lanes|=ie,os|=ie;gt=gt.next}while(gt!==null&&gt!==s);if(it===null?I=T:it.next=X,!qa(T,r.memoizedState)&&(Qi=!0,Zt&&(f=Wo,f!==null)))throw f;r.memoizedState=T,r.baseState=I,r.baseQueue=it,m.lastRenderedState=T}return y===null&&(m.lanes=0),[r.memoizedState,m.dispatch]}function Gh(r){var s=Ni(),f=s.queue;if(f===null)throw Error(i(311));f.lastRenderedReducer=r;var m=f.dispatch,y=f.pending,T=s.memoizedState;if(y!==null){f.pending=null;var I=y=y.next;do T=r(T,I.action),I=I.next;while(I!==y);qa(T,s.memoizedState)||(Qi=!0),s.memoizedState=T,s.baseQueue===null&&(s.baseState=T),f.lastRenderedState=T}return[T,m]}function Fg(r,s,f){var m=gn,y=Ni(),T=Cn;if(T){if(f===void 0)throw Error(i(407));f=f()}else f=s();var I=!qa((Yn||y).memoizedState,f);if(I&&(y.memoizedState=f,Qi=!0),y=y.queue,Fp(Gg.bind(null,m,y,r),[r]),y.getSnapshot!==s||I||Xi!==null&&Xi.memoizedState.tag&1){if(m.flags|=2048,Ms(9,$o.bind(null,m,y,f,s),{destroy:void 0},null),Qn===null)throw Error(i(349));T||no&60||Oa(m,s,f)}return f}function Oa(r,s,f){r.flags|=16384,r={getSnapshot:s,value:f},s=gn.updateQueue,s===null?(s=Fh(),gn.updateQueue=s,s.stores=[r]):(f=s.stores,f===null?s.stores=[r]:f.push(r))}function $o(r,s,f,m){s.value=f,s.getSnapshot=m,Vg(s)&&kg(r)}function Gg(r,s,f){return f(function(){Vg(s)&&kg(r)})}function Vg(r){var s=r.getSnapshot;r=r.value;try{var f=s();return!qa(r,f)}catch{return!0}}function kg(r){var s=Zs(r,2);s!==null&&Wi(s,r,2)}function Ip(r){var s=pa();if(typeof r=="function"){var f=r;if(r=f(),Qo){lt(!0);try{f()}finally{lt(!1)}}}return s.memoizedState=s.baseState=r,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:yi,lastRenderedState:r},s}function Pp(r,s,f,m){return r.baseState=f,Qa(r,Yn,typeof m=="function"?m:yi)}function Xx(r,s,f,m,y){if(qh(r))throw Error(i(485));if(r=s.action,r!==null){var T={payload:y,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(I){T.listeners.push(I)}};L.T!==null?f(!0):T.isTransition=!1,m(T),f=s.pending,f===null?(T.next=s.pending=T,Hp(s,T)):(T.next=f.next,s.pending=f.next=T)}}function Hp(r,s){var f=s.action,m=s.payload,y=r.state;if(s.isTransition){var T=L.T,I={};L.T=I;try{var X=f(y,m),it=L.S;it!==null&&it(I,X),Xg(r,s,X)}catch(gt){io(r,s,gt)}finally{L.T=T}}else try{T=f(y,m),Xg(r,s,T)}catch(gt){io(r,s,gt)}}function Xg(r,s,f){f!==null&&typeof f=="object"&&typeof f.then=="function"?f.then(function(m){Yl(r,s,m)},function(m){return io(r,s,m)}):Yl(r,s,f)}function Yl(r,s,f){s.status="fulfilled",s.value=f,Yg(s),r.state=f,s=r.pending,s!==null&&(f=s.next,f===s?r.pending=null:(f=f.next,s.next=f,Hp(r,f)))}function io(r,s,f){var m=r.pending;if(r.pending=null,m!==null){m=m.next;do s.status="rejected",s.reason=f,Yg(s),s=s.next;while(s!==m)}r.action=null}function Yg(r){r=r.listeners;for(var s=0;s<r.length;s++)(0,r[s])()}function qg(r,s){return s}function Zg(r,s){if(Cn){var f=Qn.formState;if(f!==null){t:{var m=gn;if(Cn){if(ia){e:{for(var y=ia,T=Ur;y.nodeType!==8;){if(!T){y=null;break e}if(y=vo(y.nextSibling),y===null){y=null;break e}}T=y.data,y=T==="F!"||T==="F"?y:null}if(y){ia=vo(y.nextSibling),m=y.data==="F!";break t}}Fl(m)}m=!1}m&&(s=f[0])}}return f=pa(),f.memoizedState=f.baseState=s,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qg,lastRenderedState:s},f.queue=m,f=Xp.bind(null,gn,m),m.dispatch=f,m=Ip(!1),T=df.bind(null,gn,!1,m.queue),m=pa(),y={state:s,dispatch:null,action:r,pending:null},m.queue=y,f=Xx.bind(null,gn,y,T,f),y.dispatch=f,m.memoizedState=r,[s,f,!1]}function Yc(r){var s=Ni();return Wg(s,Yn,r)}function Wg(r,s,f){s=Qa(r,s,qg)[0],r=ts(yi)[0],s=typeof s=="object"&&s!==null&&typeof s.then=="function"?hf(s):s;var m=Ni(),y=m.queue,T=y.dispatch;return f!==m.memoizedState&&(gn.flags|=2048,Ms(9,Yx.bind(null,y,f),{destroy:void 0},null)),[s,T,r]}function Yx(r,s){r.action=s}function jg(r){var s=Ni(),f=Yn;if(f!==null)return Wg(s,f,r);Ni(),s=s.memoizedState,f=Ni();var m=f.queue.dispatch;return f.memoizedState=r,[s,m,!1]}function Ms(r,s,f,m){return r={tag:r,create:s,inst:f,deps:m,next:null},s=gn.updateQueue,s===null&&(s=Fh(),gn.updateQueue=s),f=s.lastEffect,f===null?s.lastEffect=r.next=r:(m=f.next,f.next=r,r.next=m,s.lastEffect=r),r}function Kg(){return Ni().memoizedState}function Vh(r,s,f,m){var y=pa();gn.flags|=r,y.memoizedState=Ms(1|s,f,{destroy:void 0},m===void 0?null:m)}function kh(r,s,f,m){var y=Ni();m=m===void 0?null:m;var T=y.memoizedState.inst;Yn!==null&&m!==null&&Xl(m,Yn.memoizedState.deps)?y.memoizedState=Ms(s,f,T,m):(gn.flags|=r,y.memoizedState=Ms(1|s,f,T,m))}function Qg(r,s){Vh(8390656,8,r,s)}function Fp(r,s){kh(2048,8,r,s)}function Jg(r,s){return kh(4,2,r,s)}function $g(r,s){return kh(4,4,r,s)}function tv(r,s){if(typeof s=="function"){r=r();var f=s(r);return function(){typeof f=="function"?f():s(null)}}if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function ev(r,s,f){f=f!=null?f.concat([r]):null,kh(4,4,tv.bind(null,s,r),f)}function Gp(){}function nv(r,s){var f=Ni();s=s===void 0?null:s;var m=f.memoizedState;return s!==null&&Xl(s,m[1])?m[0]:(f.memoizedState=[r,s],r)}function iv(r,s){var f=Ni();s=s===void 0?null:s;var m=f.memoizedState;if(s!==null&&Xl(s,m[1]))return m[0];if(m=r(),Qo){lt(!0);try{r()}finally{lt(!1)}}return f.memoizedState=[m,s],m}function Xh(r,s,f){return f===void 0||no&1073741824?r.memoizedState=s:(r.memoizedState=f,r=gr(),gn.lanes|=r,os|=r,f)}function av(r,s,f,m){return qa(f,s)?f:Gl.current!==null?(r=Xh(r,f,m),qa(r,s)||(Qi=!0),r):no&42?(r=gr(),gn.lanes|=r,os|=r,s):(Qi=!0,r.memoizedState=f)}function rv(r,s,f,m,y){var T=rt.p;rt.p=T!==0&&8>T?T:8;var I=L.T,X={};L.T=X,df(r,!1,s,f);try{var it=y(),gt=L.S;if(gt!==null&&gt(X,it),it!==null&&typeof it=="object"&&typeof it.then=="function"){var Zt=jo(it,m);ql(r,s,Zt,Pa(r))}else ql(r,s,m,Pa(r))}catch(ie){ql(r,s,{then:function(){},status:"rejected",reason:ie},Pa())}finally{rt.p=T,L.T=I}}function qx(){}function Vp(r,s,f,m){if(r.tag!==5)throw Error(i(476));var y=sv(r).queue;rv(r,y,s,Lt,f===null?qx:function(){return ov(r),f(m)})}function sv(r){var s=r.memoizedState;if(s!==null)return s;s={memoizedState:Lt,baseState:Lt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:yi,lastRenderedState:Lt},next:null};var f={};return s.next={memoizedState:f,baseState:f,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:yi,lastRenderedState:f},next:null},r.memoizedState=s,r=r.alternate,r!==null&&(r.memoizedState=s),s}function ov(r){var s=sv(r).next.queue;ql(r,s,{},Pa())}function Yh(){return ya(mm)}function kp(){return Ni().memoizedState}function lv(){return Ni().memoizedState}function cv(r){for(var s=r.return;s!==null;){switch(s.tag){case 24:case 3:var f=Pa();r=pr(f);var m=mr(s,r,f);m!==null&&(Wi(m,s,f),il(m,s,f)),s={cache:Op()},r.payload=s;return}s=s.return}}function uv(r,s,f){var m=Pa();f={lane:m,revertLane:0,action:f,hasEagerState:!1,eagerState:null,next:null},qh(r)?fv(s,f):(f=Pl(r,s,f,m),f!==null&&(Wi(f,r,m),hv(f,s,m)))}function Xp(r,s,f){var m=Pa();ql(r,s,f,m)}function ql(r,s,f,m){var y={lane:m,revertLane:0,action:f,hasEagerState:!1,eagerState:null,next:null};if(qh(r))fv(s,y);else{var T=r.alternate;if(r.lanes===0&&(T===null||T.lanes===0)&&(T=s.lastRenderedReducer,T!==null))try{var I=s.lastRenderedState,X=T(I,f);if(y.hasEagerState=!0,y.eagerState=X,qa(X,I))return Ju(r,s,y,0),Qn===null&&Qu(),!1}catch{}finally{}if(f=Pl(r,s,y,m),f!==null)return Wi(f,r,m),hv(f,s,m),!0}return!1}function df(r,s,f,m){if(m={lane:2,revertLane:Kx(),action:m,hasEagerState:!1,eagerState:null,next:null},qh(r)){if(s)throw Error(i(479))}else s=Pl(r,f,m,2),s!==null&&Wi(s,r,2)}function qh(r){var s=r.alternate;return r===gn||s!==null&&s===gn}function fv(r,s){Ko=Qe=!0;var f=r.pending;f===null?s.next=s:(s.next=f.next,f.next=s),r.pending=s}function hv(r,s,f){if(f&4194176){var m=s.lanes;m&=r.pendingLanes,f|=m,s.lanes=f,ca(r,f)}}var Es={readContext:ya,use:Xc,useCallback:Ti,useContext:Ti,useEffect:Ti,useImperativeHandle:Ti,useLayoutEffect:Ti,useInsertionEffect:Ti,useMemo:Ti,useReducer:Ti,useRef:Ti,useState:Ti,useDebugValue:Ti,useDeferredValue:Ti,useTransition:Ti,useSyncExternalStore:Ti,useId:Ti};Es.useCacheRefresh=Ti,Es.useMemoCache=Ti,Es.useHostTransitionStatus=Ti,Es.useFormState=Ti,Es.useActionState=Ti,Es.useOptimistic=Ti;var tl={readContext:ya,use:Xc,useCallback:function(r,s){return pa().memoizedState=[r,s===void 0?null:s],r},useContext:ya,useEffect:Qg,useImperativeHandle:function(r,s,f){f=f!=null?f.concat([r]):null,Vh(4194308,4,tv.bind(null,s,r),f)},useLayoutEffect:function(r,s){return Vh(4194308,4,r,s)},useInsertionEffect:function(r,s){Vh(4,2,r,s)},useMemo:function(r,s){var f=pa();s=s===void 0?null:s;var m=r();if(Qo){lt(!0);try{r()}finally{lt(!1)}}return f.memoizedState=[m,s],m},useReducer:function(r,s,f){var m=pa();if(f!==void 0){var y=f(s);if(Qo){lt(!0);try{f(s)}finally{lt(!1)}}}else y=s;return m.memoizedState=m.baseState=y,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:y},m.queue=r,r=r.dispatch=uv.bind(null,gn,r),[m.memoizedState,r]},useRef:function(r){var s=pa();return r={current:r},s.memoizedState=r},useState:function(r){r=Ip(r);var s=r.queue,f=Xp.bind(null,gn,s);return s.dispatch=f,[r.memoizedState,f]},useDebugValue:Gp,useDeferredValue:function(r,s){var f=pa();return Xh(f,r,s)},useTransition:function(){var r=Ip(!1);return r=rv.bind(null,gn,r.queue,!0,!1),pa().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,s,f){var m=gn,y=pa();if(Cn){if(f===void 0)throw Error(i(407));f=f()}else{if(f=s(),Qn===null)throw Error(i(349));qe&60||Oa(m,s,f)}y.memoizedState=f;var T={value:f,getSnapshot:s};return y.queue=T,Qg(Gg.bind(null,m,T,r),[r]),m.flags|=2048,Ms(9,$o.bind(null,m,T,f,s),{destroy:void 0},null),f},useId:function(){var r=pa(),s=Qn.identifierPrefix;if(Cn){var f=js,m=_s;f=(m&~(1<<32-wt(m)-1)).toString(32)+f,s=":"+s+"R"+f,f=Vc++,0<f&&(s+="H"+f.toString(32)),s+=":"}else f=Vx++,s=":"+s+"r"+f.toString(32)+":";return r.memoizedState=s},useCacheRefresh:function(){return pa().memoizedState=cv.bind(null,gn)}};tl.useMemoCache=$r,tl.useHostTransitionStatus=Yh,tl.useFormState=Zg,tl.useActionState=Zg,tl.useOptimistic=function(r){var s=pa();s.memoizedState=s.baseState=r;var f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=f,s=df.bind(null,gn,!0,f),f.dispatch=s,[r,s]};var ao={readContext:ya,use:Xc,useCallback:nv,useContext:ya,useEffect:Fp,useImperativeHandle:ev,useInsertionEffect:Jg,useLayoutEffect:$g,useMemo:iv,useReducer:ts,useRef:Kg,useState:function(){return ts(yi)},useDebugValue:Gp,useDeferredValue:function(r,s){var f=Ni();return av(f,Yn.memoizedState,r,s)},useTransition:function(){var r=ts(yi)[0],s=Ni().memoizedState;return[typeof r=="boolean"?r:hf(r),s]},useSyncExternalStore:Fg,useId:kp};ao.useCacheRefresh=lv,ao.useMemoCache=$r,ao.useHostTransitionStatus=Yh,ao.useFormState=Yc,ao.useActionState=Yc,ao.useOptimistic=function(r,s){var f=Ni();return Pp(f,Yn,r,s)};var Zl={readContext:ya,use:Xc,useCallback:nv,useContext:ya,useEffect:Fp,useImperativeHandle:ev,useInsertionEffect:Jg,useLayoutEffect:$g,useMemo:iv,useReducer:Gh,useRef:Kg,useState:function(){return Gh(yi)},useDebugValue:Gp,useDeferredValue:function(r,s){var f=Ni();return Yn===null?Xh(f,r,s):av(f,Yn.memoizedState,r,s)},useTransition:function(){var r=Gh(yi)[0],s=Ni().memoizedState;return[typeof r=="boolean"?r:hf(r),s]},useSyncExternalStore:Fg,useId:kp};Zl.useCacheRefresh=lv,Zl.useMemoCache=$r,Zl.useHostTransitionStatus=Yh,Zl.useFormState=jg,Zl.useActionState=jg,Zl.useOptimistic=function(r,s){var f=Ni();return Yn!==null?Pp(f,Yn,r,s):(f.baseState=r,[r,f.queue.dispatch])};function Yp(r,s,f,m){s=r.memoizedState,f=f(m,s),f=f==null?s:O({},s,f),r.memoizedState=f,r.lanes===0&&(r.updateQueue.baseState=f)}var qp={isMounted:function(r){return(r=r._reactInternals)?ot(r)===r:!1},enqueueSetState:function(r,s,f){r=r._reactInternals;var m=Pa(),y=pr(m);y.payload=s,f!=null&&(y.callback=f),s=mr(r,y,m),s!==null&&(Wi(s,r,m),il(s,r,m))},enqueueReplaceState:function(r,s,f){r=r._reactInternals;var m=Pa(),y=pr(m);y.tag=1,y.payload=s,f!=null&&(y.callback=f),s=mr(r,y,m),s!==null&&(Wi(s,r,m),il(s,r,m))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var f=Pa(),m=pr(f);m.tag=2,s!=null&&(m.callback=s),s=mr(r,m,f),s!==null&&(Wi(s,r,f),il(s,r,f))}};function dv(r,s,f,m,y,T,I){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(m,T,I):s.prototype&&s.prototype.isPureReactComponent?!Jr(f,m)||!Jr(y,T):!0}function pv(r,s,f,m){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(f,m),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(f,m),s.state!==r&&qp.enqueueReplaceState(s,s.state,null)}function Wl(r,s){var f=s;if("ref"in s){f={};for(var m in s)m!=="ref"&&(f[m]=s[m])}if(r=r.defaultProps){f===s&&(f=O({},f));for(var y in r)f[y]===void 0&&(f[y]=r[y])}return f}var Zh=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)};function mv(r){Zh(r)}function gv(r){console.error(r)}function vv(r){Zh(r)}function Wh(r,s){try{var f=r.onUncaughtError;f(s.value,{componentStack:s.stack})}catch(m){setTimeout(function(){throw m})}}function _v(r,s,f){try{var m=r.onCaughtError;m(f.value,{componentStack:f.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function Zp(r,s,f){return f=pr(f),f.tag=3,f.payload={element:null},f.callback=function(){Wh(r,s)},f}function Wp(r){return r=pr(r),r.tag=3,r}function yv(r,s,f,m){var y=f.type.getDerivedStateFromError;if(typeof y=="function"){var T=m.value;r.payload=function(){return y(T)},r.callback=function(){_v(s,f,m)}}var I=f.stateNode;I!==null&&typeof I.componentDidCatch=="function"&&(r.callback=function(){_v(s,f,m),typeof y!="function"&&(Zi===null?Zi=new Set([this]):Zi.add(this));var X=m.stack;this.componentDidCatch(m.value,{componentStack:X!==null?X:""})})}function Zx(r,s,f,m,y){if(f.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){if(s=f.alternate,s!==null&&mf(s,f,y,!0),f=Ka.current,f!==null){switch(f.tag){case 13:return xs===null?Mf():f.alternate===null&&pi===0&&(pi=3),f.flags&=-257,f.flags|=65536,f.lanes=y,m===zh?f.flags|=16384:(s=f.updateQueue,s===null?f.updateQueue=new Set([m]):s.add(m),nn(r,m,y)),!1;case 22:return f.flags|=65536,m===zh?f.flags|=16384:(s=f.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([m])},f.updateQueue=s):(f=s.retryQueue,f===null?s.retryQueue=new Set([m]):f.add(m)),nn(r,m,y)),!1}throw Error(i(435,f.tag))}return nn(r,m,y),Mf(),!1}if(Cn)return s=Ka.current,s!==null?(!(s.flags&65536)&&(s.flags|=256),s.flags|=65536,s.lanes=y,m!==af&&(r=Error(i(422),{cause:m}),ys(ja(r,f)))):(m!==af&&(s=Error(i(423),{cause:m}),ys(ja(s,f))),r=r.current.alternate,r.flags|=65536,y&=-y,r.lanes|=y,m=ja(m,f),y=Zp(r.stateNode,m,y),Kc(r,y),pi!==4&&(pi=2)),!1;var T=Error(i(520),{cause:m});if(T=ja(T,f),bf===null?bf=[T]:bf.push(T),pi!==4&&(pi=2),s===null)return!0;m=ja(m,f),f=s;do{switch(f.tag){case 3:return f.flags|=65536,r=y&-y,f.lanes|=r,r=Zp(f.stateNode,m,r),Kc(f,r),!1;case 1:if(s=f.type,T=f.stateNode,(f.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(Zi===null||!Zi.has(T))))return f.flags|=65536,y&=-y,f.lanes|=y,y=Wp(y),yv(y,r,f,m),Kc(f,y),!1}f=f.return}while(f!==null);return!1}var hr=Error(i(461)),Qi=!1;function Ji(r,s,f,m){s.child=r===null?Qs(s,null,f,m):Ks(s,r.child,f,m)}function jp(r,s,f,m,y){f=f.render;var T=s.ref;if("ref"in m){var I={};for(var X in m)X!=="ref"&&(I[X]=m[X])}else I=m;return Kl(s),m=zp(r,s,f,I,T,y),X=Bp(),r!==null&&!Qi?(ff(r,s,y),Ui(r,s,y)):(Cn&&X&&nf(s),s.flags|=1,Ji(r,s,m,y),s.child)}function Kp(r,s,f,m,y){if(r===null){var T=f.type;return typeof T=="function"&&!fo(T)&&T.defaultProps===void 0&&f.compare===null?(s.tag=15,s.type=T,Qp(r,s,T,m,y)):(r=tu(f.type,null,m,s,s.mode,y),r.ref=s.ref,r.return=s,s.child=r)}if(T=r.child,!am(r,y)){var I=T.memoizedProps;if(f=f.compare,f=f!==null?f:Jr,f(I,m)&&r.ref===s.ref)return Ui(r,s,y)}return s.flags|=1,r=Ba(T,m),r.ref=s.ref,r.return=s,s.child=r}function Qp(r,s,f,m,y){if(r!==null){var T=r.memoizedProps;if(Jr(T,m)&&r.ref===s.ref)if(Qi=!1,s.pendingProps=m=T,am(r,y))r.flags&131072&&(Qi=!0);else return s.lanes=r.lanes,Ui(r,s,y)}return $p(r,s,f,m,y)}function xv(r,s,f){var m=s.pendingProps,y=m.children,T=(s.stateNode._pendingVisibility&2)!==0,I=r!==null?r.memoizedState:null;if(qc(r,s),m.mode==="hidden"||T){if(s.flags&128){if(m=I!==null?I.baseLanes|f:f,r!==null){for(y=s.child=r.child,T=0;y!==null;)T=T|y.lanes|y.childLanes,y=y.sibling;s.childLanes=T&~m}else s.childLanes=0,s.child=null;return Jp(r,s,m,f)}if(f&536870912)s.memoizedState={baseLanes:0,cachePool:null},r!==null&&Gc(s,I!==null?I.cachePool:null),I!==null?Yo(s,I):Ih(),Up(s);else return s.lanes=s.childLanes=536870912,Jp(r,s,I!==null?I.baseLanes|f:f,f)}else I!==null?(Gc(s,I.cachePool),Yo(s,I),$s(),s.memoizedState=null):(r!==null&&Gc(s,null),Ih(),$s());return Ji(r,s,y,f),s.child}function Jp(r,s,f,m){var y=uf();return y=y===null?null:{parent:Di._currentValue,pool:y},s.memoizedState={baseLanes:f,cachePool:y},r!==null&&Gc(s,null),Ih(),Up(s),r!==null&&mf(r,s,m,!0),null}function qc(r,s){var f=s.ref;if(f===null)r!==null&&r.ref!==null&&(s.flags|=2097664);else{if(typeof f!="function"&&typeof f!="object")throw Error(i(284));(r===null||r.ref!==f)&&(s.flags|=2097664)}}function $p(r,s,f,m,y){return Kl(s),f=zp(r,s,f,m,void 0,y),m=Bp(),r!==null&&!Qi?(ff(r,s,y),Ui(r,s,y)):(Cn&&m&&nf(s),s.flags|=1,Ji(r,s,f,y),s.child)}function Sv(r,s,f,m,y,T){return Kl(s),s.updateQueue=null,f=Hg(s,m,f,y),Pg(r),m=Bp(),r!==null&&!Qi?(ff(r,s,T),Ui(r,s,T)):(Cn&&m&&nf(s),s.flags|=1,Ji(r,s,f,T),s.child)}function bv(r,s,f,m,y){if(Kl(s),s.stateNode===null){var T=Ho,I=f.contextType;typeof I=="object"&&I!==null&&(T=ya(I)),T=new f(m,T),s.memoizedState=T.state!==null&&T.state!==void 0?T.state:null,T.updater=qp,s.stateNode=T,T._reactInternals=s,T=s.stateNode,T.props=m,T.state=s.memoizedState,T.refs={},La(s),I=f.contextType,T.context=typeof I=="object"&&I!==null?ya(I):Ho,T.state=s.memoizedState,I=f.getDerivedStateFromProps,typeof I=="function"&&(Yp(s,f,I,m),T.state=s.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof T.getSnapshotBeforeUpdate=="function"||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(I=T.state,typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount(),I!==T.state&&qp.enqueueReplaceState(T,T.state,null),ns(s,m,T,y),xa(),T.state=s.memoizedState),typeof T.componentDidMount=="function"&&(s.flags|=4194308),m=!0}else if(r===null){T=s.stateNode;var X=s.memoizedProps,it=Wl(f,X);T.props=it;var gt=T.context,Zt=f.contextType;I=Ho,typeof Zt=="object"&&Zt!==null&&(I=ya(Zt));var ie=f.getDerivedStateFromProps;Zt=typeof ie=="function"||typeof T.getSnapshotBeforeUpdate=="function",X=s.pendingProps!==X,Zt||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(X||gt!==I)&&pv(s,T,m,I),Yi=!1;var Ut=s.memoizedState;T.state=Ut,ns(s,m,T,y),xa(),gt=s.memoizedState,X||Ut!==gt||Yi?(typeof ie=="function"&&(Yp(s,f,ie,m),gt=s.memoizedState),(it=Yi||dv(s,f,it,m,Ut,gt,I))?(Zt||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount()),typeof T.componentDidMount=="function"&&(s.flags|=4194308)):(typeof T.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=m,s.memoizedState=gt),T.props=m,T.state=gt,T.context=I,m=it):(typeof T.componentDidMount=="function"&&(s.flags|=4194308),m=!1)}else{T=s.stateNode,td(r,s),I=s.memoizedProps,Zt=Wl(f,I),T.props=Zt,ie=s.pendingProps,Ut=T.context,gt=f.contextType,it=Ho,typeof gt=="object"&&gt!==null&&(it=ya(gt)),X=f.getDerivedStateFromProps,(gt=typeof X=="function"||typeof T.getSnapshotBeforeUpdate=="function")||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(I!==ie||Ut!==it)&&pv(s,T,m,it),Yi=!1,Ut=s.memoizedState,T.state=Ut,ns(s,m,T,y),xa();var Vt=s.memoizedState;I!==ie||Ut!==Vt||Yi||r!==null&&r.dependencies!==null&&Wc(r.dependencies)?(typeof X=="function"&&(Yp(s,f,X,m),Vt=s.memoizedState),(Zt=Yi||dv(s,f,Zt,m,Ut,Vt,it)||r!==null&&r.dependencies!==null&&Wc(r.dependencies))?(gt||typeof T.UNSAFE_componentWillUpdate!="function"&&typeof T.componentWillUpdate!="function"||(typeof T.componentWillUpdate=="function"&&T.componentWillUpdate(m,Vt,it),typeof T.UNSAFE_componentWillUpdate=="function"&&T.UNSAFE_componentWillUpdate(m,Vt,it)),typeof T.componentDidUpdate=="function"&&(s.flags|=4),typeof T.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof T.componentDidUpdate!="function"||I===r.memoizedProps&&Ut===r.memoizedState||(s.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||I===r.memoizedProps&&Ut===r.memoizedState||(s.flags|=1024),s.memoizedProps=m,s.memoizedState=Vt),T.props=m,T.state=Vt,T.context=it,m=Zt):(typeof T.componentDidUpdate!="function"||I===r.memoizedProps&&Ut===r.memoizedState||(s.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||I===r.memoizedProps&&Ut===r.memoizedState||(s.flags|=1024),m=!1)}return T=m,qc(r,s),m=(s.flags&128)!==0,T||m?(T=s.stateNode,f=m&&typeof f.getDerivedStateFromError!="function"?null:T.render(),s.flags|=1,r!==null&&m?(s.child=Ks(s,r.child,null,y),s.child=Ks(s,null,f,y)):Ji(r,s,f,y),s.memoizedState=T.state,r=s.child):r=Ui(r,s,y),r}function tm(r,s,f,m){return Pc(),s.flags|=256,Ji(r,s,f,m),s.child}var em={dehydrated:null,treeContext:null,retryLane:0};function aa(r){return{baseLanes:r,cachePool:eo()}}function jh(r,s,f){return r=r!==null?r.childLanes&~f:0,s&&(r|=Ia),r}function Mv(r,s,f){var m=s.pendingProps,y=!1,T=(s.flags&128)!==0,I;if((I=T)||(I=r!==null&&r.memoizedState===null?!1:(ki.current&2)!==0),I&&(y=!0,s.flags&=-129),I=(s.flags&32)!==0,s.flags&=-33,r===null){if(Cn){if(y?Js(s):$s(),Cn){var X=ia,it;if(it=X){t:{for(it=X,X=Ur;it.nodeType!==8;){if(!X){X=null;break t}if(it=vo(it.nextSibling),it===null){X=null;break t}}X=it}X!==null?(s.memoizedState={dehydrated:X,treeContext:Ws!==null?{id:_s,overflow:js}:null,retryLane:536870912},it=Bi(18,null,null,0),it.stateNode=X,it.return=s,s.child=it,_a=s,ia=null,it=!0):it=!1}it||Fl(s)}if(X=s.memoizedState,X!==null&&(X=X.dehydrated,X!==null))return X.data==="$!"?s.lanes=16:s.lanes=536870912,null;Ss(s)}return X=m.children,m=m.fallback,y?($s(),y=s.mode,X=im({mode:"hidden",children:X},y),m=cl(m,y,f,null),X.return=s,m.return=s,X.sibling=m,s.child=X,y=s.child,y.memoizedState=aa(f),y.childLanes=jh(r,I,f),s.memoizedState=em,m):(Js(s),nm(s,X))}if(it=r.memoizedState,it!==null&&(X=it.dehydrated,X!==null)){if(T)s.flags&256?(Js(s),s.flags&=-257,s=Kh(r,s,f)):s.memoizedState!==null?($s(),s.child=r.child,s.flags|=128,s=null):($s(),y=m.fallback,X=s.mode,m=im({mode:"visible",children:m.children},X),y=cl(y,X,f,null),y.flags|=2,m.return=s,y.return=s,m.sibling=y,s.child=m,Ks(s,r.child,null,f),m=s.child,m.memoizedState=aa(f),m.childLanes=jh(r,I,f),s.memoizedState=em,s=y);else if(Js(s),X.data==="$!"){if(I=X.nextSibling&&X.nextSibling.dataset,I)var gt=I.dgst;I=gt,m=Error(i(419)),m.stack="",m.digest=I,ys({value:m,source:null,stack:null}),s=Kh(r,s,f)}else if(Qi||mf(r,s,f,!1),I=(f&r.childLanes)!==0,Qi||I){if(I=Qn,I!==null){if(m=f&-f,m&42)m=1;else switch(m){case 2:m=1;break;case 8:m=4;break;case 32:m=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:m=64;break;case 268435456:m=134217728;break;default:m=0}if(m=m&(I.suspendedLanes|f)?0:m,m!==0&&m!==it.retryLane)throw it.retryLane=m,Zs(r,m),Wi(I,r,m),hr}X.data==="$?"||Mf(),s=Kh(r,s,f)}else X.data==="$?"?(s.flags|=128,s.child=r.child,s=ic.bind(null,r),X._reactRetry=s,s=null):(r=it.treeContext,ia=vo(X.nextSibling),_a=s,Cn=!0,Nr=null,Ur=!1,r!==null&&(si[ur++]=_s,si[ur++]=js,si[ur++]=Ws,_s=r.id,js=r.overflow,Ws=s),s=nm(s,m.children),s.flags|=4096);return s}return y?($s(),y=m.fallback,X=s.mode,it=r.child,gt=it.sibling,m=Ba(it,{mode:"hidden",children:m.children}),m.subtreeFlags=it.subtreeFlags&31457280,gt!==null?y=Ba(gt,y):(y=cl(y,X,f,null),y.flags|=2),y.return=s,m.return=s,m.sibling=y,s.child=m,m=y,y=s.child,X=r.child.memoizedState,X===null?X=aa(f):(it=X.cachePool,it!==null?(gt=Di._currentValue,it=it.parent!==gt?{parent:gt,pool:gt}:it):it=eo(),X={baseLanes:X.baseLanes|f,cachePool:it}),y.memoizedState=X,y.childLanes=jh(r,I,f),s.memoizedState=em,m):(Js(s),f=r.child,r=f.sibling,f=Ba(f,{mode:"visible",children:m.children}),f.return=s,f.sibling=null,r!==null&&(I=s.deletions,I===null?(s.deletions=[r],s.flags|=16):I.push(r)),s.child=f,s.memoizedState=null,f)}function nm(r,s){return s=im({mode:"visible",children:s},r.mode),s.return=r,r.child=s}function im(r,s){return sm(r,s,0,null)}function Kh(r,s,f){return Ks(s,r.child,null,f),r=nm(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function Qh(r,s,f){r.lanes|=s;var m=r.alternate;m!==null&&(m.lanes|=s),dr(r.return,s,f)}function el(r,s,f,m,y){var T=r.memoizedState;T===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:m,tail:f,tailMode:y}:(T.isBackwards=s,T.rendering=null,T.renderingStartTime=0,T.last=m,T.tail=f,T.tailMode=y)}function jl(r,s,f){var m=s.pendingProps,y=m.revealOrder,T=m.tail;if(Ji(r,s,m.children,f),m=ki.current,m&2)m=m&1|2,s.flags|=128;else{if(r!==null&&r.flags&128)t:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&Qh(r,f,s);else if(r.tag===19)Qh(r,f,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break t;for(;r.sibling===null;){if(r.return===null||r.return===s)break t;r=r.return}r.sibling.return=r.return,r=r.sibling}m&=1}switch(re(ki,m),y){case"forwards":for(f=s.child,y=null;f!==null;)r=f.alternate,r!==null&&Fc(r)===null&&(y=f),f=f.sibling;f=y,f===null?(y=s.child,s.child=null):(y=f.sibling,f.sibling=null),el(s,!1,y,f,T);break;case"backwards":for(f=null,y=s.child,s.child=null;y!==null;){if(r=y.alternate,r!==null&&Fc(r)===null){s.child=y;break}r=y.sibling,y.sibling=f,f=y,y=r}el(s,!0,f,null,T);break;case"together":el(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Ui(r,s,f){if(r!==null&&(s.dependencies=r.dependencies),os|=s.lanes,!(f&s.childLanes))if(r!==null){if(mf(r,s,f,!1),(f&s.childLanes)===0)return null}else return null;if(r!==null&&s.child!==r.child)throw Error(i(153));if(s.child!==null){for(r=s.child,f=Ba(r,r.pendingProps),s.child=f,f.return=s;r.sibling!==null;)r=r.sibling,f=f.sibling=Ba(r,r.pendingProps),f.return=s;f.sibling=null}return s.child}function am(r,s){return r.lanes&s?!0:(r=r.dependencies,!!(r!==null&&Wc(r)))}function Wx(r,s,f){switch(s.tag){case 3:Me(s,s.stateNode.containerInfo),nl(s,Di,r.memoizedState.cache),Pc();break;case 27:case 5:pe(s);break;case 4:Me(s,s.stateNode.containerInfo);break;case 10:nl(s,s.type,s.memoizedProps.value);break;case 13:var m=s.memoizedState;if(m!==null)return m.dehydrated!==null?(Js(s),s.flags|=128,null):f&s.child.childLanes?Mv(r,s,f):(Js(s),r=Ui(r,s,f),r!==null?r.sibling:null);Js(s);break;case 19:var y=(r.flags&128)!==0;if(m=(f&s.childLanes)!==0,m||(mf(r,s,f,!1),m=(f&s.childLanes)!==0),y){if(m)return jl(r,s,f);s.flags|=128}if(y=s.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),re(ki,ki.current),m)break;return null;case 22:case 23:return s.lanes=0,xv(r,s,f);case 24:nl(s,Di,r.memoizedState.cache)}return Ui(r,s,f)}function pf(r,s,f){if(r!==null)if(r.memoizedProps!==s.pendingProps)Qi=!0;else{if(!am(r,f)&&!(s.flags&128))return Qi=!1,Wx(r,s,f);Qi=!!(r.flags&131072)}else Qi=!1,Cn&&s.flags&1048576&&Dp(s,ef,s.index);switch(s.lanes=0,s.tag){case 16:t:{r=s.pendingProps;var m=s.elementType,y=m._init;if(m=y(m._payload),s.type=m,typeof m=="function")fo(m)?(r=Wl(m,r),s.tag=1,s=bv(null,s,m,r,f)):(s.tag=0,s=$p(null,s,m,r,f));else{if(m!=null){if(y=m.$$typeof,y===E){s.tag=11,s=jp(null,s,m,r,f);break t}else if(y===M){s.tag=14,s=Kp(null,s,m,r,f);break t}}throw s=G(m)||m,Error(i(306,s,""))}}return s;case 0:return $p(r,s,s.type,s.pendingProps,f);case 1:return m=s.type,y=Wl(m,s.pendingProps),bv(r,s,m,y,f);case 3:t:{if(Me(s,s.stateNode.containerInfo),r===null)throw Error(i(387));var T=s.pendingProps;y=s.memoizedState,m=y.element,td(r,s),ns(s,T,null,f);var I=s.memoizedState;if(T=I.cache,nl(s,Di,T),T!==y.cache&&Jh(s,[Di],f,!0),xa(),T=I.element,y.isDehydrated)if(y={element:T,isDehydrated:!1,cache:I.cache},s.updateQueue.baseState=y,s.memoizedState=y,s.flags&256){s=tm(r,s,T,f);break t}else if(T!==m){m=ja(Error(i(424)),s),ys(m),s=tm(r,s,T,f);break t}else for(ia=vo(s.stateNode.containerInfo.firstChild),_a=s,Cn=!0,Nr=null,Ur=!0,f=Qs(s,null,T,f),s.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling;else{if(Pc(),T===m){s=Ui(r,s,f);break t}Ji(r,s,T,f)}s=s.child}return s;case 26:return qc(r,s),r===null?(f=gE(s.type,null,s.pendingProps,null))?s.memoizedState=f:Cn||(f=s.type,r=s.pendingProps,m=Dv(Yt.current).createElement(f),m[fi]=s,m[un]=r,Ha(m,f,r),nt(m),s.stateNode=m):s.memoizedState=gE(s.type,r.memoizedProps,s.pendingProps,r.memoizedState),null;case 27:return pe(s),r===null&&Cn&&(m=s.stateNode=dE(s.type,s.pendingProps,Yt.current),_a=s,Ur=!0,ia=vo(m.firstChild)),m=s.pendingProps.children,r!==null||Cn?Ji(r,s,m,f):s.child=Ks(s,null,m,f),qc(r,s),s.child;case 5:return r===null&&Cn&&((y=m=ia)&&(m=V3(m,s.type,s.pendingProps,Ur),m!==null?(s.stateNode=m,_a=s,ia=vo(m.firstChild),Ur=!1,y=!0):y=!1),y||Fl(s)),pe(s),y=s.type,T=s.pendingProps,I=r!==null?r.memoizedProps:null,m=T.children,r1(y,T)?m=null:I!==null&&r1(y,I)&&(s.flags|=32),s.memoizedState!==null&&(y=zp(r,s,kx,null,null,f),mm._currentValue=y),qc(r,s),Ji(r,s,m,f),s.child;case 6:return r===null&&Cn&&((r=f=ia)&&(f=k3(f,s.pendingProps,Ur),f!==null?(s.stateNode=f,_a=s,ia=null,r=!0):r=!1),r||Fl(s)),null;case 13:return Mv(r,s,f);case 4:return Me(s,s.stateNode.containerInfo),m=s.pendingProps,r===null?s.child=Ks(s,null,m,f):Ji(r,s,m,f),s.child;case 11:return jp(r,s,s.type,s.pendingProps,f);case 7:return Ji(r,s,s.pendingProps,f),s.child;case 8:return Ji(r,s,s.pendingProps.children,f),s.child;case 12:return Ji(r,s,s.pendingProps.children,f),s.child;case 10:return m=s.pendingProps,nl(s,s.type,m.value),Ji(r,s,m.children,f),s.child;case 9:return y=s.type._context,m=s.pendingProps.children,Kl(s),y=ya(y),m=m(y),s.flags|=1,Ji(r,s,m,f),s.child;case 14:return Kp(r,s,s.type,s.pendingProps,f);case 15:return Qp(r,s,s.type,s.pendingProps,f);case 19:return jl(r,s,f);case 22:return xv(r,s,f);case 24:return Kl(s),m=ya(Di),r===null?(y=uf(),y===null&&(y=Qn,T=Op(),y.pooledCache=T,T.refCount++,T!==null&&(y.pooledCacheLanes|=f),y=T),s.memoizedState={parent:m,cache:y},La(s),nl(s,Di,y)):(r.lanes&f&&(td(r,s),ns(s,null,null,f),xa()),y=r.memoizedState,T=s.memoizedState,y.parent!==m?(y={parent:m,cache:m},s.memoizedState=y,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=y),nl(s,Di,m)):(m=T.cache,nl(s,Di,m),m!==y.cache&&Jh(s,[Di],f,!0))),Ji(r,s,s.pendingProps.children,f),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}var Zc=Qt(null),Ts=null,es=null;function nl(r,s,f){re(Zc,s._currentValue),s._currentValue=f}function ro(r){r._currentValue=Zc.current,we(Zc)}function dr(r,s,f){for(;r!==null;){var m=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,m!==null&&(m.childLanes|=s)):m!==null&&(m.childLanes&s)!==s&&(m.childLanes|=s),r===f)break;r=r.return}}function Jh(r,s,f,m){var y=r.child;for(y!==null&&(y.return=r);y!==null;){var T=y.dependencies;if(T!==null){var I=y.child;T=T.firstContext;t:for(;T!==null;){var X=T;T=y;for(var it=0;it<s.length;it++)if(X.context===s[it]){T.lanes|=f,X=T.alternate,X!==null&&(X.lanes|=f),dr(T.return,f,r),m||(I=null);break t}T=X.next}}else if(y.tag===18){if(I=y.return,I===null)throw Error(i(341));I.lanes|=f,T=I.alternate,T!==null&&(T.lanes|=f),dr(I,f,r),I=null}else I=y.child;if(I!==null)I.return=y;else for(I=y;I!==null;){if(I===r){I=null;break}if(y=I.sibling,y!==null){y.return=I.return,I=y;break}I=I.return}y=I}}function mf(r,s,f,m){r=null;for(var y=s,T=!1;y!==null;){if(!T){if(y.flags&524288)T=!0;else if(y.flags&262144)break}if(y.tag===10){var I=y.alternate;if(I===null)throw Error(i(387));if(I=I.memoizedProps,I!==null){var X=y.type;qa(y.pendingProps.value,I.value)||(r!==null?r.push(X):r=[X])}}else if(y===Q.current){if(I=y.alternate,I===null)throw Error(i(387));I.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(r!==null?r.push(mm):r=[mm])}y=y.return}r!==null&&Jh(s,r,f,m),s.flags|=262144}function Wc(r){for(r=r.firstContext;r!==null;){if(!qa(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function Kl(r){Ts=r,es=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function ya(r){return jc(Ts,r)}function $h(r,s){return Ts===null&&Kl(r),jc(r,s)}function jc(r,s){var f=s._currentValue;if(s={context:s,memoizedValue:f,next:null},es===null){if(r===null)throw Error(i(308));es=s,r.dependencies={lanes:0,firstContext:s},r.flags|=524288}else es=es.next=s;return f}var Yi=!1;function La(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function td(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function pr(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function mr(r,s,f){var m=r.updateQueue;if(m===null)return null;if(m=m.shared,en&2){var y=m.pending;return y===null?s.next=s:(s.next=y.next,y.next=s),m.pending=s,s=tf(r),$u(r,null,f),s}return Ju(r,m,s,f),tf(r)}function il(r,s,f){if(s=s.updateQueue,s!==null&&(s=s.shared,(f&4194176)!==0)){var m=s.lanes;m&=r.pendingLanes,f|=m,s.lanes=f,ca(r,f)}}function Kc(r,s){var f=r.updateQueue,m=r.alternate;if(m!==null&&(m=m.updateQueue,f===m)){var y=null,T=null;if(f=f.firstBaseUpdate,f!==null){do{var I={lane:f.lane,tag:f.tag,payload:f.payload,callback:null,next:null};T===null?y=T=I:T=T.next=I,f=f.next}while(f!==null);T===null?y=T=s:T=T.next=s}else y=T=s;f={baseState:m.baseState,firstBaseUpdate:y,lastBaseUpdate:T,shared:m.shared,callbacks:m.callbacks},r.updateQueue=f;return}r=f.lastBaseUpdate,r===null?f.firstBaseUpdate=s:r.next=s,f.lastBaseUpdate=s}var Ja=!1;function xa(){if(Ja){var r=Wo;if(r!==null)throw r}}function ns(r,s,f,m){Ja=!1;var y=r.updateQueue;Yi=!1;var T=y.firstBaseUpdate,I=y.lastBaseUpdate,X=y.shared.pending;if(X!==null){y.shared.pending=null;var it=X,gt=it.next;it.next=null,I===null?T=gt:I.next=gt,I=it;var Zt=r.alternate;Zt!==null&&(Zt=Zt.updateQueue,X=Zt.lastBaseUpdate,X!==I&&(X===null?Zt.firstBaseUpdate=gt:X.next=gt,Zt.lastBaseUpdate=it))}if(T!==null){var ie=y.baseState;I=0,Zt=gt=it=null,X=T;do{var Ut=X.lane&-536870913,Vt=Ut!==X.lane;if(Vt?(qe&Ut)===Ut:(m&Ut)===Ut){Ut!==0&&Ut===kl&&(Ja=!0),Zt!==null&&(Zt=Zt.next={lane:0,tag:X.tag,payload:X.payload,callback:null,next:null});t:{var Ve=r,ln=X;Ut=s;var ji=f;switch(ln.tag){case 1:if(Ve=ln.payload,typeof Ve=="function"){ie=Ve.call(ji,ie,Ut);break t}ie=Ve;break t;case 3:Ve.flags=Ve.flags&-65537|128;case 0:if(Ve=ln.payload,Ut=typeof Ve=="function"?Ve.call(ji,ie,Ut):Ve,Ut==null)break t;ie=O({},ie,Ut);break t;case 2:Yi=!0}}Ut=X.callback,Ut!==null&&(r.flags|=64,Vt&&(r.flags|=8192),Vt=y.callbacks,Vt===null?y.callbacks=[Ut]:Vt.push(Ut))}else Vt={lane:Ut,tag:X.tag,payload:X.payload,callback:X.callback,next:null},Zt===null?(gt=Zt=Vt,it=ie):Zt=Zt.next=Vt,I|=Ut;if(X=X.next,X===null){if(X=y.shared.pending,X===null)break;Vt=X,X=Vt.next,Vt.next=null,y.lastBaseUpdate=Vt,y.shared.pending=null}}while(!0);Zt===null&&(it=ie),y.baseState=it,y.firstBaseUpdate=gt,y.lastBaseUpdate=Zt,T===null&&(y.shared.lanes=0),os|=I,r.lanes=I,r.memoizedState=ie}}function As(r,s){if(typeof r!="function")throw Error(i(191,r));r.call(s)}function ws(r,s){var f=r.callbacks;if(f!==null)for(r.callbacks=null,r=0;r<f.length;r++)As(f[r],s)}function Oi(r,s){try{var f=s.updateQueue,m=f!==null?f.lastEffect:null;if(m!==null){var y=m.next;f=y;do{if((f.tag&r)===r){m=void 0;var T=f.create,I=f.inst;m=T(),I.destroy=m}f=f.next}while(f!==y)}}catch(X){ce(s,s.return,X)}}function Or(r,s,f){try{var m=s.updateQueue,y=m!==null?m.lastEffect:null;if(y!==null){var T=y.next;m=T;do{if((m.tag&r)===r){var I=m.inst,X=I.destroy;if(X!==void 0){I.destroy=void 0,y=s;var it=f;try{X()}catch(gt){ce(y,it,gt)}}}m=m.next}while(m!==T)}}catch(gt){ce(s,s.return,gt)}}function so(r){var s=r.updateQueue;if(s!==null){var f=r.stateNode;try{ws(s,f)}catch(m){ce(r,r.return,m)}}}function gf(r,s,f){f.props=Wl(r.type,r.memoizedProps),f.state=r.memoizedState;try{f.componentWillUnmount()}catch(m){ce(r,s,m)}}function Li(r,s){try{var f=r.ref;if(f!==null){var m=r.stateNode;switch(r.tag){case 26:case 27:case 5:var y=m;break;default:y=m}typeof f=="function"?r.refCleanup=f(y):f.current=y}}catch(T){ce(r,s,T)}}function Kn(r,s){var f=r.ref,m=r.refCleanup;if(f!==null)if(typeof m=="function")try{m()}catch(y){ce(r,s,y)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof f=="function")try{f(null)}catch(y){ce(r,s,y)}else f.current=null}function Dn(r){var s=r.type,f=r.memoizedProps,m=r.stateNode;try{t:switch(s){case"button":case"input":case"select":case"textarea":f.autoFocus&&m.focus();break t;case"img":f.src?m.src=f.src:f.srcSet&&(m.srcset=f.srcSet)}}catch(y){ce(r,r.return,y)}}function Lr(r,s,f){try{var m=r.stateNode;I3(m,r.type,f,s),m[un]=s}catch(y){ce(r,r.return,y)}}function is(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27||r.tag===4}function vf(r){t:for(;;){for(;r.sibling===null;){if(r.return===null||is(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==27&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue t;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function $a(r,s,f){var m=r.tag;if(m===5||m===6)r=r.stateNode,s?f.nodeType===8?f.parentNode.insertBefore(r,s):f.insertBefore(r,s):(f.nodeType===8?(s=f.parentNode,s.insertBefore(r,f)):(s=f,s.appendChild(r)),f=f._reactRootContainer,f!=null||s.onclick!==null||(s.onclick=Cv));else if(m!==4&&m!==27&&(r=r.child,r!==null))for($a(r,s,f),r=r.sibling;r!==null;)$a(r,s,f),r=r.sibling}function oo(r,s,f){var m=r.tag;if(m===5||m===6)r=r.stateNode,s?f.insertBefore(r,s):f.appendChild(r);else if(m!==4&&m!==27&&(r=r.child,r!==null))for(oo(r,s,f),r=r.sibling;r!==null;)oo(r,s,f),r=r.sibling}var as=!1,hi=!1,al=!1,ed=typeof WeakSet=="function"?WeakSet:Set,zi=null,nd=!1;function Qc(r,s){if(r=r.containerInfo,i1=Bv,r=Ep(r),Ku(r)){if("selectionStart"in r)var f={start:r.selectionStart,end:r.selectionEnd};else t:{f=(f=r.ownerDocument)&&f.defaultView||window;var m=f.getSelection&&f.getSelection();if(m&&m.rangeCount!==0){f=m.anchorNode;var y=m.anchorOffset,T=m.focusNode;m=m.focusOffset;try{f.nodeType,T.nodeType}catch{f=null;break t}var I=0,X=-1,it=-1,gt=0,Zt=0,ie=r,Ut=null;e:for(;;){for(var Vt;ie!==f||y!==0&&ie.nodeType!==3||(X=I+y),ie!==T||m!==0&&ie.nodeType!==3||(it=I+m),ie.nodeType===3&&(I+=ie.nodeValue.length),(Vt=ie.firstChild)!==null;)Ut=ie,ie=Vt;for(;;){if(ie===r)break e;if(Ut===f&&++gt===y&&(X=I),Ut===T&&++Zt===m&&(it=I),(Vt=ie.nextSibling)!==null)break;ie=Ut,Ut=ie.parentNode}ie=Vt}f=X===-1||it===-1?null:{start:X,end:it}}else f=null}f=f||{start:0,end:0}}else f=null;for(a1={focusedElem:r,selectionRange:f},Bv=!1,zi=s;zi!==null;)if(s=zi,r=s.child,(s.subtreeFlags&1028)!==0&&r!==null)r.return=s,zi=r;else for(;zi!==null;){switch(s=zi,T=s.alternate,r=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if(r&1024&&T!==null){r=void 0,f=s,y=T.memoizedProps,T=T.memoizedState,m=f.stateNode;try{var Ve=Wl(f.type,y,f.elementType===f.type);r=m.getSnapshotBeforeUpdate(Ve,T),m.__reactInternalSnapshotBeforeUpdate=r}catch(ln){ce(f,f.return,ln)}}break;case 3:if(r&1024){if(r=s.stateNode.containerInfo,f=r.nodeType,f===9)l1(r);else if(f===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":l1(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(r&1024)throw Error(i(163))}if(r=s.sibling,r!==null){r.return=s.return,zi=r;break}zi=s.return}return Ve=nd,nd=!1,Ve}function Jc(r,s,f){var m=f.flags;switch(f.tag){case 0:case 11:case 15:Rs(r,f),m&4&&Oi(5,f);break;case 1:if(Rs(r,f),m&4)if(r=f.stateNode,s===null)try{r.componentDidMount()}catch(X){ce(f,f.return,X)}else{var y=Wl(f.type,s.memoizedProps);s=s.memoizedState;try{r.componentDidUpdate(y,s,r.__reactInternalSnapshotBeforeUpdate)}catch(X){ce(f,f.return,X)}}m&64&&so(f),m&512&&Li(f,f.return);break;case 3:if(Rs(r,f),m&64&&(m=f.updateQueue,m!==null)){if(r=null,f.child!==null)switch(f.child.tag){case 27:case 5:r=f.child.stateNode;break;case 1:r=f.child.stateNode}try{ws(m,r)}catch(X){ce(f,f.return,X)}}break;case 26:Rs(r,f),m&512&&Li(f,f.return);break;case 27:case 5:Rs(r,f),s===null&&m&4&&Dn(f),m&512&&Li(f,f.return);break;case 12:Rs(r,f);break;case 13:Rs(r,f),m&4&&Ev(r,f);break;case 22:if(y=f.memoizedState!==null||as,!y){s=s!==null&&s.memoizedState!==null||hi;var T=as,I=hi;as=y,(hi=s)&&!I?ss(r,f,(f.subtreeFlags&8772)!==0):Rs(r,f),as=T,hi=I}m&512&&(f.memoizedProps.mode==="manual"?Li(f,f.return):Kn(f,f.return));break;default:Rs(r,f)}}function id(r){var s=r.alternate;s!==null&&(r.alternate=null,id(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&ue(s)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var di=null,ra=!1;function Sa(r,s,f){for(f=f.child;f!==null;)ad(r,s,f),f=f.sibling}function ad(r,s,f){if(me&&typeof me.onCommitFiberUnmount=="function")try{me.onCommitFiberUnmount(Ce,f)}catch{}switch(f.tag){case 26:hi||Kn(f,s),Sa(r,s,f),f.memoizedState?f.memoizedState.count--:f.stateNode&&(f=f.stateNode,f.parentNode.removeChild(f));break;case 27:hi||Kn(f,s);var m=di,y=ra;for(di=f.stateNode,Sa(r,s,f),f=f.stateNode,s=f.attributes;s.length;)f.removeAttributeNode(s[0]);ue(f),di=m,ra=y;break;case 5:hi||Kn(f,s);case 6:y=di;var T=ra;if(di=null,Sa(r,s,f),di=y,ra=T,di!==null)if(ra)try{r=di,m=f.stateNode,r.nodeType===8?r.parentNode.removeChild(m):r.removeChild(m)}catch(I){ce(f,s,I)}else try{di.removeChild(f.stateNode)}catch(I){ce(f,s,I)}break;case 18:di!==null&&(ra?(s=di,f=f.stateNode,s.nodeType===8?o1(s.parentNode,f):s.nodeType===1&&o1(s,f),ym(s)):o1(di,f.stateNode));break;case 4:m=di,y=ra,di=f.stateNode.containerInfo,ra=!0,Sa(r,s,f),di=m,ra=y;break;case 0:case 11:case 14:case 15:hi||Or(2,f,s),hi||Or(4,f,s),Sa(r,s,f);break;case 1:hi||(Kn(f,s),m=f.stateNode,typeof m.componentWillUnmount=="function"&&gf(f,s,m)),Sa(r,s,f);break;case 21:Sa(r,s,f);break;case 22:hi||Kn(f,s),hi=(m=hi)||f.memoizedState!==null,Sa(r,s,f),hi=m;break;default:Sa(r,s,f)}}function Ev(r,s){if(s.memoizedState===null&&(r=s.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{ym(r)}catch(f){ce(s,s.return,f)}}function _f(r){switch(r.tag){case 13:case 19:var s=r.stateNode;return s===null&&(s=r.stateNode=new ed),s;case 22:return r=r.stateNode,s=r._retryCache,s===null&&(s=r._retryCache=new ed),s;default:throw Error(i(435,r.tag))}}function yf(r,s){var f=_f(r);s.forEach(function(m){var y=At.bind(null,r,m);f.has(m)||(f.add(m),m.then(y,y))})}function za(r,s){var f=s.deletions;if(f!==null)for(var m=0;m<f.length;m++){var y=f[m],T=r,I=s,X=I;t:for(;X!==null;){switch(X.tag){case 27:case 5:di=X.stateNode,ra=!1;break t;case 3:di=X.stateNode.containerInfo,ra=!0;break t;case 4:di=X.stateNode.containerInfo,ra=!0;break t}X=X.return}if(di===null)throw Error(i(160));ad(T,I,y),di=null,ra=!1,T=y.alternate,T!==null&&(T.return=null),y.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)Ql(s,r),s=s.sibling}var ba=null;function Ql(r,s){var f=r.alternate,m=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:za(s,r),Ma(r),m&4&&(Or(3,r,r.return),Oi(3,r),Or(5,r,r.return));break;case 1:za(s,r),Ma(r),m&512&&(hi||f===null||Kn(f,f.return)),m&64&&as&&(r=r.updateQueue,r!==null&&(m=r.callbacks,m!==null&&(f=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=f===null?m:f.concat(m))));break;case 26:var y=ba;if(za(s,r),Ma(r),m&512&&(hi||f===null||Kn(f,f.return)),m&4){var T=f!==null?f.memoizedState:null;if(m=r.memoizedState,f===null)if(m===null)if(r.stateNode===null){t:{m=r.type,f=r.memoizedProps,y=y.ownerDocument||y;e:switch(m){case"title":T=y.getElementsByTagName("title")[0],(!T||T[Bt]||T[fi]||T.namespaceURI==="http://www.w3.org/2000/svg"||T.hasAttribute("itemprop"))&&(T=y.createElement(m),y.head.insertBefore(T,y.querySelector("head > title"))),Ha(T,m,f),T[fi]=r,nt(T),m=T;break t;case"link":var I=yE("link","href",y).get(m+(f.href||""));if(I){for(var X=0;X<I.length;X++)if(T=I[X],T.getAttribute("href")===(f.href==null?null:f.href)&&T.getAttribute("rel")===(f.rel==null?null:f.rel)&&T.getAttribute("title")===(f.title==null?null:f.title)&&T.getAttribute("crossorigin")===(f.crossOrigin==null?null:f.crossOrigin)){I.splice(X,1);break e}}T=y.createElement(m),Ha(T,m,f),y.head.appendChild(T);break;case"meta":if(I=yE("meta","content",y).get(m+(f.content||""))){for(X=0;X<I.length;X++)if(T=I[X],T.getAttribute("content")===(f.content==null?null:""+f.content)&&T.getAttribute("name")===(f.name==null?null:f.name)&&T.getAttribute("property")===(f.property==null?null:f.property)&&T.getAttribute("http-equiv")===(f.httpEquiv==null?null:f.httpEquiv)&&T.getAttribute("charset")===(f.charSet==null?null:f.charSet)){I.splice(X,1);break e}}T=y.createElement(m),Ha(T,m,f),y.head.appendChild(T);break;default:throw Error(i(468,m))}T[fi]=r,nt(T),m=T}r.stateNode=m}else xE(y,r.type,r.stateNode);else r.stateNode=_E(y,m,r.memoizedProps);else T!==m?(T===null?f.stateNode!==null&&(f=f.stateNode,f.parentNode.removeChild(f)):T.count--,m===null?xE(y,r.type,r.stateNode):_E(y,m,r.memoizedProps)):m===null&&r.stateNode!==null&&Lr(r,r.memoizedProps,f.memoizedProps)}break;case 27:if(m&4&&r.alternate===null){y=r.stateNode,T=r.memoizedProps;try{for(var it=y.firstChild;it;){var gt=it.nextSibling,Zt=it.nodeName;it[Bt]||Zt==="HEAD"||Zt==="BODY"||Zt==="SCRIPT"||Zt==="STYLE"||Zt==="LINK"&&it.rel.toLowerCase()==="stylesheet"||y.removeChild(it),it=gt}for(var ie=r.type,Ut=y.attributes;Ut.length;)y.removeAttributeNode(Ut[0]);Ha(y,ie,T),y[fi]=r,y[un]=T}catch(Ve){ce(r,r.return,Ve)}}case 5:if(za(s,r),Ma(r),m&512&&(hi||f===null||Kn(f,f.return)),r.flags&32){y=r.stateNode;try{Da(y,"")}catch(Ve){ce(r,r.return,Ve)}}m&4&&r.stateNode!=null&&(y=r.memoizedProps,Lr(r,y,f!==null?f.memoizedProps:y)),m&1024&&(al=!0);break;case 6:if(za(s,r),Ma(r),m&4){if(r.stateNode===null)throw Error(i(162));m=r.memoizedProps,f=r.stateNode;try{f.nodeValue=m}catch(Ve){ce(r,r.return,Ve)}}break;case 3:if(Ov=null,y=ba,ba=Nv(s.containerInfo),za(s,r),ba=y,Ma(r),m&4&&f!==null&&f.memoizedState.isDehydrated)try{ym(s.containerInfo)}catch(Ve){ce(r,r.return,Ve)}al&&(al=!1,rl(r));break;case 4:m=ba,ba=Nv(r.stateNode.containerInfo),za(s,r),Ma(r),ba=m;break;case 12:za(s,r),Ma(r);break;case 13:za(s,r),Ma(r),r.child.flags&8192&&r.memoizedState!==null!=(f!==null&&f.memoizedState!==null)&&(vn=Pt()),m&4&&(m=r.updateQueue,m!==null&&(r.updateQueue=null,yf(r,m)));break;case 22:if(m&512&&(hi||f===null||Kn(f,f.return)),it=r.memoizedState!==null,gt=f!==null&&f.memoizedState!==null,Zt=as,ie=hi,as=Zt||it,hi=ie||gt,za(s,r),hi=ie,as=Zt,Ma(r),s=r.stateNode,s._current=r,s._visibility&=-3,s._visibility|=s._pendingVisibility&2,m&8192&&(s._visibility=it?s._visibility&-2:s._visibility|1,it&&(s=as||hi,f===null||gt||s||rs(r)),r.memoizedProps===null||r.memoizedProps.mode!=="manual"))t:for(f=null,s=r;;){if(s.tag===5||s.tag===26||s.tag===27){if(f===null){gt=f=s;try{if(y=gt.stateNode,it)T=y.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{I=gt.stateNode,X=gt.memoizedProps.style;var Vt=X!=null&&X.hasOwnProperty("display")?X.display:null;I.style.display=Vt==null||typeof Vt=="boolean"?"":(""+Vt).trim()}}catch(Ve){ce(gt,gt.return,Ve)}}}else if(s.tag===6){if(f===null){gt=s;try{gt.stateNode.nodeValue=it?"":gt.memoizedProps}catch(Ve){ce(gt,gt.return,Ve)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===r)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break t;for(;s.sibling===null;){if(s.return===null||s.return===r)break t;f===s&&(f=null),s=s.return}f===s&&(f=null),s.sibling.return=s.return,s=s.sibling}m&4&&(m=r.updateQueue,m!==null&&(f=m.retryQueue,f!==null&&(m.retryQueue=null,yf(r,f))));break;case 19:za(s,r),Ma(r),m&4&&(m=r.updateQueue,m!==null&&(r.updateQueue=null,yf(r,m)));break;case 21:break;default:za(s,r),Ma(r)}}function Ma(r){var s=r.flags;if(s&2){try{if(r.tag!==27){t:{for(var f=r.return;f!==null;){if(is(f)){var m=f;break t}f=f.return}throw Error(i(160))}switch(m.tag){case 27:var y=m.stateNode,T=vf(r);oo(r,T,y);break;case 5:var I=m.stateNode;m.flags&32&&(Da(I,""),m.flags&=-33);var X=vf(r);oo(r,X,I);break;case 3:case 4:var it=m.stateNode.containerInfo,gt=vf(r);$a(r,gt,it);break;default:throw Error(i(161))}}}catch(Zt){ce(r,r.return,Zt)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function rl(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var s=r;rl(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),r=r.sibling}}function Rs(r,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)Jc(r,s.alternate,s),s=s.sibling}function rs(r){for(r=r.child;r!==null;){var s=r;switch(s.tag){case 0:case 11:case 14:case 15:Or(4,s,s.return),rs(s);break;case 1:Kn(s,s.return);var f=s.stateNode;typeof f.componentWillUnmount=="function"&&gf(s,s.return,f),rs(s);break;case 26:case 27:case 5:Kn(s,s.return),rs(s);break;case 22:Kn(s,s.return),s.memoizedState===null&&rs(s);break;default:rs(s)}r=r.sibling}}function ss(r,s,f){for(f=f&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var m=s.alternate,y=r,T=s,I=T.flags;switch(T.tag){case 0:case 11:case 15:ss(y,T,f),Oi(4,T);break;case 1:if(ss(y,T,f),m=T,y=m.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(gt){ce(m,m.return,gt)}if(m=T,y=m.updateQueue,y!==null){var X=m.stateNode;try{var it=y.shared.hiddenCallbacks;if(it!==null)for(y.shared.hiddenCallbacks=null,y=0;y<it.length;y++)As(it[y],X)}catch(gt){ce(m,m.return,gt)}}f&&I&64&&so(T),Li(T,T.return);break;case 26:case 27:case 5:ss(y,T,f),f&&m===null&&I&4&&Dn(T),Li(T,T.return);break;case 12:ss(y,T,f);break;case 13:ss(y,T,f),f&&I&4&&Ev(y,T);break;case 22:T.memoizedState===null&&ss(y,T,f),Li(T,T.return);break;default:ss(y,T,f)}s=s.sibling}}function tr(r,s){var f=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(f=r.memoizedState.cachePool.pool),r=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(r=s.memoizedState.cachePool.pool),r!==f&&(r!=null&&r.refCount++,f!=null&&qo(f))}function zr(r,s){r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&qo(r))}function oi(r,s,f,m){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)lo(r,s,f,m),s=s.sibling}function lo(r,s,f,m){var y=s.flags;switch(s.tag){case 0:case 11:case 15:oi(r,s,f,m),y&2048&&Oi(9,s);break;case 3:oi(r,s,f,m),y&2048&&(r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&qo(r)));break;case 12:if(y&2048){oi(r,s,f,m),r=s.stateNode;try{var T=s.memoizedProps,I=T.id,X=T.onPostCommit;typeof X=="function"&&X(I,s.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(it){ce(s,s.return,it)}}else oi(r,s,f,m);break;case 23:break;case 22:T=s.stateNode,s.memoizedState!==null?T._visibility&4?oi(r,s,f,m):Ln(r,s):T._visibility&4?oi(r,s,f,m):(T._visibility|=4,tn(r,s,f,m,(s.subtreeFlags&10256)!==0)),y&2048&&tr(s.alternate,s);break;case 24:oi(r,s,f,m),y&2048&&zr(s.alternate,s);break;default:oi(r,s,f,m)}}function tn(r,s,f,m,y){for(y=y&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var T=r,I=s,X=f,it=m,gt=I.flags;switch(I.tag){case 0:case 11:case 15:tn(T,I,X,it,y),Oi(8,I);break;case 23:break;case 22:var Zt=I.stateNode;I.memoizedState!==null?Zt._visibility&4?tn(T,I,X,it,y):Ln(T,I):(Zt._visibility|=4,tn(T,I,X,it,y)),y&&gt&2048&&tr(I.alternate,I);break;case 24:tn(T,I,X,it,y),y&&gt&2048&&zr(I.alternate,I);break;default:tn(T,I,X,it,y)}s=s.sibling}}function Ln(r,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var f=r,m=s,y=m.flags;switch(m.tag){case 22:Ln(f,m),y&2048&&tr(m.alternate,m);break;case 24:Ln(f,m),y&2048&&zr(m.alternate,m);break;default:Ln(f,m)}s=s.sibling}}var xi=8192;function co(r){if(r.subtreeFlags&xi)for(r=r.child;r!==null;)Jl(r),r=r.sibling}function Jl(r){switch(r.tag){case 26:co(r),r.flags&xi&&r.memoizedState!==null&&nD(ba,r.memoizedState,r.memoizedProps);break;case 5:co(r);break;case 3:case 4:var s=ba;ba=Nv(r.stateNode.containerInfo),co(r),ba=s;break;case 22:r.memoizedState===null&&(s=r.alternate,s!==null&&s.memoizedState!==null?(s=xi,xi=16777216,co(r),xi=s):co(r));break;default:co(r)}}function sl(r){var s=r.alternate;if(s!==null&&(r=s.child,r!==null)){s.child=null;do s=r.sibling,r.sibling=null,r=s;while(r!==null)}}function ol(r){var s=r.deletions;if(r.flags&16){if(s!==null)for(var f=0;f<s.length;f++){var m=s[f];zi=m,Tv(m,r)}sl(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)$c(r),r=r.sibling}function $c(r){switch(r.tag){case 0:case 11:case 15:ol(r),r.flags&2048&&Or(9,r,r.return);break;case 3:ol(r);break;case 12:ol(r);break;case 22:var s=r.stateNode;r.memoizedState!==null&&s._visibility&4&&(r.return===null||r.return.tag!==13)?(s._visibility&=-5,uo(r)):ol(r);break;default:ol(r)}}function uo(r){var s=r.deletions;if(r.flags&16){if(s!==null)for(var f=0;f<s.length;f++){var m=s[f];zi=m,Tv(m,r)}sl(r)}for(r=r.child;r!==null;){switch(s=r,s.tag){case 0:case 11:case 15:Or(8,s,s.return),uo(s);break;case 22:f=s.stateNode,f._visibility&4&&(f._visibility&=-5,uo(s));break;default:uo(s)}r=r.sibling}}function Tv(r,s){for(;zi!==null;){var f=zi;switch(f.tag){case 0:case 11:case 15:Or(8,f,s);break;case 23:case 22:if(f.memoizedState!==null&&f.memoizedState.cachePool!==null){var m=f.memoizedState.cachePool.pool;m!=null&&m.refCount++}break;case 24:qo(f.memoizedState.cache)}if(m=f.child,m!==null)m.return=f,zi=m;else t:for(f=r;zi!==null;){m=zi;var y=m.sibling,T=m.return;if(id(m),m===f){zi=null;break t}if(y!==null){y.return=T,zi=y;break t}zi=T}}}function rm(r,s,f,m){this.tag=r,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bi(r,s,f,m){return new rm(r,s,f,m)}function fo(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Ba(r,s){var f=r.alternate;return f===null?(f=Bi(r.tag,s,r.key,r.mode),f.elementType=r.elementType,f.type=r.type,f.stateNode=r.stateNode,f.alternate=r,r.alternate=f):(f.pendingProps=s,f.type=r.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=r.flags&31457280,f.childLanes=r.childLanes,f.lanes=r.lanes,f.child=r.child,f.memoizedProps=r.memoizedProps,f.memoizedState=r.memoizedState,f.updateQueue=r.updateQueue,s=r.dependencies,f.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},f.sibling=r.sibling,f.index=r.index,f.ref=r.ref,f.refCleanup=r.refCleanup,f}function ll(r,s){r.flags&=31457282;var f=r.alternate;return f===null?(r.childLanes=0,r.lanes=s,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=f.childLanes,r.lanes=f.lanes,r.child=f.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=f.memoizedProps,r.memoizedState=f.memoizedState,r.updateQueue=f.updateQueue,r.type=f.type,s=f.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),r}function tu(r,s,f,m,y,T){var I=0;if(m=r,typeof r=="function")fo(r)&&(I=1);else if(typeof r=="string")I=tD(r,f,ke.current)?26:r==="html"||r==="head"||r==="body"?27:5;else t:switch(r){case d:return cl(f.children,y,T,s);case p:I=8,y|=24;break;case v:return r=Bi(12,f,s,y|2),r.elementType=v,r.lanes=T,r;case R:return r=Bi(13,f,s,y),r.elementType=R,r.lanes=T,r;case w:return r=Bi(19,f,s,y),r.elementType=w,r.lanes=T,r;case U:return sm(f,y,T,s);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case _:case b:I=10;break t;case x:I=9;break t;case E:I=11;break t;case M:I=14;break t;case C:I=16,m=null;break t}I=29,f=Error(i(130,r===null?"null":typeof r,"")),m=null}return s=Bi(I,f,s,y),s.elementType=r,s.type=m,s.lanes=T,s}function cl(r,s,f,m){return r=Bi(7,r,m,s),r.lanes=f,r}function sm(r,s,f,m){r=Bi(22,r,m,s),r.elementType=U,r.lanes=f;var y={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var T=y._current;if(T===null)throw Error(i(456));if(!(y._pendingVisibility&2)){var I=Zs(T,2);I!==null&&(y._pendingVisibility|=2,Wi(I,T,2))}},attach:function(){var T=y._current;if(T===null)throw Error(i(456));if(y._pendingVisibility&2){var I=Zs(T,2);I!==null&&(y._pendingVisibility&=-3,Wi(I,T,2))}}};return r.stateNode=y,r}function qi(r,s,f){return r=Bi(6,r,null,s),r.lanes=f,r}function xf(r,s,f){return s=Bi(4,r.children!==null?r.children:[],r.key,s),s.lanes=f,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}function Br(r){r.flags|=4}function ul(r,s){if(s.type!=="stylesheet"||s.state.loading&4)r.flags&=-16777217;else if(r.flags|=16777216,!SE(s)){if(s=Ka.current,s!==null&&((qe&4194176)===qe?xs!==null:(qe&62914560)!==qe&&!(qe&536870912)||s!==xs))throw Hc=zh,Np;r.flags|=8192}}function Ir(r,s){s!==null&&(r.flags|=4),r.flags&16384&&(s=r.tag!==22?rn():536870912,r.lanes|=s,Ds|=s)}function Sf(r,s){if(!Cn)switch(r.tailMode){case"hidden":s=r.tail;for(var f=null;s!==null;)s.alternate!==null&&(f=s),s=s.sibling;f===null?r.tail=null:f.sibling=null;break;case"collapsed":f=r.tail;for(var m=null;f!==null;)f.alternate!==null&&(m=f),f=f.sibling;m===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:m.sibling=null}}function Mi(r){var s=r.alternate!==null&&r.alternate.child===r.child,f=0,m=0;if(s)for(var y=r.child;y!==null;)f|=y.lanes|y.childLanes,m|=y.subtreeFlags&31457280,m|=y.flags&31457280,y.return=r,y=y.sibling;else for(y=r.child;y!==null;)f|=y.lanes|y.childLanes,m|=y.subtreeFlags,m|=y.flags,y.return=r,y=y.sibling;return r.subtreeFlags|=m,r.childLanes=f,s}function jx(r,s,f){var m=s.pendingProps;switch(Go(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Mi(s),null;case 1:return Mi(s),null;case 3:return f=s.stateNode,m=null,r!==null&&(m=r.memoizedState.cache),s.memoizedState.cache!==m&&(s.flags|=2048),ro(Di),ee(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(r===null||r.child===null)&&(Ic(s)?Br(s):r===null||r.memoizedState.isDehydrated&&!(s.flags&256)||(s.flags|=1024,Nr!==null&&(Gr(Nr),Nr=null))),Mi(s),null;case 26:return f=s.memoizedState,r===null?(Br(s),f!==null?(Mi(s),ul(s,f)):(Mi(s),s.flags&=-16777217)):f?f!==r.memoizedState?(Br(s),Mi(s),ul(s,f)):(Mi(s),s.flags&=-16777217):(r.memoizedProps!==m&&Br(s),Mi(s),s.flags&=-16777217),null;case 27:se(s),f=Yt.current;var y=s.type;if(r!==null&&s.stateNode!=null)r.memoizedProps!==m&&Br(s);else{if(!m){if(s.stateNode===null)throw Error(i(166));return Mi(s),null}r=ke.current,Ic(s)?Og(s):(r=dE(y,m,f),s.stateNode=r,Br(s))}return Mi(s),null;case 5:if(se(s),f=s.type,r!==null&&s.stateNode!=null)r.memoizedProps!==m&&Br(s);else{if(!m){if(s.stateNode===null)throw Error(i(166));return Mi(s),null}if(r=ke.current,Ic(s))Og(s);else{switch(y=Dv(Yt.current),r){case 1:r=y.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:r=y.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":r=y.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":r=y.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":r=y.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof m.is=="string"?y.createElement("select",{is:m.is}):y.createElement("select"),m.multiple?r.multiple=!0:m.size&&(r.size=m.size);break;default:r=typeof m.is=="string"?y.createElement(f,{is:m.is}):y.createElement(f)}}r[fi]=s,r[un]=m;t:for(y=s.child;y!==null;){if(y.tag===5||y.tag===6)r.appendChild(y.stateNode);else if(y.tag!==4&&y.tag!==27&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===s)break t;for(;y.sibling===null;){if(y.return===null||y.return===s)break t;y=y.return}y.sibling.return=y.return,y=y.sibling}s.stateNode=r;t:switch(Ha(r,f,m),f){case"button":case"input":case"select":case"textarea":r=!!m.autoFocus;break t;case"img":r=!0;break t;default:r=!1}r&&Br(s)}}return Mi(s),s.flags&=-16777217,null;case 6:if(r&&s.stateNode!=null)r.memoizedProps!==m&&Br(s);else{if(typeof m!="string"&&s.stateNode===null)throw Error(i(166));if(r=Yt.current,Ic(s)){if(r=s.stateNode,f=s.memoizedProps,m=null,y=_a,y!==null)switch(y.tag){case 27:case 5:m=y.memoizedProps}r[fi]=s,r=!!(r.nodeValue===f||m!==null&&m.suppressHydrationWarning===!0||oE(r.nodeValue,f)),r||Fl(s)}else r=Dv(r).createTextNode(m),r[fi]=s,s.stateNode=r}return Mi(s),null;case 13:if(m=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(y=Ic(s),m!==null&&m.dehydrated!==null){if(r===null){if(!y)throw Error(i(318));if(y=s.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(i(317));y[fi]=s}else Pc(),!(s.flags&128)&&(s.memoizedState=null),s.flags|=4;Mi(s),y=!1}else Nr!==null&&(Gr(Nr),Nr=null),y=!0;if(!y)return s.flags&256?(Ss(s),s):(Ss(s),null)}if(Ss(s),s.flags&128)return s.lanes=f,s;if(f=m!==null,r=r!==null&&r.memoizedState!==null,f){m=s.child,y=null,m.alternate!==null&&m.alternate.memoizedState!==null&&m.alternate.memoizedState.cachePool!==null&&(y=m.alternate.memoizedState.cachePool.pool);var T=null;m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(T=m.memoizedState.cachePool.pool),T!==y&&(m.flags|=2048)}return f!==r&&f&&(s.child.flags|=8192),Ir(s,s.updateQueue),Mi(s),null;case 4:return ee(),r===null&&t1(s.stateNode.containerInfo),Mi(s),null;case 10:return ro(s.type),Mi(s),null;case 19:if(we(ki),y=s.memoizedState,y===null)return Mi(s),null;if(m=(s.flags&128)!==0,T=y.rendering,T===null)if(m)Sf(y,!1);else{if(pi!==0||r!==null&&r.flags&128)for(r=s.child;r!==null;){if(T=Fc(r),T!==null){for(s.flags|=128,Sf(y,!1),r=T.updateQueue,s.updateQueue=r,Ir(s,r),s.subtreeFlags=0,r=f,f=s.child;f!==null;)ll(f,r),f=f.sibling;return re(ki,ki.current&1|2),s.child}r=r.sibling}y.tail!==null&&Pt()>An&&(s.flags|=128,m=!0,Sf(y,!1),s.lanes=4194304)}else{if(!m)if(r=Fc(T),r!==null){if(s.flags|=128,m=!0,r=r.updateQueue,s.updateQueue=r,Ir(s,r),Sf(y,!0),y.tail===null&&y.tailMode==="hidden"&&!T.alternate&&!Cn)return Mi(s),null}else 2*Pt()-y.renderingStartTime>An&&f!==536870912&&(s.flags|=128,m=!0,Sf(y,!1),s.lanes=4194304);y.isBackwards?(T.sibling=s.child,s.child=T):(r=y.last,r!==null?r.sibling=T:s.child=T,y.last=T)}return y.tail!==null?(s=y.tail,y.rendering=s,y.tail=s.sibling,y.renderingStartTime=Pt(),s.sibling=null,r=ki.current,re(ki,m?r&1|2:r&1),s):(Mi(s),null);case 22:case 23:return Ss(s),cf(),m=s.memoizedState!==null,r!==null?r.memoizedState!==null!==m&&(s.flags|=8192):m&&(s.flags|=8192),m?f&536870912&&!(s.flags&128)&&(Mi(s),s.subtreeFlags&6&&(s.flags|=8192)):Mi(s),f=s.updateQueue,f!==null&&Ir(s,f.retryQueue),f=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(f=r.memoizedState.cachePool.pool),m=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(m=s.memoizedState.cachePool.pool),m!==f&&(s.flags|=2048),r!==null&&we(to),null;case 24:return f=null,r!==null&&(f=r.memoizedState.cache),s.memoizedState.cache!==f&&(s.flags|=2048),ro(Di),Mi(s),null;case 25:return null}throw Error(i(156,s.tag))}function Ai(r,s){switch(Go(s),s.tag){case 1:return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return ro(Di),ee(),r=s.flags,r&65536&&!(r&128)?(s.flags=r&-65537|128,s):null;case 26:case 27:case 5:return se(s),null;case 13:if(Ss(s),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(i(340));Pc()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return we(ki),null;case 4:return ee(),null;case 10:return ro(s.type),null;case 22:case 23:return Ss(s),cf(),r!==null&&we(to),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 24:return ro(Di),null;case 25:return null;default:return null}}function om(r,s){switch(Go(s),s.tag){case 3:ro(Di),ee();break;case 26:case 27:case 5:se(s);break;case 4:ee();break;case 13:Ss(s);break;case 19:we(ki);break;case 10:ro(s.type);break;case 22:case 23:Ss(s),cf(),r!==null&&we(to);break;case 24:ro(Di)}}var $l={getCacheForType:function(r){var s=ya(Di),f=s.data.get(r);return f===void 0&&(f=r(),s.data.set(r,f)),f}},ho=typeof WeakMap=="function"?WeakMap:Map,en=0,Qn=null,Sn=null,qe=0,ei=0,zn=null,Ii=!1,Ea=!1,fl=!1,po=0,pi=0,os=0,Cs=0,eu=0,Ia=0,Ds=0,bf=null,Tn=null,Jn=!1,vn=0,An=1/0,qn=null,Zi=null,Pr=!1,Hr=null,tc=0,ls=0,Si=null,Fr=0,mo=null;function Pa(){if(en&2&&qe!==0)return qe&-qe;if(L.T!==null){var r=kl;return r!==0?r:Kx()}return Rr()}function gr(){Ia===0&&(Ia=!(qe&536870912)||Cn?Bn():536870912);var r=Ka.current;return r!==null&&(r.flags|=32),Ia}function Wi(r,s,f){(r===Qn&&ei===2||r.cancelPendingCommit!==null)&&(go(r,0),vr(r,qe,Ia,!1)),bi(r,f),(!(en&2)||r!==Qn)&&(r===Qn&&(!(en&2)&&(Cs|=f),pi===4&&vr(r,qe,Ia,!1)),ni(r))}function nu(r,s,f){if(en&6)throw Error(i(327));var m=!f&&(s&60)===0&&(s&r.expiredLanes)===0||Ie(r,s),y=m?l(r,s):nc(r,s,!0),T=m;do{if(y===0){Ea&&!m&&vr(r,s,0,!1);break}else if(y===6)vr(r,s,0,!Ii);else{if(f=r.current.alternate,T&&!lm(f)){y=nc(r,s,!1),T=!1;continue}if(y===2){if(T=s,r.errorRecoveryDisabledLanes&T)var I=0;else I=r.pendingLanes&-536870913,I=I!==0?I:I&536870912?536870912:0;if(I!==0){s=I;t:{var X=r;y=bf;var it=X.current.memoizedState.isDehydrated;if(it&&(go(X,I).flags|=256),I=nc(X,I,!1),I!==2){if(fl&&!it){X.errorRecoveryDisabledLanes|=T,Cs|=T,y=4;break t}T=Tn,Tn=y,T!==null&&Gr(T)}y=I}if(T=!1,y!==2)continue}}if(y===1){go(r,0),vr(r,s,0,!0);break}t:{switch(m=r,y){case 0:case 1:throw Error(i(345));case 4:if((s&4194176)===s){vr(m,s,Ia,!Ii);break t}break;case 2:Tn=null;break;case 3:case 5:break;default:throw Error(i(329))}if(m.finishedWork=f,m.finishedLanes=s,(s&62914560)===s&&(T=vn+300-Pt(),10<T)){if(vr(m,s,Ia,!Ii),ve(m,0)!==0)break t;m.timeoutHandle=uE(rd.bind(null,m,f,Tn,qn,Jn,s,Ia,Cs,Ds,Ii,2,-0,0),T);break t}rd(m,f,Tn,qn,Jn,s,Ia,Cs,Ds,Ii,0,-0,0)}}break}while(!0);ni(r)}function Gr(r){Tn===null?Tn=r:Tn.push.apply(Tn,r)}function rd(r,s,f,m,y,T,I,X,it,gt,Zt,ie,Ut){var Vt=s.subtreeFlags;if((Vt&8192||(Vt&16785408)===16785408)&&(pm={stylesheets:null,count:0,unsuspend:eD},Jl(s),s=iD(),s!==null)){r.cancelPendingCommit=s(st.bind(null,r,f,m,y,I,X,it,1,ie,Ut)),vr(r,T,I,!gt);return}st(r,f,m,y,I,X,it,Zt,ie,Ut)}function lm(r){for(var s=r;;){var f=s.tag;if((f===0||f===11||f===15)&&s.flags&16384&&(f=s.updateQueue,f!==null&&(f=f.stores,f!==null)))for(var m=0;m<f.length;m++){var y=f[m],T=y.getSnapshot;y=y.value;try{if(!qa(T(),y))return!1}catch{return!1}}if(f=s.child,s.subtreeFlags&16384&&f!==null)f.return=s,s=f;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function vr(r,s,f,m){s&=~eu,s&=~Cs,r.suspendedLanes|=s,r.pingedLanes&=~s,m&&(r.warmLanes|=s),m=r.expirationTimes;for(var y=s;0<y;){var T=31-wt(y),I=1<<T;m[T]=-1,y&=~I}f!==0&&Ps(r,f,s)}function ec(){return en&6?!0:(wn(0),!1)}function Ns(){if(Sn!==null){if(ei===0)var r=Sn.return;else r=Sn,es=Ts=null,Hh(r),Xo=null,sf=0,r=Sn;for(;r!==null;)om(r.alternate,r),r=r.return;Sn=null}}function go(r,s){r.finishedWork=null,r.finishedLanes=0;var f=r.timeoutHandle;f!==-1&&(r.timeoutHandle=-1,H3(f)),f=r.cancelPendingCommit,f!==null&&(r.cancelPendingCommit=null,f()),Ns(),Qn=r,Sn=f=Ba(r.current,null),qe=s,ei=0,zn=null,Ii=!1,Ea=Ie(r,s),fl=!1,Ds=Ia=eu=Cs=os=pi=0,Tn=bf=null,Jn=!1,s&8&&(s|=s&32);var m=r.entangledLanes;if(m!==0)for(r=r.entanglements,m&=s;0<m;){var y=31-wt(m),T=1<<y;s|=r[y],m&=~T}return po=s,Qu(),f}function hl(r,s){gn=null,L.H=Es,s===Vo?(s=kn(),ei=3):s===Np?(s=kn(),ei=4):ei=s===hr?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,zn=s,Sn===null&&(pi=1,Wh(r,ja(s,r.current)))}function iu(){var r=L.H;return L.H=Es,r===null?Es:r}function sd(){var r=L.A;return L.A=$l,r}function Mf(){pi=4,Ii||(qe&4194176)!==qe&&Ka.current!==null||(Ea=!0),!(os&134217727)&&!(Cs&134217727)||Qn===null||vr(Qn,qe,Ia,!1)}function nc(r,s,f){var m=en;en|=2;var y=iu(),T=sd();(Qn!==r||qe!==s)&&(qn=null,go(r,s)),s=!1;var I=pi;t:do try{if(ei!==0&&Sn!==null){var X=Sn,it=zn;switch(ei){case 8:Ns(),I=6;break t;case 3:case 2:case 6:Ka.current===null&&(s=!0);var gt=ei;if(ei=0,zn=null,A(r,X,it,gt),f&&Ea){I=0;break t}break;default:gt=ei,ei=0,zn=null,A(r,X,it,gt)}}cm(),I=pi;break}catch(Zt){hl(r,Zt)}while(!0);return s&&r.shellSuspendCounter++,es=Ts=null,en=m,L.H=y,L.A=T,Sn===null&&(Qn=null,qe=0,Qu()),I}function cm(){for(;Sn!==null;)g(Sn)}function l(r,s){var f=en;en|=2;var m=iu(),y=sd();Qn!==r||qe!==s?(qn=null,An=Pt()+500,go(r,s)):Ea=Ie(r,s);t:do try{if(ei!==0&&Sn!==null){s=Sn;var T=zn;e:switch(ei){case 1:ei=0,zn=null,A(r,s,T,1);break;case 2:if(zg(T)){ei=0,zn=null,S(s);break}s=function(){ei===2&&Qn===r&&(ei=7),ni(r)},T.then(s,s);break t;case 3:ei=7;break t;case 4:ei=5;break t;case 7:zg(T)?(ei=0,zn=null,S(s)):(ei=0,zn=null,A(r,s,T,7));break;case 5:var I=null;switch(Sn.tag){case 26:I=Sn.memoizedState;case 5:case 27:var X=Sn;if(!I||SE(I)){ei=0,zn=null;var it=X.sibling;if(it!==null)Sn=it;else{var gt=X.return;gt!==null?(Sn=gt,N(gt)):Sn=null}break e}}ei=0,zn=null,A(r,s,T,5);break;case 6:ei=0,zn=null,A(r,s,T,6);break;case 8:Ns(),pi=6;break t;default:throw Error(i(462))}}c();break}catch(Zt){hl(r,Zt)}while(!0);return es=Ts=null,L.H=m,L.A=y,en=f,Sn!==null?0:(Qn=null,qe=0,Qu(),pi)}function c(){for(;Sn!==null&&!k();)g(Sn)}function g(r){var s=pf(r.alternate,r,po);r.memoizedProps=r.pendingProps,s===null?N(r):Sn=s}function S(r){var s=r,f=s.alternate;switch(s.tag){case 15:case 0:s=Sv(f,s,s.pendingProps,s.type,void 0,qe);break;case 11:s=Sv(f,s,s.pendingProps,s.type.render,s.ref,qe);break;case 5:Hh(s);default:om(f,s),s=Sn=ll(s,po),s=pf(f,s,po)}r.memoizedProps=r.pendingProps,s===null?N(r):Sn=s}function A(r,s,f,m){es=Ts=null,Hh(s),Xo=null,sf=0;var y=s.return;try{if(Zx(r,y,s,f,qe)){pi=1,Wh(r,ja(f,r.current)),Sn=null;return}}catch(T){if(y!==null)throw Sn=y,T;pi=1,Wh(r,ja(f,r.current)),Sn=null;return}s.flags&32768?(Cn||m===1?r=!0:Ea||qe&536870912?r=!1:(Ii=r=!0,(m===2||m===3||m===6)&&(m=Ka.current,m!==null&&m.tag===13&&(m.flags|=16384))),Y(s,r)):N(s)}function N(r){var s=r;do{if(s.flags&32768){Y(s,Ii);return}r=s.return;var f=jx(s.alternate,s,po);if(f!==null){Sn=f;return}if(s=s.sibling,s!==null){Sn=s;return}Sn=s=r}while(s!==null);pi===0&&(pi=5)}function Y(r,s){do{var f=Ai(r.alternate,r);if(f!==null){f.flags&=32767,Sn=f;return}if(f=r.return,f!==null&&(f.flags|=32768,f.subtreeFlags=0,f.deletions=null),!s&&(r=r.sibling,r!==null)){Sn=r;return}Sn=r=f}while(r!==null);pi=6,Sn=null}function st(r,s,f,m,y,T,I,X,it,gt){var Zt=L.T,ie=rt.p;try{rt.p=2,L.T=null,yt(r,s,f,m,ie,y,T,I,X,it,gt)}finally{L.T=Zt,rt.p=ie}}function yt(r,s,f,m,y,T,I,X){do fe();while(Hr!==null);if(en&6)throw Error(i(327));var it=r.finishedWork;if(m=r.finishedLanes,it===null)return null;if(r.finishedWork=null,r.finishedLanes=0,it===r.current)throw Error(i(177));r.callbackNode=null,r.callbackPriority=0,r.cancelPendingCommit=null;var gt=it.lanes|it.childLanes;if(gt|=qs,Nl(r,m,gt,T,I,X),r===Qn&&(Sn=Qn=null,qe=0),!(it.subtreeFlags&10256)&&!(it.flags&10256)||Pr||(Pr=!0,ls=gt,Si=f,vt(de,function(){return fe(),null})),f=(it.flags&15990)!==0,it.subtreeFlags&15990||f?(f=L.T,L.T=null,T=rt.p,rt.p=2,I=en,en|=4,Qc(r,it),Ql(it,r),Tp(a1,r.containerInfo),Bv=!!i1,a1=i1=null,r.current=it,Jc(r,it.alternate,it),xt(),en=I,rt.p=T,L.T=f):r.current=it,Pr?(Pr=!1,Hr=r,tc=m):qt(r,gt),gt=r.pendingLanes,gt===0&&(Zi=null),ye(it.stateNode),ni(r),s!==null)for(y=r.onRecoverableError,it=0;it<s.length;it++)gt=s[it],y(gt.value,{componentStack:gt.stack});return tc&3&&fe(),gt=r.pendingLanes,m&4194218&&gt&42?r===mo?Fr++:(Fr=0,mo=r):Fr=0,wn(0),null}function qt(r,s){(r.pooledCacheLanes&=s)===0&&(s=r.pooledCache,s!=null&&(r.pooledCache=null,qo(s)))}function fe(){if(Hr!==null){var r=Hr,s=ls;ls=0;var f=Ca(tc),m=L.T,y=rt.p;try{if(rt.p=32>f?32:f,L.T=null,Hr===null)var T=!1;else{f=Si,Si=null;var I=Hr,X=tc;if(Hr=null,tc=0,en&6)throw Error(i(331));var it=en;if(en|=4,$c(I.current),lo(I,I.current,X,f),en=it,wn(0,!1),me&&typeof me.onPostCommitFiberRoot=="function")try{me.onPostCommitFiberRoot(Ce,I)}catch{}T=!0}return T}finally{rt.p=y,L.T=m,qt(r,s)}}return!1}function Ee(r,s,f){s=ja(f,s),s=Zp(r.stateNode,s,2),r=mr(r,s,2),r!==null&&(bi(r,2),ni(r))}function ce(r,s,f){if(r.tag===3)Ee(r,r,f);else for(;s!==null;){if(s.tag===3){Ee(s,r,f);break}else if(s.tag===1){var m=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(Zi===null||!Zi.has(m))){r=ja(f,r),f=Wp(2),m=mr(s,f,2),m!==null&&(yv(f,m,s,r),bi(m,2),ni(m));break}}s=s.return}}function nn(r,s,f){var m=r.pingCache;if(m===null){m=r.pingCache=new ho;var y=new Set;m.set(s,y)}else y=m.get(s),y===void 0&&(y=new Set,m.set(s,y));y.has(f)||(fl=!0,y.add(f),r=Vr.bind(null,r,s,f),s.then(r,r))}function Vr(r,s,f){var m=r.pingCache;m!==null&&m.delete(s),r.pingedLanes|=r.suspendedLanes&f,r.warmLanes&=~f,Qn===r&&(qe&f)===f&&(pi===4||pi===3&&(qe&62914560)===qe&&300>Pt()-vn?!(en&2)&&go(r,0):eu|=f,Ds===qe&&(Ds=0)),ni(r)}function au(r,s){s===0&&(s=rn()),r=Zs(r,s),r!==null&&(bi(r,s),ni(r))}function ic(r){var s=r.memoizedState,f=0;s!==null&&(f=s.retryLane),au(r,f)}function At(r,s){var f=0;switch(r.tag){case 13:var m=r.stateNode,y=r.memoizedState;y!==null&&(f=y.retryLane);break;case 19:m=r.stateNode;break;case 22:m=r.stateNode._retryCache;break;default:throw Error(i(314))}m!==null&&m.delete(s),au(r,f)}function vt(r,s){return he(r,s)}var Ot=null,oe=null,Ge=!1,$n=!1,Ke=!1,bn=0;function ni(r){r!==oe&&r.next===null&&(oe===null?Ot=oe=r:oe=oe.next=r),$n=!0,Ge||(Ge=!0,D3(dl))}function wn(r,s){if(!Ke&&$n){Ke=!0;do for(var f=!1,m=Ot;m!==null;){if(r!==0){var y=m.pendingLanes;if(y===0)var T=0;else{var I=m.suspendedLanes,X=m.pingedLanes;T=(1<<31-wt(42|r)+1)-1,T&=y&~(I&~X),T=T&201326677?T&201326677|1:T?T|2:0}T!==0&&(f=!0,tE(m,T))}else T=qe,T=ve(m,m===Qn?T:0),!(T&3)||Ie(m,T)||(f=!0,tE(m,T));m=m.next}while(f);Ke=!1}}function dl(){$n=Ge=!1;var r=0;bn!==0&&(P3()&&(r=bn),bn=0);for(var s=Pt(),f=null,m=Ot;m!==null;){var y=m.next,T=Av(m,s);T===0?(m.next=null,f===null?Ot=y:f.next=y,y===null&&(oe=f)):(f=m,(r!==0||T&3)&&($n=!0)),m=y}wn(r)}function Av(r,s){for(var f=r.suspendedLanes,m=r.pingedLanes,y=r.expirationTimes,T=r.pendingLanes&-62914561;0<T;){var I=31-wt(T),X=1<<I,it=y[I];it===-1?(!(X&f)||X&m)&&(y[I]=mn(X,s)):it<=s&&(r.expiredLanes|=X),T&=~X}if(s=Qn,f=qe,f=ve(r,r===s?f:0),m=r.callbackNode,f===0||r===s&&ei===2||r.cancelPendingCommit!==null)return m!==null&&m!==null&&K(m),r.callbackNode=null,r.callbackPriority=0;if(!(f&3)||Ie(r,f)){if(s=f&-f,s===r.callbackPriority)return s;switch(m!==null&&K(m),Ca(f)){case 2:case 8:f=Re;break;case 32:f=de;break;case 268435456:f=an;break;default:f=de}return m=$M.bind(null,r),f=he(f,m),r.callbackPriority=s,r.callbackNode=f,s}return m!==null&&m!==null&&K(m),r.callbackPriority=2,r.callbackNode=null,2}function $M(r,s){var f=r.callbackNode;if(fe()&&r.callbackNode!==f)return null;var m=qe;return m=ve(r,r===Qn?m:0),m===0?null:(nu(r,m,s),Av(r,Pt()),r.callbackNode!=null&&r.callbackNode===f?$M.bind(null,r):null)}function tE(r,s){if(fe())return null;nu(r,s,!0)}function D3(r){F3(function(){en&6?he(Xt,r):r()})}function Kx(){return bn===0&&(bn=Bn()),bn}function eE(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:Iu(""+r)}function nE(r,s){var f=s.ownerDocument.createElement("input");return f.name=s.name,f.value=s.value,r.id&&f.setAttribute("form",r.id),s.parentNode.insertBefore(f,s),r=new FormData(r),f.parentNode.removeChild(f),r}function N3(r,s,f,m,y){if(s==="submit"&&f&&f.stateNode===y){var T=eE((y[un]||null).action),I=m.submitter;I&&(s=(s=I[un]||null)?eE(s.formAction):I.getAttribute("formAction"),s!==null&&(T=s,I=null));var X=new wc("action","action",null,m,y);r.push({event:X,listeners:[{instance:null,listener:function(){if(m.defaultPrevented){if(bn!==0){var it=I?nE(y,I):new FormData(y);Vp(f,{pending:!0,data:it,method:y.method,action:T},null,it)}}else typeof T=="function"&&(X.preventDefault(),it=I?nE(y,I):new FormData(y),Vp(f,{pending:!0,data:it,method:y.method,action:T},T,it))},currentTarget:y}]})}}for(var Qx=0;Qx<Ys.length;Qx++){var Jx=Ys[Qx],U3=Jx.toLowerCase(),O3=Jx[0].toUpperCase()+Jx.slice(1);Dr(U3,"on"+O3)}Dr(Rp,"onAnimationEnd"),Dr(Wa,"onAnimationIteration"),Dr(Cp,"onAnimationStart"),Dr("dblclick","onDoubleClick"),Dr("focusin","onFocus"),Dr("focusout","onBlur"),Dr(Xs,"onTransitionRun"),Dr(Bc,"onTransitionStart"),Dr(Po,"onTransitionCancel"),Dr(Uh,"onTransitionEnd"),Wt("onMouseEnter",["mouseout","mouseover"]),Wt("onMouseLeave",["mouseout","mouseover"]),Wt("onPointerEnter",["pointerout","pointerover"]),Wt("onPointerLeave",["pointerout","pointerover"]),It("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),It("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),It("onBeforeInput",["compositionend","keypress","textInput","paste"]),It("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),It("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),It("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var um="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),L3=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(um));function iE(r,s){s=(s&4)!==0;for(var f=0;f<r.length;f++){var m=r[f],y=m.event;m=m.listeners;t:{var T=void 0;if(s)for(var I=m.length-1;0<=I;I--){var X=m[I],it=X.instance,gt=X.currentTarget;if(X=X.listener,it!==T&&y.isPropagationStopped())break t;T=X,y.currentTarget=gt;try{T(y)}catch(Zt){Zh(Zt)}y.currentTarget=null,T=it}else for(I=0;I<m.length;I++){if(X=m[I],it=X.instance,gt=X.currentTarget,X=X.listener,it!==T&&y.isPropagationStopped())break t;T=X,y.currentTarget=gt;try{T(y)}catch(Zt){Zh(Zt)}y.currentTarget=null,T=it}}}}function Nn(r,s){var f=s[q];f===void 0&&(f=s[q]=new Set);var m=r+"__bubble";f.has(m)||(aE(s,r,2,!1),f.add(m))}function $x(r,s,f){var m=0;s&&(m|=4),aE(f,r,m,s)}var wv="_reactListening"+Math.random().toString(36).slice(2);function t1(r){if(!r[wv]){r[wv]=!0,dt.forEach(function(f){f!=="selectionchange"&&(L3.has(f)||$x(f,!1,r),$x(f,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[wv]||(s[wv]=!0,$x("selectionchange",!1,s))}}function aE(r,s,f,m){switch(wE(s)){case 2:var y=sD;break;case 8:y=oD;break;default:y=d1}f=y.bind(null,s,f,r),y=void 0,!Hu||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(y=!0),m?y!==void 0?r.addEventListener(s,f,{capture:!0,passive:y}):r.addEventListener(s,f,!0):y!==void 0?r.addEventListener(s,f,{passive:y}):r.addEventListener(s,f,!1)}function e1(r,s,f,m,y){var T=m;if(!(s&1)&&!(s&2)&&m!==null)t:for(;;){if(m===null)return;var I=m.tag;if(I===3||I===4){var X=m.stateNode.containerInfo;if(X===y||X.nodeType===8&&X.parentNode===y)break;if(I===4)for(I=m.return;I!==null;){var it=I.tag;if((it===3||it===4)&&(it=I.stateNode.containerInfo,it===y||it.nodeType===8&&it.parentNode===y))return;I=I.return}for(;X!==null;){if(I=ne(X),I===null)return;if(it=I.tag,it===5||it===6||it===26||it===27){m=T=I;continue t}X=X.parentNode}}m=m.return}up(function(){var gt=T,Zt=Pu(f),ie=[];t:{var Ut=Oh.get(r);if(Ut!==void 0){var Vt=wc,Ve=r;switch(r){case"keypress":if(Uo(f)===0)break t;case"keydown":case"keyup":Vt=mp;break;case"focusin":Ve="focus",Vt=bh;break;case"focusout":Ve="blur",Vt=bh;break;case"beforeblur":case"afterblur":Vt=bh;break;case"click":if(f.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Vt=dp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Vt=Ix;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Vt=vp;break;case Rp:case Wa:case Cp:Vt=yg;break;case Uh:Vt=Gs;break;case"scroll":case"scrollend":Vt=gg;break;case"wheel":Vt=Px;break;case"copy":case"cut":case"paste":Vt=Sg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Vt=Eh;break;case"toggle":case"beforetoggle":Vt=Lo}var ln=(s&4)!==0,ji=!ln&&(r==="scroll"||r==="scrollend"),_t=ln?Ut!==null?Ut+"Capture":null:Ut;ln=[];for(var mt=gt,Mt;mt!==null;){var te=mt;if(Mt=te.stateNode,te=te.tag,te!==5&&te!==26&&te!==27||Mt===null||_t===null||(te=Ec(mt,_t),te!=null&&ln.push(fm(mt,te,Mt))),ji)break;mt=mt.return}0<ln.length&&(Ut=new Vt(Ut,Ve,null,f,Zt),ie.push({event:Ut,listeners:ln}))}}if(!(s&7)){t:{if(Ut=r==="mouseover"||r==="pointerover",Vt=r==="mouseout"||r==="pointerout",Ut&&f!==_h&&(Ve=f.relatedTarget||f.fromElement)&&(ne(Ve)||Ve[H]))break t;if((Vt||Ut)&&(Ut=Zt.window===Zt?Zt:(Ut=Zt.ownerDocument)?Ut.defaultView||Ut.parentWindow:window,Vt?(Ve=f.relatedTarget||f.toElement,Vt=gt,Ve=Ve?ne(Ve):null,Ve!==null&&(ji=ot(Ve),ln=Ve.tag,Ve!==ji||ln!==5&&ln!==27&&ln!==6)&&(Ve=null)):(Vt=null,Ve=gt),Vt!==Ve)){if(ln=dp,te="onMouseLeave",_t="onMouseEnter",mt="mouse",(r==="pointerout"||r==="pointerover")&&(ln=Eh,te="onPointerLeave",_t="onPointerEnter",mt="pointer"),ji=Vt==null?Ut:$(Vt),Mt=Ve==null?Ut:$(Ve),Ut=new ln(te,mt+"leave",Vt,f,Zt),Ut.target=ji,Ut.relatedTarget=Mt,te=null,ne(Zt)===gt&&(ln=new ln(_t,mt+"enter",Ve,f,Zt),ln.target=Mt,ln.relatedTarget=ji,te=ln),ji=te,Vt&&Ve)e:{for(ln=Vt,_t=Ve,mt=0,Mt=ln;Mt;Mt=od(Mt))mt++;for(Mt=0,te=_t;te;te=od(te))Mt++;for(;0<mt-Mt;)ln=od(ln),mt--;for(;0<Mt-mt;)_t=od(_t),Mt--;for(;mt--;){if(ln===_t||_t!==null&&ln===_t.alternate)break e;ln=od(ln),_t=od(_t)}ln=null}else ln=null;Vt!==null&&rE(ie,Ut,Vt,ln,!1),Ve!==null&&ji!==null&&rE(ie,ji,Ve,ln,!0)}}t:{if(Ut=gt?$(gt):window,Vt=Ut.nodeName&&Ut.nodeName.toLowerCase(),Vt==="select"||Vt==="input"&&Ut.type==="file")var ze=Ah;else if(Sp(Ut))if(wh)ze=Io;else{ze=Ng;var Rn=Hx}else Vt=Ut.nodeName,!Vt||Vt.toLowerCase()!=="input"||Ut.type!=="checkbox"&&Ut.type!=="radio"?gt&&Bu(gt.elementType)&&(ze=Ah):ze=ju;if(ze&&(ze=ze(r,gt))){Ya(ie,ze,f,Zt);break t}Rn&&Rn(r,Ut,gt),r==="focusout"&&gt&&Ut.type==="number"&&gt.memoizedProps.value!=null&&In(Ut,"number",Ut.value)}switch(Rn=gt?$(gt):window,r){case"focusin":(Sp(Rn)||Rn.contentEditable==="true")&&(Bl=Rn,Ap=gt,zc=null);break;case"focusout":zc=Ap=Bl=null;break;case"mousedown":Dh=!0;break;case"contextmenu":case"mouseup":case"dragend":Dh=!1,Cr(ie,f,Zt);break;case"selectionchange":if(Ch)break;case"keydown":case"keyup":Cr(ie,f,Zt)}var Xe;if(ku)t:{switch(r){case"compositionstart":var Je="onCompositionStart";break t;case"compositionend":Je="onCompositionEnd";break t;case"compositionupdate":Je="onCompositionUpdate";break t}Je=void 0}else Bo?qu(r,f)&&(Je="onCompositionEnd"):r==="keydown"&&f.keyCode===229&&(Je="onCompositionStart");Je&&(Yu&&f.locale!=="ko"&&(Bo||Je!=="onCompositionStart"?Je==="onCompositionEnd"&&Bo&&(Xe=hp()):(Hs=Zt,fp="value"in Hs?Hs.value:Hs.textContent,Bo=!0)),Rn=Rv(gt,Je),0<Rn.length&&(Je=new Mh(Je,r,null,f,Zt),ie.push({event:Je,listeners:Rn}),Xe?Je.data=Xe:(Xe=yp(f),Xe!==null&&(Je.data=Xe)))),(Xe=Xu?Zu(r,f):xp(r,f))&&(Je=Rv(gt,"onBeforeInput"),0<Je.length&&(Rn=new Mh("onBeforeInput","beforeinput",null,f,Zt),ie.push({event:Rn,listeners:Je}),Rn.data=Xe)),N3(ie,r,gt,f,Zt)}iE(ie,s)})}function fm(r,s,f){return{instance:r,listener:s,currentTarget:f}}function Rv(r,s){for(var f=s+"Capture",m=[];r!==null;){var y=r,T=y.stateNode;y=y.tag,y!==5&&y!==26&&y!==27||T===null||(y=Ec(r,f),y!=null&&m.unshift(fm(r,y,T)),y=Ec(r,s),y!=null&&m.push(fm(r,y,T))),r=r.return}return m}function od(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function rE(r,s,f,m,y){for(var T=s._reactName,I=[];f!==null&&f!==m;){var X=f,it=X.alternate,gt=X.stateNode;if(X=X.tag,it!==null&&it===m)break;X!==5&&X!==26&&X!==27||gt===null||(it=gt,y?(gt=Ec(f,T),gt!=null&&I.unshift(fm(f,gt,it))):y||(gt=Ec(f,T),gt!=null&&I.push(fm(f,gt,it)))),f=f.return}I.length!==0&&r.push({event:s,listeners:I})}var z3=/\r\n?/g,B3=/\u0000|\uFFFD/g;function sE(r){return(typeof r=="string"?r:""+r).replace(z3,`
`).replace(B3,"")}function oE(r,s){return s=sE(s),sE(r)===s}function Cv(){}function li(r,s,f,m,y,T){switch(f){case"children":typeof m=="string"?s==="body"||s==="textarea"&&m===""||Da(r,m):(typeof m=="number"||typeof m=="bigint")&&s!=="body"&&Da(r,""+m);break;case"className":Mn(r,"class",m);break;case"tabIndex":Mn(r,"tabindex",m);break;case"dir":case"role":case"viewBox":case"width":case"height":Mn(r,f,m);break;case"style":cp(r,m,T);break;case"data":if(s!=="object"){Mn(r,"data",m);break}case"src":case"href":if(m===""&&(s!=="a"||f!=="href")){r.removeAttribute(f);break}if(m==null||typeof m=="function"||typeof m=="symbol"||typeof m=="boolean"){r.removeAttribute(f);break}m=Iu(""+m),r.setAttribute(f,m);break;case"action":case"formAction":if(typeof m=="function"){r.setAttribute(f,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof T=="function"&&(f==="formAction"?(s!=="input"&&li(r,s,"name",y.name,y,null),li(r,s,"formEncType",y.formEncType,y,null),li(r,s,"formMethod",y.formMethod,y,null),li(r,s,"formTarget",y.formTarget,y,null)):(li(r,s,"encType",y.encType,y,null),li(r,s,"method",y.method,y,null),li(r,s,"target",y.target,y,null)));if(m==null||typeof m=="symbol"||typeof m=="boolean"){r.removeAttribute(f);break}m=Iu(""+m),r.setAttribute(f,m);break;case"onClick":m!=null&&(r.onclick=Cv);break;case"onScroll":m!=null&&Nn("scroll",r);break;case"onScrollEnd":m!=null&&Nn("scrollend",r);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(i(61));if(f=m.__html,f!=null){if(y.children!=null)throw Error(i(60));r.innerHTML=f}}break;case"multiple":r.multiple=m&&typeof m!="function"&&typeof m!="symbol";break;case"muted":r.muted=m&&typeof m!="function"&&typeof m!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(m==null||typeof m=="function"||typeof m=="boolean"||typeof m=="symbol"){r.removeAttribute("xlink:href");break}f=Iu(""+m),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",f);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":m!=null&&typeof m!="function"&&typeof m!="symbol"?r.setAttribute(f,""+m):r.removeAttribute(f);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":m&&typeof m!="function"&&typeof m!="symbol"?r.setAttribute(f,""):r.removeAttribute(f);break;case"capture":case"download":m===!0?r.setAttribute(f,""):m!==!1&&m!=null&&typeof m!="function"&&typeof m!="symbol"?r.setAttribute(f,m):r.removeAttribute(f);break;case"cols":case"rows":case"size":case"span":m!=null&&typeof m!="function"&&typeof m!="symbol"&&!isNaN(m)&&1<=m?r.setAttribute(f,m):r.removeAttribute(f);break;case"rowSpan":case"start":m==null||typeof m=="function"||typeof m=="symbol"||isNaN(m)?r.removeAttribute(f):r.setAttribute(f,m);break;case"popover":Nn("beforetoggle",r),Nn("toggle",r),Le(r,"popover",m);break;case"xlinkActuate":Pe(r,"http://www.w3.org/1999/xlink","xlink:actuate",m);break;case"xlinkArcrole":Pe(r,"http://www.w3.org/1999/xlink","xlink:arcrole",m);break;case"xlinkRole":Pe(r,"http://www.w3.org/1999/xlink","xlink:role",m);break;case"xlinkShow":Pe(r,"http://www.w3.org/1999/xlink","xlink:show",m);break;case"xlinkTitle":Pe(r,"http://www.w3.org/1999/xlink","xlink:title",m);break;case"xlinkType":Pe(r,"http://www.w3.org/1999/xlink","xlink:type",m);break;case"xmlBase":Pe(r,"http://www.w3.org/XML/1998/namespace","xml:base",m);break;case"xmlLang":Pe(r,"http://www.w3.org/XML/1998/namespace","xml:lang",m);break;case"xmlSpace":Pe(r,"http://www.w3.org/XML/1998/namespace","xml:space",m);break;case"is":Le(r,"is",m);break;case"innerText":case"textContent":break;default:(!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(f=pg.get(f)||f,Le(r,f,m))}}function n1(r,s,f,m,y,T){switch(f){case"style":cp(r,m,T);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(i(61));if(f=m.__html,f!=null){if(y.children!=null)throw Error(i(60));r.innerHTML=f}}break;case"children":typeof m=="string"?Da(r,m):(typeof m=="number"||typeof m=="bigint")&&Da(r,""+m);break;case"onScroll":m!=null&&Nn("scroll",r);break;case"onScrollEnd":m!=null&&Nn("scrollend",r);break;case"onClick":m!=null&&(r.onclick=Cv);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!bt.hasOwnProperty(f))t:{if(f[0]==="o"&&f[1]==="n"&&(y=f.endsWith("Capture"),s=f.slice(2,y?f.length-7:void 0),T=r[un]||null,T=T!=null?T[f]:null,typeof T=="function"&&r.removeEventListener(s,T,y),typeof m=="function")){typeof T!="function"&&T!==null&&(f in r?r[f]=null:r.hasAttribute(f)&&r.removeAttribute(f)),r.addEventListener(s,m,y);break t}f in r?r[f]=m:m===!0?r.setAttribute(f,""):Le(r,f,m)}}}function Ha(r,s,f){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Nn("error",r),Nn("load",r);var m=!1,y=!1,T;for(T in f)if(f.hasOwnProperty(T)){var I=f[T];if(I!=null)switch(T){case"src":m=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:li(r,s,T,I,f,null)}}y&&li(r,s,"srcSet",f.srcSet,f,null),m&&li(r,s,"src",f.src,f,null);return;case"input":Nn("invalid",r);var X=T=I=y=null,it=null,gt=null;for(m in f)if(f.hasOwnProperty(m)){var Zt=f[m];if(Zt!=null)switch(m){case"name":y=Zt;break;case"type":I=Zt;break;case"checked":it=Zt;break;case"defaultChecked":gt=Zt;break;case"value":T=Zt;break;case"defaultValue":X=Zt;break;case"children":case"dangerouslySetInnerHTML":if(Zt!=null)throw Error(i(137,s));break;default:li(r,s,m,Zt,f,null)}}vi(r,T,X,it,gt,I,y,!1),We(r);return;case"select":Nn("invalid",r),m=I=T=null;for(y in f)if(f.hasOwnProperty(y)&&(X=f[y],X!=null))switch(y){case"value":T=X;break;case"defaultValue":I=X;break;case"multiple":m=X;default:li(r,s,y,X,f,null)}s=T,f=I,r.multiple=!!m,s!=null?Pn(r,!!m,s,!1):f!=null&&Pn(r,!!m,f,!0);return;case"textarea":Nn("invalid",r),T=y=m=null;for(I in f)if(f.hasOwnProperty(I)&&(X=f[I],X!=null))switch(I){case"value":m=X;break;case"defaultValue":y=X;break;case"children":T=X;break;case"dangerouslySetInnerHTML":if(X!=null)throw Error(i(91));break;default:li(r,s,I,X,f,null)}Qr(r,m,y,T),We(r);return;case"option":for(it in f)if(f.hasOwnProperty(it)&&(m=f[it],m!=null))switch(it){case"selected":r.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:li(r,s,it,m,f,null)}return;case"dialog":Nn("cancel",r),Nn("close",r);break;case"iframe":case"object":Nn("load",r);break;case"video":case"audio":for(m=0;m<um.length;m++)Nn(um[m],r);break;case"image":Nn("error",r),Nn("load",r);break;case"details":Nn("toggle",r);break;case"embed":case"source":case"link":Nn("error",r),Nn("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(gt in f)if(f.hasOwnProperty(gt)&&(m=f[gt],m!=null))switch(gt){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:li(r,s,gt,m,f,null)}return;default:if(Bu(s)){for(Zt in f)f.hasOwnProperty(Zt)&&(m=f[Zt],m!==void 0&&n1(r,s,Zt,m,f,void 0));return}}for(X in f)f.hasOwnProperty(X)&&(m=f[X],m!=null&&li(r,s,X,m,f,null))}function I3(r,s,f,m){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,T=null,I=null,X=null,it=null,gt=null,Zt=null;for(Vt in f){var ie=f[Vt];if(f.hasOwnProperty(Vt)&&ie!=null)switch(Vt){case"checked":break;case"value":break;case"defaultValue":it=ie;default:m.hasOwnProperty(Vt)||li(r,s,Vt,null,m,ie)}}for(var Ut in m){var Vt=m[Ut];if(ie=f[Ut],m.hasOwnProperty(Ut)&&(Vt!=null||ie!=null))switch(Ut){case"type":T=Vt;break;case"name":y=Vt;break;case"checked":gt=Vt;break;case"defaultChecked":Zt=Vt;break;case"value":I=Vt;break;case"defaultValue":X=Vt;break;case"children":case"dangerouslySetInnerHTML":if(Vt!=null)throw Error(i(137,s));break;default:Vt!==ie&&li(r,s,Ut,Vt,m,ie)}}on(r,I,X,it,gt,Zt,T,y);return;case"select":Vt=I=X=Ut=null;for(T in f)if(it=f[T],f.hasOwnProperty(T)&&it!=null)switch(T){case"value":break;case"multiple":Vt=it;default:m.hasOwnProperty(T)||li(r,s,T,null,m,it)}for(y in m)if(T=m[y],it=f[y],m.hasOwnProperty(y)&&(T!=null||it!=null))switch(y){case"value":Ut=T;break;case"defaultValue":X=T;break;case"multiple":I=T;default:T!==it&&li(r,s,y,T,m,it)}s=X,f=I,m=Vt,Ut!=null?Pn(r,!!f,Ut,!1):!!m!=!!f&&(s!=null?Pn(r,!!f,s,!0):Pn(r,!!f,f?[]:"",!1));return;case"textarea":Vt=Ut=null;for(X in f)if(y=f[X],f.hasOwnProperty(X)&&y!=null&&!m.hasOwnProperty(X))switch(X){case"value":break;case"children":break;default:li(r,s,X,null,m,y)}for(I in m)if(y=m[I],T=f[I],m.hasOwnProperty(I)&&(y!=null||T!=null))switch(I){case"value":Ut=y;break;case"defaultValue":Vt=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(i(91));break;default:y!==T&&li(r,s,I,y,m,T)}na(r,Ut,Vt);return;case"option":for(var Ve in f)if(Ut=f[Ve],f.hasOwnProperty(Ve)&&Ut!=null&&!m.hasOwnProperty(Ve))switch(Ve){case"selected":r.selected=!1;break;default:li(r,s,Ve,null,m,Ut)}for(it in m)if(Ut=m[it],Vt=f[it],m.hasOwnProperty(it)&&Ut!==Vt&&(Ut!=null||Vt!=null))switch(it){case"selected":r.selected=Ut&&typeof Ut!="function"&&typeof Ut!="symbol";break;default:li(r,s,it,Ut,m,Vt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ln in f)Ut=f[ln],f.hasOwnProperty(ln)&&Ut!=null&&!m.hasOwnProperty(ln)&&li(r,s,ln,null,m,Ut);for(gt in m)if(Ut=m[gt],Vt=f[gt],m.hasOwnProperty(gt)&&Ut!==Vt&&(Ut!=null||Vt!=null))switch(gt){case"children":case"dangerouslySetInnerHTML":if(Ut!=null)throw Error(i(137,s));break;default:li(r,s,gt,Ut,m,Vt)}return;default:if(Bu(s)){for(var ji in f)Ut=f[ji],f.hasOwnProperty(ji)&&Ut!==void 0&&!m.hasOwnProperty(ji)&&n1(r,s,ji,void 0,m,Ut);for(Zt in m)Ut=m[Zt],Vt=f[Zt],!m.hasOwnProperty(Zt)||Ut===Vt||Ut===void 0&&Vt===void 0||n1(r,s,Zt,Ut,m,Vt);return}}for(var _t in f)Ut=f[_t],f.hasOwnProperty(_t)&&Ut!=null&&!m.hasOwnProperty(_t)&&li(r,s,_t,null,m,Ut);for(ie in m)Ut=m[ie],Vt=f[ie],!m.hasOwnProperty(ie)||Ut===Vt||Ut==null&&Vt==null||li(r,s,ie,Ut,m,Vt)}var i1=null,a1=null;function Dv(r){return r.nodeType===9?r:r.ownerDocument}function lE(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function cE(r,s){if(r===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&s==="foreignObject"?0:r}function r1(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var s1=null;function P3(){var r=window.event;return r&&r.type==="popstate"?r===s1?!1:(s1=r,!0):(s1=null,!1)}var uE=typeof setTimeout=="function"?setTimeout:void 0,H3=typeof clearTimeout=="function"?clearTimeout:void 0,fE=typeof Promise=="function"?Promise:void 0,F3=typeof queueMicrotask=="function"?queueMicrotask:typeof fE<"u"?function(r){return fE.resolve(null).then(r).catch(G3)}:uE;function G3(r){setTimeout(function(){throw r})}function o1(r,s){var f=s,m=0;do{var y=f.nextSibling;if(r.removeChild(f),y&&y.nodeType===8)if(f=y.data,f==="/$"){if(m===0){r.removeChild(y),ym(s);return}m--}else f!=="$"&&f!=="$?"&&f!=="$!"||m++;f=y}while(f);ym(s)}function l1(r){var s=r.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var f=s;switch(s=s.nextSibling,f.nodeName){case"HTML":case"HEAD":case"BODY":l1(f),ue(f);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(f.rel.toLowerCase()==="stylesheet")continue}r.removeChild(f)}}function V3(r,s,f,m){for(;r.nodeType===1;){var y=f;if(r.nodeName.toLowerCase()!==s.toLowerCase()){if(!m&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(m){if(!r[Bt])switch(s){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(T=r.getAttribute("rel"),T==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(T!==y.rel||r.getAttribute("href")!==(y.href==null?null:y.href)||r.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||r.getAttribute("title")!==(y.title==null?null:y.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(T=r.getAttribute("src"),(T!==(y.src==null?null:y.src)||r.getAttribute("type")!==(y.type==null?null:y.type)||r.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&T&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(s==="input"&&r.type==="hidden"){var T=y.name==null?null:""+y.name;if(y.type==="hidden"&&r.getAttribute("name")===T)return r}else return r;if(r=vo(r.nextSibling),r===null)break}return null}function k3(r,s,f){if(s==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!f||(r=vo(r.nextSibling),r===null))return null;return r}function vo(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return r}function hE(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var f=r.data;if(f==="$"||f==="$!"||f==="$?"){if(s===0)return r;s--}else f==="/$"&&s++}r=r.previousSibling}return null}function dE(r,s,f){switch(s=Dv(f),r){case"html":if(r=s.documentElement,!r)throw Error(i(452));return r;case"head":if(r=s.head,!r)throw Error(i(453));return r;case"body":if(r=s.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}var Us=new Map,pE=new Set;function Nv(r){return typeof r.getRootNode=="function"?r.getRootNode():r.ownerDocument}var ac=rt.d;rt.d={f:X3,r:Y3,D:q3,C:Z3,L:W3,m:j3,X:Q3,S:K3,M:J3};function X3(){var r=ac.f(),s=ec();return r||s}function Y3(r){var s=P(r);s!==null&&s.tag===5&&s.type==="form"?ov(s):ac.r(r)}var ld=typeof document>"u"?null:document;function mE(r,s,f){var m=ld;if(m&&typeof s=="string"&&s){var y=je(s);y='link[rel="'+r+'"][href="'+y+'"]',typeof f=="string"&&(y+='[crossorigin="'+f+'"]'),pE.has(y)||(pE.add(y),r={rel:r,crossOrigin:f,href:s},m.querySelector(y)===null&&(s=m.createElement("link"),Ha(s,"link",r),nt(s),m.head.appendChild(s)))}}function q3(r){ac.D(r),mE("dns-prefetch",r,null)}function Z3(r,s){ac.C(r,s),mE("preconnect",r,s)}function W3(r,s,f){ac.L(r,s,f);var m=ld;if(m&&r&&s){var y='link[rel="preload"][as="'+je(s)+'"]';s==="image"&&f&&f.imageSrcSet?(y+='[imagesrcset="'+je(f.imageSrcSet)+'"]',typeof f.imageSizes=="string"&&(y+='[imagesizes="'+je(f.imageSizes)+'"]')):y+='[href="'+je(r)+'"]';var T=y;switch(s){case"style":T=cd(r);break;case"script":T=ud(r)}Us.has(T)||(r=O({rel:"preload",href:s==="image"&&f&&f.imageSrcSet?void 0:r,as:s},f),Us.set(T,r),m.querySelector(y)!==null||s==="style"&&m.querySelector(hm(T))||s==="script"&&m.querySelector(dm(T))||(s=m.createElement("link"),Ha(s,"link",r),nt(s),m.head.appendChild(s)))}}function j3(r,s){ac.m(r,s);var f=ld;if(f&&r){var m=s&&typeof s.as=="string"?s.as:"script",y='link[rel="modulepreload"][as="'+je(m)+'"][href="'+je(r)+'"]',T=y;switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":T=ud(r)}if(!Us.has(T)&&(r=O({rel:"modulepreload",href:r},s),Us.set(T,r),f.querySelector(y)===null)){switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(f.querySelector(dm(T)))return}m=f.createElement("link"),Ha(m,"link",r),nt(m),f.head.appendChild(m)}}}function K3(r,s,f){ac.S(r,s,f);var m=ld;if(m&&r){var y=at(m).hoistableStyles,T=cd(r);s=s||"default";var I=y.get(T);if(!I){var X={loading:0,preload:null};if(I=m.querySelector(hm(T)))X.loading=5;else{r=O({rel:"stylesheet",href:r,"data-precedence":s},f),(f=Us.get(T))&&c1(r,f);var it=I=m.createElement("link");nt(it),Ha(it,"link",r),it._p=new Promise(function(gt,Zt){it.onload=gt,it.onerror=Zt}),it.addEventListener("load",function(){X.loading|=1}),it.addEventListener("error",function(){X.loading|=2}),X.loading|=4,Uv(I,s,m)}I={type:"stylesheet",instance:I,count:1,state:X},y.set(T,I)}}}function Q3(r,s){ac.X(r,s);var f=ld;if(f&&r){var m=at(f).hoistableScripts,y=ud(r),T=m.get(y);T||(T=f.querySelector(dm(y)),T||(r=O({src:r,async:!0},s),(s=Us.get(y))&&u1(r,s),T=f.createElement("script"),nt(T),Ha(T,"link",r),f.head.appendChild(T)),T={type:"script",instance:T,count:1,state:null},m.set(y,T))}}function J3(r,s){ac.M(r,s);var f=ld;if(f&&r){var m=at(f).hoistableScripts,y=ud(r),T=m.get(y);T||(T=f.querySelector(dm(y)),T||(r=O({src:r,async:!0,type:"module"},s),(s=Us.get(y))&&u1(r,s),T=f.createElement("script"),nt(T),Ha(T,"link",r),f.head.appendChild(T)),T={type:"script",instance:T,count:1,state:null},m.set(y,T))}}function gE(r,s,f,m){var y=(y=Yt.current)?Nv(y):null;if(!y)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof f.precedence=="string"&&typeof f.href=="string"?(s=cd(f.href),f=at(y).hoistableStyles,m=f.get(s),m||(m={type:"style",instance:null,count:0,state:null},f.set(s,m)),m):{type:"void",instance:null,count:0,state:null};case"link":if(f.rel==="stylesheet"&&typeof f.href=="string"&&typeof f.precedence=="string"){r=cd(f.href);var T=at(y).hoistableStyles,I=T.get(r);if(I||(y=y.ownerDocument||y,I={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},T.set(r,I),(T=y.querySelector(hm(r)))&&!T._p&&(I.instance=T,I.state.loading=5),Us.has(r)||(f={rel:"preload",as:"style",href:f.href,crossOrigin:f.crossOrigin,integrity:f.integrity,media:f.media,hrefLang:f.hrefLang,referrerPolicy:f.referrerPolicy},Us.set(r,f),T||$3(y,r,f,I.state))),s&&m===null)throw Error(i(528,""));return I}if(s&&m!==null)throw Error(i(529,""));return null;case"script":return s=f.async,f=f.src,typeof f=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=ud(f),f=at(y).hoistableScripts,m=f.get(s),m||(m={type:"script",instance:null,count:0,state:null},f.set(s,m)),m):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function cd(r){return'href="'+je(r)+'"'}function hm(r){return'link[rel="stylesheet"]['+r+"]"}function vE(r){return O({},r,{"data-precedence":r.precedence,precedence:null})}function $3(r,s,f,m){r.querySelector('link[rel="preload"][as="style"]['+s+"]")?m.loading=1:(s=r.createElement("link"),m.preload=s,s.addEventListener("load",function(){return m.loading|=1}),s.addEventListener("error",function(){return m.loading|=2}),Ha(s,"link",f),nt(s),r.head.appendChild(s))}function ud(r){return'[src="'+je(r)+'"]'}function dm(r){return"script[async]"+r}function _E(r,s,f){if(s.count++,s.instance===null)switch(s.type){case"style":var m=r.querySelector('style[data-href~="'+je(f.href)+'"]');if(m)return s.instance=m,nt(m),m;var y=O({},f,{"data-href":f.href,"data-precedence":f.precedence,href:null,precedence:null});return m=(r.ownerDocument||r).createElement("style"),nt(m),Ha(m,"style",y),Uv(m,f.precedence,r),s.instance=m;case"stylesheet":y=cd(f.href);var T=r.querySelector(hm(y));if(T)return s.state.loading|=4,s.instance=T,nt(T),T;m=vE(f),(y=Us.get(y))&&c1(m,y),T=(r.ownerDocument||r).createElement("link"),nt(T);var I=T;return I._p=new Promise(function(X,it){I.onload=X,I.onerror=it}),Ha(T,"link",m),s.state.loading|=4,Uv(T,f.precedence,r),s.instance=T;case"script":return T=ud(f.src),(y=r.querySelector(dm(T)))?(s.instance=y,nt(y),y):(m=f,(y=Us.get(T))&&(m=O({},f),u1(m,y)),r=r.ownerDocument||r,y=r.createElement("script"),nt(y),Ha(y,"link",m),r.head.appendChild(y),s.instance=y);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&!(s.state.loading&4)&&(m=s.instance,s.state.loading|=4,Uv(m,f.precedence,r));return s.instance}function Uv(r,s,f){for(var m=f.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=m.length?m[m.length-1]:null,T=y,I=0;I<m.length;I++){var X=m[I];if(X.dataset.precedence===s)T=X;else if(T!==y)break}T?T.parentNode.insertBefore(r,T.nextSibling):(s=f.nodeType===9?f.head:f,s.insertBefore(r,s.firstChild))}function c1(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.title==null&&(r.title=s.title)}function u1(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.integrity==null&&(r.integrity=s.integrity)}var Ov=null;function yE(r,s,f){if(Ov===null){var m=new Map,y=Ov=new Map;y.set(f,m)}else y=Ov,m=y.get(f),m||(m=new Map,y.set(f,m));if(m.has(r))return m;for(m.set(r,null),f=f.getElementsByTagName(r),y=0;y<f.length;y++){var T=f[y];if(!(T[Bt]||T[fi]||r==="link"&&T.getAttribute("rel")==="stylesheet")&&T.namespaceURI!=="http://www.w3.org/2000/svg"){var I=T.getAttribute(s)||"";I=r+I;var X=m.get(I);X?X.push(T):m.set(I,[T])}}return m}function xE(r,s,f){r=r.ownerDocument||r,r.head.insertBefore(f,s==="title"?r.querySelector("head > title"):null)}function tD(r,s,f){if(f===1||s.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return r=s.disabled,typeof s.precedence=="string"&&r==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function SE(r){return!(r.type==="stylesheet"&&!(r.state.loading&3))}var pm=null;function eD(){}function nD(r,s,f){if(pm===null)throw Error(i(475));var m=pm;if(s.type==="stylesheet"&&(typeof f.media!="string"||matchMedia(f.media).matches!==!1)&&!(s.state.loading&4)){if(s.instance===null){var y=cd(f.href),T=r.querySelector(hm(y));if(T){r=T._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(m.count++,m=Lv.bind(m),r.then(m,m)),s.state.loading|=4,s.instance=T,nt(T);return}T=r.ownerDocument||r,f=vE(f),(y=Us.get(y))&&c1(f,y),T=T.createElement("link"),nt(T);var I=T;I._p=new Promise(function(X,it){I.onload=X,I.onerror=it}),Ha(T,"link",f),s.instance=T}m.stylesheets===null&&(m.stylesheets=new Map),m.stylesheets.set(s,r),(r=s.state.preload)&&!(s.state.loading&3)&&(m.count++,s=Lv.bind(m),r.addEventListener("load",s),r.addEventListener("error",s))}}function iD(){if(pm===null)throw Error(i(475));var r=pm;return r.stylesheets&&r.count===0&&f1(r,r.stylesheets),0<r.count?function(s){var f=setTimeout(function(){if(r.stylesheets&&f1(r,r.stylesheets),r.unsuspend){var m=r.unsuspend;r.unsuspend=null,m()}},6e4);return r.unsuspend=s,function(){r.unsuspend=null,clearTimeout(f)}}:null}function Lv(){if(this.count--,this.count===0){if(this.stylesheets)f1(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var zv=null;function f1(r,s){r.stylesheets=null,r.unsuspend!==null&&(r.count++,zv=new Map,s.forEach(aD,r),zv=null,Lv.call(r))}function aD(r,s){if(!(s.state.loading&4)){var f=zv.get(r);if(f)var m=f.get(null);else{f=new Map,zv.set(r,f);for(var y=r.querySelectorAll("link[data-precedence],style[data-precedence]"),T=0;T<y.length;T++){var I=y[T];(I.nodeName==="LINK"||I.getAttribute("media")!=="not all")&&(f.set(I.dataset.precedence,I),m=I)}m&&f.set(null,m)}y=s.instance,I=y.getAttribute("data-precedence"),T=f.get(I)||m,T===m&&f.set(null,y),f.set(I,y),this.count++,m=Lv.bind(this),y.addEventListener("load",m),y.addEventListener("error",m),T?T.parentNode.insertBefore(y,T.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(y,r.firstChild)),s.state.loading|=4}}var mm={$$typeof:b,Provider:null,Consumer:null,_currentValue:Lt,_currentValue2:Lt,_threadCount:0};function rD(r,s,f,m,y,T,I,X){this.tag=1,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=gi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gi(0),this.hiddenUpdates=gi(null),this.identifierPrefix=m,this.onUncaughtError=y,this.onCaughtError=T,this.onRecoverableError=I,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=X,this.incompleteTransitions=new Map}function bE(r,s,f,m,y,T,I,X,it,gt,Zt,ie){return r=new rD(r,s,f,I,X,it,gt,ie),s=1,T===!0&&(s|=24),T=Bi(3,null,null,s),r.current=T,T.stateNode=r,s=Op(),s.refCount++,r.pooledCache=s,s.refCount++,T.memoizedState={element:m,isDehydrated:f,cache:s},La(T),r}function ME(r){return r?(r=Ho,r):Ho}function EE(r,s,f,m,y,T){y=ME(y),m.context===null?m.context=y:m.pendingContext=y,m=pr(s),m.payload={element:f},T=T===void 0?null:T,T!==null&&(m.callback=T),f=mr(r,m,s),f!==null&&(Wi(f,r,s),il(f,r,s))}function TE(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var f=r.retryLane;r.retryLane=f!==0&&f<s?f:s}}function h1(r,s){TE(r,s),(r=r.alternate)&&TE(r,s)}function AE(r){if(r.tag===13){var s=Zs(r,67108864);s!==null&&Wi(s,r,67108864),h1(r,67108864)}}var Bv=!0;function sD(r,s,f,m){var y=L.T;L.T=null;var T=rt.p;try{rt.p=2,d1(r,s,f,m)}finally{rt.p=T,L.T=y}}function oD(r,s,f,m){var y=L.T;L.T=null;var T=rt.p;try{rt.p=8,d1(r,s,f,m)}finally{rt.p=T,L.T=y}}function d1(r,s,f,m){if(Bv){var y=p1(m);if(y===null)e1(r,s,m,Iv,f),RE(r,m);else if(cD(y,r,s,f,m))m.stopPropagation();else if(RE(r,m),s&4&&-1<lD.indexOf(r)){for(;y!==null;){var T=P(y);if(T!==null)switch(T.tag){case 3:if(T=T.stateNode,T.current.memoizedState.isDehydrated){var I=ge(T.pendingLanes);if(I!==0){var X=T;for(X.pendingLanes|=2,X.entangledLanes|=2;I;){var it=1<<31-wt(I);X.entanglements[1]|=it,I&=~it}ni(T),!(en&6)&&(An=Pt()+500,wn(0))}}break;case 13:X=Zs(T,2),X!==null&&Wi(X,T,2),ec(),h1(T,2)}if(T=p1(m),T===null&&e1(r,s,m,Iv,f),T===y)break;y=T}y!==null&&m.stopPropagation()}else e1(r,s,m,null,f)}}function p1(r){return r=Pu(r),m1(r)}var Iv=null;function m1(r){if(Iv=null,r=ne(r),r!==null){var s=ot(r);if(s===null)r=null;else{var f=s.tag;if(f===13){if(r=Dt(s),r!==null)return r;r=null}else if(f===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null)}}return Iv=r,null}function wE(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch($t()){case Xt:return 2;case Re:return 8;case de:case _e:return 32;case an:return 268435456;default:return 32}default:return 32}}var g1=!1,ru=null,su=null,ou=null,gm=new Map,vm=new Map,lu=[],lD="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function RE(r,s){switch(r){case"focusin":case"focusout":ru=null;break;case"dragenter":case"dragleave":su=null;break;case"mouseover":case"mouseout":ou=null;break;case"pointerover":case"pointerout":gm.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":vm.delete(s.pointerId)}}function _m(r,s,f,m,y,T){return r===null||r.nativeEvent!==T?(r={blockedOn:s,domEventName:f,eventSystemFlags:m,nativeEvent:T,targetContainers:[y]},s!==null&&(s=P(s),s!==null&&AE(s)),r):(r.eventSystemFlags|=m,s=r.targetContainers,y!==null&&s.indexOf(y)===-1&&s.push(y),r)}function cD(r,s,f,m,y){switch(s){case"focusin":return ru=_m(ru,r,s,f,m,y),!0;case"dragenter":return su=_m(su,r,s,f,m,y),!0;case"mouseover":return ou=_m(ou,r,s,f,m,y),!0;case"pointerover":var T=y.pointerId;return gm.set(T,_m(gm.get(T)||null,r,s,f,m,y)),!0;case"gotpointercapture":return T=y.pointerId,vm.set(T,_m(vm.get(T)||null,r,s,f,m,y)),!0}return!1}function CE(r){var s=ne(r.target);if(s!==null){var f=ot(s);if(f!==null){if(s=f.tag,s===13){if(s=Dt(f),s!==null){r.blockedOn=s,ua(r.priority,function(){if(f.tag===13){var m=Pa(),y=Zs(f,m);y!==null&&Wi(y,f,m),h1(f,m)}});return}}else if(s===3&&f.stateNode.current.memoizedState.isDehydrated){r.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Pv(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var f=p1(r.nativeEvent);if(f===null){f=r.nativeEvent;var m=new f.constructor(f.type,f);_h=m,f.target.dispatchEvent(m),_h=null}else return s=P(f),s!==null&&AE(s),r.blockedOn=f,!1;s.shift()}return!0}function DE(r,s,f){Pv(r)&&f.delete(s)}function uD(){g1=!1,ru!==null&&Pv(ru)&&(ru=null),su!==null&&Pv(su)&&(su=null),ou!==null&&Pv(ou)&&(ou=null),gm.forEach(DE),vm.forEach(DE)}function Hv(r,s){r.blockedOn===s&&(r.blockedOn=null,g1||(g1=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,uD)))}var Fv=null;function NE(r){Fv!==r&&(Fv=r,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Fv===r&&(Fv=null);for(var s=0;s<r.length;s+=3){var f=r[s],m=r[s+1],y=r[s+2];if(typeof m!="function"){if(m1(m||f)===null)continue;break}var T=P(f);T!==null&&(r.splice(s,3),s-=3,Vp(T,{pending:!0,data:y,method:f.method,action:m},m,y))}}))}function ym(r){function s(it){return Hv(it,r)}ru!==null&&Hv(ru,r),su!==null&&Hv(su,r),ou!==null&&Hv(ou,r),gm.forEach(s),vm.forEach(s);for(var f=0;f<lu.length;f++){var m=lu[f];m.blockedOn===r&&(m.blockedOn=null)}for(;0<lu.length&&(f=lu[0],f.blockedOn===null);)CE(f),f.blockedOn===null&&lu.shift();if(f=(r.ownerDocument||r).$$reactFormReplay,f!=null)for(m=0;m<f.length;m+=3){var y=f[m],T=f[m+1],I=y[un]||null;if(typeof T=="function")I||NE(f);else if(I){var X=null;if(T&&T.hasAttribute("formAction")){if(y=T,I=T[un]||null)X=I.formAction;else if(m1(y)!==null)continue}else X=I.action;typeof X=="function"?f[m+1]=X:(f.splice(m,3),m-=3),NE(f)}}}function v1(r){this._internalRoot=r}Gv.prototype.render=v1.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(i(409));var f=s.current,m=Pa();EE(f,m,r,s,null,null)},Gv.prototype.unmount=v1.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;r.tag===0&&fe(),EE(r.current,2,null,r,null,null),ec(),s[H]=null}};function Gv(r){this._internalRoot=r}Gv.prototype.unstable_scheduleHydration=function(r){if(r){var s=Rr();r={blockedOn:null,target:r,priority:s};for(var f=0;f<lu.length&&s!==0&&s<lu[f].priority;f++);lu.splice(f,0,r),f===0&&CE(r)}};var UE=t.version;if(UE!=="19.0.0")throw Error(i(527,UE,"19.0.0"));rt.findDOMNode=function(r){var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=ht(s),r=r!==null?Tt(r):null,r=r===null?null:r.stateNode,r};var fD={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:L,findFiberByHostInstance:ne,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Vv=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Vv.isDisabled&&Vv.supportsFiber)try{Ce=Vv.inject(fD),me=Vv}catch{}}return Sm.createRoot=function(r,s){if(!a(r))throw Error(i(299));var f=!1,m="",y=mv,T=gv,I=vv,X=null;return s!=null&&(s.unstable_strictMode===!0&&(f=!0),s.identifierPrefix!==void 0&&(m=s.identifierPrefix),s.onUncaughtError!==void 0&&(y=s.onUncaughtError),s.onCaughtError!==void 0&&(T=s.onCaughtError),s.onRecoverableError!==void 0&&(I=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(X=s.unstable_transitionCallbacks)),s=bE(r,1,!1,null,null,f,m,y,T,I,X,null),r[H]=s.current,t1(r.nodeType===8?r.parentNode:r),new v1(s)},Sm.hydrateRoot=function(r,s,f){if(!a(r))throw Error(i(299));var m=!1,y="",T=mv,I=gv,X=vv,it=null,gt=null;return f!=null&&(f.unstable_strictMode===!0&&(m=!0),f.identifierPrefix!==void 0&&(y=f.identifierPrefix),f.onUncaughtError!==void 0&&(T=f.onUncaughtError),f.onCaughtError!==void 0&&(I=f.onCaughtError),f.onRecoverableError!==void 0&&(X=f.onRecoverableError),f.unstable_transitionCallbacks!==void 0&&(it=f.unstable_transitionCallbacks),f.formState!==void 0&&(gt=f.formState)),s=bE(r,1,!0,s,f??null,m,y,T,I,X,it,gt),s.context=ME(null),f=s.current,m=Pa(),y=pr(m),y.callback=null,mr(f,y,m),s.current.lanes=m,bi(s,m),ni(s),r[H]=s.current,t1(r),new Gv(s)},Sm.version="19.0.0",Sm}var kE;function MD(){if(kE)return S1.exports;kE=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),S1.exports=bD(),S1.exports}var ED=MD();function TD(n){if(n.sheet)return n.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===n)return document.styleSheets[t]}function AD(n){var t=document.createElement("style");return t.setAttribute("data-emotion",n.key),n.nonce!==void 0&&t.setAttribute("nonce",n.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var wD=function(){function n(e){var i=this;this._insertTag=function(a){var o;i.tags.length===0?i.insertionPoint?o=i.insertionPoint.nextSibling:i.prepend?o=i.container.firstChild:o=i.before:o=i.tags[i.tags.length-1].nextSibling,i.container.insertBefore(a,o),i.tags.push(a)},this.isSpeedy=e.speedy===void 0?!0:e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var t=n.prototype;return t.hydrate=function(i){i.forEach(this._insertTag)},t.insert=function(i){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(AD(this));var a=this.tags[this.tags.length-1];if(this.isSpeedy){var o=TD(a);try{o.insertRule(i,o.cssRules.length)}catch{}}else a.appendChild(document.createTextNode(i));this.ctr++},t.flush=function(){this.tags.forEach(function(i){var a;return(a=i.parentNode)==null?void 0:a.removeChild(i)}),this.tags=[],this.ctr=0},n}(),rr="-ms-",ey="-moz-",Wn="-webkit-",qw="comm",Ib="rule",Pb="decl",RD="@import",Zw="@keyframes",CD="@layer",DD=Math.abs,Jy=String.fromCharCode,ND=Object.assign;function UD(n,t){return Ga(n,0)^45?(((t<<2^Ga(n,0))<<2^Ga(n,1))<<2^Ga(n,2))<<2^Ga(n,3):0}function Ww(n){return n.trim()}function OD(n,t){return(n=t.exec(n))?n[0]:n}function jn(n,t,e){return n.replace(t,e)}function jS(n,t){return n.indexOf(t)}function Ga(n,t){return n.charCodeAt(t)|0}function l0(n,t,e){return n.slice(t,e)}function gl(n){return n.length}function Hb(n){return n.length}function kv(n,t){return t.push(n),n}function LD(n,t){return n.map(t).join("")}var $y=1,Xd=1,jw=0,Wr=0,oa=0,ep="";function tx(n,t,e,i,a,o,u){return{value:n,root:t,parent:e,type:i,props:a,children:o,line:$y,column:Xd,length:u,return:""}}function bm(n,t){return ND(tx("",null,null,"",null,null,0),n,{length:-n.length},t)}function zD(){return oa}function BD(){return oa=Wr>0?Ga(ep,--Wr):0,Xd--,oa===10&&(Xd=1,$y--),oa}function ds(){return oa=Wr<jw?Ga(ep,Wr++):0,Xd++,oa===10&&(Xd=1,$y++),oa}function Sl(){return Ga(ep,Wr)}function q_(){return Wr}function P0(n,t){return l0(ep,n,t)}function c0(n){switch(n){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Kw(n){return $y=Xd=1,jw=gl(ep=n),Wr=0,[]}function Qw(n){return ep="",n}function Z_(n){return Ww(P0(Wr-1,KS(n===91?n+2:n===40?n+1:n)))}function ID(n){for(;(oa=Sl())&&oa<33;)ds();return c0(n)>2||c0(oa)>3?"":" "}function PD(n,t){for(;--t&&ds()&&!(oa<48||oa>102||oa>57&&oa<65||oa>70&&oa<97););return P0(n,q_()+(t<6&&Sl()==32&&ds()==32))}function KS(n){for(;ds();)switch(oa){case n:return Wr;case 34:case 39:n!==34&&n!==39&&KS(oa);break;case 40:n===41&&KS(n);break;case 92:ds();break}return Wr}function HD(n,t){for(;ds()&&n+oa!==57;)if(n+oa===84&&Sl()===47)break;return"/*"+P0(t,Wr-1)+"*"+Jy(n===47?n:ds())}function FD(n){for(;!c0(Sl());)ds();return P0(n,Wr)}function GD(n){return Qw(W_("",null,null,null,[""],n=Kw(n),0,[0],n))}function W_(n,t,e,i,a,o,u,h,d){for(var p=0,v=0,_=u,x=0,b=0,E=0,R=1,w=1,M=1,C=0,U="",D=a,z=o,B=i,F=U;w;)switch(E=C,C=ds()){case 40:if(E!=108&&Ga(F,_-1)==58){jS(F+=jn(Z_(C),"&","&\f"),"&\f")!=-1&&(M=-1);break}case 34:case 39:case 91:F+=Z_(C);break;case 9:case 10:case 13:case 32:F+=ID(E);break;case 92:F+=PD(q_()-1,7);continue;case 47:switch(Sl()){case 42:case 47:kv(VD(HD(ds(),q_()),t,e),d);break;default:F+="/"}break;case 123*R:h[p++]=gl(F)*M;case 125*R:case 59:case 0:switch(C){case 0:case 125:w=0;case 59+v:M==-1&&(F=jn(F,/\f/g,"")),b>0&&gl(F)-_&&kv(b>32?YE(F+";",i,e,_-1):YE(jn(F," ","")+";",i,e,_-2),d);break;case 59:F+=";";default:if(kv(B=XE(F,t,e,p,v,a,h,U,D=[],z=[],_),o),C===123)if(v===0)W_(F,t,B,B,D,o,_,h,z);else switch(x===99&&Ga(F,3)===110?100:x){case 100:case 108:case 109:case 115:W_(n,B,B,i&&kv(XE(n,B,B,0,0,a,h,U,a,D=[],_),z),a,z,_,h,i?D:z);break;default:W_(F,B,B,B,[""],z,0,h,z)}}p=v=b=0,R=M=1,U=F="",_=u;break;case 58:_=1+gl(F),b=E;default:if(R<1){if(C==123)--R;else if(C==125&&R++==0&&BD()==125)continue}switch(F+=Jy(C),C*R){case 38:M=v>0?1:(F+="\f",-1);break;case 44:h[p++]=(gl(F)-1)*M,M=1;break;case 64:Sl()===45&&(F+=Z_(ds())),x=Sl(),v=_=gl(U=F+=FD(q_())),C++;break;case 45:E===45&&gl(F)==2&&(R=0)}}return o}function XE(n,t,e,i,a,o,u,h,d,p,v){for(var _=a-1,x=a===0?o:[""],b=Hb(x),E=0,R=0,w=0;E<i;++E)for(var M=0,C=l0(n,_+1,_=DD(R=u[E])),U=n;M<b;++M)(U=Ww(R>0?x[M]+" "+C:jn(C,/&\f/g,x[M])))&&(d[w++]=U);return tx(n,t,e,a===0?Ib:h,d,p,v)}function VD(n,t,e){return tx(n,t,e,qw,Jy(zD()),l0(n,2,-2),0)}function YE(n,t,e,i){return tx(n,t,e,Pb,l0(n,0,i),l0(n,i+1,-1),i)}function Hd(n,t){for(var e="",i=Hb(n),a=0;a<i;a++)e+=t(n[a],a,n,t)||"";return e}function kD(n,t,e,i){switch(n.type){case CD:if(n.children.length)break;case RD:case Pb:return n.return=n.return||n.value;case qw:return"";case Zw:return n.return=n.value+"{"+Hd(n.children,i)+"}";case Ib:n.value=n.props.join(",")}return gl(e=Hd(n.children,i))?n.return=n.value+"{"+e+"}":""}function XD(n){var t=Hb(n);return function(e,i,a,o){for(var u="",h=0;h<t;h++)u+=n[h](e,i,a,o)||"";return u}}function YD(n){return function(t){t.root||(t=t.return)&&n(t)}}function qD(n){var t=Object.create(null);return function(e){return t[e]===void 0&&(t[e]=n(e)),t[e]}}var ZD=function(t,e,i){for(var a=0,o=0;a=o,o=Sl(),a===38&&o===12&&(e[i]=1),!c0(o);)ds();return P0(t,Wr)},WD=function(t,e){var i=-1,a=44;do switch(c0(a)){case 0:a===38&&Sl()===12&&(e[i]=1),t[i]+=ZD(Wr-1,e,i);break;case 2:t[i]+=Z_(a);break;case 4:if(a===44){t[++i]=Sl()===58?"&\f":"",e[i]=t[i].length;break}default:t[i]+=Jy(a)}while(a=ds());return t},jD=function(t,e){return Qw(WD(Kw(t),e))},qE=new WeakMap,KD=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var e=t.value,i=t.parent,a=t.column===i.column&&t.line===i.line;i.type!=="rule";)if(i=i.parent,!i)return;if(!(t.props.length===1&&e.charCodeAt(0)!==58&&!qE.get(i))&&!a){qE.set(t,!0);for(var o=[],u=jD(e,o),h=i.props,d=0,p=0;d<u.length;d++)for(var v=0;v<h.length;v++,p++)t.props[p]=o[d]?u[d].replace(/&\f/g,h[v]):h[v]+" "+u[d]}}},QD=function(t){if(t.type==="decl"){var e=t.value;e.charCodeAt(0)===108&&e.charCodeAt(2)===98&&(t.return="",t.value="")}};function Jw(n,t){switch(UD(n,t)){case 5103:return Wn+"print-"+n+n;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Wn+n+n;case 5349:case 4246:case 4810:case 6968:case 2756:return Wn+n+ey+n+rr+n+n;case 6828:case 4268:return Wn+n+rr+n+n;case 6165:return Wn+n+rr+"flex-"+n+n;case 5187:return Wn+n+jn(n,/(\w+).+(:[^]+)/,Wn+"box-$1$2"+rr+"flex-$1$2")+n;case 5443:return Wn+n+rr+"flex-item-"+jn(n,/flex-|-self/,"")+n;case 4675:return Wn+n+rr+"flex-line-pack"+jn(n,/align-content|flex-|-self/,"")+n;case 5548:return Wn+n+rr+jn(n,"shrink","negative")+n;case 5292:return Wn+n+rr+jn(n,"basis","preferred-size")+n;case 6060:return Wn+"box-"+jn(n,"-grow","")+Wn+n+rr+jn(n,"grow","positive")+n;case 4554:return Wn+jn(n,/([^-])(transform)/g,"$1"+Wn+"$2")+n;case 6187:return jn(jn(jn(n,/(zoom-|grab)/,Wn+"$1"),/(image-set)/,Wn+"$1"),n,"")+n;case 5495:case 3959:return jn(n,/(image-set\([^]*)/,Wn+"$1$`$1");case 4968:return jn(jn(n,/(.+:)(flex-)?(.*)/,Wn+"box-pack:$3"+rr+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Wn+n+n;case 4095:case 3583:case 4068:case 2532:return jn(n,/(.+)-inline(.+)/,Wn+"$1$2")+n;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(gl(n)-1-t>6)switch(Ga(n,t+1)){case 109:if(Ga(n,t+4)!==45)break;case 102:return jn(n,/(.+:)(.+)-([^]+)/,"$1"+Wn+"$2-$3$1"+ey+(Ga(n,t+3)==108?"$3":"$2-$3"))+n;case 115:return~jS(n,"stretch")?Jw(jn(n,"stretch","fill-available"),t)+n:n}break;case 4949:if(Ga(n,t+1)!==115)break;case 6444:switch(Ga(n,gl(n)-3-(~jS(n,"!important")&&10))){case 107:return jn(n,":",":"+Wn)+n;case 101:return jn(n,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Wn+(Ga(n,14)===45?"inline-":"")+"box$3$1"+Wn+"$2$3$1"+rr+"$2box$3")+n}break;case 5936:switch(Ga(n,t+11)){case 114:return Wn+n+rr+jn(n,/[svh]\w+-[tblr]{2}/,"tb")+n;case 108:return Wn+n+rr+jn(n,/[svh]\w+-[tblr]{2}/,"tb-rl")+n;case 45:return Wn+n+rr+jn(n,/[svh]\w+-[tblr]{2}/,"lr")+n}return Wn+n+rr+n+n}return n}var JD=function(t,e,i,a){if(t.length>-1&&!t.return)switch(t.type){case Pb:t.return=Jw(t.value,t.length);break;case Zw:return Hd([bm(t,{value:jn(t.value,"@","@"+Wn)})],a);case Ib:if(t.length)return LD(t.props,function(o){switch(OD(o,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Hd([bm(t,{props:[jn(o,/:(read-\w+)/,":"+ey+"$1")]})],a);case"::placeholder":return Hd([bm(t,{props:[jn(o,/:(plac\w+)/,":"+Wn+"input-$1")]}),bm(t,{props:[jn(o,/:(plac\w+)/,":"+ey+"$1")]}),bm(t,{props:[jn(o,/:(plac\w+)/,rr+"input-$1")]})],a)}return""})}},$D=[JD],tN=function(t){var e=t.key;if(e==="css"){var i=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(i,function(R){var w=R.getAttribute("data-emotion");w.indexOf(" ")!==-1&&(document.head.appendChild(R),R.setAttribute("data-s",""))})}var a=t.stylisPlugins||$D,o={},u,h=[];u=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+e+' "]'),function(R){for(var w=R.getAttribute("data-emotion").split(" "),M=1;M<w.length;M++)o[w[M]]=!0;h.push(R)});var d,p=[KD,QD];{var v,_=[kD,YD(function(R){v.insert(R)})],x=XD(p.concat(a,_)),b=function(w){return Hd(GD(w),x)};d=function(w,M,C,U){v=C,b(w?w+"{"+M.styles+"}":M.styles),U&&(E.inserted[M.name]=!0)}}var E={key:e,sheet:new wD({key:e,container:u,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:o,registered:{},insert:d};return E.sheet.hydrate(h),E};function ny(){return ny=Object.assign?Object.assign.bind():function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var i in e)({}).hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},ny.apply(null,arguments)}var T1={exports:{}},ti={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZE;function eN(){if(ZE)return ti;ZE=1;var n=typeof Symbol=="function"&&Symbol.for,t=n?Symbol.for("react.element"):60103,e=n?Symbol.for("react.portal"):60106,i=n?Symbol.for("react.fragment"):60107,a=n?Symbol.for("react.strict_mode"):60108,o=n?Symbol.for("react.profiler"):60114,u=n?Symbol.for("react.provider"):60109,h=n?Symbol.for("react.context"):60110,d=n?Symbol.for("react.async_mode"):60111,p=n?Symbol.for("react.concurrent_mode"):60111,v=n?Symbol.for("react.forward_ref"):60112,_=n?Symbol.for("react.suspense"):60113,x=n?Symbol.for("react.suspense_list"):60120,b=n?Symbol.for("react.memo"):60115,E=n?Symbol.for("react.lazy"):60116,R=n?Symbol.for("react.block"):60121,w=n?Symbol.for("react.fundamental"):60117,M=n?Symbol.for("react.responder"):60118,C=n?Symbol.for("react.scope"):60119;function U(z){if(typeof z=="object"&&z!==null){var B=z.$$typeof;switch(B){case t:switch(z=z.type,z){case d:case p:case i:case o:case a:case _:return z;default:switch(z=z&&z.$$typeof,z){case h:case v:case E:case b:case u:return z;default:return B}}case e:return B}}}function D(z){return U(z)===p}return ti.AsyncMode=d,ti.ConcurrentMode=p,ti.ContextConsumer=h,ti.ContextProvider=u,ti.Element=t,ti.ForwardRef=v,ti.Fragment=i,ti.Lazy=E,ti.Memo=b,ti.Portal=e,ti.Profiler=o,ti.StrictMode=a,ti.Suspense=_,ti.isAsyncMode=function(z){return D(z)||U(z)===d},ti.isConcurrentMode=D,ti.isContextConsumer=function(z){return U(z)===h},ti.isContextProvider=function(z){return U(z)===u},ti.isElement=function(z){return typeof z=="object"&&z!==null&&z.$$typeof===t},ti.isForwardRef=function(z){return U(z)===v},ti.isFragment=function(z){return U(z)===i},ti.isLazy=function(z){return U(z)===E},ti.isMemo=function(z){return U(z)===b},ti.isPortal=function(z){return U(z)===e},ti.isProfiler=function(z){return U(z)===o},ti.isStrictMode=function(z){return U(z)===a},ti.isSuspense=function(z){return U(z)===_},ti.isValidElementType=function(z){return typeof z=="string"||typeof z=="function"||z===i||z===p||z===o||z===a||z===_||z===x||typeof z=="object"&&z!==null&&(z.$$typeof===E||z.$$typeof===b||z.$$typeof===u||z.$$typeof===h||z.$$typeof===v||z.$$typeof===w||z.$$typeof===M||z.$$typeof===C||z.$$typeof===R)},ti.typeOf=U,ti}var WE;function nN(){return WE||(WE=1,T1.exports=eN()),T1.exports}var A1,jE;function iN(){if(jE)return A1;jE=1;var n=nN(),t={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},e={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},i={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},o={};o[n.ForwardRef]=i,o[n.Memo]=a;function u(E){return n.isMemo(E)?a:o[E.$$typeof]||t}var h=Object.defineProperty,d=Object.getOwnPropertyNames,p=Object.getOwnPropertySymbols,v=Object.getOwnPropertyDescriptor,_=Object.getPrototypeOf,x=Object.prototype;function b(E,R,w){if(typeof R!="string"){if(x){var M=_(R);M&&M!==x&&b(E,M,w)}var C=d(R);p&&(C=C.concat(p(R)));for(var U=u(E),D=u(R),z=0;z<C.length;++z){var B=C[z];if(!e[B]&&!(w&&w[B])&&!(D&&D[B])&&!(U&&U[B])){var F=v(R,B);try{h(E,B,F)}catch{}}}}return E}return A1=b,A1}iN();var aN=!0;function rN(n,t,e){var i="";return e.split(" ").forEach(function(a){n[a]!==void 0?t.push(n[a]+";"):a&&(i+=a+" ")}),i}var $w=function(t,e,i){var a=t.key+"-"+e.name;(i===!1||aN===!1)&&t.registered[a]===void 0&&(t.registered[a]=e.styles)},sN=function(t,e,i){$w(t,e,i);var a=t.key+"-"+e.name;if(t.inserted[e.name]===void 0){var o=e;do t.insert(e===o?"."+a:"",o,t.sheet,!0),o=o.next;while(o!==void 0)}};function oN(n){for(var t=0,e,i=0,a=n.length;a>=4;++i,a-=4)e=n.charCodeAt(i)&255|(n.charCodeAt(++i)&255)<<8|(n.charCodeAt(++i)&255)<<16|(n.charCodeAt(++i)&255)<<24,e=(e&65535)*1540483477+((e>>>16)*59797<<16),e^=e>>>24,t=(e&65535)*1540483477+((e>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(a){case 3:t^=(n.charCodeAt(i+2)&255)<<16;case 2:t^=(n.charCodeAt(i+1)&255)<<8;case 1:t^=n.charCodeAt(i)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var lN={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},cN=/[A-Z]|^ms/g,uN=/_EMO_([^_]+?)_([^]*?)_EMO_/g,t2=function(t){return t.charCodeAt(1)===45},KE=function(t){return t!=null&&typeof t!="boolean"},w1=qD(function(n){return t2(n)?n:n.replace(cN,"-$&").toLowerCase()}),QE=function(t,e){switch(t){case"animation":case"animationName":if(typeof e=="string")return e.replace(uN,function(i,a,o){return vl={name:a,styles:o,next:vl},a})}return lN[t]!==1&&!t2(t)&&typeof e=="number"&&e!==0?e+"px":e};function u0(n,t,e){if(e==null)return"";var i=e;if(i.__emotion_styles!==void 0)return i;switch(typeof e){case"boolean":return"";case"object":{var a=e;if(a.anim===1)return vl={name:a.name,styles:a.styles,next:vl},a.name;var o=e;if(o.styles!==void 0){var u=o.next;if(u!==void 0)for(;u!==void 0;)vl={name:u.name,styles:u.styles,next:vl},u=u.next;var h=o.styles+";";return h}return fN(n,t,e)}case"function":{if(n!==void 0){var d=vl,p=e(n);return vl=d,u0(n,t,p)}break}}var v=e;return v}function fN(n,t,e){var i="";if(Array.isArray(e))for(var a=0;a<e.length;a++)i+=u0(n,t,e[a])+";";else for(var o in e){var u=e[o];if(typeof u!="object"){var h=u;KE(h)&&(i+=w1(o)+":"+QE(o,h)+";")}else if(Array.isArray(u)&&typeof u[0]=="string"&&t==null)for(var d=0;d<u.length;d++)KE(u[d])&&(i+=w1(o)+":"+QE(o,u[d])+";");else{var p=u0(n,t,u);switch(o){case"animation":case"animationName":{i+=w1(o)+":"+p+";";break}default:i+=o+"{"+p+"}"}}}return i}var JE=/label:\s*([^\s;{]+)\s*(;|$)/g,vl;function e2(n,t,e){if(n.length===1&&typeof n[0]=="object"&&n[0]!==null&&n[0].styles!==void 0)return n[0];var i=!0,a="";vl=void 0;var o=n[0];if(o==null||o.raw===void 0)i=!1,a+=u0(e,t,o);else{var u=o;a+=u[0]}for(var h=1;h<n.length;h++)if(a+=u0(e,t,n[h]),i){var d=o;a+=d[h]}JE.lastIndex=0;for(var p="",v;(v=JE.exec(a))!==null;)p+="-"+v[1];var _=oN(a)+p;return{name:_,styles:a,next:vl}}var hN=function(t){return t()},dN=IE.useInsertionEffect?IE.useInsertionEffect:!1,pN=dN||hN,n2=kt.createContext(typeof HTMLElement<"u"?tN({key:"css"}):null);n2.Provider;var mN=function(t){return kt.forwardRef(function(e,i){var a=kt.useContext(n2);return t(e,a,i)})},gN=kt.createContext({}),H0={}.hasOwnProperty,QS="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",Fb=function(t,e){var i={};for(var a in e)H0.call(e,a)&&(i[a]=e[a]);return i[QS]=t,i},vN=function(t){var e=t.cache,i=t.serialized,a=t.isStringTag;return $w(e,i,a),pN(function(){return sN(e,i,a)}),null},_N=mN(function(n,t,e){var i=n.css;typeof i=="string"&&t.registered[i]!==void 0&&(i=t.registered[i]);var a=n[QS],o=[i],u="";typeof n.className=="string"?u=rN(t.registered,o,n.className):n.className!=null&&(u=n.className+" ");var h=e2(o,void 0,kt.useContext(gN));u+=t.key+"-"+h.name;var d={};for(var p in n)H0.call(n,p)&&p!=="css"&&p!==QS&&(d[p]=n[p]);return d.className=u,e&&(d.ref=e),kt.createElement(kt.Fragment,null,kt.createElement(vN,{cache:t,serialized:h,isStringTag:typeof a=="string"}),kt.createElement(a,d))}),Gb=_N,i2=Oe.Fragment,zt=function(t,e,i){return H0.call(e,"css")?Oe.jsx(Gb,Fb(t,e),i):Oe.jsx(t,e,i)},dn=function(t,e,i){return H0.call(e,"css")?Oe.jsxs(Gb,Fb(t,e),i):Oe.jsxs(t,e,i)},$E=function(t,e){var i=arguments;if(e==null||!H0.call(e,"css"))return kt.createElement.apply(void 0,i);var a=i.length,o=new Array(a);o[0]=Gb,o[1]=Fb(t,e);for(var u=2;u<a;u++)o[u]=i[u];return kt.createElement.apply(null,o)};(function(n){var t;t||(t=n.JSX||(n.JSX={}))})($E||($E={}));function a2(){for(var n=arguments.length,t=new Array(n),e=0;e<n;e++)t[e]=arguments[e];return e2(t)}var yN=Symbol.for("preact-signals");function Vb(){if(Fd>1)Fd--;else{for(var n,t=!1;Ym!==void 0;){var e=Ym;for(Ym=void 0,JS++;e!==void 0;){var i=e.o;if(e.o=void 0,e.f&=-3,!(8&e.f)&&s2(e))try{e.c()}catch(a){t||(n=a,t=!0)}e=i}}if(JS=0,Fd--,t)throw n}}var mi=void 0,Ym=void 0,Fd=0,JS=0,iy=0;function r2(n){if(mi!==void 0){var t=n.n;if(t===void 0||t.t!==mi)return t={i:0,S:n,p:mi.s,n:void 0,t:mi,e:void 0,x:void 0,r:t},mi.s!==void 0&&(mi.s.n=t),mi.s=t,n.n=t,32&mi.f&&n.S(t),t;if(t.i===-1)return t.i=0,t.n!==void 0&&(t.n.p=t.p,t.p!==void 0&&(t.p.n=t.n),t.p=mi.s,t.n=void 0,mi.s.n=t,mi.s=t),t}}function lr(n){this.v=n,this.i=0,this.n=void 0,this.t=void 0}lr.prototype.brand=yN;lr.prototype.h=function(){return!0};lr.prototype.S=function(n){this.t!==n&&n.e===void 0&&(n.x=this.t,this.t!==void 0&&(this.t.e=n),this.t=n)};lr.prototype.U=function(n){if(this.t!==void 0){var t=n.e,e=n.x;t!==void 0&&(t.x=e,n.e=void 0),e!==void 0&&(e.e=t,n.x=void 0),n===this.t&&(this.t=e)}};lr.prototype.subscribe=function(n){var t=this;return Xb(function(){var e=t.value,i=mi;mi=void 0;try{n(e)}finally{mi=i}})};lr.prototype.valueOf=function(){return this.value};lr.prototype.toString=function(){return this.value+""};lr.prototype.toJSON=function(){return this.value};lr.prototype.peek=function(){var n=mi;mi=void 0;try{return this.value}finally{mi=n}};Object.defineProperty(lr.prototype,"value",{get:function(){var n=r2(this);return n!==void 0&&(n.i=this.i),this.v},set:function(n){if(n!==this.v){if(JS>100)throw new Error("Cycle detected");this.v=n,this.i++,iy++,Fd++;try{for(var t=this.t;t!==void 0;t=t.x)t.t.N()}finally{Vb()}}}});function Ci(n){return new lr(n)}function s2(n){for(var t=n.s;t!==void 0;t=t.n)if(t.S.i!==t.i||!t.S.h()||t.S.i!==t.i)return!0;return!1}function o2(n){for(var t=n.s;t!==void 0;t=t.n){var e=t.S.n;if(e!==void 0&&(t.r=e),t.S.n=t,t.i=-1,t.n===void 0){n.s=t;break}}}function l2(n){for(var t=n.s,e=void 0;t!==void 0;){var i=t.p;t.i===-1?(t.S.U(t),i!==void 0&&(i.n=t.n),t.n!==void 0&&(t.n.p=i)):e=t,t.S.n=t.r,t.r!==void 0&&(t.r=void 0),t=i}n.s=e}function F0(n){lr.call(this,void 0),this.x=n,this.s=void 0,this.g=iy-1,this.f=4}(F0.prototype=new lr).h=function(){if(this.f&=-3,1&this.f)return!1;if((36&this.f)==32||(this.f&=-5,this.g===iy))return!0;if(this.g=iy,this.f|=1,this.i>0&&!s2(this))return this.f&=-2,!0;var n=mi;try{o2(this),mi=this;var t=this.x();(16&this.f||this.v!==t||this.i===0)&&(this.v=t,this.f&=-17,this.i++)}catch(e){this.v=e,this.f|=16,this.i++}return mi=n,l2(this),this.f&=-2,!0};F0.prototype.S=function(n){if(this.t===void 0){this.f|=36;for(var t=this.s;t!==void 0;t=t.n)t.S.S(t)}lr.prototype.S.call(this,n)};F0.prototype.U=function(n){if(this.t!==void 0&&(lr.prototype.U.call(this,n),this.t===void 0)){this.f&=-33;for(var t=this.s;t!==void 0;t=t.n)t.S.U(t)}};F0.prototype.N=function(){if(!(2&this.f)){this.f|=6;for(var n=this.t;n!==void 0;n=n.x)n.t.N()}};Object.defineProperty(F0.prototype,"value",{get:function(){if(1&this.f)throw new Error("Cycle detected");var n=r2(this);if(this.h(),n!==void 0&&(n.i=this.i),16&this.f)throw this.v;return this.v}});function c2(n){var t=n.u;if(n.u=void 0,typeof t=="function"){Fd++;var e=mi;mi=void 0;try{t()}catch(i){throw n.f&=-2,n.f|=8,kb(n),i}finally{mi=e,Vb()}}}function kb(n){for(var t=n.s;t!==void 0;t=t.n)t.S.U(t);n.x=void 0,n.s=void 0,c2(n)}function xN(n){if(mi!==this)throw new Error("Out-of-order effect");l2(this),mi=n,this.f&=-2,8&this.f&&kb(this),Vb()}function G0(n){this.x=n,this.u=void 0,this.s=void 0,this.o=void 0,this.f=32}G0.prototype.c=function(){var n=this.S();try{if(8&this.f||this.x===void 0)return;var t=this.x();typeof t=="function"&&(this.u=t)}finally{n()}};G0.prototype.S=function(){if(1&this.f)throw new Error("Cycle detected");this.f|=1,this.f&=-9,c2(this),o2(this),Fd++;var n=mi;return mi=this,xN.bind(this,n)};G0.prototype.N=function(){2&this.f||(this.f|=2,this.o=Ym,Ym=this)};G0.prototype.d=function(){this.f|=8,1&this.f||kb(this)};function Xb(n){var t=new G0(n);try{t.c()}catch(e){throw t.d(),e}return t.d.bind(t)}var R1={exports:{}},C1={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tT;function SN(){if(tT)return C1;tT=1;var n=tp();function t(_,x){return _===x&&(_!==0||1/_===1/x)||_!==_&&x!==x}var e=typeof Object.is=="function"?Object.is:t,i=n.useState,a=n.useEffect,o=n.useLayoutEffect,u=n.useDebugValue;function h(_,x){var b=x(),E=i({inst:{value:b,getSnapshot:x}}),R=E[0].inst,w=E[1];return o(function(){R.value=b,R.getSnapshot=x,d(R)&&w({inst:R})},[_,b,x]),a(function(){return d(R)&&w({inst:R}),_(function(){d(R)&&w({inst:R})})},[_]),u(b),b}function d(_){var x=_.getSnapshot;_=_.value;try{var b=x();return!e(_,b)}catch{return!0}}function p(_,x){return x()}var v=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?p:h;return C1.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:v,C1}var eT;function u2(){return eT||(eT=1,R1.exports=SN()),R1.exports}var bN=u2(),MN=kt.version.split(".").map(Number)[0],EN=[],TN=Symbol.for(MN>=19?"react.transitional.element":"react.element"),kf,f2=Symbol.dispose||Symbol.for("Symbol.dispose");function D1(n,t){var e=t.effect.S();return kf=t,AN.bind(t,n,e)}function AN(n,t){t(),kf=n}var nT,$S,iT=function(){},wN=((nT={o:0,effect:{s:void 0,c:function(){},S:function(){return iT},d:function(){}},subscribe:function(){return iT},getSnapshot:function(){return 0},S:function(){},f:function(){}})[f2]=function(){},nT),RN=Promise.prototype.then.bind(Promise.resolve());function CN(){$S||($S=RN(DN))}function DN(){var n;$S=void 0,(n=kf)==null||n.f()}function h2(n){CN();var t=kt.useRef();t.current==null&&(typeof window>"u"?t.current=wN:t.current=function(i){var a,o,u,h,d=0,p=Xb(function(){o=this});return o.c=function(){d=d+1|0,h&&h()},(a={o:i,effect:o,subscribe:function(v){return h=v,function(){d=d+1|0,h=void 0,p()}},getSnapshot:function(){return d},S:function(){if(kf!=null){var v=kf.o,_=this.o;v==0&&_==0||v==0&&_==1?(kf.f(),u=D1(void 0,this)):v==1&&_==0||v==2&&_==0||(u=D1(kf,this))}else u=D1(void 0,this)},f:function(){var v=u;u=void 0,v==null||v()}})[f2]=function(){this.f()},a}(n));var e=t.current;return bN.useSyncExternalStore(e.subscribe,e.getSnapshot,e.getSnapshot),e.S(),e}Object.defineProperties(lr.prototype,{$$typeof:{configurable:!0,value:TN},type:{configurable:!0,value:function(n){var t=n.data,e=h2(1);try{return t.value}finally{e.f()}}},props:{configurable:!0,get:function(){return{data:this}}},ref:{configurable:!0,value:null}});function Co(n){return h2(n)}function Jf(n){return kt.useMemo(function(){return Ci(n)},EN)}const NN=""+new URL("react-4OW0wHj8.svg",import.meta.url).href;var N1={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var aT;function UN(){return aT||(aT=1,function(n){(function(){var t={}.hasOwnProperty;function e(){for(var o="",u=0;u<arguments.length;u++){var h=arguments[u];h&&(o=a(o,i(h)))}return o}function i(o){if(typeof o=="string"||typeof o=="number")return o;if(typeof o!="object")return"";if(Array.isArray(o))return e.apply(null,o);if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]"))return o.toString();var u="";for(var h in o)t.call(o,h)&&o[h]&&(u=a(u,h));return u}function a(o,u){return u?o?o+" "+u:o+u:o}n.exports?(e.default=e,n.exports=e):window.classNames=e})()}(N1)),N1.exports}var ON=UN();const Sc=Qy(ON),uu=({title:n,active:t,onClick:e,children:i})=>{const[a,o]=kt.useState(!1);return zt("div",{css:LN,className:Sc("header-bar-icon",{active:t},{hover:a}),title:n,onClick:e,onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),children:i})},LN={name:"1s38to0",styles:"display:inline-block;margin-right:15.5px;cursor:pointer;width:40px;height:40px;border-radius:10px;&:hover{.material-icons,img{top:-2px;}}&:active{.material-icons,img{top:4px;}}&.active{background:rgba(0, 0, 0, 0.2);.material-icons{font-size:35px!important;}}.material-icons,img{position:relative;top:2px;left:2.5px;transition:all 0.2s;font-size:35px!important;color:white;}"};class zN{constructor(t){const e={usePointerEvents:!1,scaleMultiplier:1};t=t===void 0?{}:t,this.options={...e,...t},this._mouseX=0,this._mouseY=0,this._startX=0,this._startY=0,this._callBacks=[],this._isDragging=!1,this._firstMove=!1;const i=this.options.usePointerEvents?"pointermove":"mousemove";window.addEventListener(i,a=>{this._mouseX=a.pageX,this._mouseY=a.pageY}),window.addEventListener(i,a=>this._onDragMove(a)),window.addEventListener("mouseup",a=>this._onDragEnd(a)),window.addEventListener("pointerup",a=>this._onDragEnd(a)),window.addEventListener("touchend",a=>this._onDragEnd(a))}getCursorPos(){return{x:this._mouseX,y:this._mouseY}}setScaleMultiplier(t){this.options.scaleMultiplier=t}dragStart(t,e,i){return i=i===void 0?this.options.scaleMultiplier:i,this.options.scaleMultiplier=i,this._isDragging||(this._startX=this._mouseX,this._startY=this._mouseY),this._callBacks.push({onMove:typeof t>"u"?null:t,onEnd:typeof e>"u"?null:e}),this._isDragging=!0,this._firstMove=!0,this._callBacks.length-1}dragStop(){this._isDragging!=!1&&this._onDragEnd()}_onDragMove(t){if(!this._isDragging)return!1;t.preventDefault(),this._firstMove==!0&&this.options.usePointerEvents==!0&&(this._startX=this._mouseX,this._startY=this._mouseY);var e=(this._startX-this._mouseX)*this.options.scaleMultiplier,i=(this._startY-this._mouseY)*this.options.scaleMultiplier;if(this._callBacks.length>0)for(var a=0;a<this._callBacks.length;a++)this._callBacks[a].onMove!=null&&this._callBacks[a].onMove.call(null,e,i);this._firstMove=!1}_onDragEnd(t){if(this._isDragging!=!1){var e=(this._startX-this._mouseX)*this.options.scaleMultiplier,i=(this._startY-this._mouseY)*this.options.scaleMultiplier;if(this._callBacks.length>0)for(var a=0;a<this._callBacks.length;a++)this._callBacks[a].onEnd!=null&&this._callBacks[a].onEnd.call(null,e,i);this._isDragging=!1,this._callBacks=[]}}cancelCallback(t){console.warn("cancelCallback is deprecated"),this._callBacks[t]={onMove:null,onEnd:null}}}/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */const BN=4,rT=0,sT=1,IN=2;function np(n){let t=n.length;for(;--t>=0;)n[t]=0}const PN=0,d2=1,HN=2,FN=3,GN=258,Yb=29,V0=256,f0=V0+1+Yb,Gd=30,qb=19,p2=2*f0+1,Xf=15,U1=16,VN=7,Zb=256,m2=16,g2=17,v2=18,tb=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),j_=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),kN=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),_2=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),XN=512,dc=new Array((f0+2)*2);np(dc);const qm=new Array(Gd*2);np(qm);const h0=new Array(XN);np(h0);const d0=new Array(GN-FN+1);np(d0);const Wb=new Array(Yb);np(Wb);const ay=new Array(Gd);np(ay);function O1(n,t,e,i,a){this.static_tree=n,this.extra_bits=t,this.extra_base=e,this.elems=i,this.max_length=a,this.has_stree=n&&n.length}let y2,x2,S2;function L1(n,t){this.dyn_tree=n,this.max_code=0,this.stat_desc=t}const b2=n=>n<256?h0[n]:h0[256+(n>>>7)],p0=(n,t)=>{n.pending_buf[n.pending++]=t&255,n.pending_buf[n.pending++]=t>>>8&255},Zr=(n,t,e)=>{n.bi_valid>U1-e?(n.bi_buf|=t<<n.bi_valid&65535,p0(n,n.bi_buf),n.bi_buf=t>>U1-n.bi_valid,n.bi_valid+=e-U1):(n.bi_buf|=t<<n.bi_valid&65535,n.bi_valid+=e)},_l=(n,t,e)=>{Zr(n,e[t*2],e[t*2+1])},M2=(n,t)=>{let e=0;do e|=n&1,n>>>=1,e<<=1;while(--t>0);return e>>>1},YN=n=>{n.bi_valid===16?(p0(n,n.bi_buf),n.bi_buf=0,n.bi_valid=0):n.bi_valid>=8&&(n.pending_buf[n.pending++]=n.bi_buf&255,n.bi_buf>>=8,n.bi_valid-=8)},qN=(n,t)=>{const e=t.dyn_tree,i=t.max_code,a=t.stat_desc.static_tree,o=t.stat_desc.has_stree,u=t.stat_desc.extra_bits,h=t.stat_desc.extra_base,d=t.stat_desc.max_length;let p,v,_,x,b,E,R=0;for(x=0;x<=Xf;x++)n.bl_count[x]=0;for(e[n.heap[n.heap_max]*2+1]=0,p=n.heap_max+1;p<p2;p++)v=n.heap[p],x=e[e[v*2+1]*2+1]+1,x>d&&(x=d,R++),e[v*2+1]=x,!(v>i)&&(n.bl_count[x]++,b=0,v>=h&&(b=u[v-h]),E=e[v*2],n.opt_len+=E*(x+b),o&&(n.static_len+=E*(a[v*2+1]+b)));if(R!==0){do{for(x=d-1;n.bl_count[x]===0;)x--;n.bl_count[x]--,n.bl_count[x+1]+=2,n.bl_count[d]--,R-=2}while(R>0);for(x=d;x!==0;x--)for(v=n.bl_count[x];v!==0;)_=n.heap[--p],!(_>i)&&(e[_*2+1]!==x&&(n.opt_len+=(x-e[_*2+1])*e[_*2],e[_*2+1]=x),v--)}},E2=(n,t,e)=>{const i=new Array(Xf+1);let a=0,o,u;for(o=1;o<=Xf;o++)a=a+e[o-1]<<1,i[o]=a;for(u=0;u<=t;u++){let h=n[u*2+1];h!==0&&(n[u*2]=M2(i[h]++,h))}},ZN=()=>{let n,t,e,i,a;const o=new Array(Xf+1);for(e=0,i=0;i<Yb-1;i++)for(Wb[i]=e,n=0;n<1<<tb[i];n++)d0[e++]=i;for(d0[e-1]=i,a=0,i=0;i<16;i++)for(ay[i]=a,n=0;n<1<<j_[i];n++)h0[a++]=i;for(a>>=7;i<Gd;i++)for(ay[i]=a<<7,n=0;n<1<<j_[i]-7;n++)h0[256+a++]=i;for(t=0;t<=Xf;t++)o[t]=0;for(n=0;n<=143;)dc[n*2+1]=8,n++,o[8]++;for(;n<=255;)dc[n*2+1]=9,n++,o[9]++;for(;n<=279;)dc[n*2+1]=7,n++,o[7]++;for(;n<=287;)dc[n*2+1]=8,n++,o[8]++;for(E2(dc,f0+1,o),n=0;n<Gd;n++)qm[n*2+1]=5,qm[n*2]=M2(n,5);y2=new O1(dc,tb,V0+1,f0,Xf),x2=new O1(qm,j_,0,Gd,Xf),S2=new O1(new Array(0),kN,0,qb,VN)},T2=n=>{let t;for(t=0;t<f0;t++)n.dyn_ltree[t*2]=0;for(t=0;t<Gd;t++)n.dyn_dtree[t*2]=0;for(t=0;t<qb;t++)n.bl_tree[t*2]=0;n.dyn_ltree[Zb*2]=1,n.opt_len=n.static_len=0,n.sym_next=n.matches=0},A2=n=>{n.bi_valid>8?p0(n,n.bi_buf):n.bi_valid>0&&(n.pending_buf[n.pending++]=n.bi_buf),n.bi_buf=0,n.bi_valid=0},oT=(n,t,e,i)=>{const a=t*2,o=e*2;return n[a]<n[o]||n[a]===n[o]&&i[t]<=i[e]},z1=(n,t,e)=>{const i=n.heap[e];let a=e<<1;for(;a<=n.heap_len&&(a<n.heap_len&&oT(t,n.heap[a+1],n.heap[a],n.depth)&&a++,!oT(t,i,n.heap[a],n.depth));)n.heap[e]=n.heap[a],e=a,a<<=1;n.heap[e]=i},lT=(n,t,e)=>{let i,a,o=0,u,h;if(n.sym_next!==0)do i=n.pending_buf[n.sym_buf+o++]&255,i+=(n.pending_buf[n.sym_buf+o++]&255)<<8,a=n.pending_buf[n.sym_buf+o++],i===0?_l(n,a,t):(u=d0[a],_l(n,u+V0+1,t),h=tb[u],h!==0&&(a-=Wb[u],Zr(n,a,h)),i--,u=b2(i),_l(n,u,e),h=j_[u],h!==0&&(i-=ay[u],Zr(n,i,h)));while(o<n.sym_next);_l(n,Zb,t)},eb=(n,t)=>{const e=t.dyn_tree,i=t.stat_desc.static_tree,a=t.stat_desc.has_stree,o=t.stat_desc.elems;let u,h,d=-1,p;for(n.heap_len=0,n.heap_max=p2,u=0;u<o;u++)e[u*2]!==0?(n.heap[++n.heap_len]=d=u,n.depth[u]=0):e[u*2+1]=0;for(;n.heap_len<2;)p=n.heap[++n.heap_len]=d<2?++d:0,e[p*2]=1,n.depth[p]=0,n.opt_len--,a&&(n.static_len-=i[p*2+1]);for(t.max_code=d,u=n.heap_len>>1;u>=1;u--)z1(n,e,u);p=o;do u=n.heap[1],n.heap[1]=n.heap[n.heap_len--],z1(n,e,1),h=n.heap[1],n.heap[--n.heap_max]=u,n.heap[--n.heap_max]=h,e[p*2]=e[u*2]+e[h*2],n.depth[p]=(n.depth[u]>=n.depth[h]?n.depth[u]:n.depth[h])+1,e[u*2+1]=e[h*2+1]=p,n.heap[1]=p++,z1(n,e,1);while(n.heap_len>=2);n.heap[--n.heap_max]=n.heap[1],qN(n,t),E2(e,d,n.bl_count)},cT=(n,t,e)=>{let i,a=-1,o,u=t[0*2+1],h=0,d=7,p=4;for(u===0&&(d=138,p=3),t[(e+1)*2+1]=65535,i=0;i<=e;i++)o=u,u=t[(i+1)*2+1],!(++h<d&&o===u)&&(h<p?n.bl_tree[o*2]+=h:o!==0?(o!==a&&n.bl_tree[o*2]++,n.bl_tree[m2*2]++):h<=10?n.bl_tree[g2*2]++:n.bl_tree[v2*2]++,h=0,a=o,u===0?(d=138,p=3):o===u?(d=6,p=3):(d=7,p=4))},uT=(n,t,e)=>{let i,a=-1,o,u=t[0*2+1],h=0,d=7,p=4;for(u===0&&(d=138,p=3),i=0;i<=e;i++)if(o=u,u=t[(i+1)*2+1],!(++h<d&&o===u)){if(h<p)do _l(n,o,n.bl_tree);while(--h!==0);else o!==0?(o!==a&&(_l(n,o,n.bl_tree),h--),_l(n,m2,n.bl_tree),Zr(n,h-3,2)):h<=10?(_l(n,g2,n.bl_tree),Zr(n,h-3,3)):(_l(n,v2,n.bl_tree),Zr(n,h-11,7));h=0,a=o,u===0?(d=138,p=3):o===u?(d=6,p=3):(d=7,p=4)}},WN=n=>{let t;for(cT(n,n.dyn_ltree,n.l_desc.max_code),cT(n,n.dyn_dtree,n.d_desc.max_code),eb(n,n.bl_desc),t=qb-1;t>=3&&n.bl_tree[_2[t]*2+1]===0;t--);return n.opt_len+=3*(t+1)+5+5+4,t},jN=(n,t,e,i)=>{let a;for(Zr(n,t-257,5),Zr(n,e-1,5),Zr(n,i-4,4),a=0;a<i;a++)Zr(n,n.bl_tree[_2[a]*2+1],3);uT(n,n.dyn_ltree,t-1),uT(n,n.dyn_dtree,e-1)},KN=n=>{let t=4093624447,e;for(e=0;e<=31;e++,t>>>=1)if(t&1&&n.dyn_ltree[e*2]!==0)return rT;if(n.dyn_ltree[9*2]!==0||n.dyn_ltree[10*2]!==0||n.dyn_ltree[13*2]!==0)return sT;for(e=32;e<V0;e++)if(n.dyn_ltree[e*2]!==0)return sT;return rT};let fT=!1;const QN=n=>{fT||(ZN(),fT=!0),n.l_desc=new L1(n.dyn_ltree,y2),n.d_desc=new L1(n.dyn_dtree,x2),n.bl_desc=new L1(n.bl_tree,S2),n.bi_buf=0,n.bi_valid=0,T2(n)},w2=(n,t,e,i)=>{Zr(n,(PN<<1)+(i?1:0),3),A2(n),p0(n,e),p0(n,~e),e&&n.pending_buf.set(n.window.subarray(t,t+e),n.pending),n.pending+=e},JN=n=>{Zr(n,d2<<1,3),_l(n,Zb,dc),YN(n)},$N=(n,t,e,i)=>{let a,o,u=0;n.level>0?(n.strm.data_type===IN&&(n.strm.data_type=KN(n)),eb(n,n.l_desc),eb(n,n.d_desc),u=WN(n),a=n.opt_len+3+7>>>3,o=n.static_len+3+7>>>3,o<=a&&(a=o)):a=o=e+5,e+4<=a&&t!==-1?w2(n,t,e,i):n.strategy===BN||o===a?(Zr(n,(d2<<1)+(i?1:0),3),lT(n,dc,qm)):(Zr(n,(HN<<1)+(i?1:0),3),jN(n,n.l_desc.max_code+1,n.d_desc.max_code+1,u+1),lT(n,n.dyn_ltree,n.dyn_dtree)),T2(n),i&&A2(n)},tU=(n,t,e)=>(n.pending_buf[n.sym_buf+n.sym_next++]=t,n.pending_buf[n.sym_buf+n.sym_next++]=t>>8,n.pending_buf[n.sym_buf+n.sym_next++]=e,t===0?n.dyn_ltree[e*2]++:(n.matches++,t--,n.dyn_ltree[(d0[e]+V0+1)*2]++,n.dyn_dtree[b2(t)*2]++),n.sym_next===n.sym_end);var eU=QN,nU=w2,iU=$N,aU=tU,rU=JN,sU={_tr_init:eU,_tr_stored_block:nU,_tr_flush_block:iU,_tr_tally:aU,_tr_align:rU};const oU=(n,t,e,i)=>{let a=n&65535|0,o=n>>>16&65535|0,u=0;for(;e!==0;){u=e>2e3?2e3:e,e-=u;do a=a+t[i++]|0,o=o+a|0;while(--u);a%=65521,o%=65521}return a|o<<16|0};var m0=oU;const lU=()=>{let n,t=[];for(var e=0;e<256;e++){n=e;for(var i=0;i<8;i++)n=n&1?3988292384^n>>>1:n>>>1;t[e]=n}return t},cU=new Uint32Array(lU()),uU=(n,t,e,i)=>{const a=cU,o=i+e;n^=-1;for(let u=i;u<o;u++)n=n>>>8^a[(n^t[u])&255];return n^-1};var wa=uU,nh={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},k0={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:fU,_tr_stored_block:nb,_tr_flush_block:hU,_tr_tally:Eu,_tr_align:dU}=sU,{Z_NO_FLUSH:Tu,Z_PARTIAL_FLUSH:pU,Z_FULL_FLUSH:mU,Z_FINISH:Ls,Z_BLOCK:hT,Z_OK:Fa,Z_STREAM_END:dT,Z_STREAM_ERROR:bl,Z_DATA_ERROR:gU,Z_BUF_ERROR:B1,Z_DEFAULT_COMPRESSION:vU,Z_FILTERED:_U,Z_HUFFMAN_ONLY:Xv,Z_RLE:yU,Z_FIXED:xU,Z_DEFAULT_STRATEGY:SU,Z_UNKNOWN:bU,Z_DEFLATED:ex}=k0,MU=9,EU=15,TU=8,AU=29,wU=256,ib=wU+1+AU,RU=30,CU=19,DU=2*ib+1,NU=15,Un=3,Su=258,Ml=Su+Un+1,UU=32,Yd=42,jb=57,ab=69,rb=73,sb=91,ob=103,Yf=113,Fm=666,Mr=1,ip=2,ih=3,ap=4,OU=3,qf=(n,t)=>(n.msg=nh[t],t),pT=n=>n*2-(n>4?9:0),yu=n=>{let t=n.length;for(;--t>=0;)n[t]=0},LU=n=>{let t,e,i,a=n.w_size;t=n.hash_size,i=t;do e=n.head[--i],n.head[i]=e>=a?e-a:0;while(--t);t=a,i=t;do e=n.prev[--i],n.prev[i]=e>=a?e-a:0;while(--t)};let zU=(n,t,e)=>(t<<n.hash_shift^e)&n.hash_mask,Au=zU;const fs=n=>{const t=n.state;let e=t.pending;e>n.avail_out&&(e=n.avail_out),e!==0&&(n.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+e),n.next_out),n.next_out+=e,t.pending_out+=e,n.total_out+=e,n.avail_out-=e,t.pending-=e,t.pending===0&&(t.pending_out=0))},hs=(n,t)=>{hU(n,n.block_start>=0?n.block_start:-1,n.strstart-n.block_start,t),n.block_start=n.strstart,fs(n.strm)},Zn=(n,t)=>{n.pending_buf[n.pending++]=t},Mm=(n,t)=>{n.pending_buf[n.pending++]=t>>>8&255,n.pending_buf[n.pending++]=t&255},lb=(n,t,e,i)=>{let a=n.avail_in;return a>i&&(a=i),a===0?0:(n.avail_in-=a,t.set(n.input.subarray(n.next_in,n.next_in+a),e),n.state.wrap===1?n.adler=m0(n.adler,t,a,e):n.state.wrap===2&&(n.adler=wa(n.adler,t,a,e)),n.next_in+=a,n.total_in+=a,a)},R2=(n,t)=>{let e=n.max_chain_length,i=n.strstart,a,o,u=n.prev_length,h=n.nice_match;const d=n.strstart>n.w_size-Ml?n.strstart-(n.w_size-Ml):0,p=n.window,v=n.w_mask,_=n.prev,x=n.strstart+Su;let b=p[i+u-1],E=p[i+u];n.prev_length>=n.good_match&&(e>>=2),h>n.lookahead&&(h=n.lookahead);do if(a=t,!(p[a+u]!==E||p[a+u-1]!==b||p[a]!==p[i]||p[++a]!==p[i+1])){i+=2,a++;do;while(p[++i]===p[++a]&&p[++i]===p[++a]&&p[++i]===p[++a]&&p[++i]===p[++a]&&p[++i]===p[++a]&&p[++i]===p[++a]&&p[++i]===p[++a]&&p[++i]===p[++a]&&i<x);if(o=Su-(x-i),i=x-Su,o>u){if(n.match_start=t,u=o,o>=h)break;b=p[i+u-1],E=p[i+u]}}while((t=_[t&v])>d&&--e!==0);return u<=n.lookahead?u:n.lookahead},qd=n=>{const t=n.w_size;let e,i,a;do{if(i=n.window_size-n.lookahead-n.strstart,n.strstart>=t+(t-Ml)&&(n.window.set(n.window.subarray(t,t+t-i),0),n.match_start-=t,n.strstart-=t,n.block_start-=t,n.insert>n.strstart&&(n.insert=n.strstart),LU(n),i+=t),n.strm.avail_in===0)break;if(e=lb(n.strm,n.window,n.strstart+n.lookahead,i),n.lookahead+=e,n.lookahead+n.insert>=Un)for(a=n.strstart-n.insert,n.ins_h=n.window[a],n.ins_h=Au(n,n.ins_h,n.window[a+1]);n.insert&&(n.ins_h=Au(n,n.ins_h,n.window[a+Un-1]),n.prev[a&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=a,a++,n.insert--,!(n.lookahead+n.insert<Un)););}while(n.lookahead<Ml&&n.strm.avail_in!==0)},C2=(n,t)=>{let e=n.pending_buf_size-5>n.w_size?n.w_size:n.pending_buf_size-5,i,a,o,u=0,h=n.strm.avail_in;do{if(i=65535,o=n.bi_valid+42>>3,n.strm.avail_out<o||(o=n.strm.avail_out-o,a=n.strstart-n.block_start,i>a+n.strm.avail_in&&(i=a+n.strm.avail_in),i>o&&(i=o),i<e&&(i===0&&t!==Ls||t===Tu||i!==a+n.strm.avail_in)))break;u=t===Ls&&i===a+n.strm.avail_in?1:0,nb(n,0,0,u),n.pending_buf[n.pending-4]=i,n.pending_buf[n.pending-3]=i>>8,n.pending_buf[n.pending-2]=~i,n.pending_buf[n.pending-1]=~i>>8,fs(n.strm),a&&(a>i&&(a=i),n.strm.output.set(n.window.subarray(n.block_start,n.block_start+a),n.strm.next_out),n.strm.next_out+=a,n.strm.avail_out-=a,n.strm.total_out+=a,n.block_start+=a,i-=a),i&&(lb(n.strm,n.strm.output,n.strm.next_out,i),n.strm.next_out+=i,n.strm.avail_out-=i,n.strm.total_out+=i)}while(u===0);return h-=n.strm.avail_in,h&&(h>=n.w_size?(n.matches=2,n.window.set(n.strm.input.subarray(n.strm.next_in-n.w_size,n.strm.next_in),0),n.strstart=n.w_size,n.insert=n.strstart):(n.window_size-n.strstart<=h&&(n.strstart-=n.w_size,n.window.set(n.window.subarray(n.w_size,n.w_size+n.strstart),0),n.matches<2&&n.matches++,n.insert>n.strstart&&(n.insert=n.strstart)),n.window.set(n.strm.input.subarray(n.strm.next_in-h,n.strm.next_in),n.strstart),n.strstart+=h,n.insert+=h>n.w_size-n.insert?n.w_size-n.insert:h),n.block_start=n.strstart),n.high_water<n.strstart&&(n.high_water=n.strstart),u?ap:t!==Tu&&t!==Ls&&n.strm.avail_in===0&&n.strstart===n.block_start?ip:(o=n.window_size-n.strstart,n.strm.avail_in>o&&n.block_start>=n.w_size&&(n.block_start-=n.w_size,n.strstart-=n.w_size,n.window.set(n.window.subarray(n.w_size,n.w_size+n.strstart),0),n.matches<2&&n.matches++,o+=n.w_size,n.insert>n.strstart&&(n.insert=n.strstart)),o>n.strm.avail_in&&(o=n.strm.avail_in),o&&(lb(n.strm,n.window,n.strstart,o),n.strstart+=o,n.insert+=o>n.w_size-n.insert?n.w_size-n.insert:o),n.high_water<n.strstart&&(n.high_water=n.strstart),o=n.bi_valid+42>>3,o=n.pending_buf_size-o>65535?65535:n.pending_buf_size-o,e=o>n.w_size?n.w_size:o,a=n.strstart-n.block_start,(a>=e||(a||t===Ls)&&t!==Tu&&n.strm.avail_in===0&&a<=o)&&(i=a>o?o:a,u=t===Ls&&n.strm.avail_in===0&&i===a?1:0,nb(n,n.block_start,i,u),n.block_start+=i,fs(n.strm)),u?ih:Mr)},I1=(n,t)=>{let e,i;for(;;){if(n.lookahead<Ml){if(qd(n),n.lookahead<Ml&&t===Tu)return Mr;if(n.lookahead===0)break}if(e=0,n.lookahead>=Un&&(n.ins_h=Au(n,n.ins_h,n.window[n.strstart+Un-1]),e=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart),e!==0&&n.strstart-e<=n.w_size-Ml&&(n.match_length=R2(n,e)),n.match_length>=Un)if(i=Eu(n,n.strstart-n.match_start,n.match_length-Un),n.lookahead-=n.match_length,n.match_length<=n.max_lazy_match&&n.lookahead>=Un){n.match_length--;do n.strstart++,n.ins_h=Au(n,n.ins_h,n.window[n.strstart+Un-1]),e=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart;while(--n.match_length!==0);n.strstart++}else n.strstart+=n.match_length,n.match_length=0,n.ins_h=n.window[n.strstart],n.ins_h=Au(n,n.ins_h,n.window[n.strstart+1]);else i=Eu(n,0,n.window[n.strstart]),n.lookahead--,n.strstart++;if(i&&(hs(n,!1),n.strm.avail_out===0))return Mr}return n.insert=n.strstart<Un-1?n.strstart:Un-1,t===Ls?(hs(n,!0),n.strm.avail_out===0?ih:ap):n.sym_next&&(hs(n,!1),n.strm.avail_out===0)?Mr:ip},fd=(n,t)=>{let e,i,a;for(;;){if(n.lookahead<Ml){if(qd(n),n.lookahead<Ml&&t===Tu)return Mr;if(n.lookahead===0)break}if(e=0,n.lookahead>=Un&&(n.ins_h=Au(n,n.ins_h,n.window[n.strstart+Un-1]),e=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart),n.prev_length=n.match_length,n.prev_match=n.match_start,n.match_length=Un-1,e!==0&&n.prev_length<n.max_lazy_match&&n.strstart-e<=n.w_size-Ml&&(n.match_length=R2(n,e),n.match_length<=5&&(n.strategy===_U||n.match_length===Un&&n.strstart-n.match_start>4096)&&(n.match_length=Un-1)),n.prev_length>=Un&&n.match_length<=n.prev_length){a=n.strstart+n.lookahead-Un,i=Eu(n,n.strstart-1-n.prev_match,n.prev_length-Un),n.lookahead-=n.prev_length-1,n.prev_length-=2;do++n.strstart<=a&&(n.ins_h=Au(n,n.ins_h,n.window[n.strstart+Un-1]),e=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart);while(--n.prev_length!==0);if(n.match_available=0,n.match_length=Un-1,n.strstart++,i&&(hs(n,!1),n.strm.avail_out===0))return Mr}else if(n.match_available){if(i=Eu(n,0,n.window[n.strstart-1]),i&&hs(n,!1),n.strstart++,n.lookahead--,n.strm.avail_out===0)return Mr}else n.match_available=1,n.strstart++,n.lookahead--}return n.match_available&&(i=Eu(n,0,n.window[n.strstart-1]),n.match_available=0),n.insert=n.strstart<Un-1?n.strstart:Un-1,t===Ls?(hs(n,!0),n.strm.avail_out===0?ih:ap):n.sym_next&&(hs(n,!1),n.strm.avail_out===0)?Mr:ip},BU=(n,t)=>{let e,i,a,o;const u=n.window;for(;;){if(n.lookahead<=Su){if(qd(n),n.lookahead<=Su&&t===Tu)return Mr;if(n.lookahead===0)break}if(n.match_length=0,n.lookahead>=Un&&n.strstart>0&&(a=n.strstart-1,i=u[a],i===u[++a]&&i===u[++a]&&i===u[++a])){o=n.strstart+Su;do;while(i===u[++a]&&i===u[++a]&&i===u[++a]&&i===u[++a]&&i===u[++a]&&i===u[++a]&&i===u[++a]&&i===u[++a]&&a<o);n.match_length=Su-(o-a),n.match_length>n.lookahead&&(n.match_length=n.lookahead)}if(n.match_length>=Un?(e=Eu(n,1,n.match_length-Un),n.lookahead-=n.match_length,n.strstart+=n.match_length,n.match_length=0):(e=Eu(n,0,n.window[n.strstart]),n.lookahead--,n.strstart++),e&&(hs(n,!1),n.strm.avail_out===0))return Mr}return n.insert=0,t===Ls?(hs(n,!0),n.strm.avail_out===0?ih:ap):n.sym_next&&(hs(n,!1),n.strm.avail_out===0)?Mr:ip},IU=(n,t)=>{let e;for(;;){if(n.lookahead===0&&(qd(n),n.lookahead===0)){if(t===Tu)return Mr;break}if(n.match_length=0,e=Eu(n,0,n.window[n.strstart]),n.lookahead--,n.strstart++,e&&(hs(n,!1),n.strm.avail_out===0))return Mr}return n.insert=0,t===Ls?(hs(n,!0),n.strm.avail_out===0?ih:ap):n.sym_next&&(hs(n,!1),n.strm.avail_out===0)?Mr:ip};function pl(n,t,e,i,a){this.good_length=n,this.max_lazy=t,this.nice_length=e,this.max_chain=i,this.func=a}const Gm=[new pl(0,0,0,0,C2),new pl(4,4,8,4,I1),new pl(4,5,16,8,I1),new pl(4,6,32,32,I1),new pl(4,4,16,16,fd),new pl(8,16,32,32,fd),new pl(8,16,128,128,fd),new pl(8,32,128,256,fd),new pl(32,128,258,1024,fd),new pl(32,258,258,4096,fd)],PU=n=>{n.window_size=2*n.w_size,yu(n.head),n.max_lazy_match=Gm[n.level].max_lazy,n.good_match=Gm[n.level].good_length,n.nice_match=Gm[n.level].nice_length,n.max_chain_length=Gm[n.level].max_chain,n.strstart=0,n.block_start=0,n.lookahead=0,n.insert=0,n.match_length=n.prev_length=Un-1,n.match_available=0,n.ins_h=0};function HU(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=ex,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(DU*2),this.dyn_dtree=new Uint16Array((2*RU+1)*2),this.bl_tree=new Uint16Array((2*CU+1)*2),yu(this.dyn_ltree),yu(this.dyn_dtree),yu(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(NU+1),this.heap=new Uint16Array(2*ib+1),yu(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*ib+1),yu(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const X0=n=>{if(!n)return 1;const t=n.state;return!t||t.strm!==n||t.status!==Yd&&t.status!==jb&&t.status!==ab&&t.status!==rb&&t.status!==sb&&t.status!==ob&&t.status!==Yf&&t.status!==Fm?1:0},D2=n=>{if(X0(n))return qf(n,bl);n.total_in=n.total_out=0,n.data_type=bU;const t=n.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap===2?jb:t.wrap?Yd:Yf,n.adler=t.wrap===2?0:1,t.last_flush=-2,fU(t),Fa},N2=n=>{const t=D2(n);return t===Fa&&PU(n.state),t},FU=(n,t)=>X0(n)||n.state.wrap!==2?bl:(n.state.gzhead=t,Fa),U2=(n,t,e,i,a,o)=>{if(!n)return bl;let u=1;if(t===vU&&(t=6),i<0?(u=0,i=-i):i>15&&(u=2,i-=16),a<1||a>MU||e!==ex||i<8||i>15||t<0||t>9||o<0||o>xU||i===8&&u!==1)return qf(n,bl);i===8&&(i=9);const h=new HU;return n.state=h,h.strm=n,h.status=Yd,h.wrap=u,h.gzhead=null,h.w_bits=i,h.w_size=1<<h.w_bits,h.w_mask=h.w_size-1,h.hash_bits=a+7,h.hash_size=1<<h.hash_bits,h.hash_mask=h.hash_size-1,h.hash_shift=~~((h.hash_bits+Un-1)/Un),h.window=new Uint8Array(h.w_size*2),h.head=new Uint16Array(h.hash_size),h.prev=new Uint16Array(h.w_size),h.lit_bufsize=1<<a+6,h.pending_buf_size=h.lit_bufsize*4,h.pending_buf=new Uint8Array(h.pending_buf_size),h.sym_buf=h.lit_bufsize,h.sym_end=(h.lit_bufsize-1)*3,h.level=t,h.strategy=o,h.method=e,N2(n)},GU=(n,t)=>U2(n,t,ex,EU,TU,SU),VU=(n,t)=>{if(X0(n)||t>hT||t<0)return n?qf(n,bl):bl;const e=n.state;if(!n.output||n.avail_in!==0&&!n.input||e.status===Fm&&t!==Ls)return qf(n,n.avail_out===0?B1:bl);const i=e.last_flush;if(e.last_flush=t,e.pending!==0){if(fs(n),n.avail_out===0)return e.last_flush=-1,Fa}else if(n.avail_in===0&&pT(t)<=pT(i)&&t!==Ls)return qf(n,B1);if(e.status===Fm&&n.avail_in!==0)return qf(n,B1);if(e.status===Yd&&e.wrap===0&&(e.status=Yf),e.status===Yd){let a=ex+(e.w_bits-8<<4)<<8,o=-1;if(e.strategy>=Xv||e.level<2?o=0:e.level<6?o=1:e.level===6?o=2:o=3,a|=o<<6,e.strstart!==0&&(a|=UU),a+=31-a%31,Mm(e,a),e.strstart!==0&&(Mm(e,n.adler>>>16),Mm(e,n.adler&65535)),n.adler=1,e.status=Yf,fs(n),e.pending!==0)return e.last_flush=-1,Fa}if(e.status===jb){if(n.adler=0,Zn(e,31),Zn(e,139),Zn(e,8),e.gzhead)Zn(e,(e.gzhead.text?1:0)+(e.gzhead.hcrc?2:0)+(e.gzhead.extra?4:0)+(e.gzhead.name?8:0)+(e.gzhead.comment?16:0)),Zn(e,e.gzhead.time&255),Zn(e,e.gzhead.time>>8&255),Zn(e,e.gzhead.time>>16&255),Zn(e,e.gzhead.time>>24&255),Zn(e,e.level===9?2:e.strategy>=Xv||e.level<2?4:0),Zn(e,e.gzhead.os&255),e.gzhead.extra&&e.gzhead.extra.length&&(Zn(e,e.gzhead.extra.length&255),Zn(e,e.gzhead.extra.length>>8&255)),e.gzhead.hcrc&&(n.adler=wa(n.adler,e.pending_buf,e.pending,0)),e.gzindex=0,e.status=ab;else if(Zn(e,0),Zn(e,0),Zn(e,0),Zn(e,0),Zn(e,0),Zn(e,e.level===9?2:e.strategy>=Xv||e.level<2?4:0),Zn(e,OU),e.status=Yf,fs(n),e.pending!==0)return e.last_flush=-1,Fa}if(e.status===ab){if(e.gzhead.extra){let a=e.pending,o=(e.gzhead.extra.length&65535)-e.gzindex;for(;e.pending+o>e.pending_buf_size;){let h=e.pending_buf_size-e.pending;if(e.pending_buf.set(e.gzhead.extra.subarray(e.gzindex,e.gzindex+h),e.pending),e.pending=e.pending_buf_size,e.gzhead.hcrc&&e.pending>a&&(n.adler=wa(n.adler,e.pending_buf,e.pending-a,a)),e.gzindex+=h,fs(n),e.pending!==0)return e.last_flush=-1,Fa;a=0,o-=h}let u=new Uint8Array(e.gzhead.extra);e.pending_buf.set(u.subarray(e.gzindex,e.gzindex+o),e.pending),e.pending+=o,e.gzhead.hcrc&&e.pending>a&&(n.adler=wa(n.adler,e.pending_buf,e.pending-a,a)),e.gzindex=0}e.status=rb}if(e.status===rb){if(e.gzhead.name){let a=e.pending,o;do{if(e.pending===e.pending_buf_size){if(e.gzhead.hcrc&&e.pending>a&&(n.adler=wa(n.adler,e.pending_buf,e.pending-a,a)),fs(n),e.pending!==0)return e.last_flush=-1,Fa;a=0}e.gzindex<e.gzhead.name.length?o=e.gzhead.name.charCodeAt(e.gzindex++)&255:o=0,Zn(e,o)}while(o!==0);e.gzhead.hcrc&&e.pending>a&&(n.adler=wa(n.adler,e.pending_buf,e.pending-a,a)),e.gzindex=0}e.status=sb}if(e.status===sb){if(e.gzhead.comment){let a=e.pending,o;do{if(e.pending===e.pending_buf_size){if(e.gzhead.hcrc&&e.pending>a&&(n.adler=wa(n.adler,e.pending_buf,e.pending-a,a)),fs(n),e.pending!==0)return e.last_flush=-1,Fa;a=0}e.gzindex<e.gzhead.comment.length?o=e.gzhead.comment.charCodeAt(e.gzindex++)&255:o=0,Zn(e,o)}while(o!==0);e.gzhead.hcrc&&e.pending>a&&(n.adler=wa(n.adler,e.pending_buf,e.pending-a,a))}e.status=ob}if(e.status===ob){if(e.gzhead.hcrc){if(e.pending+2>e.pending_buf_size&&(fs(n),e.pending!==0))return e.last_flush=-1,Fa;Zn(e,n.adler&255),Zn(e,n.adler>>8&255),n.adler=0}if(e.status=Yf,fs(n),e.pending!==0)return e.last_flush=-1,Fa}if(n.avail_in!==0||e.lookahead!==0||t!==Tu&&e.status!==Fm){let a=e.level===0?C2(e,t):e.strategy===Xv?IU(e,t):e.strategy===yU?BU(e,t):Gm[e.level].func(e,t);if((a===ih||a===ap)&&(e.status=Fm),a===Mr||a===ih)return n.avail_out===0&&(e.last_flush=-1),Fa;if(a===ip&&(t===pU?dU(e):t!==hT&&(nb(e,0,0,!1),t===mU&&(yu(e.head),e.lookahead===0&&(e.strstart=0,e.block_start=0,e.insert=0))),fs(n),n.avail_out===0))return e.last_flush=-1,Fa}return t!==Ls?Fa:e.wrap<=0?dT:(e.wrap===2?(Zn(e,n.adler&255),Zn(e,n.adler>>8&255),Zn(e,n.adler>>16&255),Zn(e,n.adler>>24&255),Zn(e,n.total_in&255),Zn(e,n.total_in>>8&255),Zn(e,n.total_in>>16&255),Zn(e,n.total_in>>24&255)):(Mm(e,n.adler>>>16),Mm(e,n.adler&65535)),fs(n),e.wrap>0&&(e.wrap=-e.wrap),e.pending!==0?Fa:dT)},kU=n=>{if(X0(n))return bl;const t=n.state.status;return n.state=null,t===Yf?qf(n,gU):Fa},XU=(n,t)=>{let e=t.length;if(X0(n))return bl;const i=n.state,a=i.wrap;if(a===2||a===1&&i.status!==Yd||i.lookahead)return bl;if(a===1&&(n.adler=m0(n.adler,t,e,0)),i.wrap=0,e>=i.w_size){a===0&&(yu(i.head),i.strstart=0,i.block_start=0,i.insert=0);let d=new Uint8Array(i.w_size);d.set(t.subarray(e-i.w_size,e),0),t=d,e=i.w_size}const o=n.avail_in,u=n.next_in,h=n.input;for(n.avail_in=e,n.next_in=0,n.input=t,qd(i);i.lookahead>=Un;){let d=i.strstart,p=i.lookahead-(Un-1);do i.ins_h=Au(i,i.ins_h,i.window[d+Un-1]),i.prev[d&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=d,d++;while(--p);i.strstart=d,i.lookahead=Un-1,qd(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=Un-1,i.match_available=0,n.next_in=u,n.input=h,n.avail_in=o,i.wrap=a,Fa};var YU=GU,qU=U2,ZU=N2,WU=D2,jU=FU,KU=VU,QU=kU,JU=XU,$U="pako deflate (from Nodeca project)",Zm={deflateInit:YU,deflateInit2:qU,deflateReset:ZU,deflateResetKeep:WU,deflateSetHeader:jU,deflate:KU,deflateEnd:QU,deflateSetDictionary:JU,deflateInfo:$U};const tO=(n,t)=>Object.prototype.hasOwnProperty.call(n,t);var eO=function(n){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const e=t.shift();if(e){if(typeof e!="object")throw new TypeError(e+"must be non-object");for(const i in e)tO(e,i)&&(n[i]=e[i])}}return n},nO=n=>{let t=0;for(let i=0,a=n.length;i<a;i++)t+=n[i].length;const e=new Uint8Array(t);for(let i=0,a=0,o=n.length;i<o;i++){let u=n[i];e.set(u,a),a+=u.length}return e},nx={assign:eO,flattenChunks:nO};let O2=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{O2=!1}const g0=new Uint8Array(256);for(let n=0;n<256;n++)g0[n]=n>=252?6:n>=248?5:n>=240?4:n>=224?3:n>=192?2:1;g0[254]=g0[254]=1;var iO=n=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(n);let t,e,i,a,o,u=n.length,h=0;for(a=0;a<u;a++)e=n.charCodeAt(a),(e&64512)===55296&&a+1<u&&(i=n.charCodeAt(a+1),(i&64512)===56320&&(e=65536+(e-55296<<10)+(i-56320),a++)),h+=e<128?1:e<2048?2:e<65536?3:4;for(t=new Uint8Array(h),o=0,a=0;o<h;a++)e=n.charCodeAt(a),(e&64512)===55296&&a+1<u&&(i=n.charCodeAt(a+1),(i&64512)===56320&&(e=65536+(e-55296<<10)+(i-56320),a++)),e<128?t[o++]=e:e<2048?(t[o++]=192|e>>>6,t[o++]=128|e&63):e<65536?(t[o++]=224|e>>>12,t[o++]=128|e>>>6&63,t[o++]=128|e&63):(t[o++]=240|e>>>18,t[o++]=128|e>>>12&63,t[o++]=128|e>>>6&63,t[o++]=128|e&63);return t};const aO=(n,t)=>{if(t<65534&&n.subarray&&O2)return String.fromCharCode.apply(null,n.length===t?n:n.subarray(0,t));let e="";for(let i=0;i<t;i++)e+=String.fromCharCode(n[i]);return e};var rO=(n,t)=>{const e=t||n.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(n.subarray(0,t));let i,a;const o=new Array(e*2);for(a=0,i=0;i<e;){let u=n[i++];if(u<128){o[a++]=u;continue}let h=g0[u];if(h>4){o[a++]=65533,i+=h-1;continue}for(u&=h===2?31:h===3?15:7;h>1&&i<e;)u=u<<6|n[i++]&63,h--;if(h>1){o[a++]=65533;continue}u<65536?o[a++]=u:(u-=65536,o[a++]=55296|u>>10&1023,o[a++]=56320|u&1023)}return aO(o,a)},sO=(n,t)=>{t=t||n.length,t>n.length&&(t=n.length);let e=t-1;for(;e>=0&&(n[e]&192)===128;)e--;return e<0||e===0?t:e+g0[n[e]]>t?e:t},v0={string2buf:iO,buf2string:rO,utf8border:sO};function oO(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var L2=oO;const z2=Object.prototype.toString,{Z_NO_FLUSH:lO,Z_SYNC_FLUSH:cO,Z_FULL_FLUSH:uO,Z_FINISH:fO,Z_OK:ry,Z_STREAM_END:hO,Z_DEFAULT_COMPRESSION:dO,Z_DEFAULT_STRATEGY:pO,Z_DEFLATED:mO}=k0;function Y0(n){this.options=nx.assign({level:dO,method:mO,chunkSize:16384,windowBits:15,memLevel:8,strategy:pO},n||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new L2,this.strm.avail_out=0;let e=Zm.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(e!==ry)throw new Error(nh[e]);if(t.header&&Zm.deflateSetHeader(this.strm,t.header),t.dictionary){let i;if(typeof t.dictionary=="string"?i=v0.string2buf(t.dictionary):z2.call(t.dictionary)==="[object ArrayBuffer]"?i=new Uint8Array(t.dictionary):i=t.dictionary,e=Zm.deflateSetDictionary(this.strm,i),e!==ry)throw new Error(nh[e]);this._dict_set=!0}}Y0.prototype.push=function(n,t){const e=this.strm,i=this.options.chunkSize;let a,o;if(this.ended)return!1;for(t===~~t?o=t:o=t===!0?fO:lO,typeof n=="string"?e.input=v0.string2buf(n):z2.call(n)==="[object ArrayBuffer]"?e.input=new Uint8Array(n):e.input=n,e.next_in=0,e.avail_in=e.input.length;;){if(e.avail_out===0&&(e.output=new Uint8Array(i),e.next_out=0,e.avail_out=i),(o===cO||o===uO)&&e.avail_out<=6){this.onData(e.output.subarray(0,e.next_out)),e.avail_out=0;continue}if(a=Zm.deflate(e,o),a===hO)return e.next_out>0&&this.onData(e.output.subarray(0,e.next_out)),a=Zm.deflateEnd(this.strm),this.onEnd(a),this.ended=!0,a===ry;if(e.avail_out===0){this.onData(e.output);continue}if(o>0&&e.next_out>0){this.onData(e.output.subarray(0,e.next_out)),e.avail_out=0;continue}if(e.avail_in===0)break}return!0};Y0.prototype.onData=function(n){this.chunks.push(n)};Y0.prototype.onEnd=function(n){n===ry&&(this.result=nx.flattenChunks(this.chunks)),this.chunks=[],this.err=n,this.msg=this.strm.msg};function Kb(n,t){const e=new Y0(t);if(e.push(n,!0),e.err)throw e.msg||nh[e.err];return e.result}function gO(n,t){return t=t||{},t.raw=!0,Kb(n,t)}function vO(n,t){return t=t||{},t.gzip=!0,Kb(n,t)}var _O=Y0,yO=Kb,xO=gO,SO=vO,bO={Deflate:_O,deflate:yO,deflateRaw:xO,gzip:SO};const Yv=16209,MO=16191;var EO=function(t,e){let i,a,o,u,h,d,p,v,_,x,b,E,R,w,M,C,U,D,z,B,F,G,L,O;const V=t.state;i=t.next_in,L=t.input,a=i+(t.avail_in-5),o=t.next_out,O=t.output,u=o-(e-t.avail_out),h=o+(t.avail_out-257),d=V.dmax,p=V.wsize,v=V.whave,_=V.wnext,x=V.window,b=V.hold,E=V.bits,R=V.lencode,w=V.distcode,M=(1<<V.lenbits)-1,C=(1<<V.distbits)-1;t:do{E<15&&(b+=L[i++]<<E,E+=8,b+=L[i++]<<E,E+=8),U=R[b&M];e:for(;;){if(D=U>>>24,b>>>=D,E-=D,D=U>>>16&255,D===0)O[o++]=U&65535;else if(D&16){z=U&65535,D&=15,D&&(E<D&&(b+=L[i++]<<E,E+=8),z+=b&(1<<D)-1,b>>>=D,E-=D),E<15&&(b+=L[i++]<<E,E+=8,b+=L[i++]<<E,E+=8),U=w[b&C];n:for(;;){if(D=U>>>24,b>>>=D,E-=D,D=U>>>16&255,D&16){if(B=U&65535,D&=15,E<D&&(b+=L[i++]<<E,E+=8,E<D&&(b+=L[i++]<<E,E+=8)),B+=b&(1<<D)-1,B>d){t.msg="invalid distance too far back",V.mode=Yv;break t}if(b>>>=D,E-=D,D=o-u,B>D){if(D=B-D,D>v&&V.sane){t.msg="invalid distance too far back",V.mode=Yv;break t}if(F=0,G=x,_===0){if(F+=p-D,D<z){z-=D;do O[o++]=x[F++];while(--D);F=o-B,G=O}}else if(_<D){if(F+=p+_-D,D-=_,D<z){z-=D;do O[o++]=x[F++];while(--D);if(F=0,_<z){D=_,z-=D;do O[o++]=x[F++];while(--D);F=o-B,G=O}}}else if(F+=_-D,D<z){z-=D;do O[o++]=x[F++];while(--D);F=o-B,G=O}for(;z>2;)O[o++]=G[F++],O[o++]=G[F++],O[o++]=G[F++],z-=3;z&&(O[o++]=G[F++],z>1&&(O[o++]=G[F++]))}else{F=o-B;do O[o++]=O[F++],O[o++]=O[F++],O[o++]=O[F++],z-=3;while(z>2);z&&(O[o++]=O[F++],z>1&&(O[o++]=O[F++]))}}else if(D&64){t.msg="invalid distance code",V.mode=Yv;break t}else{U=w[(U&65535)+(b&(1<<D)-1)];continue n}break}}else if(D&64)if(D&32){V.mode=MO;break t}else{t.msg="invalid literal/length code",V.mode=Yv;break t}else{U=R[(U&65535)+(b&(1<<D)-1)];continue e}break}}while(i<a&&o<h);z=E>>3,i-=z,E-=z<<3,b&=(1<<E)-1,t.next_in=i,t.next_out=o,t.avail_in=i<a?5+(a-i):5-(i-a),t.avail_out=o<h?257+(h-o):257-(o-h),V.hold=b,V.bits=E};const hd=15,mT=852,gT=592,vT=0,P1=1,_T=2,TO=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),AO=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),wO=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),RO=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),CO=(n,t,e,i,a,o,u,h)=>{const d=h.bits;let p=0,v=0,_=0,x=0,b=0,E=0,R=0,w=0,M=0,C=0,U,D,z,B,F,G=null,L;const O=new Uint16Array(hd+1),V=new Uint16Array(hd+1);let et=null,W,j,ut;for(p=0;p<=hd;p++)O[p]=0;for(v=0;v<i;v++)O[t[e+v]]++;for(b=d,x=hd;x>=1&&O[x]===0;x--);if(b>x&&(b=x),x===0)return a[o++]=1<<24|64<<16|0,a[o++]=1<<24|64<<16|0,h.bits=1,0;for(_=1;_<x&&O[_]===0;_++);for(b<_&&(b=_),w=1,p=1;p<=hd;p++)if(w<<=1,w-=O[p],w<0)return-1;if(w>0&&(n===vT||x!==1))return-1;for(V[1]=0,p=1;p<hd;p++)V[p+1]=V[p]+O[p];for(v=0;v<i;v++)t[e+v]!==0&&(u[V[t[e+v]]++]=v);if(n===vT?(G=et=u,L=20):n===P1?(G=TO,et=AO,L=257):(G=wO,et=RO,L=0),C=0,v=0,p=_,F=o,E=b,R=0,z=-1,M=1<<b,B=M-1,n===P1&&M>mT||n===_T&&M>gT)return 1;for(;;){W=p-R,u[v]+1<L?(j=0,ut=u[v]):u[v]>=L?(j=et[u[v]-L],ut=G[u[v]-L]):(j=96,ut=0),U=1<<p-R,D=1<<E,_=D;do D-=U,a[F+(C>>R)+D]=W<<24|j<<16|ut|0;while(D!==0);for(U=1<<p-1;C&U;)U>>=1;if(U!==0?(C&=U-1,C+=U):C=0,v++,--O[p]===0){if(p===x)break;p=t[e+u[v]]}if(p>b&&(C&B)!==z){for(R===0&&(R=b),F+=_,E=p-R,w=1<<E;E+R<x&&(w-=O[E+R],!(w<=0));)E++,w<<=1;if(M+=1<<E,n===P1&&M>mT||n===_T&&M>gT)return 1;z=C&B,a[z]=b<<24|E<<16|F-o|0}}return C!==0&&(a[F+C]=p-R<<24|64<<16|0),h.bits=b,0};var Wm=CO;const DO=0,B2=1,I2=2,{Z_FINISH:yT,Z_BLOCK:NO,Z_TREES:qv,Z_OK:ah,Z_STREAM_END:UO,Z_NEED_DICT:OO,Z_STREAM_ERROR:Bs,Z_DATA_ERROR:P2,Z_MEM_ERROR:H2,Z_BUF_ERROR:LO,Z_DEFLATED:xT}=k0,ix=16180,ST=16181,bT=16182,MT=16183,ET=16184,TT=16185,AT=16186,wT=16187,RT=16188,CT=16189,sy=16190,rc=16191,H1=16192,DT=16193,F1=16194,NT=16195,UT=16196,OT=16197,LT=16198,Zv=16199,Wv=16200,zT=16201,BT=16202,IT=16203,PT=16204,HT=16205,G1=16206,FT=16207,GT=16208,wi=16209,F2=16210,G2=16211,zO=852,BO=592,IO=15,PO=IO,VT=n=>(n>>>24&255)+(n>>>8&65280)+((n&65280)<<8)+((n&255)<<24);function HO(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const hh=n=>{if(!n)return 1;const t=n.state;return!t||t.strm!==n||t.mode<ix||t.mode>G2?1:0},V2=n=>{if(hh(n))return Bs;const t=n.state;return n.total_in=n.total_out=t.total=0,n.msg="",t.wrap&&(n.adler=t.wrap&1),t.mode=ix,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(zO),t.distcode=t.distdyn=new Int32Array(BO),t.sane=1,t.back=-1,ah},k2=n=>{if(hh(n))return Bs;const t=n.state;return t.wsize=0,t.whave=0,t.wnext=0,V2(n)},X2=(n,t)=>{let e;if(hh(n))return Bs;const i=n.state;return t<0?(e=0,t=-t):(e=(t>>4)+5,t<48&&(t&=15)),t&&(t<8||t>15)?Bs:(i.window!==null&&i.wbits!==t&&(i.window=null),i.wrap=e,i.wbits=t,k2(n))},Y2=(n,t)=>{if(!n)return Bs;const e=new HO;n.state=e,e.strm=n,e.window=null,e.mode=ix;const i=X2(n,t);return i!==ah&&(n.state=null),i},FO=n=>Y2(n,PO);let kT=!0,V1,k1;const GO=n=>{if(kT){V1=new Int32Array(512),k1=new Int32Array(32);let t=0;for(;t<144;)n.lens[t++]=8;for(;t<256;)n.lens[t++]=9;for(;t<280;)n.lens[t++]=7;for(;t<288;)n.lens[t++]=8;for(Wm(B2,n.lens,0,288,V1,0,n.work,{bits:9}),t=0;t<32;)n.lens[t++]=5;Wm(I2,n.lens,0,32,k1,0,n.work,{bits:5}),kT=!1}n.lencode=V1,n.lenbits=9,n.distcode=k1,n.distbits=5},q2=(n,t,e,i)=>{let a;const o=n.state;return o.window===null&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Uint8Array(o.wsize)),i>=o.wsize?(o.window.set(t.subarray(e-o.wsize,e),0),o.wnext=0,o.whave=o.wsize):(a=o.wsize-o.wnext,a>i&&(a=i),o.window.set(t.subarray(e-i,e-i+a),o.wnext),i-=a,i?(o.window.set(t.subarray(e-i,e),0),o.wnext=i,o.whave=o.wsize):(o.wnext+=a,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=a))),0},VO=(n,t)=>{let e,i,a,o,u,h,d,p,v,_,x,b,E,R,w=0,M,C,U,D,z,B,F,G;const L=new Uint8Array(4);let O,V;const et=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(hh(n)||!n.output||!n.input&&n.avail_in!==0)return Bs;e=n.state,e.mode===rc&&(e.mode=H1),u=n.next_out,a=n.output,d=n.avail_out,o=n.next_in,i=n.input,h=n.avail_in,p=e.hold,v=e.bits,_=h,x=d,G=ah;t:for(;;)switch(e.mode){case ix:if(e.wrap===0){e.mode=H1;break}for(;v<16;){if(h===0)break t;h--,p+=i[o++]<<v,v+=8}if(e.wrap&2&&p===35615){e.wbits===0&&(e.wbits=15),e.check=0,L[0]=p&255,L[1]=p>>>8&255,e.check=wa(e.check,L,2,0),p=0,v=0,e.mode=ST;break}if(e.head&&(e.head.done=!1),!(e.wrap&1)||(((p&255)<<8)+(p>>8))%31){n.msg="incorrect header check",e.mode=wi;break}if((p&15)!==xT){n.msg="unknown compression method",e.mode=wi;break}if(p>>>=4,v-=4,F=(p&15)+8,e.wbits===0&&(e.wbits=F),F>15||F>e.wbits){n.msg="invalid window size",e.mode=wi;break}e.dmax=1<<e.wbits,e.flags=0,n.adler=e.check=1,e.mode=p&512?CT:rc,p=0,v=0;break;case ST:for(;v<16;){if(h===0)break t;h--,p+=i[o++]<<v,v+=8}if(e.flags=p,(e.flags&255)!==xT){n.msg="unknown compression method",e.mode=wi;break}if(e.flags&57344){n.msg="unknown header flags set",e.mode=wi;break}e.head&&(e.head.text=p>>8&1),e.flags&512&&e.wrap&4&&(L[0]=p&255,L[1]=p>>>8&255,e.check=wa(e.check,L,2,0)),p=0,v=0,e.mode=bT;case bT:for(;v<32;){if(h===0)break t;h--,p+=i[o++]<<v,v+=8}e.head&&(e.head.time=p),e.flags&512&&e.wrap&4&&(L[0]=p&255,L[1]=p>>>8&255,L[2]=p>>>16&255,L[3]=p>>>24&255,e.check=wa(e.check,L,4,0)),p=0,v=0,e.mode=MT;case MT:for(;v<16;){if(h===0)break t;h--,p+=i[o++]<<v,v+=8}e.head&&(e.head.xflags=p&255,e.head.os=p>>8),e.flags&512&&e.wrap&4&&(L[0]=p&255,L[1]=p>>>8&255,e.check=wa(e.check,L,2,0)),p=0,v=0,e.mode=ET;case ET:if(e.flags&1024){for(;v<16;){if(h===0)break t;h--,p+=i[o++]<<v,v+=8}e.length=p,e.head&&(e.head.extra_len=p),e.flags&512&&e.wrap&4&&(L[0]=p&255,L[1]=p>>>8&255,e.check=wa(e.check,L,2,0)),p=0,v=0}else e.head&&(e.head.extra=null);e.mode=TT;case TT:if(e.flags&1024&&(b=e.length,b>h&&(b=h),b&&(e.head&&(F=e.head.extra_len-e.length,e.head.extra||(e.head.extra=new Uint8Array(e.head.extra_len)),e.head.extra.set(i.subarray(o,o+b),F)),e.flags&512&&e.wrap&4&&(e.check=wa(e.check,i,b,o)),h-=b,o+=b,e.length-=b),e.length))break t;e.length=0,e.mode=AT;case AT:if(e.flags&2048){if(h===0)break t;b=0;do F=i[o+b++],e.head&&F&&e.length<65536&&(e.head.name+=String.fromCharCode(F));while(F&&b<h);if(e.flags&512&&e.wrap&4&&(e.check=wa(e.check,i,b,o)),h-=b,o+=b,F)break t}else e.head&&(e.head.name=null);e.length=0,e.mode=wT;case wT:if(e.flags&4096){if(h===0)break t;b=0;do F=i[o+b++],e.head&&F&&e.length<65536&&(e.head.comment+=String.fromCharCode(F));while(F&&b<h);if(e.flags&512&&e.wrap&4&&(e.check=wa(e.check,i,b,o)),h-=b,o+=b,F)break t}else e.head&&(e.head.comment=null);e.mode=RT;case RT:if(e.flags&512){for(;v<16;){if(h===0)break t;h--,p+=i[o++]<<v,v+=8}if(e.wrap&4&&p!==(e.check&65535)){n.msg="header crc mismatch",e.mode=wi;break}p=0,v=0}e.head&&(e.head.hcrc=e.flags>>9&1,e.head.done=!0),n.adler=e.check=0,e.mode=rc;break;case CT:for(;v<32;){if(h===0)break t;h--,p+=i[o++]<<v,v+=8}n.adler=e.check=VT(p),p=0,v=0,e.mode=sy;case sy:if(e.havedict===0)return n.next_out=u,n.avail_out=d,n.next_in=o,n.avail_in=h,e.hold=p,e.bits=v,OO;n.adler=e.check=1,e.mode=rc;case rc:if(t===NO||t===qv)break t;case H1:if(e.last){p>>>=v&7,v-=v&7,e.mode=G1;break}for(;v<3;){if(h===0)break t;h--,p+=i[o++]<<v,v+=8}switch(e.last=p&1,p>>>=1,v-=1,p&3){case 0:e.mode=DT;break;case 1:if(GO(e),e.mode=Zv,t===qv){p>>>=2,v-=2;break t}break;case 2:e.mode=UT;break;case 3:n.msg="invalid block type",e.mode=wi}p>>>=2,v-=2;break;case DT:for(p>>>=v&7,v-=v&7;v<32;){if(h===0)break t;h--,p+=i[o++]<<v,v+=8}if((p&65535)!==(p>>>16^65535)){n.msg="invalid stored block lengths",e.mode=wi;break}if(e.length=p&65535,p=0,v=0,e.mode=F1,t===qv)break t;case F1:e.mode=NT;case NT:if(b=e.length,b){if(b>h&&(b=h),b>d&&(b=d),b===0)break t;a.set(i.subarray(o,o+b),u),h-=b,o+=b,d-=b,u+=b,e.length-=b;break}e.mode=rc;break;case UT:for(;v<14;){if(h===0)break t;h--,p+=i[o++]<<v,v+=8}if(e.nlen=(p&31)+257,p>>>=5,v-=5,e.ndist=(p&31)+1,p>>>=5,v-=5,e.ncode=(p&15)+4,p>>>=4,v-=4,e.nlen>286||e.ndist>30){n.msg="too many length or distance symbols",e.mode=wi;break}e.have=0,e.mode=OT;case OT:for(;e.have<e.ncode;){for(;v<3;){if(h===0)break t;h--,p+=i[o++]<<v,v+=8}e.lens[et[e.have++]]=p&7,p>>>=3,v-=3}for(;e.have<19;)e.lens[et[e.have++]]=0;if(e.lencode=e.lendyn,e.lenbits=7,O={bits:e.lenbits},G=Wm(DO,e.lens,0,19,e.lencode,0,e.work,O),e.lenbits=O.bits,G){n.msg="invalid code lengths set",e.mode=wi;break}e.have=0,e.mode=LT;case LT:for(;e.have<e.nlen+e.ndist;){for(;w=e.lencode[p&(1<<e.lenbits)-1],M=w>>>24,C=w>>>16&255,U=w&65535,!(M<=v);){if(h===0)break t;h--,p+=i[o++]<<v,v+=8}if(U<16)p>>>=M,v-=M,e.lens[e.have++]=U;else{if(U===16){for(V=M+2;v<V;){if(h===0)break t;h--,p+=i[o++]<<v,v+=8}if(p>>>=M,v-=M,e.have===0){n.msg="invalid bit length repeat",e.mode=wi;break}F=e.lens[e.have-1],b=3+(p&3),p>>>=2,v-=2}else if(U===17){for(V=M+3;v<V;){if(h===0)break t;h--,p+=i[o++]<<v,v+=8}p>>>=M,v-=M,F=0,b=3+(p&7),p>>>=3,v-=3}else{for(V=M+7;v<V;){if(h===0)break t;h--,p+=i[o++]<<v,v+=8}p>>>=M,v-=M,F=0,b=11+(p&127),p>>>=7,v-=7}if(e.have+b>e.nlen+e.ndist){n.msg="invalid bit length repeat",e.mode=wi;break}for(;b--;)e.lens[e.have++]=F}}if(e.mode===wi)break;if(e.lens[256]===0){n.msg="invalid code -- missing end-of-block",e.mode=wi;break}if(e.lenbits=9,O={bits:e.lenbits},G=Wm(B2,e.lens,0,e.nlen,e.lencode,0,e.work,O),e.lenbits=O.bits,G){n.msg="invalid literal/lengths set",e.mode=wi;break}if(e.distbits=6,e.distcode=e.distdyn,O={bits:e.distbits},G=Wm(I2,e.lens,e.nlen,e.ndist,e.distcode,0,e.work,O),e.distbits=O.bits,G){n.msg="invalid distances set",e.mode=wi;break}if(e.mode=Zv,t===qv)break t;case Zv:e.mode=Wv;case Wv:if(h>=6&&d>=258){n.next_out=u,n.avail_out=d,n.next_in=o,n.avail_in=h,e.hold=p,e.bits=v,EO(n,x),u=n.next_out,a=n.output,d=n.avail_out,o=n.next_in,i=n.input,h=n.avail_in,p=e.hold,v=e.bits,e.mode===rc&&(e.back=-1);break}for(e.back=0;w=e.lencode[p&(1<<e.lenbits)-1],M=w>>>24,C=w>>>16&255,U=w&65535,!(M<=v);){if(h===0)break t;h--,p+=i[o++]<<v,v+=8}if(C&&!(C&240)){for(D=M,z=C,B=U;w=e.lencode[B+((p&(1<<D+z)-1)>>D)],M=w>>>24,C=w>>>16&255,U=w&65535,!(D+M<=v);){if(h===0)break t;h--,p+=i[o++]<<v,v+=8}p>>>=D,v-=D,e.back+=D}if(p>>>=M,v-=M,e.back+=M,e.length=U,C===0){e.mode=HT;break}if(C&32){e.back=-1,e.mode=rc;break}if(C&64){n.msg="invalid literal/length code",e.mode=wi;break}e.extra=C&15,e.mode=zT;case zT:if(e.extra){for(V=e.extra;v<V;){if(h===0)break t;h--,p+=i[o++]<<v,v+=8}e.length+=p&(1<<e.extra)-1,p>>>=e.extra,v-=e.extra,e.back+=e.extra}e.was=e.length,e.mode=BT;case BT:for(;w=e.distcode[p&(1<<e.distbits)-1],M=w>>>24,C=w>>>16&255,U=w&65535,!(M<=v);){if(h===0)break t;h--,p+=i[o++]<<v,v+=8}if(!(C&240)){for(D=M,z=C,B=U;w=e.distcode[B+((p&(1<<D+z)-1)>>D)],M=w>>>24,C=w>>>16&255,U=w&65535,!(D+M<=v);){if(h===0)break t;h--,p+=i[o++]<<v,v+=8}p>>>=D,v-=D,e.back+=D}if(p>>>=M,v-=M,e.back+=M,C&64){n.msg="invalid distance code",e.mode=wi;break}e.offset=U,e.extra=C&15,e.mode=IT;case IT:if(e.extra){for(V=e.extra;v<V;){if(h===0)break t;h--,p+=i[o++]<<v,v+=8}e.offset+=p&(1<<e.extra)-1,p>>>=e.extra,v-=e.extra,e.back+=e.extra}if(e.offset>e.dmax){n.msg="invalid distance too far back",e.mode=wi;break}e.mode=PT;case PT:if(d===0)break t;if(b=x-d,e.offset>b){if(b=e.offset-b,b>e.whave&&e.sane){n.msg="invalid distance too far back",e.mode=wi;break}b>e.wnext?(b-=e.wnext,E=e.wsize-b):E=e.wnext-b,b>e.length&&(b=e.length),R=e.window}else R=a,E=u-e.offset,b=e.length;b>d&&(b=d),d-=b,e.length-=b;do a[u++]=R[E++];while(--b);e.length===0&&(e.mode=Wv);break;case HT:if(d===0)break t;a[u++]=e.length,d--,e.mode=Wv;break;case G1:if(e.wrap){for(;v<32;){if(h===0)break t;h--,p|=i[o++]<<v,v+=8}if(x-=d,n.total_out+=x,e.total+=x,e.wrap&4&&x&&(n.adler=e.check=e.flags?wa(e.check,a,x,u-x):m0(e.check,a,x,u-x)),x=d,e.wrap&4&&(e.flags?p:VT(p))!==e.check){n.msg="incorrect data check",e.mode=wi;break}p=0,v=0}e.mode=FT;case FT:if(e.wrap&&e.flags){for(;v<32;){if(h===0)break t;h--,p+=i[o++]<<v,v+=8}if(e.wrap&4&&p!==(e.total&4294967295)){n.msg="incorrect length check",e.mode=wi;break}p=0,v=0}e.mode=GT;case GT:G=UO;break t;case wi:G=P2;break t;case F2:return H2;case G2:default:return Bs}return n.next_out=u,n.avail_out=d,n.next_in=o,n.avail_in=h,e.hold=p,e.bits=v,(e.wsize||x!==n.avail_out&&e.mode<wi&&(e.mode<G1||t!==yT))&&q2(n,n.output,n.next_out,x-n.avail_out),_-=n.avail_in,x-=n.avail_out,n.total_in+=_,n.total_out+=x,e.total+=x,e.wrap&4&&x&&(n.adler=e.check=e.flags?wa(e.check,a,x,n.next_out-x):m0(e.check,a,x,n.next_out-x)),n.data_type=e.bits+(e.last?64:0)+(e.mode===rc?128:0)+(e.mode===Zv||e.mode===F1?256:0),(_===0&&x===0||t===yT)&&G===ah&&(G=LO),G},kO=n=>{if(hh(n))return Bs;let t=n.state;return t.window&&(t.window=null),n.state=null,ah},XO=(n,t)=>{if(hh(n))return Bs;const e=n.state;return e.wrap&2?(e.head=t,t.done=!1,ah):Bs},YO=(n,t)=>{const e=t.length;let i,a,o;return hh(n)||(i=n.state,i.wrap!==0&&i.mode!==sy)?Bs:i.mode===sy&&(a=1,a=m0(a,t,e,0),a!==i.check)?P2:(o=q2(n,t,e,e),o?(i.mode=F2,H2):(i.havedict=1,ah))};var qO=k2,ZO=X2,WO=V2,jO=FO,KO=Y2,QO=VO,JO=kO,$O=XO,tL=YO,eL="pako inflate (from Nodeca project)",pc={inflateReset:qO,inflateReset2:ZO,inflateResetKeep:WO,inflateInit:jO,inflateInit2:KO,inflate:QO,inflateEnd:JO,inflateGetHeader:$O,inflateSetDictionary:tL,inflateInfo:eL};function nL(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var iL=nL;const Z2=Object.prototype.toString,{Z_NO_FLUSH:aL,Z_FINISH:rL,Z_OK:_0,Z_STREAM_END:X1,Z_NEED_DICT:Y1,Z_STREAM_ERROR:sL,Z_DATA_ERROR:XT,Z_MEM_ERROR:oL}=k0;function q0(n){this.options=nx.assign({chunkSize:1024*64,windowBits:15,to:""},n||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(n&&n.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15||(t.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new L2,this.strm.avail_out=0;let e=pc.inflateInit2(this.strm,t.windowBits);if(e!==_0)throw new Error(nh[e]);if(this.header=new iL,pc.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=v0.string2buf(t.dictionary):Z2.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(e=pc.inflateSetDictionary(this.strm,t.dictionary),e!==_0)))throw new Error(nh[e])}q0.prototype.push=function(n,t){const e=this.strm,i=this.options.chunkSize,a=this.options.dictionary;let o,u,h;if(this.ended)return!1;for(t===~~t?u=t:u=t===!0?rL:aL,Z2.call(n)==="[object ArrayBuffer]"?e.input=new Uint8Array(n):e.input=n,e.next_in=0,e.avail_in=e.input.length;;){for(e.avail_out===0&&(e.output=new Uint8Array(i),e.next_out=0,e.avail_out=i),o=pc.inflate(e,u),o===Y1&&a&&(o=pc.inflateSetDictionary(e,a),o===_0?o=pc.inflate(e,u):o===XT&&(o=Y1));e.avail_in>0&&o===X1&&e.state.wrap>0&&n[e.next_in]!==0;)pc.inflateReset(e),o=pc.inflate(e,u);switch(o){case sL:case XT:case Y1:case oL:return this.onEnd(o),this.ended=!0,!1}if(h=e.avail_out,e.next_out&&(e.avail_out===0||o===X1))if(this.options.to==="string"){let d=v0.utf8border(e.output,e.next_out),p=e.next_out-d,v=v0.buf2string(e.output,d);e.next_out=p,e.avail_out=i-p,p&&e.output.set(e.output.subarray(d,d+p),0),this.onData(v)}else this.onData(e.output.length===e.next_out?e.output:e.output.subarray(0,e.next_out));if(!(o===_0&&h===0)){if(o===X1)return o=pc.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,!0;if(e.avail_in===0)break}}return!0};q0.prototype.onData=function(n){this.chunks.push(n)};q0.prototype.onEnd=function(n){n===_0&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=nx.flattenChunks(this.chunks)),this.chunks=[],this.err=n,this.msg=this.strm.msg};function Qb(n,t){const e=new q0(t);if(e.push(n),e.err)throw e.msg||nh[e.err];return e.result}function lL(n,t){return t=t||{},t.raw=!0,Qb(n,t)}var cL=q0,uL=Qb,fL=lL,hL=Qb,dL={Inflate:cL,inflate:uL,inflateRaw:fL,ungzip:hL};const{Deflate:pL,deflate:mL,deflateRaw:gL,gzip:vL}=bO,{Inflate:_L,inflate:yL,inflateRaw:xL,ungzip:SL}=dL;var bL=pL,ML=mL,EL=gL,TL=vL,AL=_L,wL=yL,RL=xL,CL=SL,DL=k0,YT={Deflate:bL,deflate:ML,deflateRaw:EL,gzip:TL,Inflate:AL,inflate:wL,inflateRaw:RL,ungzip:CL,constants:DL};const cb="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~!$&'()*+,;=:@",q1=cb.length,o0=class o0{static stopEvent(t){return t.preventDefault(),t.stopPropagation(),t.cancelBubble=!0,t}static encodeBaseHigh(t){let e=BigInt("0x"+[...t].map(a=>a.toString(16).padStart(2,"0")).join("")),i="";for(;e>0;)i=cb[e%BigInt(q1)]+i,e/=BigInt(q1);return i}static decodeBaseHigh(t){let e=BigInt(0);for(const a of t)e=e*BigInt(q1)+BigInt(cb.indexOf(a));let i=e.toString(16);return i.length%2&&(i="0"+i),Uint8Array.from(i.match(/.{1,2}/g).map(a=>parseInt(a,16)))}static compressToUrlSafe(t){const e=YT.deflate(t,{level:9});return o0.encodeBaseHigh(e)}static decompressFromUrlSafe(t){const e=o0.decodeBaseHigh(t);return new TextDecoder().decode(YT.inflate(e))}};_1(o0,"JSON2",{stringify:t=>JSON.stringify(t,null,0).replace(/\"(\w+)\":/g,"$1:"),parse:t=>JSON.parse(t.replace(/(\w+):/g,'"$1":'))});let To=o0;const ub=To.JSON2;window.JSON2=ub;class NL{constructor(t,e){this.game=t,this.onLoad=e,this.projects=Ci([]),this.selectedProject=Ci(null),this._loadProjectsFromStorage(),this.createNewProject=this.createNewProject.bind(this),this.checkURLForProject(),window.p=this}checkURLForProject(){const e=new URLSearchParams(window.location.search).get("projectData");e&&setTimeout(()=>{this.loadShareLink(e)},10),window.history.replaceState({},document.title,window.location.pathname)}_saveProjectsToStorage(){return new Promise((t,e)=>{const i=[...this.projects.value].sort((a,o)=>o.lastEdited-a.lastEdited);this.projects.value=[],setTimeout(()=>{this.projects.value=i,t()},0),localStorage.setItem("projects",JSON.stringify(i))})}_loadProjectsFromStorage(){const t=JSON.parse(localStorage.getItem("projects"))||[];t.sort((e,i)=>i.lastEdited-e.lastEdited),this.projects.value=t,t.length===0?this.createNewProject():(this.selectedProject.value=t[0].id,this.onLoad&&this.onLoad(this.getSelectedProject()))}async createNewProject(t="Untitled Project"){let e=1,i=t;for(;this.projects.value.some(o=>o.name===i);)e++,i=`${t} (${e})`;t=i;const a={id:crypto.randomUUID(),name:t,lastEdited:Date.now(),data:{},fromURL:null};this.projects.value=[...this.projects.value,a],await this._saveProjectsToStorage(),this.loadProject(a.id)}async importProjectFromJSONString(t){try{const e=JSON.parse(t);e.id=crypto.randomUUID();const i=[...this.projects.value,e];this.projects.value=[],setTimeout(async()=>{this.projects.value=i,await this._saveProjectsToStorage(),this.loadProject(e.id),this.selectedProject.value=e.id},0)}catch(e){console.error("Failed to import project from JSON string:",e)}}loadProject(t){const e=typeof t=="string"?t:t.id,i=this.projects.value.find(a=>a.id===e);i&&(this.selectedProject.value=i.id,this.onLoad&&this.onLoad(i))}saveProject(t,e){const i=typeof t=="string"?t:t.id;this.projects.value=this.projects.value.map(a=>a.id===i?{...a,data:e,lastEdited:Date.now()}:a),this._saveProjectsToStorage()}async deleteProject(t){const e=typeof t=="string"?t:t.id;this.projects.value=this.projects.value.filter(i=>i.id!==e),await this._saveProjectsToStorage(),this.projects.value.length>0?this.loadProject(this.projects.value[0]):this.createNewProject()}save(t){this.selectedProject.value||this.createNewProject(),this.saveProject(this.selectedProject.value,t)}setProjectName(t,e){if(!this.validateProjectName(e))return;const i=typeof t=="string"?t:t.id;this.projects.value=this.projects.value.map(a=>a.id===i?{...a,name:e,lastEdited:Date.now()}:a),this._saveProjectsToStorage()}setName(t){this.selectedProject.value?this.setProjectName(this.selectedProject.value,t):this.createNewProject(t)}validateProjectName(t){return/^[a-zA-Z0-9 ]{1,64}$/.test(t.trim())}getSelectedProject(){return this.projects.value.find(t=>t.id===this.selectedProject.value)||null}generateShareLink(){const t=this.getSelectedProject();if(!t)return null;let e={projectName:t.name,...t.data};e=this.transformData(e);const i=ub.stringify(e),a=encodeURIComponent(To.compressToUrlSafe(i));return`${window.location.href.split("?")[0]}?projectData=${a}`}async loadShareLink(t){const e=this.projects.value.find(u=>u.fromURL===t);if(e){this.loadProject(e);return}const i=decodeURIComponent(To.decompressFromUrlSafe(t)),a=this.unTransformData(i),o={id:crypto.randomUUID(),name:a.projectName,lastEdited:Date.now(),data:a,fromURL:t};this.projects.value=[...this.projects.value,o],await this._saveProjectsToStorage(),this.loadProject(o.id),this.selectedProject.value=o.id}transformData(t){const e={squareSM:0,squareMD:1,squareLG:2,triangleSM:3,triangleMD:4,triangleLG:5,parallelogramA:6,parallelogramB:7,trapezoid:8},i=h=>Math.round(h*1e3)/1e3,a={};let o=0,u=t.pieces.map(h=>{const d=i(h.x),p=i(h.y),v=Math.round(h.rotation/45);return h.color in a||(a[h.color]=o++),{t:e[h.type],x:d,y:p,r:v,c:a[h.color]}});return{pn:t.projectName,x:t.boardX,y:t.boardY,p:u,cm:a}}unTransformData(t){const e=ub.parse(t),i={0:"squareSM",1:"squareMD",2:"squareLG",3:"triangleSM",4:"triangleMD",5:"triangleLG",6:"parallelogramA",7:"parallelogramB",8:"trapezoid"},a={};for(const[o,u]of Object.entries(e.cm))a[u]=o;return{projectName:e.pn,boardX:e.x,boardY:e.y,pieces:e.p.map(o=>({id:crypto.randomUUID(),type:i[o.t],x:o.x,y:o.y,rotation:o.r*45,color:a[o.c]}))}}}let Em=class{constructor(t){this.game=t,this.isOpen=Ci(!1),this.x=Ci(0),this.y=Ci(0),this.closing=Ci(!1),this.openContext=null,this.onPick=null}show(t=null){this.onPick=t;const e=this.game.dragHelper.getCursorPos();this.x.value=e.x,this.y.value=e.y,this.isOpen.value=!0,this.closing.value=!1}hide(){this.closing.value=!0,setTimeout(()=>{this.closing.value&&(this.isOpen.value=!1,this.onPick=null)},150)}toggle(t=null){this.isOpen.value?this.hide():this.show(t)}};function W2(n,t){return Xb(()=>{n.forEach(e=>e.value),t()})}let qT=class{constructor(t,e){this.game=t,this.id=crypto.randomUUID(),this.type=Ci(e),this.x=Ci(0),this.y=Ci(0),this.rotation=Ci(0),this.isDragging=Ci(!1),this.isSelected=Ci(!1),this.color=Ci("#000000"),this.rotatedPoints=Ci([]),this.snappedPoint=Ci(null),W2([this.type,this.x,this.y,this.rotation,this.color],()=>{this.game.queueSaveProject()})}serializeToJSON(){return{id:this.id,type:this.type.value,x:this.x.value,y:this.y.value,rotation:this.rotation.value,color:this.color.value}}deserializeFromJSON(t){this.type.value=t.type,this.x.value=t.x,this.y.value=t.y,this.rotation.value=t.rotation,this.color.value=t.color}setPos(t,e,i=!0){this.x.value=t,this.y.value=e,i&&this.snapToGrid()}snapToGrid(t=20){const e=v=>{const _=this.rotation.value*Math.PI/180,x=Math.cos(_),b=Math.sin(_),[E,R]=v,w=E*x-R*b,M=E*b+R*x;return[w,M]},i=(v,_)=>[v[0]*_,v[1]*_];let a=null,o=1/0,u=0,h=0,d=[];const p=xr[this.type.value].points;for(const v of p){const _=i(v,1.2),x=e(_);d.push(x);const b=this.x.value+x[0],E=this.y.value+x[1],R=Math.round(b/t)*t,w=Math.round(E/t)*t,M=R-b,C=w-E,U=Math.sqrt(M**2+C**2);U<o&&(o=U,u=M,h=C,a=x)}this.rotatedPoints.value=d,this.snappedPoint.value=a,this.x.value+=u,this.y.value+=h}startDrag(){this.isDragging.value=!0;const t={x:this.x.value,y:this.y.value};this.isDragging.value=!0,this.game.dragHelper.dragStart((e,i)=>{this.setPos(t.x-e,t.y-i)},()=>{this.isDragging.value=!1})}rotate(t,e=!0){this.rotation.value+=t,e&&this.snapToGrid()}handleEditMenu(t,e,i){switch(To.stopEvent(t),e){case"rotate":this.game.rotateShapePieMenu.show(this.handleRotateMenu.bind(this)),this.game.editShapePieMenu.hide();break;case"sort":this.game.sortShapePieMenu.show(this.handleSortMenu.bind(this)),this.game.editShapePieMenu.hide();break;case"pickColor":this.game.colorShapePieMenu.show(this.handleColorMenu.bind(this)),this.game.editShapePieMenu.hide();break;case"delete":this.game.removePiece(this.id),this.game.editShapePieMenu.hide();break}}handleColorMenu(t,e,i){To.stopEvent(t),this.color.value=e,this.game.colorShapePieMenu.hide()}handleRotateMenu(t,e,i){switch(To.stopEvent(t),e){case"rotate180":this.rotate(180);break;case"rotate45":this.rotate(45);break;case"rotate90":this.rotate(90);break;case"rotate-90":this.rotate(-90);break;case"rotate-45":this.rotate(-45);break}}handleSortMenu(t,e,i){switch(To.stopEvent(t),e){case"sendForward":this.game.movePieceForward(this);break;case"sendBackward":this.game.movePieceBack(this);break;case"sendToBack":this.game.sendPieceToBack(this);break;case"sendToFront":this.game.sendPieceToFront(this);break}}};const xr={squareSM:{name:"Small Square",points:[[0,-50],[50,0],[0,50],[-50,0]],defaultColor:"#FF6B6B"},squareMD:{name:"Medium Square",points:[[-50,-50],[50,-50],[50,50],[-50,50]],defaultColor:"#40E0D0"},squareLG:{name:"Large Square",points:[[0,-100],[100,0],[0,100],[-100,0]],defaultColor:"#00BFFF"},triangleSM:{name:"Small Triangle",points:[[-50,17],[50,17],[0,-33]],defaultColor:"#FF4500"},triangleMD:{name:"Medium Triangle",points:[[-50+16.5,-50-16.5],[50+16.5,50-16.5],[-50+16.5,50-16.5]],defaultColor:"#2E8B57"},triangleLG:{name:"Large Triangle",points:[[-100,51],[0,-49],[100,51]],defaultColor:"#DAA520"},parallelogramA:{name:"Parallelogram A",points:[[-25,-25],[75,-25],[25,25],[-75,25]],defaultColor:"#FF1493"},parallelogramB:{name:"Parallelogram B",points:[[-75,-25],[25,-25],[75,25],[-25,25]],defaultColor:"#00FFFF"},trapezoid:{name:"Trapezoid",points:[[-25,-25],[25,-25],[75,25],[-75,25]],defaultColor:"#FFA500"}};var Z1={},ZT;function UL(){return ZT||(ZT=1,function(n){(function(){var t=n||!1||this||window;t.default=t;var e="http://www.w3.org/2000/xmlns/",i="http://www.w3.org/1999/xhtml",a="http://www.w3.org/2000/svg",o='<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd" [<!ENTITY nbsp "&#160;">]>',u=/url\(["']?(.+?)["']?\)/,h={woff2:"font/woff2",woff:"font/woff",otf:"application/x-font-opentype",ttf:"application/x-font-ttf",eot:"application/vnd.ms-fontobject",sfnt:"application/font-sfnt",svg:"image/svg+xml"},d=function(et){return et instanceof HTMLElement||et instanceof SVGElement},p=function(et){if(!d(et))throw new Error("an HTMLElement or SVGElement is required; got "+et)},v=function(et){return new Promise(function(W,j){d(et)?W(et):j(new Error("an HTMLElement or SVGElement is required; got "+et))})},_=function(et){return et&&et.lastIndexOf("http",0)===0&&et.lastIndexOf(window.location.host)===-1},x=function(et){var W=Object.keys(h).filter(function(j){return et.indexOf("."+j)>0}).map(function(j){return h[j]});return W?W[0]:(console.error("Unknown font format for "+et+". Fonts may not be working correctly."),"application/octet-stream")},b=function(et){for(var W="",j=new Uint8Array(et),ut=0;ut<j.byteLength;ut++)W+=String.fromCharCode(j[ut]);return window.btoa(W)},E=function(et,W,j){var ut=et.viewBox&&et.viewBox.baseVal&&et.viewBox.baseVal[j]||W.getAttribute(j)!==null&&!W.getAttribute(j).match(/%$/)&&parseInt(W.getAttribute(j))||et.getBoundingClientRect()[j]||parseInt(W.style[j])||parseInt(window.getComputedStyle(et).getPropertyValue(j));return typeof ut>"u"||ut===null||isNaN(parseFloat(ut))?0:ut},R=function(et,W,j,ut){if(et.tagName==="svg")return{width:j||E(et,W,"width"),height:ut||E(et,W,"height")};if(et.getBBox){var tt=et.getBBox(),pt=tt.x,ot=tt.y,Dt=tt.width,Z=tt.height;return{width:pt+Dt,height:ot+Z}}},w=function(et){return decodeURIComponent(encodeURIComponent(et).replace(/%([0-9A-F]{2})/g,function(W,j){var ut=String.fromCharCode("0x"+j);return ut==="%"?"%25":ut}))},M=function(et){for(var W=window.atob(et.split(",")[1]),j=et.split(",")[0].split(":")[1].split(";")[0],ut=new ArrayBuffer(W.length),tt=new Uint8Array(ut),pt=0;pt<W.length;pt++)tt[pt]=W.charCodeAt(pt);return new Blob([ut],{type:j})},C=function(et,W){if(W)try{return et.querySelector(W)||et.parentNode&&et.parentNode.querySelector(W)}catch(j){console.warn('Invalid CSS selector "'+W+'"',j)}},U=function(et,W){var j=et.cssText.match(u),ut=j&&j[1]||"";if(!(!ut||ut.match(/^data:/)||ut==="about:blank")){var tt=ut.startsWith("../")?W+"/../"+ut:ut.startsWith("./")?W+"/."+ut:ut;return{text:et.cssText,format:x(tt),url:tt}}},D=function(et){return Promise.all(Array.from(et.querySelectorAll("image")).map(function(W){var j=W.getAttributeNS("http://www.w3.org/1999/xlink","href")||W.getAttribute("href");return j?(_(j)&&(j+=(j.indexOf("?")===-1?"?":"&")+"t="+new Date().valueOf()),new Promise(function(ut,tt){var pt=document.createElement("canvas"),ot=new Image;ot.crossOrigin="anonymous",ot.src=j,ot.onerror=function(){return tt(new Error("Could not load "+j))},ot.onload=function(){pt.width=ot.width,pt.height=ot.height,pt.getContext("2d").drawImage(ot,0,0),W.setAttributeNS("http://www.w3.org/1999/xlink","href",pt.toDataURL("image/png")),ut(!0)}})):Promise.resolve(null)}))},z={},B=function(et){return Promise.all(et.map(function(W){return new Promise(function(j,ut){if(z[W.url])return j(z[W.url]);var tt=new XMLHttpRequest;tt.addEventListener("load",function(){var pt=b(tt.response),ot=W.text.replace(u,'url("data:'+W.format+";base64,"+pt+'")')+`
`;z[W.url]=ot,j(ot)}),tt.addEventListener("error",function(pt){console.warn("Failed to load font from: "+W.url,pt),z[W.url]=null,j(null)}),tt.addEventListener("abort",function(pt){console.warn("Aborted loading font from: "+W.url,pt),j(null)}),tt.open("GET",W.url),tt.responseType="arraybuffer",tt.send()})})).then(function(W){return W.filter(function(j){return j}).join("")})},F=null,G=function(){return F||(F=Array.from(document.styleSheets).map(function(et){try{return{rules:et.cssRules,href:et.href}}catch(W){return console.warn("Stylesheet could not be loaded: "+et.href,W),{}}}))},L=function(et,W){var j=W||{},ut=j.selectorRemap,tt=j.modifyStyle,pt=j.modifyCss,ot=j.fonts,Dt=j.excludeUnusedCss,Z=pt||function(rt,Lt){var Et=ut?ut(rt):rt,Nt=tt?tt(Lt):Lt;return Et+"{"+Nt+`}
`},ht=[],Tt=typeof ot>"u",Ft=ot||[];return G().forEach(function(rt){var Lt=rt.rules,Et=rt.href;Lt&&Array.from(Lt).forEach(function(Nt){if(typeof Nt.style<"u")if(C(et,Nt.selectorText))ht.push(Z(Nt.selectorText,Nt.style.cssText));else if(Tt&&Nt.cssText.match(/^@font-face/)){var Qt=U(Nt,Et);Qt&&Ft.push(Qt)}else Dt||ht.push(Nt.cssText)})}),B(Ft).then(function(rt){return ht.join(`
`)+rt})},O=function(){if(!navigator.msSaveOrOpenBlob&&!("download"in document.createElement("a")))return{popup:window.open()}};t.prepareSvg=function(V,et,W){p(V);var j=et||{},ut=j.left,tt=ut===void 0?0:ut,pt=j.top,ot=pt===void 0?0:pt,Dt=j.width,Z=j.height,ht=j.scale,Tt=ht===void 0?1:ht,Ft=j.responsive,rt=Ft===void 0?!1:Ft,Lt=j.excludeCss,Et=Lt===void 0?!1:Lt;return D(V).then(function(){var Nt=V.cloneNode(!0);Nt.style.backgroundColor=(et||{}).backgroundColor||V.style.backgroundColor;var Qt=R(V,Nt,Dt,Z),we=Qt.width,re=Qt.height;if(V.tagName!=="svg")if(V.getBBox){Nt.getAttribute("transform")!=null&&Nt.setAttribute("transform",Nt.getAttribute("transform").replace(/translate\(.*?\)/,""));var ke=document.createElementNS("http://www.w3.org/2000/svg","svg");ke.appendChild(Nt),Nt=ke}else{console.error("Attempted to render non-SVG element",V);return}if(Nt.setAttribute("version","1.1"),Nt.setAttribute("viewBox",[tt,ot,we,re].join(" ")),Nt.getAttribute("xmlns")||Nt.setAttributeNS(e,"xmlns",a),Nt.getAttribute("xmlns:xlink")||Nt.setAttributeNS(e,"xmlns:xlink","http://www.w3.org/1999/xlink"),rt?(Nt.removeAttribute("width"),Nt.removeAttribute("height"),Nt.setAttribute("preserveAspectRatio","xMinYMin meet")):(Nt.setAttribute("width",we*Tt),Nt.setAttribute("height",re*Tt)),Array.from(Nt.querySelectorAll("foreignObject > *")).forEach(function(Q){Q.setAttributeNS(e,"xmlns",Q.tagName==="svg"?a:i)}),Et){var Jt=document.createElement("div");Jt.appendChild(Nt);var Yt=Jt.innerHTML;if(typeof W=="function")W(Yt,we,re);else return{src:Yt,width:we,height:re}}else return L(V,et).then(function(Q){var Me=document.createElement("style");Me.setAttribute("type","text/css"),Me.innerHTML=`<![CDATA[
`+Q+`
]]>`;var ee=document.createElement("defs");ee.appendChild(Me),Nt.insertBefore(ee,Nt.firstChild);var pe=document.createElement("div");pe.appendChild(Nt);var se=pe.innerHTML.replace(/NS\d+:href/gi,'xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href');if(typeof W=="function")W(se,we,re);else return{src:se,width:we,height:re}})})},t.svgAsDataUri=function(V,et,W){return p(V),t.prepareSvg(V,et).then(function(j){var ut=j.src,tt=j.width,pt=j.height,ot="data:image/svg+xml;base64,"+window.btoa(w(o+ut));return typeof W=="function"&&W(ot,tt,pt),ot})},t.svgAsPngUri=function(V,et,W){p(V);var j=et||{},ut=j.encoderType,tt=ut===void 0?"image/png":ut,pt=j.encoderOptions,ot=pt===void 0?.8:pt,Dt=j.canvg,Z=function(Tt){var Ft=Tt.src,rt=Tt.width,Lt=Tt.height,Et=document.createElement("canvas"),Nt=Et.getContext("2d"),Qt=window.devicePixelRatio||1;Et.width=rt*Qt,Et.height=Lt*Qt,Et.style.width=Et.width+"px",Et.style.height=Et.height+"px",Nt.setTransform(Qt,0,0,Qt,0,0),Dt?Dt(Et,Ft):Nt.drawImage(Ft,0,0);var we=void 0;try{we=Et.toDataURL(tt,ot)}catch(re){if(typeof SecurityError<"u"&&re instanceof SecurityError||re.name==="SecurityError"){console.error("Rendered SVG images cannot be downloaded in this browser.");return}else throw re}return typeof W=="function"&&W(we,Et.width,Et.height),Promise.resolve(we)};return Dt?t.prepareSvg(V,et).then(Z):t.svgAsDataUri(V,et).then(function(ht){return new Promise(function(Tt,Ft){var rt=new Image;rt.onload=function(){return Tt(Z({src:rt,width:rt.width,height:rt.height}))},rt.onerror=function(){Ft(`There was an error loading the data URI as an image on the following SVG
`+window.atob(ht.slice(26))+`Open the following link to see browser's diagnosis
`+ht)},rt.src=ht})})},t.download=function(V,et,W){if(navigator.msSaveOrOpenBlob)navigator.msSaveOrOpenBlob(M(et),V);else{var j=document.createElement("a");if("download"in j){j.download=V,j.style.display="none",document.body.appendChild(j);try{var ut=M(et),tt=URL.createObjectURL(ut);j.href=tt,j.onclick=function(){return requestAnimationFrame(function(){return URL.revokeObjectURL(tt)})}}catch(pt){console.error(pt),console.warn("Error while getting object URL. Falling back to string URL."),j.href=et}j.click(),document.body.removeChild(j)}else W&&W.popup&&(W.popup.document.title=V,W.popup.location.replace(et))}},t.saveSvg=function(V,et,W){var j=O();return v(V).then(function(ut){return t.svgAsDataUri(ut,W||{})}).then(function(ut){return t.download(et,ut,j)})},t.saveSvgAsPng=function(V,et,W){var j=O();return v(V).then(function(ut){return t.svgAsPngUri(ut,W||{})}).then(function(ut){return t.download(et,ut,j)})}})()}(Z1)),Z1}var OL=UL();class LL{constructor(t){this.game=t,this.bindFns()}bindFns(){this.exportJSON=this.exportJSON.bind(this),this.exportSVG=this.exportSVG.bind(this),this.exportPNG=this.exportPNG.bind(this)}exportJSON(){const t=this.game.projectManager.getSelectedProject(),e=JSON.stringify(t),i=t.name+".json",a=document.createElement("a");a.href="data:application/json,"+encodeURIComponent(e),a.download=i,a.click()}exportSVG(){const t=this.game.projectManager.getSelectedProject(),e=t.data.pieces,i=this.generateCombinedSVG(e,xr,1.2),a=t.name+".svg",o=document.createElement("a");o.href="data:image/svg+xml,"+encodeURIComponent(i),o.download=a,o.click()}exportPNG(){const e=this.game.projectManager.getSelectedProject().data.pieces,i=this.generateCombinedSVG(e,xr,1.2),a=document.createElement("div");a.innerHTML=i,document.body.appendChild(a);const o=a.querySelector("svg");o&&(OL.saveSvgAsPng(o,"tangram.png",{scale:2,backgroundColor:"transparent"}),document.body.removeChild(a))}generateCombinedSVG(t,e,i=1){if(t.length===0)return"";let a=1/0,o=1/0,u=-1/0,h=-1/0,d="";t.forEach(b=>{const{type:E,x:R,y:w,rotation:M,color:C}=b,U=e[E];if(!U)return;U.points.map(([z,B])=>{z*=i,B*=i;const F=M*Math.PI/180,G=Math.cos(F),L=Math.sin(F),O=z*G-B*L,V=z*L+B*G;return[O+R,V+w]}).forEach(([z,B])=>{a=Math.min(a,z),o=Math.min(o,B),u=Math.max(u,z),h=Math.max(h,B)})});const p=20;a-=p,o-=p,u+=p,h+=p;const v=u-a,_=h-o,x=`0 0 ${v} ${_}`;return t.forEach(b=>{const{type:E,x:R,y:w,rotation:M,color:C}=b,U=e[E];if(!U)return;const z=`M ${U.points.map(([B,F])=>{B*=i,F*=i;const G=M*Math.PI/180,L=Math.cos(G),O=Math.sin(G),V=B*L-F*O,et=B*O+F*L;return[V+R-a,et+w-o]}).map(B=>B.join(",")).join(" L ")} Z`;d+=`<path d="${z}" fill="${C||U.defaultColor}" stroke="#000" stroke-width="2" />
`}),`
			<svg xmlns="http://www.w3.org/2000/svg" viewBox="${x}" width="${v}" height="${_}">
				${d}
			</svg>
		`}importJSON(t){this.game.projectManager.importProjectFromJSONString(t)}}class zL{constructor(){this.dragHelper=new zN({usePointerEvents:!0}),this.boardX=Ci(0),this.boardY=Ci(0),this.zIndexOffset=Ci(.05),this.darkMode=Ci(!1),this.projectPanelIsOpen=Ci(!0),this.addShapePieMenu=new Em(this),this.editShapePieMenu=new Em(this),this.rotateShapePieMenu=new Em(this),this.sortShapePieMenu=new Em(this),this.colorShapePieMenu=new Em(this),this.pieces=Ci([]),this.isLoading=!1,this.modalManager=new ka(this),this.projectManager=new NL(this,this.loadProject.bind(this)),this.importExportManager=new LL(this),W2([this.boardX,this.boardY,this.pieces],()=>{this.queueSaveProject()}),this.modalManager.openModal(ka.MODALS.WELCOME)}getCursorPosOnBoard(){const t=this.dragHelper.getCursorPos();return{x:t.x-this.boardX.value,y:t.y-this.boardY.value-50}}spawnPiece(t){const e=new qT(this,t),i=this.getCursorPosOnBoard();e.setPos(i.x,i.y),e.color.value=xr[t].defaultColor,this.pieces.value=[...this.pieces.value,e]}removePiece(t){this.pieces.value=this.pieces.value.filter(e=>e.id!==t)}movePieceBack(t){const e=this.pieces.value.findIndex(i=>i.id===t.id);if(e>0){const i=[...this.pieces.value];[i[e],i[e-1]]=[i[e-1],i[e]],this.sortFix(i)}}movePieceForward(t){const e=this.pieces.value.findIndex(i=>i.id===t.id);if(e!==-1&&e<this.pieces.value.length-1){const i=[...this.pieces.value];[i[e],i[e+1]]=[i[e+1],i[e]],this.sortFix(i)}}sendPieceToBack(t){const e=this.pieces.value.filter(i=>i.id!==t.id);e.unshift(t),this.sortFix(e)}sendPieceToFront(t){const e=this.pieces.value.filter(i=>i.id!==t.id);e.push(t),this.sortFix(e)}sortFix(t){this.pieces.value=[],setTimeout(()=>{this.pieces.value=t},0)}loadProject(t){this.deserializeFromJSON(t.data)}queueSaveProject(){this.isLoading||(this.saveQueued=this.saveQueued||0,this.saveQueued++,!(this.saveQueued>1)&&setTimeout(()=>{this.projectManager.save(this.serializeToJSON()),this.saveQueued=0},100))}serializeToJSON(){return{boardX:this.boardX.value,boardY:this.boardY.value,pieces:this.pieces.value.map(t=>t.serializeToJSON())}}deserializeFromJSON(t){if(!t.pieces){this.pieces.value=[];return}this.isLoading=!0,this.boardX.value=t.boardX?t.boardX:0,this.boardY.value=t.boardY?t.boardY:0,this.pieces.value=[],setTimeout(()=>{this.pieces.value=t.pieces.map(e=>{const i=new qT(this,e.type);return i.deserializeFromJSON(e),i}),this.isLoading=!1},0)}}class ka{constructor(t){this.game=t,this.currentModal=Ci(null),this.isOpen=Ci(!1),this.currentModalCloseFn=null}openModal(t){this.currentModal.value=t,this.isOpen.value=!0}closeModal(){this.currentModal.value=null,this.isOpen.value=!1}closeCurrentModal(){this.currentModalCloseFn&&this.currentModalCloseFn()}}_1(ka,"MODALS",{WELCOME:"WELCOME",SHARE_URL:"SHARE_URL",IMPORT_EXPORT:"IMPORT_EXPORT",HELP:"HELP",THREED:"THREED",MSGBOX:"MSGBOX"});const BL=({game:n})=>{var t=Co(1);try{const e=()=>{n.projectPanelIsOpen.value=!n.projectPanelIsOpen.value},i=()=>{n.modalManager.openModal(ka.MODALS.IMPORT_EXPORT)},a=()=>{n.modalManager.openModal(ka.MODALS.SHARE_URL)},o=()=>{n.modalManager.openModal(ka.MODALS.HELP)},u=()=>{n.modalManager.openModal(ka.MODALS.THREED)},h=()=>{n.darkMode.value=!n.darkMode.value};return zt("div",{css:IL,children:dn("div",{className:"header-bar",children:[dn("div",{className:"header-icons",align:"left",children:[zt(uu,{title:"Projects",active:n.projectPanelIsOpen.value,onClick:e,children:zt("span",{className:"material-icons",children:"folder"})}),zt(uu,{title:"Import / Export",onClick:i,children:zt("span",{className:"material-icons",children:"import_export"})}),zt(uu,{title:"Share",onClick:a,children:zt("span",{className:"material-icons",children:"share"})}),zt(uu,{title:"Help",onClick:o,children:zt("span",{className:"material-icons",children:"help"})}),zt(uu,{title:"Toggle Light/Dark Mode",onClick:h,children:zt("span",{className:"material-icons",children:n.darkMode.value?"dark_mode":"light_mode"})}),zt(uu,{title:"View 3D",onClick:u,children:zt("span",{className:"material-icons",children:"3d_rotation"})})]}),dn("div",{className:"header-icons-right",align:"left",children:[zt("a",{href:"https://github.com/orokro/ReactTangrams",target:"_blank",children:zt(uu,{title:"Project Github",children:zt("img",{src:"/ReactTangrams/github.svg",className:"ghLogo",alt:"GitHub logo"})})}),zt("a",{href:"http://gmiller.net",target:"_blank",children:zt(uu,{title:"My Homepage",children:zt("span",{className:"material-icons",children:"home"})})})]}),dn("h1",{children:["Greg's Tangrams in",zt("a",{href:"https://react.dev",target:"_blank",children:zt("img",{src:NN,className:"logo react",alt:"React logo"})}),"React"]})]})})}finally{t.f()}},IL={name:"79e3vx",styles:".header-bar{position:fixed;inset:0px 0px auto 0px;z-index:1000;height:50px;background:#21b5c9;border-bottom:2px solid #1d7491;white-space:nowrap;overflow:hidden;h1{position:absolute;inset:-5px 110px 0px 330px;margin:0px;padding-top:0px;font-size:32px;color:white;text-shadow:3px 2px 1px #1d7491;}.logo{display:inline-block;padding:0px;margin:0px 5px 0px 10px;width:40px;height:40px;position:relative;top:10px;}.header-icons{position:absolute;inset:0px auto auto 0px;width:270px;padding:5px 0px 0px 6px;}.header-icons-right{position:absolute;inset:0px 0px auto auto;width:110px;padding:5px 0px 0px 6px;}.ghLogo{filter:invert(1);transform:scale(1.2) translateY(-1px);}}"},ml=({shape:n,color:t,edgeThickness:e,edgeColor:i,rawScale:a,...o})=>{a=a||1,t=t||"#00ABAE",e=e||2,i=i||"#000";const{name:u,points:h}=xr[n],d=200*a,p=d/2,{d:v,maxX:_,maxY:x,size:b}=kt.useMemo(()=>{let E=0,R=0;const w=h.reduce((C,U,D)=>{const z=p+U[0]*a,B=p+U[1]*a;return E=z>E?z:E,R=B>R?B:R,C+`${D==0?"M":"L"} ${z} ${B} `},"")+"Z";E+=e,R+=e;const M=Math.max(E,R);return{d:w,maxX:E,maxY:R,size:M}},[n,a]);return zt("svg",{css:PL,width:d,height:d,viewBox:`0 0 ${d} ${d}`,xmlns:"http://www.w3.org/2000/svg",title:u,...o,children:zt("path",{fill:t,stroke:i,strokeWidth:e,"stroke-alignment":"inner",d:v,onMouseDown:E=>{o.onMouseDown&&o.onMouseDown(E)},onTouchStart:E=>{o.onMouseDown&&o.onMouseDown(E)},onMouseUp:E=>{o.onMouseUp&&o.onMouseUp(E)},onTouchEnd:E=>{o.onMouseUp&&o.onMouseUp(E)}})})},PL={name:"1jn72dn",styles:"pointer-events:none;path{pointer-events:initial;}"},HL=({piece:n,game:t,...e})=>{var i=Co(1);try{return dn("div",{css:FL,className:Sc("piece",{selected:n.isSelected.value},{dragging:n.isDragging.value}),style:{left:`${n.x.value}px`,top:`${n.y.value}px`,...e.style},children:[zt(ml,{style:{transform:`translate(-50%, calc(-50% - ${n.isDragging.value?10:0}px)) rotate(${n.rotation.value}deg)`},className:"piece-shape",shape:n.type.value,color:n.color.value,rawScale:1.2,onMouseDown:a=>{To.stopEvent(a),n.startDrag()},onMouseUp:a=>{To.stopEvent(a),a.button===2&&t.editShapePieMenu.toggle(n.handleEditMenu.bind(n))}}),!1,n.snappedPoint.value&&n.isDragging.value&&zt("div",{className:"snapped-point",style:{left:n.snappedPoint.value[0]-4+"px",top:n.snappedPoint.value[1]-4+"px"}})]})}finally{i.f()}},FL={name:"ctx84l",styles:"pointer-events:none;cursor:default;position:absolute;z-index:10;width:0px;height:0px;filter:drop-shadow(0px 0px 0px rgba(0, 0, 0, 0.0));transition:transform 0.1s ease-in-out,filter 0.1s ease-in-out;&.dragging{filter:drop-shadow(2px 10px 2px rgba(0, 0, 0, 0.5));z-index:20;cursor:move;}.piece-shape{transition:transform 0.1s ease-in-out;}.rotated-points{.point{position:absolute;border:2px solid red;}}.snapped-point{position:absolute;background-color:white;width:4px;height:4px;border-radius:50%;border:2px solid black;z-index:100;}"};function GL(n,t){const e=document.createElement("canvas");e.width=n,e.height=n;const i=e.getContext("2d");return i.clearRect(0,0,e.width,e.height),i.fillStyle=t,i.fillRect(0,0,1,1),e.toDataURL()}const VL=20,kL=({game:n})=>{var t=Co(1);try{const e=Jf(0),i=Jf(0),a=Jf(!1),o=p=>{if(p.button===2){n.addShapePieMenu.toggle();return}h(p)},u=kt.useMemo(()=>GL(VL,n.darkMode.value?"rgba(255, 255, 255, 0.5)":"rgba(0, 0, 0, 1)"),[n.darkMode.value]),h=p=>{const v={x:n.boardX.value,y:n.boardY.value};a.value=!0,n.dragHelper.dragStart((_,x)=>{n.boardX.value=v.x-_,n.boardY.value=v.y-x},(_,x)=>{a.value=!1})},d=p=>{const v=n.dragHelper.getCursorPos();e.value=v.x-n.boardX.value,i.value=v.y-n.boardY.value-50};return zt(i2,{children:zt("div",{css:XL,className:Sc({dragging:a.value}),style:{backgroundPosition:`${n.boardX.value}px ${n.boardY.value}px`,backgroundImage:`url(${u})`,backgroundColor:n.darkMode.value?"#333":"#fff"},onMouseDown:o,onMouseMove:d,children:dn("div",{className:"piece-container",style:{left:n.boardX.value+"px",top:n.boardY.value+"px"},children:[!1,n.pieces.value.map((p,v)=>zt(HL,{piece:p,game:n},p.id))]})})})}finally{t.f()}},XL={name:"or455k",styles:"position:absolute;inset:52px 0px 0px 0px;box-shadow:inset 0px 0px 10px rgba(0, 0, 0, 0.3);transition:background-color 0.3s;cursor:grab;&.dragging{cursor:grabbing;}.piece-container{width:100%;height:100%;position:absolute;.debug-shadow{position:absolute;filter:blur(3px);width:10px;height:10px;background-color:rgba(0, 0, 0, 0.5);}}"},Z0=({cssStyles:n,pieMenu:t,menuSize:e,onItemSelect:i,children:a,...o})=>{var u=Co(1);try{const h=t.x.value,d=t.y.value,p=t.closing.value;e=e||400;const v=Jf(!1);kt.useEffect(()=>{setTimeout(()=>v.value=!0,1)},[]);const x=360/Xm.Children.count(a),b=Xm.Children.map(a,(E,R)=>{const w=(x*R-90)*(Math.PI/180),M=Math.cos(w)*(e/2),C=Math.sin(w)*(e/2);return Xm.cloneElement(E,{onClick:U=>{E.props.onClick&&E.props.onClick(U),i(E.props.slug,R),t.onPick&&t.onPick(U,E.props.slug,R)},className:`${E.props.className||""} pie-child-item`,x:M,y:C})});return zt("div",{css:[YL,n,"",""],style:{top:d+"px",left:h+"px",width:e+"px",height:e+"px"},...o,className:`pie-menu ${v.value&&!p?"open":""}`,onClick:E=>{E.stopPropagation(),t.hide()},children:b})}finally{u.f()}},YL={name:"bpubm4",styles:"position:absolute;z-index:1001;transform:translate(-50%, -50%) scale(0);transition:transform 0.15s;&.open{transform:translate(-50%, -50%) scale(1);}&.closing{pointer-events:none;}border-radius:50%;.pie-child-item{position:absolute;top:50%;left:50%;}"},Pi=({title:n,x:t,y:e,width:i,children:a,slug:o,toolTipText:u,...h})=>{i=i||100,u=u||n;const d=kt.useMemo(()=>a2("transform:translate(-50%, -50%) translate(",t,"px, ",e,"px);width:",i,"px;height:",i,"px;&:hover{transform:translate(-50%, -50%) translate(",t,"px, ",e,"px) scale(1.2);}.pie-thumb-container{width:",i,"px;height:",i,"px;}",""),[t,e,i]);return dn("div",{css:[qL,d,"",""],...h,title:u,children:[zt("div",{className:"pie-thumb-container",children:zt("div",{className:"centerWrapper",children:zt("div",{className:"centerContents",children:a})})}),zt("div",{className:"pie-title",children:n})]})},qL={name:"keiymk",styles:"position:absolute;top:50%;left:50%;pointer-events:initial;cursor:pointer;transition:all 0.2s;&:hover{z-index:1000;.pie-title{background:white;}}.pie-thumb-container{position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);border-radius:50%;background-color:#CCCCCCBB;backdrop-filter:blur(4px);.centerWrapper{position:relative;left:50%;top:53%;width:0px;height:0px;.centerContents{transform:translate(-50%, -50%);display:inline-block;width:auto;height:auto;max-width:max-content;max-height:max-content;}}}.pie-title{position:absolute;bottom:-30px;left:50%;transform:translateX(-50%);text-align:center;white-space:nowrap;font-weight:600;padding:0px 10px;border-radius:20px;background-color:#fff;background-color:#efefef99;}"},ZL=({game:n,onItemSelect:t,children:e,...i})=>Oe.jsxs(Z0,{menuSize:400,...i,onItemSelect:t,children:[Oe.jsx(Pi,{title:"Small Square",slug:"squareSM",children:Oe.jsx(ml,{shape:"squareSM",color:xr.squareSM.defaultColor,rawScale:.5})}),Oe.jsx(Pi,{title:"Medium Square",slug:"squareMD",children:Oe.jsx(ml,{shape:"squareMD",color:xr.squareMD.defaultColor,rawScale:.5})}),Oe.jsx(Pi,{title:"Large Square",slug:"squareLG",children:Oe.jsx(ml,{shape:"squareLG",color:xr.squareLG.defaultColor,rawScale:.45})}),Oe.jsx(Pi,{title:"Small Triangle",slug:"triangleSM",children:Oe.jsx(ml,{shape:"triangleSM",color:xr.triangleSM.defaultColor,rawScale:.5})}),Oe.jsx(Pi,{title:"Medium Triangle",slug:"triangleMD",children:Oe.jsx(ml,{shape:"triangleMD",color:xr.triangleMD.defaultColor,rawScale:.5})}),Oe.jsx(Pi,{title:"Large Triangle",slug:"triangleLG",children:Oe.jsx(ml,{shape:"triangleLG",color:xr.triangleLG.defaultColor,rawScale:.45})}),Oe.jsx(Pi,{title:"Parallelogram A",slug:"parallelogramA",children:Oe.jsx(ml,{shape:"parallelogramA",color:xr.parallelogramA.defaultColor,rawScale:.5})}),Oe.jsx(Pi,{title:"Parallelogram B",slug:"parallelogramB",children:Oe.jsx(ml,{shape:"parallelogramB",color:xr.parallelogramB.defaultColor,rawScale:.5})}),Oe.jsx(Pi,{title:"Trapezoid",slug:"trapezoid",children:Oe.jsx(ml,{shape:"trapezoid",color:xr.trapezoid.defaultColor,rawScale:.5})})]}),WL=({game:n,onItemSelect:t,children:e,...i})=>dn(Z0,{cssStyles:jL,menuSize:150,...i,onItemSelect:t,children:[zt(Pi,{width:80,title:"Pick Color",slug:"pickColor",children:zt("span",{className:"material-icons",children:"palette"})}),zt(Pi,{width:80,title:"Rotate",slug:"rotate",children:zt("span",{className:"material-icons",children:"refresh"})}),zt(Pi,{width:80,title:"Delete",slug:"delete",children:zt("span",{className:"material-icons",children:"delete"})}),zt(Pi,{width:80,title:"Sort",slug:"sort",children:zt("span",{className:"material-icons",children:"swap_vert"})})]}),jL={name:"1nwhes0",styles:".material-icons{font-size:50px!important;}"},Tm=70,KL=({game:n,onItemSelect:t,children:e,...i})=>dn(Z0,{cssStyles:QL,menuSize:165,...i,onItemSelect:t,children:[zt(Pi,{width:Tm,title:"180°",slug:"rotate180",children:zt("span",{className:"material-icons",children:"refresh"})}),zt(Pi,{width:Tm,title:"+45°",slug:"rotate45",children:zt("span",{className:"material-icons",children:"redo"})}),zt(Pi,{width:Tm,title:"+90°",slug:"rotate90",children:zt("span",{className:"material-icons",children:"redo"})}),zt(Pi,{width:Tm,title:"-90°",slug:"rotate-90",children:zt("span",{className:"material-icons",children:"undo"})}),zt(Pi,{width:Tm,title:"-45°",slug:"rotate-45",children:zt("span",{className:"material-icons",children:"undo"})})]}),QL={name:"1nwhes0",styles:".material-icons{font-size:50px!important;}"},jv=70,JL=({game:n,onItemSelect:t,children:e,...i})=>dn(Z0,{cssStyles:$L,menuSize:165,...i,onItemSelect:t,children:[zt(Pi,{width:jv,title:"Send Forward",slug:"sendForward",children:zt("span",{className:"material-icons",children:"arrow_drop_up"})}),zt(Pi,{width:jv,title:"Send to Bottom",slug:"sendToBack",children:zt("span",{className:"material-icons",children:"vertical_align_bottom"})}),zt(Pi,{width:jv,title:"Send Backward",slug:"sendBackward",children:zt("span",{className:"material-icons",children:"arrow_drop_down"})}),zt(Pi,{width:jv,title:"Send To Top",slug:"sendToFront",children:zt("span",{className:"material-icons",children:"vertical_align_top"})})]}),$L={name:"1nwhes0",styles:".material-icons{font-size:50px!important;}"},tz=20,ez=[["#FF4500","Sunset Orange"],["#FF6347","Tropical Tomato Red"],["#FF7F00","Vivid Orange"],["#FFB347","Warm Sunset Orange"],["#FFA500","Mango Orange"],["#DAA520","Golden Sand"],["#FFD700","Bright Gold"],["#FFFF33","Highlighter Yellow"],["#66FF00","Electric Lime"],["#32CD32","Bright Lime Green"],["#2E8B57","Seafoam Green"],["#00FA9A","Tropical Mint Green"],["#00FF7F","Vivid Spring Green"],["#00FFFF","Aqua Blue"],["#40E0D0","Turquoise Blue"],["#00CED1","Deep Turquoise"],["#00BFFF","Tropical Sky Blue"],["#1E90FF","Bright Ocean Blue"],["#007FFF","Electric Blue"],["#0000FF","Pure Blue"],["#8000FF","Bright Electric Purple"],["#9400D3","Deep Violet"],["#BA55D3","Orchid Purple"],["#DA70D6","Vivid Orchid"],["#EE82EE","Bright Violet"],["#FF00FF","Pure Magenta"],["#FF1493","Hot Pink"],["#FF007F","Neon Pinkish-Red"],["#FF6B6B","Coral Red"]],nz=({game:n,onItemSelect:t,children:e,...i})=>zt(Z0,{cssStyles:iz,menuSize:165,...i,onItemSelect:t,children:ez.map((a,o)=>zt(Pi,{width:tz,slug:a[0],toolTipText:a[1],children:zt("span",{style:{color:a[0]},className:"material-icons",children:"circle"})},o))}),iz={name:"19pqpzt",styles:".material-icons{font-size:30px!important;}"},az=({game:n,...t})=>{var e=Co(1);try{const i=(a,o)=>{n.addShapePieMenu.hide(),n.spawnPiece(a)};return Oe.jsxs(Oe.Fragment,{children:[n.addShapePieMenu.isOpen.value&&Oe.jsx(ZL,{game:n,pieMenu:n.addShapePieMenu,onItemSelect:i,onMouseLeave:()=>n.addShapePieMenu.hide()}),n.editShapePieMenu.isOpen.value&&Oe.jsx(WL,{game:n,pieMenu:n.editShapePieMenu,onItemSelect:a=>{},onMouseLeave:()=>n.editShapePieMenu.hide()}),n.rotateShapePieMenu.isOpen.value&&Oe.jsx(KL,{game:n,pieMenu:n.rotateShapePieMenu,onItemSelect:a=>{},onMouseLeave:()=>n.rotateShapePieMenu.hide()}),n.sortShapePieMenu.isOpen.value&&Oe.jsx(JL,{game:n,pieMenu:n.sortShapePieMenu,onItemSelect:a=>{},onMouseLeave:()=>n.sortShapePieMenu.hide()}),n.colorShapePieMenu.isOpen.value&&Oe.jsx(nz,{game:n,pieMenu:n.colorShapePieMenu,onItemSelect:a=>{},onMouseLeave:()=>n.colorShapePieMenu.hide()})]})}finally{e.f()}},rz=({game:n})=>{var t=Co(1);try{const{projectManager:e}=n,i=kt.useMemo(()=>e.projects.value.map(a=>zt(sz,{project:a,game:n},a.id)),[e.projects.value]);return zt(i2,{children:dn("div",{css:oz,className:Sc("project-panel",{open:n.projectPanelIsOpen.value}),children:[dn("h2",{title:"Projects",children:["Projects",zt("span",{className:"projects-arrow material-icons",children:"subdirectory_arrow_left"})]}),zt("div",{className:"cmdAddNew",title:"Add New Project",onClick:a=>e.createNewProject(),children:zt("span",{className:"material-icons",children:"add"})}),zt("div",{className:"project-list",children:i})]})})}finally{t.f()}},sz=({project:n,game:t})=>{var e=Co(1);try{const{projectManager:i}=t,a=Jf(!1),o=Jf(!0),u=Jf(n.name),h=()=>{i.loadProject(n.id)},d=()=>{n.id===i.selectedProject.value&&(u.value=n.name,a.value=!0)},p=b=>t.projectManager.validateProjectName(b),v=b=>{const E=b.target.value;u.value=E,o.value=p(E)},_=()=>{o.value&&t.projectManager.setProjectName(n.id,u.value),a.value=!1},x=b=>{b.key==="Enter"?_():b.key==="Escape"&&(u.value=n.name,o.value=!0,a.value=!1)};return dn("div",{className:Sc("project-item",{selected:n.id===i.selectedProject.value}),align:"left",onClick:h,children:[a.value?zt("input",{type:"text",value:u.value,onChange:v,onBlur:_,onKeyDown:x,autoFocus:!0,className:Sc("project-name-input",{invalid:!o.value})}):zt("div",{className:"project-name",title:n.name,onClick:d,children:n.name}),zt("div",{className:"project-date",title:`Last edit on ${new Date(n.lastEdited).toLocaleString()}`,children:new Date(n.lastEdited).toLocaleString()}),zt("div",{className:"cmdDelete",title:"Delete Project",onClick:b=>{b.stopPropagation(),i.deleteProject(n)},children:zt("span",{className:"material-icons",children:"delete"})})]})}finally{e.f()}},oz={name:"13wcwho",styles:"position:fixed;top:50px;left:0;width:200px;height:100%;transform:translateX(-100%);transition:transform 0.2s;&.open{transform:translateX(0);}background:#11111199;backdrop-filter:blur(10px);color:#fff;padding:10px;overflow-y:auto;z-index:100;h2{margin:0 0 10px 0;text-align:left;.projects-arrow{position:relative;top:9px;left:5px;font-size:24px;font-weight:bold;transform:rotate(-90deg) scale(1.2);}}.cmdAddNew{cursor:pointer;position:absolute;top:10px;right:10px;width:35px;height:35px;background:white;border-radius:50%;transition:top 0.2s;&:hover{top:8px;}&:active{top:12px;}.material-icons{position:relative;top:2px;font-size:30px;color:#22222299;}}.project-list{height:calc(100% - 120px);overflow-y:auto;overflow-x:hidden;border:1px solid #444;border-radius:5px;list-style:none;padding:0;margin:0;}.project-item{position:relative;padding:10px;border-bottom:1px solid #666;cursor:pointer;transition:background 0.2s;&:hover,&.selected{background:#444;.cmdDelete{display:block;}}&.selected{.project-name{font-weight:bold;cursor:text;}}.project-name{width:155px;}.project-name-input{width:150px;font-size:14px;color:white;padding:2px;border:1px solid #444;background:#222;&.invalid{background:red;}}.project-date{font-size:12px;font-style:italic;color:#aaa;}.cmdDelete{display:none;position:absolute;right:6px;top:12px;width:20px;height:20px;cursor:pointer;&:hover{.material-icons{color:red;}}.material-icons{font-size:16px;color:white;}}}"},lz=({game:n,children:t})=>{var e=Co(1);try{const i=kt.useRef(null),a=o=>{o.target===i.current&&n.modalManager.closeCurrentModal()};return zt("div",{ref:i,css:cz,className:Sc("modal-layer",{open:n.modalManager.currentModal.value!==null}),onClick:a,children:zt("div",{className:"modal-center-wrapper",children:t})})}finally{e.f()}},cz={name:"168uhmc",styles:"position:fixed;top:0;left:0;width:100vw;height:100vh;transition:background 0.3s ease-in-out,backdrop-filter 0.3s ease-in-out,opacity 0.3s ease-in-out;background:rgba(0, 0, 0, 0.0);backdrop-filter:blur(0px);z-index:1000;opacity:0;pointer-events:none;&.open{opacity:1;pointer-events:initial;background:rgba(0, 0, 0, 0.5);backdrop-filter:blur(5px);}.modal-center-wrapper{position:absolute;top:0px;bottom:0px;left:50%;width:0px;}"},W0=kt.forwardRef(({game:n,modalKey:t,title:e,showClose:i,materialIcon:a,allowEscapeToClose:o,onClose:u,children:h,...d},p)=>{i=i??!0,o=o??!0;const[v,_]=kt.useState(!1),x=()=>{_(!1),setTimeout(()=>{u&&u(),_(!1)},175)};return kt.useEffect(()=>{n.modalManager.currentModalCloseFn=x,setTimeout(()=>{_(!0)},1)},[]),kt.useImperativeHandle(p,()=>({close:()=>{x()}})),o&&kt.useEffect(()=>{const b=E=>{E.key==="Escape"&&x()};return window.addEventListener("keydown",b),()=>window.removeEventListener("keydown",b)},[u]),dn("div",{css:uz,className:Sc("modal",{open:v}),...d,children:[dn("div",{className:"modal-header",children:[zt("h2",{children:e}),zt("span",{className:"headerIcon material-icons",children:a}),i&&zt("div",{className:"cmdClose",title:"close",onClick:x,children:zt("span",{className:"material-icons",children:"close"})})]}),zt("div",{className:"modal-content",children:h})]})}),uz={name:"v1pkuq",styles:"position:relative;transform:translate(-50%, 0%);pointer-events:none;transition:top 0.3s ease-in-out;top:-100%;&.open{pointer-events:initial;top:10%!important;}background:white;box-shadow:5px 5px 10px rgba(0, 0, 0, 0.75);border-radius:10px;overflow:clip;padding:60px 20px 20px 20px;min-width:600px;min-height:100px;.modal-header{position:absolute;inset:0px 0px auto 0px;height:40px;background:#21b5c9;border-bottom:2px solid #1d7491;.headerIcon{position:absolute;top:5px;left:10px;color:white;text-shadow:3px 2px 1px #1d7491;font-size:32px;}h2{text-align:center!important;color:white;text-shadow:3px 2px 1px #1d7491;margin:0;}.cmdClose{cursor:pointer;position:absolute;top:10px;right:10px;width:23px;height:23px;border-radius:50%;background:rgba(0, 0, 0, 0.25);color:rgba(255, 255, 255, 0.75);transition:background 0.1s ease-in-out,color 0.1s ease-in-out;&:hover{background:rgba(255, 0, 0, 0.6);color:rgba(255, 255, 255, 1);}span{position:relative;left:0px;top:2px;font-size:19px;}}}.modal-content{}"},j0=({buttonsList:n,onButtonClicked:t,...e})=>{const i=kt.useMemo(()=>n.map(([a,o,u])=>(u=u??!1,zt("button",{className:Sc({default:u}),onClick:()=>t(o,a),children:a},o))),[n,t]);return zt("div",{css:fz,className:"modal-button-bar",children:i})},fz={name:"bzg7ia",styles:"display:flex;justify-content:flex-end;padding:5px 0px;button{margin-left:0.5em;font-size:20px;padding:5px 20px 10px;border:2px solid rgba(0, 0, 0, 0.2);text-transform:uppercase;&.default{background:#21b5c9;color:white;text-shadow:3px 2px 0px #1d7491;border:2px solid transparent;}&:hover{border:2px solid black;}}"},hz=({game:n,onClose:t})=>{const e=kt.useRef(null),i=(o,u)=>{switch(o){case"close":e.current.close();break}},a=()=>{t&&t()};return dn(W0,{ref:e,game:n,modalKey:ka.MODALS.WELCOME,showClose:!0,title:"Welcome to Greg's React Tangrams",onClose:a,style:{width:"500px",maxHeight:"70%"},children:[dn("div",{css:dz,align:"left",children:[zt("h2",{children:"Welcome"}),dn("p",{align:"left",children:["This project was created to learn ",zt("a",{href:"https://react.dev/",target:"_blank",children:"React"}),", ",zt("a",{href:"https://vite.dev/guide/",target:"_blank",children:"React with Vite"}),", and ",zt("a",{href:"https://r3f.docs.pmnd.rs/getting-started/introduction",target:"_blank",children:"React Three Fiber"}),".",zt("br",{}),"You can find the source code on ",zt("a",{href:"https://github.com/orokro/ReactTangrams",target:"_blank",children:"My GitHub"}),"."]}),zt("h2",{children:"Quick Start"}),dn("ul",{align:"left",children:[dn("li",{children:[zt("span",{children:"Left Click"}),"+",zt("span",{children:"Drag"})," on the grid to pan the view up/down/left/right"]}),dn("li",{children:[zt("span",{children:"Right Click"})," empty grid space to add shapes!"]}),dn("li",{children:[zt("span",{children:"Right Click"})," on a shape to edit it, or remove it."]}),dn("li",{children:["Click the folder icon ",zt("span",{className:"material-icons down",children:"folder"})," on the top-left to see your projects!"]}),dn("li",{children:["Click the help icon ",zt("span",{className:"material-icons down",children:"help"})," on the header for more info."]}),zt("li",{children:"Have fun!"})]})]}),zt(j0,{buttonsList:[["let's go!","close",!0]],onButtonClicked:i})]})},dz={name:"1rstyrd",styles:"text-align:center;height:370px;margin-bottom:10px;overflow-y:auto;h2{margin:0px;}li{line-height:30px;span{font-weight:bold;background:rgba(0, 0, 0, 0.1);padding:0px 5px;border-radius:5px;&.down{transform:translateY(7px);}}}"},pz=({game:n,onClose:t})=>{var e=Co(1);try{const i=kt.useRef(null),a=kt.useRef(null),o=(d,p)=>{switch(d){case"close":i.current.close();break}},u=()=>{t&&t()},h=d=>{const p=d.target.files[0];if(p&&p.type==="application/json"){const v=new FileReader;v.onload=_=>{try{const x=_.target.result;a.current&&(a.current.value=""),i.current.close(),n.importExportManager.importJSON(x)}catch(x){console.error("Error parsing JSON:",x),alert("Invalid JSON file.")}},v.readAsText(p)}else alert("Please select a valid JSON file.")};return dn(W0,{ref:i,game:n,modalKey:ka.MODALS.WELCOME,showClose:!0,title:"Import / Export",materialIcon:"import_export",onClose:u,style:{width:"450px",minWidth:"450px",maxHeight:"70%"},children:[dn("div",{css:mz,align:"left",children:[zt("h2",{children:"Export"}),dn("ul",{align:"left",children:[dn("li",{children:[zt("span",{className:"material-icons",children:"download"}),zt("a",{onClick:n.importExportManager.exportJSON,children:"Download the current project as a JSON file."})]}),dn("li",{children:[zt("span",{className:"material-icons",children:"download"}),zt("a",{onClick:n.importExportManager.exportSVG,children:"Download the current project as an SVG file."})]}),dn("li",{children:[zt("span",{className:"material-icons",children:"download"}),zt("a",{onClick:n.importExportManager.exportPNG,children:"Download the current project as an PNG file."})]})]}),zt("h2",{children:"Import"}),zt("p",{align:"left",children:"If you have a JSON previously exported, you can import it here"}),zt("ul",{align:"left",children:zt("input",{type:"file",accept:".json",onChange:h,ref:a})})]}),zt(j0,{buttonsList:[["Close","close",!0]],onButtonClicked:o})]})}finally{e.f()}},mz={name:"lrm31n",styles:"text-align:center;height:310px;margin-bottom:10px;overflow:hidden;h2{margin:0px;}li{line-height:30px;span{position:relative;top:7px;margin-right:10px;font-weight:bold;background:rgba(0, 0, 0, 0.1);padding:0px 5px;border-radius:5px;&.down{transform:translateY(7px);}}a{cursor:pointer;}}"};var gz={name:"utehjx",styles:"resize:none"};const vz=({game:n,onClose:t})=>{const e=kt.useRef(null),i=kt.useRef(null),a=kt.useMemo(()=>n.projectManager.generateShareLink(),[]),o=p=>{p.target.select()},u=()=>{e.current.select(),document.execCommand("copy")},h=(p,v)=>{switch(p){case"copy":u();break;case"close":i.current.close();break}},d=()=>{t&&t()};return zt(W0,{ref:i,game:n,modalKey:ka.MODALS.SHARE_URL,showClose:!0,title:"Share Project",materialIcon:"share",onClose:d,children:dn("div",{css:_z,children:[zt("p",{children:"Copy and paste the following link to share this project:"}),zt("textarea",{ref:e,css:gz,className:"txtCopyBox",value:a,readOnly:!0,onClick:o}),zt(j0,{buttonsList:[["Copy","copy"],["close","close",!0]],onButtonClicked:h})]})})},_z={name:"ae4dkv",styles:"text-align:center;.txtCopyBox{width:590px;height:100px;margin:0 auto;background:white;border:2px solid black;border-radius:5px;outline:none;word-wrap:break-word;overflow-wrap:break-word;}"},yz=({game:n,onClose:t})=>{const e=kt.useRef(null),i=(o,u)=>{switch(o){case"close":e.current.close();break}},a=()=>{t&&t()};return dn(W0,{ref:e,game:n,modalKey:ka.MODALS.HELP,showClose:!0,title:"Help",materialIcon:"help",onClose:a,style:{width:"600px",maxHeight:"500px"},children:[dn("div",{css:xz,align:"left",children:[zt("h2",{children:"Welcome"}),dn("p",{align:"left",children:["This project was created to learn ",zt("a",{href:"https://react.dev/",target:"_blank",children:"React"}),", ",zt("a",{href:"https://vite.dev/guide/",target:"_blank",children:"React with Vite"}),", and ",zt("a",{href:"https://r3f.docs.pmnd.rs/getting-started/introduction",target:"_blank",children:"React Three Fiber"}),".",zt("br",{}),"You can find the source code on ",zt("a",{href:"https://github.com/orokro/ReactTangrams",target:"_blank",children:"My GitHub"}),"."]}),zt("h2",{children:"Quick Start"}),dn("ul",{align:"left",children:[dn("li",{children:[zt("span",{children:"Left Click"}),"+",zt("span",{children:"Drag"})," on the grid to pan the view up/down/left/right"]}),dn("li",{children:[zt("span",{children:"Right Click"})," empty grid space to add shapes!"]}),dn("li",{children:[zt("span",{children:"Right Click"})," on a shape to edit it, or remove it."]}),dn("li",{children:["Click the folder icon ",zt("span",{className:"material-icons down",children:"folder"})," on the top-left to see your projects!"]}),dn("li",{children:["Click the help icon ",zt("span",{className:"material-icons down",children:"help"})," on the header for more info."]}),zt("li",{children:"Have fun!"})]})]}),zt(j0,{buttonsList:[["thx for the help","close",!0]],onButtonClicked:i})]})},xz={name:"1dt4clw",styles:"text-align:center;height:400px;margin-bottom:10px;overflow-y:auto"};/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const K0="174",If={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Pf={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},j2=0,fb=1,K2=2,Sz=3,Q2=0,ax=1,jm=2,bo=3,bc=0,Er=1,Eo=2,El=0,$f=1,hb=2,db=3,pb=4,J2=5,xu=100,$2=101,tR=102,eR=103,nR=104,iR=200,aR=201,rR=202,sR=203,oy=204,ly=205,oR=206,lR=207,cR=208,uR=209,fR=210,hR=211,dR=212,pR=213,mR=214,cy=0,uy=1,fy=2,rh=3,hy=4,dy=5,py=6,my=7,Q0=0,gR=1,vR=2,Tl=0,_R=1,yR=2,xR=3,Jb=4,SR=5,bR=6,MR=7,mb="attached",ER="detached",Ru=300,wl=301,Cu=302,sh=303,y0=304,rp=306,x0=1e3,la=1001,S0=1002,Xa=1003,$b=1004,bz=1004,Ld=1005,Mz=1005,ai=1006,Km=1007,Ez=1007,xl=1008,gb=1008,jr=1009,rx=1010,sx=1011,Zd=1012,J0=1013,Rl=1014,Fi=1015,Ra=1016,ox=1017,lx=1018,oh=1020,tM=35902,eM=1021,nM=1022,ea=1023,iM=1024,aM=1025,th=1026,lh=1027,$0=1028,tg=1029,rM=1030,cx=1031,Tz=1032,ux=1033,Qm=33776,Jm=33777,$m=33778,t0=33779,gy=35840,vy=35841,_y=35842,yy=35843,xy=36196,Sy=37492,by=37496,My=37808,Ey=37809,Ty=37810,Ay=37811,wy=37812,Ry=37813,Cy=37814,Dy=37815,Ny=37816,Uy=37817,Oy=37818,Ly=37819,zy=37820,By=37821,e0=36492,Iy=36494,Py=36495,sM=36283,Hy=36284,Fy=36285,Gy=36286,TR=2200,AR=2201,wR=2202,b0=2300,Vy=2301,K_=2302,Zf=2400,Wf=2401,M0=2402,fx=2500,oM=2501,Az=0,wz=1,Rz=2,RR=3200,CR=3201,Cz=3202,Dz=3203,Nu=0,DR=1,gc="",Va="srgb",Ro="srgb-linear",E0="linear",ii="srgb",Nz=0,Hf=7680,Uz=7681,Oz=7682,Lz=7683,zz=34055,Bz=34056,Iz=5386,Pz=512,Hz=513,Fz=514,Gz=515,Vz=516,kz=517,Xz=518,vb=519,NR=512,UR=513,OR=514,lM=515,LR=516,zR=517,BR=518,IR=519,T0=35044,Yz=35048,qz=35040,Zz=35045,Wz=35049,jz=35041,Kz=35046,Qz=35050,Jz=35042,$z="100",_b="300 es",Ao=2e3,A0=2001,t4={COMPUTE:"compute",RENDER:"render"};let Cl=class{addEventListener(t,e){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[t]===void 0&&(i[t]=[]),i[t].indexOf(e)===-1&&i[t].push(e)}hasEventListener(t,e){const i=this._listeners;return i===void 0?!1:i[t]!==void 0&&i[t].indexOf(e)!==-1}removeEventListener(t,e){const i=this._listeners;if(i===void 0)return;const a=i[t];if(a!==void 0){const o=a.indexOf(e);o!==-1&&a.splice(o,1)}}dispatchEvent(t){const e=this._listeners;if(e===void 0)return;const i=e[t.type];if(i!==void 0){t.target=this;const a=i.slice(0);for(let o=0,u=a.length;o<u;o++)a[o].call(this,t);t.target=null}}};const nr=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let WT=1234567;const eh=Math.PI/180,Wd=180/Math.PI;function ps(){const n=Math.random()*4294967295|0,t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(nr[n&255]+nr[n>>8&255]+nr[n>>16&255]+nr[n>>24&255]+"-"+nr[t&255]+nr[t>>8&255]+"-"+nr[t>>16&15|64]+nr[t>>24&255]+"-"+nr[e&63|128]+nr[e>>8&255]+"-"+nr[e>>16&255]+nr[e>>24&255]+nr[i&255]+nr[i>>8&255]+nr[i>>16&255]+nr[i>>24&255]).toLowerCase()}function cn(n,t,e){return Math.max(t,Math.min(e,n))}function cM(n,t){return(n%t+t)%t}function e4(n,t,e,i,a){return i+(n-t)*(a-i)/(e-t)}function n4(n,t,e){return n!==t?(e-n)/(t-n):0}function n0(n,t,e){return(1-e)*n+e*t}function i4(n,t,e,i){return n0(n,t,1-Math.exp(-e*i))}function a4(n,t=1){return t-Math.abs(cM(n,t*2)-t)}function r4(n,t,e){return n<=t?0:n>=e?1:(n=(n-t)/(e-t),n*n*(3-2*n))}function s4(n,t,e){return n<=t?0:n>=e?1:(n=(n-t)/(e-t),n*n*n*(n*(n*6-15)+10))}function o4(n,t){return n+Math.floor(Math.random()*(t-n+1))}function l4(n,t){return n+Math.random()*(t-n)}function c4(n){return n*(.5-Math.random())}function u4(n){n!==void 0&&(WT=n);let t=WT+=1831565813;return t=Math.imul(t^t>>>15,t|1),t^=t+Math.imul(t^t>>>7,t|61),((t^t>>>14)>>>0)/4294967296}function f4(n){return n*eh}function h4(n){return n*Wd}function d4(n){return(n&n-1)===0&&n!==0}function p4(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function m4(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function g4(n,t,e,i,a){const o=Math.cos,u=Math.sin,h=o(e/2),d=u(e/2),p=o((t+i)/2),v=u((t+i)/2),_=o((t-i)/2),x=u((t-i)/2),b=o((i-t)/2),E=u((i-t)/2);switch(a){case"XYX":n.set(h*v,d*_,d*x,h*p);break;case"YZY":n.set(d*x,h*v,d*_,h*p);break;case"ZXZ":n.set(d*_,d*x,h*v,h*p);break;case"XZX":n.set(h*v,d*E,d*b,h*p);break;case"YXY":n.set(d*b,h*v,d*E,h*p);break;case"ZYZ":n.set(d*E,d*b,h*v,h*p);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+a)}}function br(n,t){switch(t.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function pn(n,t){switch(t.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const v4={DEG2RAD:eh,RAD2DEG:Wd,generateUUID:ps,clamp:cn,euclideanModulo:cM,mapLinear:e4,inverseLerp:n4,lerp:n0,damp:i4,pingpong:a4,smoothstep:r4,smootherstep:s4,randInt:o4,randFloat:l4,randFloatSpread:c4,seededRandom:u4,degToRad:f4,radToDeg:h4,isPowerOfTwo:d4,ceilPowerOfTwo:p4,floorPowerOfTwo:m4,setQuaternionFromProperEuler:g4,normalize:pn,denormalize:br};class jt{constructor(t=0,e=0){jt.prototype.isVector2=!0,this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const e=this.x,i=this.y,a=t.elements;return this.x=a[0]*e+a[3]*i+a[6],this.y=a[1]*e+a[4]*i+a[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=cn(this.x,t.x,e.x),this.y=cn(this.y,t.y,e.y),this}clampScalar(t,e){return this.x=cn(this.x,t,e),this.y=cn(this.y,t,e),this}clampLength(t,e){const i=this.length();return this.divideScalar(i||1).multiplyScalar(cn(i,t,e))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(e===0)return Math.PI/2;const i=this.dot(t)/e;return Math.acos(cn(i,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,i=this.y-t.y;return e*e+i*i}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){const i=Math.cos(e),a=Math.sin(e),o=this.x-t.x,u=this.y-t.y;return this.x=o*i-u*a+t.x,this.y=o*a+u*i+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class hn{constructor(t,e,i,a,o,u,h,d,p){hn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],t!==void 0&&this.set(t,e,i,a,o,u,h,d,p)}set(t,e,i,a,o,u,h,d,p){const v=this.elements;return v[0]=t,v[1]=a,v[2]=h,v[3]=e,v[4]=o,v[5]=d,v[6]=i,v[7]=u,v[8]=p,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const e=this.elements,i=t.elements;return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],this}extractBasis(t,e,i){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const i=t.elements,a=e.elements,o=this.elements,u=i[0],h=i[3],d=i[6],p=i[1],v=i[4],_=i[7],x=i[2],b=i[5],E=i[8],R=a[0],w=a[3],M=a[6],C=a[1],U=a[4],D=a[7],z=a[2],B=a[5],F=a[8];return o[0]=u*R+h*C+d*z,o[3]=u*w+h*U+d*B,o[6]=u*M+h*D+d*F,o[1]=p*R+v*C+_*z,o[4]=p*w+v*U+_*B,o[7]=p*M+v*D+_*F,o[2]=x*R+b*C+E*z,o[5]=x*w+b*U+E*B,o[8]=x*M+b*D+E*F,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){const t=this.elements,e=t[0],i=t[1],a=t[2],o=t[3],u=t[4],h=t[5],d=t[6],p=t[7],v=t[8];return e*u*v-e*h*p-i*o*v+i*h*d+a*o*p-a*u*d}invert(){const t=this.elements,e=t[0],i=t[1],a=t[2],o=t[3],u=t[4],h=t[5],d=t[6],p=t[7],v=t[8],_=v*u-h*p,x=h*d-v*o,b=p*o-u*d,E=e*_+i*x+a*b;if(E===0)return this.set(0,0,0,0,0,0,0,0,0);const R=1/E;return t[0]=_*R,t[1]=(a*p-v*i)*R,t[2]=(h*i-a*u)*R,t[3]=x*R,t[4]=(v*e-a*d)*R,t[5]=(a*o-h*e)*R,t[6]=b*R,t[7]=(i*d-p*e)*R,t[8]=(u*e-i*o)*R,this}transpose(){let t;const e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,i,a,o,u,h){const d=Math.cos(o),p=Math.sin(o);return this.set(i*d,i*p,-i*(d*u+p*h)+u+t,-a*p,a*d,-a*(-p*u+d*h)+h+e,0,0,1),this}scale(t,e){return this.premultiply(W1.makeScale(t,e)),this}rotate(t){return this.premultiply(W1.makeRotation(-t)),this}translate(t,e){return this.premultiply(W1.makeTranslation(t,e)),this}makeTranslation(t,e){return t.isVector2?this.set(1,0,t.x,0,1,t.y,0,0,1):this.set(1,0,t,0,1,e,0,0,1),this}makeRotation(t){const e=Math.cos(t),i=Math.sin(t);return this.set(e,-i,0,i,e,0,0,0,1),this}makeScale(t,e){return this.set(t,0,0,0,e,0,0,0,1),this}equals(t){const e=this.elements,i=t.elements;for(let a=0;a<9;a++)if(e[a]!==i[a])return!1;return!0}fromArray(t,e=0){for(let i=0;i<9;i++)this.elements[i]=t[i+e];return this}toArray(t=[],e=0){const i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t}clone(){return new this.constructor().fromArray(this.elements)}}const W1=new hn;function PR(n){for(let t=n.length-1;t>=0;--t)if(n[t]>=65535)return!0;return!1}const _4={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function zd(n,t){return new _4[n](t)}function w0(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function HR(){const n=w0("canvas");return n.style.display="block",n}const jT={};function Ff(n){n in jT||(jT[n]=!0,console.warn(n))}function y4(n,t,e){return new Promise(function(i,a){function o(){switch(n.clientWaitSync(t,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:a();break;case n.TIMEOUT_EXPIRED:setTimeout(o,e);break;default:i()}}setTimeout(o,e)})}function x4(n){const t=n.elements;t[2]=.5*t[2]+.5*t[3],t[6]=.5*t[6]+.5*t[7],t[10]=.5*t[10]+.5*t[11],t[14]=.5*t[14]+.5*t[15]}function S4(n){const t=n.elements;t[11]===-1?(t[10]=-t[10]-1,t[14]=-t[14]):(t[10]=-t[10],t[14]=-t[14]+1)}const KT=new hn().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),QT=new hn().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function b4(){const n={enabled:!0,workingColorSpace:Ro,spaces:{},convert:function(a,o,u){return this.enabled===!1||o===u||!o||!u||(this.spaces[o].transfer===ii&&(a.r=yc(a.r),a.g=yc(a.g),a.b=yc(a.b)),this.spaces[o].primaries!==this.spaces[u].primaries&&(a.applyMatrix3(this.spaces[o].toXYZ),a.applyMatrix3(this.spaces[u].fromXYZ)),this.spaces[u].transfer===ii&&(a.r=Vd(a.r),a.g=Vd(a.g),a.b=Vd(a.b))),a},fromWorkingColorSpace:function(a,o){return this.convert(a,this.workingColorSpace,o)},toWorkingColorSpace:function(a,o){return this.convert(a,o,this.workingColorSpace)},getPrimaries:function(a){return this.spaces[a].primaries},getTransfer:function(a){return a===gc?E0:this.spaces[a].transfer},getLuminanceCoefficients:function(a,o=this.workingColorSpace){return a.fromArray(this.spaces[o].luminanceCoefficients)},define:function(a){Object.assign(this.spaces,a)},_getMatrix:function(a,o,u){return a.copy(this.spaces[o].toXYZ).multiply(this.spaces[u].fromXYZ)},_getDrawingBufferColorSpace:function(a){return this.spaces[a].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(a=this.workingColorSpace){return this.spaces[a].workingColorSpaceConfig.unpackColorSpace}},t=[.64,.33,.3,.6,.15,.06],e=[.2126,.7152,.0722],i=[.3127,.329];return n.define({[Ro]:{primaries:t,whitePoint:i,transfer:E0,toXYZ:KT,fromXYZ:QT,luminanceCoefficients:e,workingColorSpaceConfig:{unpackColorSpace:Va},outputColorSpaceConfig:{drawingBufferColorSpace:Va}},[Va]:{primaries:t,whitePoint:i,transfer:ii,toXYZ:KT,fromXYZ:QT,luminanceCoefficients:e,outputColorSpaceConfig:{drawingBufferColorSpace:Va}}}),n}const On=b4();function yc(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function Vd(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let dd;class FR{static getDataURL(t){if(/^data:/i.test(t.src)||typeof HTMLCanvasElement>"u")return t.src;let e;if(t instanceof HTMLCanvasElement)e=t;else{dd===void 0&&(dd=w0("canvas")),dd.width=t.width,dd.height=t.height;const i=dd.getContext("2d");t instanceof ImageData?i.putImageData(t,0,0):i.drawImage(t,0,0,t.width,t.height),e=dd}return e.toDataURL("image/png")}static sRGBToLinear(t){if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap){const e=w0("canvas");e.width=t.width,e.height=t.height;const i=e.getContext("2d");i.drawImage(t,0,0,t.width,t.height);const a=i.getImageData(0,0,t.width,t.height),o=a.data;for(let u=0;u<o.length;u++)o[u]=yc(o[u]/255)*255;return i.putImageData(a,0,0),e}else if(t.data){const e=t.data.slice(0);for(let i=0;i<e.length;i++)e instanceof Uint8Array||e instanceof Uint8ClampedArray?e[i]=Math.floor(yc(e[i]/255)*255):e[i]=yc(e[i]);return{data:e,width:t.width,height:t.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}}let M4=0;class bu{constructor(t=null){this.isSource=!0,Object.defineProperty(this,"id",{value:M4++}),this.uuid=ps(),this.data=t,this.dataReady=!0,this.version=0}set needsUpdate(t){t===!0&&this.version++}toJSON(t){const e=t===void 0||typeof t=="string";if(!e&&t.images[this.uuid]!==void 0)return t.images[this.uuid];const i={uuid:this.uuid,url:""},a=this.data;if(a!==null){let o;if(Array.isArray(a)){o=[];for(let u=0,h=a.length;u<h;u++)a[u].isDataTexture?o.push(j1(a[u].image)):o.push(j1(a[u]))}else o=j1(a);i.url=o}return e||(t.images[this.uuid]=i),i}}function j1(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?FR.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let E4=0;class ci extends Cl{constructor(t=ci.DEFAULT_IMAGE,e=ci.DEFAULT_MAPPING,i=la,a=la,o=ai,u=xl,h=ea,d=jr,p=ci.DEFAULT_ANISOTROPY,v=gc){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:E4++}),this.uuid=ps(),this.name="",this.source=new bu(t),this.mipmaps=[],this.mapping=e,this.channel=0,this.wrapS=i,this.wrapT=a,this.magFilter=o,this.minFilter=u,this.anisotropy=p,this.format=h,this.internalFormat=null,this.type=d,this.offset=new jt(0,0),this.repeat=new jt(1,1),this.center=new jt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new hn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=v,this.userData={},this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(t=null){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.channel=t.channel,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.colorSpace=t.colorSpace,this.renderTarget=t.renderTarget,this.isRenderTargetTexture=t.isRenderTargetTexture,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){const e=t===void 0||typeof t=="string";if(!e&&t.textures[this.uuid]!==void 0)return t.textures[this.uuid];const i={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),e||(t.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(this.mapping!==Ru)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case x0:t.x=t.x-Math.floor(t.x);break;case la:t.x=t.x<0?0:1;break;case S0:Math.abs(Math.floor(t.x)%2)===1?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x);break}if(t.y<0||t.y>1)switch(this.wrapT){case x0:t.y=t.y-Math.floor(t.y);break;case la:t.y=t.y<0?0:1;break;case S0:Math.abs(Math.floor(t.y)%2)===1?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y);break}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){t===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(t){t===!0&&this.pmremVersion++}}ci.DEFAULT_IMAGE=null;ci.DEFAULT_MAPPING=Ru;ci.DEFAULT_ANISOTROPY=1;class Fn{constructor(t=0,e=0,i=0,a=1){Fn.prototype.isVector4=!0,this.x=t,this.y=e,this.z=i,this.w=a}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,e,i,a){return this.x=t,this.y=e,this.z=i,this.w=a,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w!==void 0?t.w:1,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const e=this.x,i=this.y,a=this.z,o=this.w,u=t.elements;return this.x=u[0]*e+u[4]*i+u[8]*a+u[12]*o,this.y=u[1]*e+u[5]*i+u[9]*a+u[13]*o,this.z=u[2]*e+u[6]*i+u[10]*a+u[14]*o,this.w=u[3]*e+u[7]*i+u[11]*a+u[15]*o,this}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this.w/=t.w,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}setAxisAngleFromRotationMatrix(t){let e,i,a,o;const d=t.elements,p=d[0],v=d[4],_=d[8],x=d[1],b=d[5],E=d[9],R=d[2],w=d[6],M=d[10];if(Math.abs(v-x)<.01&&Math.abs(_-R)<.01&&Math.abs(E-w)<.01){if(Math.abs(v+x)<.1&&Math.abs(_+R)<.1&&Math.abs(E+w)<.1&&Math.abs(p+b+M-3)<.1)return this.set(1,0,0,0),this;e=Math.PI;const U=(p+1)/2,D=(b+1)/2,z=(M+1)/2,B=(v+x)/4,F=(_+R)/4,G=(E+w)/4;return U>D&&U>z?U<.01?(i=0,a=.707106781,o=.707106781):(i=Math.sqrt(U),a=B/i,o=F/i):D>z?D<.01?(i=.707106781,a=0,o=.707106781):(a=Math.sqrt(D),i=B/a,o=G/a):z<.01?(i=.707106781,a=.707106781,o=0):(o=Math.sqrt(z),i=F/o,a=G/o),this.set(i,a,o,e),this}let C=Math.sqrt((w-E)*(w-E)+(_-R)*(_-R)+(x-v)*(x-v));return Math.abs(C)<.001&&(C=1),this.x=(w-E)/C,this.y=(_-R)/C,this.z=(x-v)/C,this.w=Math.acos((p+b+M-1)/2),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this.w=e[15],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,e){return this.x=cn(this.x,t.x,e.x),this.y=cn(this.y,t.y,e.y),this.z=cn(this.z,t.z,e.z),this.w=cn(this.w,t.w,e.w),this}clampScalar(t,e){return this.x=cn(this.x,t,e),this.y=cn(this.y,t,e),this.z=cn(this.z,t,e),this.w=cn(this.w,t,e),this}clampLength(t,e){const i=this.length();return this.divideScalar(i||1).multiplyScalar(cn(i,t,e))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this.z=t.z+(e.z-t.z)*i,this.w=t.w+(e.w-t.w)*i,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class hx extends Cl{constructor(t=1,e=1,i={}){super(),this.isRenderTarget=!0,this.width=t,this.height=e,this.depth=1,this.scissor=new Fn(0,0,t,e),this.scissorTest=!1,this.viewport=new Fn(0,0,t,e);const a={width:t,height:e,depth:1};i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:ai,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},i);const o=new ci(a,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace);o.flipY=!1,o.generateMipmaps=i.generateMipmaps,o.internalFormat=i.internalFormat,this.textures=[];const u=i.count;for(let h=0;h<u;h++)this.textures[h]=o.clone(),this.textures[h].isRenderTargetTexture=!0,this.textures[h].renderTarget=this;this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=i.depthTexture,this.samples=i.samples}get texture(){return this.textures[0]}set texture(t){this.textures[0]=t}set depthTexture(t){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),t!==null&&(t.renderTarget=this),this._depthTexture=t}get depthTexture(){return this._depthTexture}setSize(t,e,i=1){if(this.width!==t||this.height!==e||this.depth!==i){this.width=t,this.height=e,this.depth=i;for(let a=0,o=this.textures.length;a<o;a++)this.textures[a].image.width=t,this.textures[a].image.height=e,this.textures[a].image.depth=i;this.dispose()}this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)}clone(){return new this.constructor().copy(this)}copy(t){this.width=t.width,this.height=t.height,this.depth=t.depth,this.scissor.copy(t.scissor),this.scissorTest=t.scissorTest,this.viewport.copy(t.viewport),this.textures.length=0;for(let e=0,i=t.textures.length;e<i;e++){this.textures[e]=t.textures[e].clone(),this.textures[e].isRenderTargetTexture=!0,this.textures[e].renderTarget=this;const a=Object.assign({},t.textures[e].image);this.textures[e].source=new bu(a)}return this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.resolveDepthBuffer=t.resolveDepthBuffer,this.resolveStencilBuffer=t.resolveStencilBuffer,t.depthTexture!==null&&(this.depthTexture=t.depthTexture.clone()),this.samples=t.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Is extends hx{constructor(t=1,e=1,i={}){super(t,e,i),this.isWebGLRenderTarget=!0}}class eg extends ci{constructor(t=null,e=1,i=1,a=1){super(null),this.isDataArrayTexture=!0,this.image={data:t,width:e,height:i,depth:a},this.magFilter=Xa,this.minFilter=Xa,this.wrapR=la,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(t){this.layerUpdates.add(t)}clearLayerUpdates(){this.layerUpdates.clear()}}class T4 extends Is{constructor(t=1,e=1,i=1,a={}){super(t,e,a),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new eg(null,t,e,i),this.texture.isRenderTargetTexture=!0}}class dx extends ci{constructor(t=null,e=1,i=1,a=1){super(null),this.isData3DTexture=!0,this.image={data:t,width:e,height:i,depth:a},this.magFilter=Xa,this.minFilter=Xa,this.wrapR=la,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class A4 extends Is{constructor(t=1,e=1,i=1,a={}){super(t,e,a),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new dx(null,t,e,i),this.texture.isRenderTargetTexture=!0}}class sr{constructor(t=0,e=0,i=0,a=1){this.isQuaternion=!0,this._x=t,this._y=e,this._z=i,this._w=a}static slerpFlat(t,e,i,a,o,u,h){let d=i[a+0],p=i[a+1],v=i[a+2],_=i[a+3];const x=o[u+0],b=o[u+1],E=o[u+2],R=o[u+3];if(h===0){t[e+0]=d,t[e+1]=p,t[e+2]=v,t[e+3]=_;return}if(h===1){t[e+0]=x,t[e+1]=b,t[e+2]=E,t[e+3]=R;return}if(_!==R||d!==x||p!==b||v!==E){let w=1-h;const M=d*x+p*b+v*E+_*R,C=M>=0?1:-1,U=1-M*M;if(U>Number.EPSILON){const z=Math.sqrt(U),B=Math.atan2(z,M*C);w=Math.sin(w*B)/z,h=Math.sin(h*B)/z}const D=h*C;if(d=d*w+x*D,p=p*w+b*D,v=v*w+E*D,_=_*w+R*D,w===1-h){const z=1/Math.sqrt(d*d+p*p+v*v+_*_);d*=z,p*=z,v*=z,_*=z}}t[e]=d,t[e+1]=p,t[e+2]=v,t[e+3]=_}static multiplyQuaternionsFlat(t,e,i,a,o,u){const h=i[a],d=i[a+1],p=i[a+2],v=i[a+3],_=o[u],x=o[u+1],b=o[u+2],E=o[u+3];return t[e]=h*E+v*_+d*b-p*x,t[e+1]=d*E+v*x+p*_-h*b,t[e+2]=p*E+v*b+h*x-d*_,t[e+3]=v*E-h*_-d*x-p*b,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,i,a){return this._x=t,this._y=e,this._z=i,this._w=a,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e=!0){const i=t._x,a=t._y,o=t._z,u=t._order,h=Math.cos,d=Math.sin,p=h(i/2),v=h(a/2),_=h(o/2),x=d(i/2),b=d(a/2),E=d(o/2);switch(u){case"XYZ":this._x=x*v*_+p*b*E,this._y=p*b*_-x*v*E,this._z=p*v*E+x*b*_,this._w=p*v*_-x*b*E;break;case"YXZ":this._x=x*v*_+p*b*E,this._y=p*b*_-x*v*E,this._z=p*v*E-x*b*_,this._w=p*v*_+x*b*E;break;case"ZXY":this._x=x*v*_-p*b*E,this._y=p*b*_+x*v*E,this._z=p*v*E+x*b*_,this._w=p*v*_-x*b*E;break;case"ZYX":this._x=x*v*_-p*b*E,this._y=p*b*_+x*v*E,this._z=p*v*E-x*b*_,this._w=p*v*_+x*b*E;break;case"YZX":this._x=x*v*_+p*b*E,this._y=p*b*_+x*v*E,this._z=p*v*E-x*b*_,this._w=p*v*_-x*b*E;break;case"XZY":this._x=x*v*_-p*b*E,this._y=p*b*_-x*v*E,this._z=p*v*E+x*b*_,this._w=p*v*_+x*b*E;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+u)}return e===!0&&this._onChangeCallback(),this}setFromAxisAngle(t,e){const i=e/2,a=Math.sin(i);return this._x=t.x*a,this._y=t.y*a,this._z=t.z*a,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(t){const e=t.elements,i=e[0],a=e[4],o=e[8],u=e[1],h=e[5],d=e[9],p=e[2],v=e[6],_=e[10],x=i+h+_;if(x>0){const b=.5/Math.sqrt(x+1);this._w=.25/b,this._x=(v-d)*b,this._y=(o-p)*b,this._z=(u-a)*b}else if(i>h&&i>_){const b=2*Math.sqrt(1+i-h-_);this._w=(v-d)/b,this._x=.25*b,this._y=(a+u)/b,this._z=(o+p)/b}else if(h>_){const b=2*Math.sqrt(1+h-i-_);this._w=(o-p)/b,this._x=(a+u)/b,this._y=.25*b,this._z=(d+v)/b}else{const b=2*Math.sqrt(1+_-i-h);this._w=(u-a)/b,this._x=(o+p)/b,this._y=(d+v)/b,this._z=.25*b}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let i=t.dot(e)+1;return i<Number.EPSILON?(i=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=i):(this._x=0,this._y=-t.z,this._z=t.y,this._w=i)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=i),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(cn(this.dot(t),-1,1)))}rotateTowards(t,e){const i=this.angleTo(t);if(i===0)return this;const a=Math.min(1,e/i);return this.slerp(t,a),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return t===0?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){const i=t._x,a=t._y,o=t._z,u=t._w,h=e._x,d=e._y,p=e._z,v=e._w;return this._x=i*v+u*h+a*p-o*d,this._y=a*v+u*d+o*h-i*p,this._z=o*v+u*p+i*d-a*h,this._w=u*v-i*h-a*d-o*p,this._onChangeCallback(),this}slerp(t,e){if(e===0)return this;if(e===1)return this.copy(t);const i=this._x,a=this._y,o=this._z,u=this._w;let h=u*t._w+i*t._x+a*t._y+o*t._z;if(h<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,h=-h):this.copy(t),h>=1)return this._w=u,this._x=i,this._y=a,this._z=o,this;const d=1-h*h;if(d<=Number.EPSILON){const b=1-e;return this._w=b*u+e*this._w,this._x=b*i+e*this._x,this._y=b*a+e*this._y,this._z=b*o+e*this._z,this.normalize(),this}const p=Math.sqrt(d),v=Math.atan2(p,h),_=Math.sin((1-e)*v)/p,x=Math.sin(e*v)/p;return this._w=u*_+this._w*x,this._x=i*_+this._x*x,this._y=a*_+this._y*x,this._z=o*_+this._z*x,this._onChangeCallback(),this}slerpQuaternions(t,e,i){return this.copy(t).slerp(e,i)}random(){const t=2*Math.PI*Math.random(),e=2*Math.PI*Math.random(),i=Math.random(),a=Math.sqrt(1-i),o=Math.sqrt(i);return this.set(a*Math.sin(t),a*Math.cos(t),o*Math.sin(e),o*Math.cos(e))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class J{constructor(t=0,e=0,i=0){J.prototype.isVector3=!0,this.x=t,this.y=e,this.z=i}set(t,e,i){return i===void 0&&(i=this.z),this.x=t,this.y=e,this.z=i,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return this.applyQuaternion(JT.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(JT.setFromAxisAngle(t,e))}applyMatrix3(t){const e=this.x,i=this.y,a=this.z,o=t.elements;return this.x=o[0]*e+o[3]*i+o[6]*a,this.y=o[1]*e+o[4]*i+o[7]*a,this.z=o[2]*e+o[5]*i+o[8]*a,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const e=this.x,i=this.y,a=this.z,o=t.elements,u=1/(o[3]*e+o[7]*i+o[11]*a+o[15]);return this.x=(o[0]*e+o[4]*i+o[8]*a+o[12])*u,this.y=(o[1]*e+o[5]*i+o[9]*a+o[13])*u,this.z=(o[2]*e+o[6]*i+o[10]*a+o[14])*u,this}applyQuaternion(t){const e=this.x,i=this.y,a=this.z,o=t.x,u=t.y,h=t.z,d=t.w,p=2*(u*a-h*i),v=2*(h*e-o*a),_=2*(o*i-u*e);return this.x=e+d*p+u*_-h*v,this.y=i+d*v+h*p-o*_,this.z=a+d*_+o*v-u*p,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const e=this.x,i=this.y,a=this.z,o=t.elements;return this.x=o[0]*e+o[4]*i+o[8]*a,this.y=o[1]*e+o[5]*i+o[9]*a,this.z=o[2]*e+o[6]*i+o[10]*a,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=cn(this.x,t.x,e.x),this.y=cn(this.y,t.y,e.y),this.z=cn(this.z,t.z,e.z),this}clampScalar(t,e){return this.x=cn(this.x,t,e),this.y=cn(this.y,t,e),this.z=cn(this.z,t,e),this}clampLength(t,e){const i=this.length();return this.divideScalar(i||1).multiplyScalar(cn(i,t,e))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this.z=t.z+(e.z-t.z)*i,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,e){const i=t.x,a=t.y,o=t.z,u=e.x,h=e.y,d=e.z;return this.x=a*d-o*h,this.y=o*u-i*d,this.z=i*h-a*u,this}projectOnVector(t){const e=t.lengthSq();if(e===0)return this.set(0,0,0);const i=t.dot(this)/e;return this.copy(t).multiplyScalar(i)}projectOnPlane(t){return K1.copy(this).projectOnVector(t),this.sub(K1)}reflect(t){return this.sub(K1.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(e===0)return Math.PI/2;const i=this.dot(t)/e;return Math.acos(cn(i,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,i=this.y-t.y,a=this.z-t.z;return e*e+i*i+a*a}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,i){const a=Math.sin(e)*t;return this.x=a*Math.sin(i),this.y=Math.cos(e)*t,this.z=a*Math.cos(i),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,i){return this.x=t*Math.sin(e),this.y=i,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){const e=this.setFromMatrixColumn(t,0).length(),i=this.setFromMatrixColumn(t,1).length(),a=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=i,this.z=a,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,e*4)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,e*3)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}setFromColor(t){return this.x=t.r,this.y=t.g,this.z=t.b,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=Math.random()*Math.PI*2,e=Math.random()*2-1,i=Math.sqrt(1-e*e);return this.x=i*Math.cos(t),this.y=e,this.z=i*Math.sin(t),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const K1=new J,JT=new sr;class Tr{constructor(t=new J(1/0,1/0,1/0),e=new J(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){this.makeEmpty();for(let e=0,i=t.length;e<i;e+=3)this.expandByPoint(_o.fromArray(t,e));return this}setFromBufferAttribute(t){this.makeEmpty();for(let e=0,i=t.count;e<i;e++)this.expandByPoint(_o.fromBufferAttribute(t,e));return this}setFromPoints(t){this.makeEmpty();for(let e=0,i=t.length;e<i;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const i=_o.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(i),this.max.copy(t).add(i),this}setFromObject(t,e=!1){return this.makeEmpty(),this.expandByObject(t,e)}clone(){return new this.constructor().copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,e=!1){t.updateWorldMatrix(!1,!1);const i=t.geometry;if(i!==void 0){const o=i.getAttribute("position");if(e===!0&&o!==void 0&&t.isInstancedMesh!==!0)for(let u=0,h=o.count;u<h;u++)t.isMesh===!0?t.getVertexPosition(u,_o):_o.fromBufferAttribute(o,u),_o.applyMatrix4(t.matrixWorld),this.expandByPoint(_o);else t.boundingBox!==void 0?(t.boundingBox===null&&t.computeBoundingBox(),Kv.copy(t.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),Kv.copy(i.boundingBox)),Kv.applyMatrix4(t.matrixWorld),this.union(Kv)}const a=t.children;for(let o=0,u=a.length;o<u;o++)this.expandByObject(a[o],e);return this}containsPoint(t){return t.x>=this.min.x&&t.x<=this.max.x&&t.y>=this.min.y&&t.y<=this.max.y&&t.z>=this.min.z&&t.z<=this.max.z}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return t.max.x>=this.min.x&&t.min.x<=this.max.x&&t.max.y>=this.min.y&&t.min.y<=this.max.y&&t.max.z>=this.min.z&&t.min.z<=this.max.z}intersectsSphere(t){return this.clampPoint(t.center,_o),_o.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,i;return t.normal.x>0?(e=t.normal.x*this.min.x,i=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,i=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,i+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,i+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,i+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,i+=t.normal.z*this.min.z),e<=-t.constant&&i>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(Am),Qv.subVectors(this.max,Am),pd.subVectors(t.a,Am),md.subVectors(t.b,Am),gd.subVectors(t.c,Am),fu.subVectors(md,pd),hu.subVectors(gd,md),Ef.subVectors(pd,gd);let e=[0,-fu.z,fu.y,0,-hu.z,hu.y,0,-Ef.z,Ef.y,fu.z,0,-fu.x,hu.z,0,-hu.x,Ef.z,0,-Ef.x,-fu.y,fu.x,0,-hu.y,hu.x,0,-Ef.y,Ef.x,0];return!Q1(e,pd,md,gd,Qv)||(e=[1,0,0,0,1,0,0,0,1],!Q1(e,pd,md,gd,Qv))?!1:(Jv.crossVectors(fu,hu),e=[Jv.x,Jv.y,Jv.z],Q1(e,pd,md,gd,Qv))}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,_o).distanceTo(t)}getBoundingSphere(t){return this.isEmpty()?t.makeEmpty():(this.getCenter(t.center),t.radius=this.getSize(_o).length()*.5),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()?this:(sc[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),sc[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),sc[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),sc[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),sc[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),sc[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),sc[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),sc[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(sc),this)}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const sc=[new J,new J,new J,new J,new J,new J,new J,new J],_o=new J,Kv=new Tr,pd=new J,md=new J,gd=new J,fu=new J,hu=new J,Ef=new J,Am=new J,Qv=new J,Jv=new J,Tf=new J;function Q1(n,t,e,i,a){for(let o=0,u=n.length-3;o<=u;o+=3){Tf.fromArray(n,o);const h=a.x*Math.abs(Tf.x)+a.y*Math.abs(Tf.y)+a.z*Math.abs(Tf.z),d=t.dot(Tf),p=e.dot(Tf),v=i.dot(Tf);if(Math.max(-Math.max(d,p,v),Math.min(d,p,v))>h)return!1}return!0}const w4=new Tr,wm=new J,J1=new J;class or{constructor(t=new J,e=-1){this.isSphere=!0,this.center=t,this.radius=e}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){const i=this.center;e!==void 0?i.copy(e):w4.setFromPoints(t).getCenter(i);let a=0;for(let o=0,u=t.length;o<u;o++)a=Math.max(a,i.distanceToSquared(t[o]));return this.radius=Math.sqrt(a),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){const i=this.center.distanceToSquared(t);return e.copy(t),i>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;wm.subVectors(t,this.center);const e=wm.lengthSq();if(e>this.radius*this.radius){const i=Math.sqrt(e),a=(i-this.radius)*.5;this.center.addScaledVector(wm,a/i),this.radius+=a}return this}union(t){return t.isEmpty()?this:this.isEmpty()?(this.copy(t),this):(this.center.equals(t.center)===!0?this.radius=Math.max(this.radius,t.radius):(J1.subVectors(t.center,this.center).setLength(t.radius),this.expandByPoint(wm.copy(t.center).add(J1)),this.expandByPoint(wm.copy(t.center).sub(J1))),this)}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return new this.constructor().copy(this)}}const oc=new J,$1=new J,$v=new J,du=new J,tS=new J,t_=new J,eS=new J;class dh{constructor(t=new J,e=new J(0,0,-1)){this.origin=t,this.direction=e}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return e.copy(this.origin).addScaledVector(this.direction,t)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,oc)),this}closestPointToPoint(t,e){e.subVectors(t,this.origin);const i=e.dot(this.direction);return i<0?e.copy(this.origin):e.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const e=oc.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(oc.copy(this.origin).addScaledVector(this.direction,e),oc.distanceToSquared(t))}distanceSqToSegment(t,e,i,a){$1.copy(t).add(e).multiplyScalar(.5),$v.copy(e).sub(t).normalize(),du.copy(this.origin).sub($1);const o=t.distanceTo(e)*.5,u=-this.direction.dot($v),h=du.dot(this.direction),d=-du.dot($v),p=du.lengthSq(),v=Math.abs(1-u*u);let _,x,b,E;if(v>0)if(_=u*d-h,x=u*h-d,E=o*v,_>=0)if(x>=-E)if(x<=E){const R=1/v;_*=R,x*=R,b=_*(_+u*x+2*h)+x*(u*_+x+2*d)+p}else x=o,_=Math.max(0,-(u*x+h)),b=-_*_+x*(x+2*d)+p;else x=-o,_=Math.max(0,-(u*x+h)),b=-_*_+x*(x+2*d)+p;else x<=-E?(_=Math.max(0,-(-u*o+h)),x=_>0?-o:Math.min(Math.max(-o,-d),o),b=-_*_+x*(x+2*d)+p):x<=E?(_=0,x=Math.min(Math.max(-o,-d),o),b=x*(x+2*d)+p):(_=Math.max(0,-(u*o+h)),x=_>0?o:Math.min(Math.max(-o,-d),o),b=-_*_+x*(x+2*d)+p);else x=u>0?-o:o,_=Math.max(0,-(u*x+h)),b=-_*_+x*(x+2*d)+p;return i&&i.copy(this.origin).addScaledVector(this.direction,_),a&&a.copy($1).addScaledVector($v,x),b}intersectSphere(t,e){oc.subVectors(t.center,this.origin);const i=oc.dot(this.direction),a=oc.dot(oc)-i*i,o=t.radius*t.radius;if(a>o)return null;const u=Math.sqrt(o-a),h=i-u,d=i+u;return d<0?null:h<0?this.at(d,e):this.at(h,e)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const e=t.normal.dot(this.direction);if(e===0)return t.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(t.normal)+t.constant)/e;return i>=0?i:null}intersectPlane(t,e){const i=this.distanceToPlane(t);return i===null?null:this.at(i,e)}intersectsPlane(t){const e=t.distanceToPoint(this.origin);return e===0||t.normal.dot(this.direction)*e<0}intersectBox(t,e){let i,a,o,u,h,d;const p=1/this.direction.x,v=1/this.direction.y,_=1/this.direction.z,x=this.origin;return p>=0?(i=(t.min.x-x.x)*p,a=(t.max.x-x.x)*p):(i=(t.max.x-x.x)*p,a=(t.min.x-x.x)*p),v>=0?(o=(t.min.y-x.y)*v,u=(t.max.y-x.y)*v):(o=(t.max.y-x.y)*v,u=(t.min.y-x.y)*v),i>u||o>a||((o>i||isNaN(i))&&(i=o),(u<a||isNaN(a))&&(a=u),_>=0?(h=(t.min.z-x.z)*_,d=(t.max.z-x.z)*_):(h=(t.max.z-x.z)*_,d=(t.min.z-x.z)*_),i>d||h>a)||((h>i||i!==i)&&(i=h),(d<a||a!==a)&&(a=d),a<0)?null:this.at(i>=0?i:a,e)}intersectsBox(t){return this.intersectBox(t,oc)!==null}intersectTriangle(t,e,i,a,o){tS.subVectors(e,t),t_.subVectors(i,t),eS.crossVectors(tS,t_);let u=this.direction.dot(eS),h;if(u>0){if(a)return null;h=1}else if(u<0)h=-1,u=-u;else return null;du.subVectors(this.origin,t);const d=h*this.direction.dot(t_.crossVectors(du,t_));if(d<0)return null;const p=h*this.direction.dot(tS.cross(du));if(p<0||d+p>u)return null;const v=-h*du.dot(eS);return v<0?null:this.at(v/u,o)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class $e{constructor(t,e,i,a,o,u,h,d,p,v,_,x,b,E,R,w){$e.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],t!==void 0&&this.set(t,e,i,a,o,u,h,d,p,v,_,x,b,E,R,w)}set(t,e,i,a,o,u,h,d,p,v,_,x,b,E,R,w){const M=this.elements;return M[0]=t,M[4]=e,M[8]=i,M[12]=a,M[1]=o,M[5]=u,M[9]=h,M[13]=d,M[2]=p,M[6]=v,M[10]=_,M[14]=x,M[3]=b,M[7]=E,M[11]=R,M[15]=w,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new $e().fromArray(this.elements)}copy(t){const e=this.elements,i=t.elements;return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],e[9]=i[9],e[10]=i[10],e[11]=i[11],e[12]=i[12],e[13]=i[13],e[14]=i[14],e[15]=i[15],this}copyPosition(t){const e=this.elements,i=t.elements;return e[12]=i[12],e[13]=i[13],e[14]=i[14],this}setFromMatrix3(t){const e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}extractBasis(t,e,i){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(t,e,i){return this.set(t.x,e.x,i.x,0,t.y,e.y,i.y,0,t.z,e.z,i.z,0,0,0,0,1),this}extractRotation(t){const e=this.elements,i=t.elements,a=1/vd.setFromMatrixColumn(t,0).length(),o=1/vd.setFromMatrixColumn(t,1).length(),u=1/vd.setFromMatrixColumn(t,2).length();return e[0]=i[0]*a,e[1]=i[1]*a,e[2]=i[2]*a,e[3]=0,e[4]=i[4]*o,e[5]=i[5]*o,e[6]=i[6]*o,e[7]=0,e[8]=i[8]*u,e[9]=i[9]*u,e[10]=i[10]*u,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){const e=this.elements,i=t.x,a=t.y,o=t.z,u=Math.cos(i),h=Math.sin(i),d=Math.cos(a),p=Math.sin(a),v=Math.cos(o),_=Math.sin(o);if(t.order==="XYZ"){const x=u*v,b=u*_,E=h*v,R=h*_;e[0]=d*v,e[4]=-d*_,e[8]=p,e[1]=b+E*p,e[5]=x-R*p,e[9]=-h*d,e[2]=R-x*p,e[6]=E+b*p,e[10]=u*d}else if(t.order==="YXZ"){const x=d*v,b=d*_,E=p*v,R=p*_;e[0]=x+R*h,e[4]=E*h-b,e[8]=u*p,e[1]=u*_,e[5]=u*v,e[9]=-h,e[2]=b*h-E,e[6]=R+x*h,e[10]=u*d}else if(t.order==="ZXY"){const x=d*v,b=d*_,E=p*v,R=p*_;e[0]=x-R*h,e[4]=-u*_,e[8]=E+b*h,e[1]=b+E*h,e[5]=u*v,e[9]=R-x*h,e[2]=-u*p,e[6]=h,e[10]=u*d}else if(t.order==="ZYX"){const x=u*v,b=u*_,E=h*v,R=h*_;e[0]=d*v,e[4]=E*p-b,e[8]=x*p+R,e[1]=d*_,e[5]=R*p+x,e[9]=b*p-E,e[2]=-p,e[6]=h*d,e[10]=u*d}else if(t.order==="YZX"){const x=u*d,b=u*p,E=h*d,R=h*p;e[0]=d*v,e[4]=R-x*_,e[8]=E*_+b,e[1]=_,e[5]=u*v,e[9]=-h*v,e[2]=-p*v,e[6]=b*_+E,e[10]=x-R*_}else if(t.order==="XZY"){const x=u*d,b=u*p,E=h*d,R=h*p;e[0]=d*v,e[4]=-_,e[8]=p*v,e[1]=x*_+R,e[5]=u*v,e[9]=b*_-E,e[2]=E*_-b,e[6]=h*v,e[10]=R*_+x}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(R4,t,C4)}lookAt(t,e,i){const a=this.elements;return cs.subVectors(t,e),cs.lengthSq()===0&&(cs.z=1),cs.normalize(),pu.crossVectors(i,cs),pu.lengthSq()===0&&(Math.abs(i.z)===1?cs.x+=1e-4:cs.z+=1e-4,cs.normalize(),pu.crossVectors(i,cs)),pu.normalize(),e_.crossVectors(cs,pu),a[0]=pu.x,a[4]=e_.x,a[8]=cs.x,a[1]=pu.y,a[5]=e_.y,a[9]=cs.y,a[2]=pu.z,a[6]=e_.z,a[10]=cs.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const i=t.elements,a=e.elements,o=this.elements,u=i[0],h=i[4],d=i[8],p=i[12],v=i[1],_=i[5],x=i[9],b=i[13],E=i[2],R=i[6],w=i[10],M=i[14],C=i[3],U=i[7],D=i[11],z=i[15],B=a[0],F=a[4],G=a[8],L=a[12],O=a[1],V=a[5],et=a[9],W=a[13],j=a[2],ut=a[6],tt=a[10],pt=a[14],ot=a[3],Dt=a[7],Z=a[11],ht=a[15];return o[0]=u*B+h*O+d*j+p*ot,o[4]=u*F+h*V+d*ut+p*Dt,o[8]=u*G+h*et+d*tt+p*Z,o[12]=u*L+h*W+d*pt+p*ht,o[1]=v*B+_*O+x*j+b*ot,o[5]=v*F+_*V+x*ut+b*Dt,o[9]=v*G+_*et+x*tt+b*Z,o[13]=v*L+_*W+x*pt+b*ht,o[2]=E*B+R*O+w*j+M*ot,o[6]=E*F+R*V+w*ut+M*Dt,o[10]=E*G+R*et+w*tt+M*Z,o[14]=E*L+R*W+w*pt+M*ht,o[3]=C*B+U*O+D*j+z*ot,o[7]=C*F+U*V+D*ut+z*Dt,o[11]=C*G+U*et+D*tt+z*Z,o[15]=C*L+U*W+D*pt+z*ht,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){const t=this.elements,e=t[0],i=t[4],a=t[8],o=t[12],u=t[1],h=t[5],d=t[9],p=t[13],v=t[2],_=t[6],x=t[10],b=t[14],E=t[3],R=t[7],w=t[11],M=t[15];return E*(+o*d*_-a*p*_-o*h*x+i*p*x+a*h*b-i*d*b)+R*(+e*d*b-e*p*x+o*u*x-a*u*b+a*p*v-o*d*v)+w*(+e*p*_-e*h*b-o*u*_+i*u*b+o*h*v-i*p*v)+M*(-a*h*v-e*d*_+e*h*x+a*u*_-i*u*x+i*d*v)}transpose(){const t=this.elements;let e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,i){const a=this.elements;return t.isVector3?(a[12]=t.x,a[13]=t.y,a[14]=t.z):(a[12]=t,a[13]=e,a[14]=i),this}invert(){const t=this.elements,e=t[0],i=t[1],a=t[2],o=t[3],u=t[4],h=t[5],d=t[6],p=t[7],v=t[8],_=t[9],x=t[10],b=t[11],E=t[12],R=t[13],w=t[14],M=t[15],C=_*w*p-R*x*p+R*d*b-h*w*b-_*d*M+h*x*M,U=E*x*p-v*w*p-E*d*b+u*w*b+v*d*M-u*x*M,D=v*R*p-E*_*p+E*h*b-u*R*b-v*h*M+u*_*M,z=E*_*d-v*R*d-E*h*x+u*R*x+v*h*w-u*_*w,B=e*C+i*U+a*D+o*z;if(B===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const F=1/B;return t[0]=C*F,t[1]=(R*x*o-_*w*o-R*a*b+i*w*b+_*a*M-i*x*M)*F,t[2]=(h*w*o-R*d*o+R*a*p-i*w*p-h*a*M+i*d*M)*F,t[3]=(_*d*o-h*x*o-_*a*p+i*x*p+h*a*b-i*d*b)*F,t[4]=U*F,t[5]=(v*w*o-E*x*o+E*a*b-e*w*b-v*a*M+e*x*M)*F,t[6]=(E*d*o-u*w*o-E*a*p+e*w*p+u*a*M-e*d*M)*F,t[7]=(u*x*o-v*d*o+v*a*p-e*x*p-u*a*b+e*d*b)*F,t[8]=D*F,t[9]=(E*_*o-v*R*o-E*i*b+e*R*b+v*i*M-e*_*M)*F,t[10]=(u*R*o-E*h*o+E*i*p-e*R*p-u*i*M+e*h*M)*F,t[11]=(v*h*o-u*_*o-v*i*p+e*_*p+u*i*b-e*h*b)*F,t[12]=z*F,t[13]=(v*R*a-E*_*a+E*i*x-e*R*x-v*i*w+e*_*w)*F,t[14]=(E*h*a-u*R*a-E*i*d+e*R*d+u*i*w-e*h*w)*F,t[15]=(u*_*a-v*h*a+v*i*d-e*_*d-u*i*x+e*h*x)*F,this}scale(t){const e=this.elements,i=t.x,a=t.y,o=t.z;return e[0]*=i,e[4]*=a,e[8]*=o,e[1]*=i,e[5]*=a,e[9]*=o,e[2]*=i,e[6]*=a,e[10]*=o,e[3]*=i,e[7]*=a,e[11]*=o,this}getMaxScaleOnAxis(){const t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],i=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],a=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,i,a))}makeTranslation(t,e,i){return t.isVector3?this.set(1,0,0,t.x,0,1,0,t.y,0,0,1,t.z,0,0,0,1):this.set(1,0,0,t,0,1,0,e,0,0,1,i,0,0,0,1),this}makeRotationX(t){const e=Math.cos(t),i=Math.sin(t);return this.set(1,0,0,0,0,e,-i,0,0,i,e,0,0,0,0,1),this}makeRotationY(t){const e=Math.cos(t),i=Math.sin(t);return this.set(e,0,i,0,0,1,0,0,-i,0,e,0,0,0,0,1),this}makeRotationZ(t){const e=Math.cos(t),i=Math.sin(t);return this.set(e,-i,0,0,i,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){const i=Math.cos(e),a=Math.sin(e),o=1-i,u=t.x,h=t.y,d=t.z,p=o*u,v=o*h;return this.set(p*u+i,p*h-a*d,p*d+a*h,0,p*h+a*d,v*h+i,v*d-a*u,0,p*d-a*h,v*d+a*u,o*d*d+i,0,0,0,0,1),this}makeScale(t,e,i){return this.set(t,0,0,0,0,e,0,0,0,0,i,0,0,0,0,1),this}makeShear(t,e,i,a,o,u){return this.set(1,i,o,0,t,1,u,0,e,a,1,0,0,0,0,1),this}compose(t,e,i){const a=this.elements,o=e._x,u=e._y,h=e._z,d=e._w,p=o+o,v=u+u,_=h+h,x=o*p,b=o*v,E=o*_,R=u*v,w=u*_,M=h*_,C=d*p,U=d*v,D=d*_,z=i.x,B=i.y,F=i.z;return a[0]=(1-(R+M))*z,a[1]=(b+D)*z,a[2]=(E-U)*z,a[3]=0,a[4]=(b-D)*B,a[5]=(1-(x+M))*B,a[6]=(w+C)*B,a[7]=0,a[8]=(E+U)*F,a[9]=(w-C)*F,a[10]=(1-(x+R))*F,a[11]=0,a[12]=t.x,a[13]=t.y,a[14]=t.z,a[15]=1,this}decompose(t,e,i){const a=this.elements;let o=vd.set(a[0],a[1],a[2]).length();const u=vd.set(a[4],a[5],a[6]).length(),h=vd.set(a[8],a[9],a[10]).length();this.determinant()<0&&(o=-o),t.x=a[12],t.y=a[13],t.z=a[14],yo.copy(this);const p=1/o,v=1/u,_=1/h;return yo.elements[0]*=p,yo.elements[1]*=p,yo.elements[2]*=p,yo.elements[4]*=v,yo.elements[5]*=v,yo.elements[6]*=v,yo.elements[8]*=_,yo.elements[9]*=_,yo.elements[10]*=_,e.setFromRotationMatrix(yo),i.x=o,i.y=u,i.z=h,this}makePerspective(t,e,i,a,o,u,h=Ao){const d=this.elements,p=2*o/(e-t),v=2*o/(i-a),_=(e+t)/(e-t),x=(i+a)/(i-a);let b,E;if(h===Ao)b=-(u+o)/(u-o),E=-2*u*o/(u-o);else if(h===A0)b=-u/(u-o),E=-u*o/(u-o);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+h);return d[0]=p,d[4]=0,d[8]=_,d[12]=0,d[1]=0,d[5]=v,d[9]=x,d[13]=0,d[2]=0,d[6]=0,d[10]=b,d[14]=E,d[3]=0,d[7]=0,d[11]=-1,d[15]=0,this}makeOrthographic(t,e,i,a,o,u,h=Ao){const d=this.elements,p=1/(e-t),v=1/(i-a),_=1/(u-o),x=(e+t)*p,b=(i+a)*v;let E,R;if(h===Ao)E=(u+o)*_,R=-2*_;else if(h===A0)E=o*_,R=-1*_;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+h);return d[0]=2*p,d[4]=0,d[8]=0,d[12]=-x,d[1]=0,d[5]=2*v,d[9]=0,d[13]=-b,d[2]=0,d[6]=0,d[10]=R,d[14]=-E,d[3]=0,d[7]=0,d[11]=0,d[15]=1,this}equals(t){const e=this.elements,i=t.elements;for(let a=0;a<16;a++)if(e[a]!==i[a])return!1;return!0}fromArray(t,e=0){for(let i=0;i<16;i++)this.elements[i]=t[i+e];return this}toArray(t=[],e=0){const i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t[e+9]=i[9],t[e+10]=i[10],t[e+11]=i[11],t[e+12]=i[12],t[e+13]=i[13],t[e+14]=i[14],t[e+15]=i[15],t}}const vd=new J,yo=new $e,R4=new J(0,0,0),C4=new J(1,1,1),pu=new J,e_=new J,cs=new J,$T=new $e,tA=new sr;class gs{constructor(t=0,e=0,i=0,a=gs.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=e,this._z=i,this._order=a}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,e,i,a=this._order){return this._x=t,this._y=e,this._z=i,this._order=a,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,e=this._order,i=!0){const a=t.elements,o=a[0],u=a[4],h=a[8],d=a[1],p=a[5],v=a[9],_=a[2],x=a[6],b=a[10];switch(e){case"XYZ":this._y=Math.asin(cn(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(-v,b),this._z=Math.atan2(-u,o)):(this._x=Math.atan2(x,p),this._z=0);break;case"YXZ":this._x=Math.asin(-cn(v,-1,1)),Math.abs(v)<.9999999?(this._y=Math.atan2(h,b),this._z=Math.atan2(d,p)):(this._y=Math.atan2(-_,o),this._z=0);break;case"ZXY":this._x=Math.asin(cn(x,-1,1)),Math.abs(x)<.9999999?(this._y=Math.atan2(-_,b),this._z=Math.atan2(-u,p)):(this._y=0,this._z=Math.atan2(d,o));break;case"ZYX":this._y=Math.asin(-cn(_,-1,1)),Math.abs(_)<.9999999?(this._x=Math.atan2(x,b),this._z=Math.atan2(d,o)):(this._x=0,this._z=Math.atan2(-u,p));break;case"YZX":this._z=Math.asin(cn(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(-v,p),this._y=Math.atan2(-_,o)):(this._x=0,this._y=Math.atan2(h,b));break;case"XZY":this._z=Math.asin(-cn(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(x,p),this._y=Math.atan2(h,o)):(this._x=Math.atan2(-v,b),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+e)}return this._order=e,i===!0&&this._onChangeCallback(),this}setFromQuaternion(t,e,i){return $T.makeRotationFromQuaternion(t),this.setFromRotationMatrix($T,e,i)}setFromVector3(t,e=this._order){return this.set(t.x,t.y,t.z,e)}reorder(t){return tA.setFromEuler(this),this.setFromQuaternion(tA,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],t[3]!==void 0&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}gs.DEFAULT_ORDER="XYZ";class jd{constructor(){this.mask=1}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return(this.mask&t.mask)!==0}isEnabled(t){return(this.mask&(1<<t|0))!==0}}let D4=0;const eA=new J,_d=new sr,lc=new $e,n_=new J,Rm=new J,N4=new J,U4=new sr,nA=new J(1,0,0),iA=new J(0,1,0),aA=new J(0,0,1),rA={type:"added"},O4={type:"removed"},yd={type:"childadded",child:null},nS={type:"childremoved",child:null};class Gn extends Cl{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:D4++}),this.uuid=ps(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Gn.DEFAULT_UP.clone();const t=new J,e=new gs,i=new sr,a=new J(1,1,1);function o(){i.setFromEuler(e,!1)}function u(){e.setFromQuaternion(i,void 0,!1)}e._onChange(o),i._onChange(u),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:a},modelViewMatrix:{value:new $e},normalMatrix:{value:new hn}}),this.matrix=new $e,this.matrixWorld=new $e,this.matrixAutoUpdate=Gn.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Gn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new jd,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,e){this.quaternion.setFromAxisAngle(t,e)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,e){return _d.setFromAxisAngle(t,e),this.quaternion.multiply(_d),this}rotateOnWorldAxis(t,e){return _d.setFromAxisAngle(t,e),this.quaternion.premultiply(_d),this}rotateX(t){return this.rotateOnAxis(nA,t)}rotateY(t){return this.rotateOnAxis(iA,t)}rotateZ(t){return this.rotateOnAxis(aA,t)}translateOnAxis(t,e){return eA.copy(t).applyQuaternion(this.quaternion),this.position.add(eA.multiplyScalar(e)),this}translateX(t){return this.translateOnAxis(nA,t)}translateY(t){return this.translateOnAxis(iA,t)}translateZ(t){return this.translateOnAxis(aA,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(lc.copy(this.matrixWorld).invert())}lookAt(t,e,i){t.isVector3?n_.copy(t):n_.set(t,e,i);const a=this.parent;this.updateWorldMatrix(!0,!1),Rm.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?lc.lookAt(Rm,n_,this.up):lc.lookAt(n_,Rm,this.up),this.quaternion.setFromRotationMatrix(lc),a&&(lc.extractRotation(a.matrixWorld),_d.setFromRotationMatrix(lc),this.quaternion.premultiply(_d.invert()))}add(t){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(t.removeFromParent(),t.parent=this,this.children.push(t),t.dispatchEvent(rA),yd.child=t,this.dispatchEvent(yd),yd.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const e=this.children.indexOf(t);return e!==-1&&(t.parent=null,this.children.splice(e,1),t.dispatchEvent(O4),nS.child=t,this.dispatchEvent(nS),nS.child=null),this}removeFromParent(){const t=this.parent;return t!==null&&t.remove(this),this}clear(){return this.remove(...this.children)}attach(t){return this.updateWorldMatrix(!0,!1),lc.copy(this.matrixWorld).invert(),t.parent!==null&&(t.parent.updateWorldMatrix(!0,!1),lc.multiply(t.parent.matrixWorld)),t.applyMatrix4(lc),t.removeFromParent(),t.parent=this,this.children.push(t),t.updateWorldMatrix(!1,!0),t.dispatchEvent(rA),yd.child=t,this.dispatchEvent(yd),yd.child=null,this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,e){if(this[t]===e)return this;for(let i=0,a=this.children.length;i<a;i++){const u=this.children[i].getObjectByProperty(t,e);if(u!==void 0)return u}}getObjectsByProperty(t,e,i=[]){this[t]===e&&i.push(this);const a=this.children;for(let o=0,u=a.length;o<u;o++)a[o].getObjectsByProperty(t,e,i);return i}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Rm,t,N4),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Rm,U4,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()}raycast(){}traverse(t){t(this);const e=this.children;for(let i=0,a=e.length;i<a;i++)e[i].traverse(t)}traverseVisible(t){if(this.visible===!1)return;t(this);const e=this.children;for(let i=0,a=e.length;i<a;i++)e[i].traverseVisible(t)}traverseAncestors(t){const e=this.parent;e!==null&&(t(e),e.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,t=!0);const e=this.children;for(let i=0,a=e.length;i<a;i++)e[i].updateMatrixWorld(t)}updateWorldMatrix(t,e){const i=this.parent;if(t===!0&&i!==null&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),e===!0){const a=this.children;for(let o=0,u=a.length;o<u;o++)a[o].updateWorldMatrix(!1,!0)}}toJSON(t){const e=t===void 0||typeof t=="string",i={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const a={};a.uuid=this.uuid,a.type=this.type,this.name!==""&&(a.name=this.name),this.castShadow===!0&&(a.castShadow=!0),this.receiveShadow===!0&&(a.receiveShadow=!0),this.visible===!1&&(a.visible=!1),this.frustumCulled===!1&&(a.frustumCulled=!1),this.renderOrder!==0&&(a.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(a.userData=this.userData),a.layers=this.layers.mask,a.matrix=this.matrix.toArray(),a.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(a.matrixAutoUpdate=!1),this.isInstancedMesh&&(a.type="InstancedMesh",a.count=this.count,a.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(a.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(a.type="BatchedMesh",a.perObjectFrustumCulled=this.perObjectFrustumCulled,a.sortObjects=this.sortObjects,a.drawRanges=this._drawRanges,a.reservedRanges=this._reservedRanges,a.visibility=this._visibility,a.active=this._active,a.bounds=this._bounds.map(h=>({boxInitialized:h.boxInitialized,boxMin:h.box.min.toArray(),boxMax:h.box.max.toArray(),sphereInitialized:h.sphereInitialized,sphereRadius:h.sphere.radius,sphereCenter:h.sphere.center.toArray()})),a.maxInstanceCount=this._maxInstanceCount,a.maxVertexCount=this._maxVertexCount,a.maxIndexCount=this._maxIndexCount,a.geometryInitialized=this._geometryInitialized,a.geometryCount=this._geometryCount,a.matricesTexture=this._matricesTexture.toJSON(t),this._colorsTexture!==null&&(a.colorsTexture=this._colorsTexture.toJSON(t)),this.boundingSphere!==null&&(a.boundingSphere={center:a.boundingSphere.center.toArray(),radius:a.boundingSphere.radius}),this.boundingBox!==null&&(a.boundingBox={min:a.boundingBox.min.toArray(),max:a.boundingBox.max.toArray()}));function o(h,d){return h[d.uuid]===void 0&&(h[d.uuid]=d.toJSON(t)),d.uuid}if(this.isScene)this.background&&(this.background.isColor?a.background=this.background.toJSON():this.background.isTexture&&(a.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(a.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){a.geometry=o(t.geometries,this.geometry);const h=this.geometry.parameters;if(h!==void 0&&h.shapes!==void 0){const d=h.shapes;if(Array.isArray(d))for(let p=0,v=d.length;p<v;p++){const _=d[p];o(t.shapes,_)}else o(t.shapes,d)}}if(this.isSkinnedMesh&&(a.bindMode=this.bindMode,a.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(o(t.skeletons,this.skeleton),a.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const h=[];for(let d=0,p=this.material.length;d<p;d++)h.push(o(t.materials,this.material[d]));a.material=h}else a.material=o(t.materials,this.material);if(this.children.length>0){a.children=[];for(let h=0;h<this.children.length;h++)a.children.push(this.children[h].toJSON(t).object)}if(this.animations.length>0){a.animations=[];for(let h=0;h<this.animations.length;h++){const d=this.animations[h];a.animations.push(o(t.animations,d))}}if(e){const h=u(t.geometries),d=u(t.materials),p=u(t.textures),v=u(t.images),_=u(t.shapes),x=u(t.skeletons),b=u(t.animations),E=u(t.nodes);h.length>0&&(i.geometries=h),d.length>0&&(i.materials=d),p.length>0&&(i.textures=p),v.length>0&&(i.images=v),_.length>0&&(i.shapes=_),x.length>0&&(i.skeletons=x),b.length>0&&(i.animations=b),E.length>0&&(i.nodes=E)}return i.object=a,i;function u(h){const d=[];for(const p in h){const v=h[p];delete v.metadata,d.push(v)}return d}}clone(t){return new this.constructor().copy(this,t)}copy(t,e=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.animations=t.animations.slice(),this.userData=JSON.parse(JSON.stringify(t.userData)),e===!0)for(let i=0;i<t.children.length;i++){const a=t.children[i];this.add(a.clone())}return this}}Gn.DEFAULT_UP=new J(0,1,0);Gn.DEFAULT_MATRIX_AUTO_UPDATE=!0;Gn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const xo=new J,cc=new J,iS=new J,uc=new J,xd=new J,Sd=new J,sA=new J,aS=new J,rS=new J,sS=new J,oS=new Fn,lS=new Fn,cS=new Fn;class qr{constructor(t=new J,e=new J,i=new J){this.a=t,this.b=e,this.c=i}static getNormal(t,e,i,a){a.subVectors(i,e),xo.subVectors(t,e),a.cross(xo);const o=a.lengthSq();return o>0?a.multiplyScalar(1/Math.sqrt(o)):a.set(0,0,0)}static getBarycoord(t,e,i,a,o){xo.subVectors(a,e),cc.subVectors(i,e),iS.subVectors(t,e);const u=xo.dot(xo),h=xo.dot(cc),d=xo.dot(iS),p=cc.dot(cc),v=cc.dot(iS),_=u*p-h*h;if(_===0)return o.set(0,0,0),null;const x=1/_,b=(p*d-h*v)*x,E=(u*v-h*d)*x;return o.set(1-b-E,E,b)}static containsPoint(t,e,i,a){return this.getBarycoord(t,e,i,a,uc)===null?!1:uc.x>=0&&uc.y>=0&&uc.x+uc.y<=1}static getInterpolation(t,e,i,a,o,u,h,d){return this.getBarycoord(t,e,i,a,uc)===null?(d.x=0,d.y=0,"z"in d&&(d.z=0),"w"in d&&(d.w=0),null):(d.setScalar(0),d.addScaledVector(o,uc.x),d.addScaledVector(u,uc.y),d.addScaledVector(h,uc.z),d)}static getInterpolatedAttribute(t,e,i,a,o,u){return oS.setScalar(0),lS.setScalar(0),cS.setScalar(0),oS.fromBufferAttribute(t,e),lS.fromBufferAttribute(t,i),cS.fromBufferAttribute(t,a),u.setScalar(0),u.addScaledVector(oS,o.x),u.addScaledVector(lS,o.y),u.addScaledVector(cS,o.z),u}static isFrontFacing(t,e,i,a){return xo.subVectors(i,e),cc.subVectors(t,e),xo.cross(cc).dot(a)<0}set(t,e,i){return this.a.copy(t),this.b.copy(e),this.c.copy(i),this}setFromPointsAndIndices(t,e,i,a){return this.a.copy(t[e]),this.b.copy(t[i]),this.c.copy(t[a]),this}setFromAttributeAndIndices(t,e,i,a){return this.a.fromBufferAttribute(t,e),this.b.fromBufferAttribute(t,i),this.c.fromBufferAttribute(t,a),this}clone(){return new this.constructor().copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return xo.subVectors(this.c,this.b),cc.subVectors(this.a,this.b),xo.cross(cc).length()*.5}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return qr.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,e){return qr.getBarycoord(t,this.a,this.b,this.c,e)}getInterpolation(t,e,i,a,o){return qr.getInterpolation(t,this.a,this.b,this.c,e,i,a,o)}containsPoint(t){return qr.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return qr.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,e){const i=this.a,a=this.b,o=this.c;let u,h;xd.subVectors(a,i),Sd.subVectors(o,i),aS.subVectors(t,i);const d=xd.dot(aS),p=Sd.dot(aS);if(d<=0&&p<=0)return e.copy(i);rS.subVectors(t,a);const v=xd.dot(rS),_=Sd.dot(rS);if(v>=0&&_<=v)return e.copy(a);const x=d*_-v*p;if(x<=0&&d>=0&&v<=0)return u=d/(d-v),e.copy(i).addScaledVector(xd,u);sS.subVectors(t,o);const b=xd.dot(sS),E=Sd.dot(sS);if(E>=0&&b<=E)return e.copy(o);const R=b*p-d*E;if(R<=0&&p>=0&&E<=0)return h=p/(p-E),e.copy(i).addScaledVector(Sd,h);const w=v*E-b*_;if(w<=0&&_-v>=0&&b-E>=0)return sA.subVectors(o,a),h=(_-v)/(_-v+(b-E)),e.copy(a).addScaledVector(sA,h);const M=1/(w+R+x);return u=R*M,h=x*M,e.copy(i).addScaledVector(xd,u).addScaledVector(Sd,h)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}const GR={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},mu={h:0,s:0,l:0},i_={h:0,s:0,l:0};function uS(n,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?n+(t-n)*6*e:e<1/2?t:e<2/3?n+(t-n)*6*(2/3-e):n}class De{constructor(t,e,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(t,e,i)}set(t,e,i){if(e===void 0&&i===void 0){const a=t;a&&a.isColor?this.copy(a):typeof a=="number"?this.setHex(a):typeof a=="string"&&this.setStyle(a)}else this.setRGB(t,e,i);return this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,e=Va){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(t&255)/255,On.toWorkingColorSpace(this,e),this}setRGB(t,e,i,a=On.workingColorSpace){return this.r=t,this.g=e,this.b=i,On.toWorkingColorSpace(this,a),this}setHSL(t,e,i,a=On.workingColorSpace){if(t=cM(t,1),e=cn(e,0,1),i=cn(i,0,1),e===0)this.r=this.g=this.b=i;else{const o=i<=.5?i*(1+e):i+e-i*e,u=2*i-o;this.r=uS(u,o,t+1/3),this.g=uS(u,o,t),this.b=uS(u,o,t-1/3)}return On.toWorkingColorSpace(this,a),this}setStyle(t,e=Va){function i(o){o!==void 0&&parseFloat(o)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let a;if(a=/^(\w+)\(([^\)]*)\)/.exec(t)){let o;const u=a[1],h=a[2];switch(u){case"rgb":case"rgba":if(o=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(h))return i(o[4]),this.setRGB(Math.min(255,parseInt(o[1],10))/255,Math.min(255,parseInt(o[2],10))/255,Math.min(255,parseInt(o[3],10))/255,e);if(o=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(h))return i(o[4]),this.setRGB(Math.min(100,parseInt(o[1],10))/100,Math.min(100,parseInt(o[2],10))/100,Math.min(100,parseInt(o[3],10))/100,e);break;case"hsl":case"hsla":if(o=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(h))return i(o[4]),this.setHSL(parseFloat(o[1])/360,parseFloat(o[2])/100,parseFloat(o[3])/100,e);break;default:console.warn("THREE.Color: Unknown color model "+t)}}else if(a=/^\#([A-Fa-f\d]+)$/.exec(t)){const o=a[1],u=o.length;if(u===3)return this.setRGB(parseInt(o.charAt(0),16)/15,parseInt(o.charAt(1),16)/15,parseInt(o.charAt(2),16)/15,e);if(u===6)return this.setHex(parseInt(o,16),e);console.warn("THREE.Color: Invalid hex color "+t)}else if(t&&t.length>0)return this.setColorName(t,e);return this}setColorName(t,e=Va){const i=GR[t.toLowerCase()];return i!==void 0?this.setHex(i,e):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=yc(t.r),this.g=yc(t.g),this.b=yc(t.b),this}copyLinearToSRGB(t){return this.r=Vd(t.r),this.g=Vd(t.g),this.b=Vd(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=Va){return On.fromWorkingColorSpace(ir.copy(this),t),Math.round(cn(ir.r*255,0,255))*65536+Math.round(cn(ir.g*255,0,255))*256+Math.round(cn(ir.b*255,0,255))}getHexString(t=Va){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,e=On.workingColorSpace){On.fromWorkingColorSpace(ir.copy(this),e);const i=ir.r,a=ir.g,o=ir.b,u=Math.max(i,a,o),h=Math.min(i,a,o);let d,p;const v=(h+u)/2;if(h===u)d=0,p=0;else{const _=u-h;switch(p=v<=.5?_/(u+h):_/(2-u-h),u){case i:d=(a-o)/_+(a<o?6:0);break;case a:d=(o-i)/_+2;break;case o:d=(i-a)/_+4;break}d/=6}return t.h=d,t.s=p,t.l=v,t}getRGB(t,e=On.workingColorSpace){return On.fromWorkingColorSpace(ir.copy(this),e),t.r=ir.r,t.g=ir.g,t.b=ir.b,t}getStyle(t=Va){On.fromWorkingColorSpace(ir.copy(this),t);const e=ir.r,i=ir.g,a=ir.b;return t!==Va?`color(${t} ${e.toFixed(3)} ${i.toFixed(3)} ${a.toFixed(3)})`:`rgb(${Math.round(e*255)},${Math.round(i*255)},${Math.round(a*255)})`}offsetHSL(t,e,i){return this.getHSL(mu),this.setHSL(mu.h+t,mu.s+e,mu.l+i)}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}lerpColors(t,e,i){return this.r=t.r+(e.r-t.r)*i,this.g=t.g+(e.g-t.g)*i,this.b=t.b+(e.b-t.b)*i,this}lerpHSL(t,e){this.getHSL(mu),t.getHSL(i_);const i=n0(mu.h,i_.h,e),a=n0(mu.s,i_.s,e),o=n0(mu.l,i_.l,e);return this.setHSL(i,a,o),this}setFromVector3(t){return this.r=t.x,this.g=t.y,this.b=t.z,this}applyMatrix3(t){const e=this.r,i=this.g,a=this.b,o=t.elements;return this.r=o[0]*e+o[3]*i+o[6]*a,this.g=o[1]*e+o[4]*i+o[7]*a,this.b=o[2]*e+o[5]*i+o[8]*a,this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,e=0){return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}toArray(t=[],e=0){return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}fromBufferAttribute(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const ir=new De;De.NAMES=GR;let L4=0;class cr extends Cl{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:L4++}),this.uuid=ps(),this.name="",this.type="Material",this.blending=$f,this.side=bc,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=oy,this.blendDst=ly,this.blendEquation=xu,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new De(0,0,0),this.blendAlpha=0,this.depthFunc=rh,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=vb,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Hf,this.stencilZFail=Hf,this.stencilZPass=Hf,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(t!==void 0)for(const e in t){const i=t[e];if(i===void 0){console.warn(`THREE.Material: parameter '${e}' has value of undefined.`);continue}const a=this[e];if(a===void 0){console.warn(`THREE.Material: '${e}' is not a property of THREE.${this.type}.`);continue}a&&a.isColor?a.set(i):a&&a.isVector3&&i&&i.isVector3?a.copy(i):this[e]=i}}toJSON(t){const e=t===void 0||typeof t=="string";e&&(t={textures:{},images:{}});const i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(i.dispersion=this.dispersion),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(t).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(t).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(t).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(t).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(t).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(t).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(t).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(t).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(t).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(t).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(t).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(t).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==$f&&(i.blending=this.blending),this.side!==bc&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==oy&&(i.blendSrc=this.blendSrc),this.blendDst!==ly&&(i.blendDst=this.blendDst),this.blendEquation!==xu&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==rh&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==vb&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Hf&&(i.stencilFail=this.stencilFail),this.stencilZFail!==Hf&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==Hf&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function a(o){const u=[];for(const h in o){const d=o[h];delete d.metadata,u.push(d)}return u}if(e){const o=a(t.textures),u=a(t.images);o.length>0&&(i.textures=o),u.length>0&&(i.images=u)}return i}clone(){return new this.constructor().copy(this)}copy(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.blendColor.copy(t.blendColor),this.blendAlpha=t.blendAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const e=t.clippingPlanes;let i=null;if(e!==null){const a=e.length;i=new Array(a);for(let o=0;o!==a;++o)i[o]=e[o].clone()}return this.clippingPlanes=i,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaHash=t.alphaHash,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.forceSinglePass=t.forceSinglePass,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){t===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}}class Mc extends cr{constructor(t){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new De(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new gs,this.combine=Q0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}const vc=z4();function z4(){const n=new ArrayBuffer(4),t=new Float32Array(n),e=new Uint32Array(n),i=new Uint32Array(512),a=new Uint32Array(512);for(let d=0;d<256;++d){const p=d-127;p<-27?(i[d]=0,i[d|256]=32768,a[d]=24,a[d|256]=24):p<-14?(i[d]=1024>>-p-14,i[d|256]=1024>>-p-14|32768,a[d]=-p-1,a[d|256]=-p-1):p<=15?(i[d]=p+15<<10,i[d|256]=p+15<<10|32768,a[d]=13,a[d|256]=13):p<128?(i[d]=31744,i[d|256]=64512,a[d]=24,a[d|256]=24):(i[d]=31744,i[d|256]=64512,a[d]=13,a[d|256]=13)}const o=new Uint32Array(2048),u=new Uint32Array(64),h=new Uint32Array(64);for(let d=1;d<1024;++d){let p=d<<13,v=0;for(;!(p&8388608);)p<<=1,v-=8388608;p&=-8388609,v+=947912704,o[d]=p|v}for(let d=1024;d<2048;++d)o[d]=939524096+(d-1024<<13);for(let d=1;d<31;++d)u[d]=d<<23;u[31]=1199570944,u[32]=2147483648;for(let d=33;d<63;++d)u[d]=2147483648+(d-32<<23);u[63]=3347054592;for(let d=1;d<64;++d)d!==32&&(h[d]=1024);return{floatView:t,uint32View:e,baseTable:i,shiftTable:a,mantissaTable:o,exponentTable:u,offsetTable:h}}function Xr(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=cn(n,-65504,65504),vc.floatView[0]=n;const t=vc.uint32View[0],e=t>>23&511;return vc.baseTable[e]+((t&8388607)>>vc.shiftTable[e])}function Vm(n){const t=n>>10;return vc.uint32View[0]=vc.mantissaTable[vc.offsetTable[t]+(n&1023)]+vc.exponentTable[t],vc.floatView[0]}class jf{static toHalfFloat(t){return Xr(t)}static fromHalfFloat(t){return Vm(t)}}const sa=new J,a_=new jt;let B4=0;class ui{constructor(t,e,i=!1){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:B4++}),this.name="",this.array=t,this.itemSize=e,this.count=t!==void 0?t.length/e:0,this.normalized=i,this.usage=T0,this.updateRanges=[],this.gpuType=Fi,this.version=0}onUploadCallback(){}set needsUpdate(t){t===!0&&this.version++}setUsage(t){return this.usage=t,this}addUpdateRange(t,e){this.updateRanges.push({start:t,count:e})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this.gpuType=t.gpuType,this}copyAt(t,e,i){t*=this.itemSize,i*=e.itemSize;for(let a=0,o=this.itemSize;a<o;a++)this.array[t+a]=e.array[i+a];return this}copyArray(t){return this.array.set(t),this}applyMatrix3(t){if(this.itemSize===2)for(let e=0,i=this.count;e<i;e++)a_.fromBufferAttribute(this,e),a_.applyMatrix3(t),this.setXY(e,a_.x,a_.y);else if(this.itemSize===3)for(let e=0,i=this.count;e<i;e++)sa.fromBufferAttribute(this,e),sa.applyMatrix3(t),this.setXYZ(e,sa.x,sa.y,sa.z);return this}applyMatrix4(t){for(let e=0,i=this.count;e<i;e++)sa.fromBufferAttribute(this,e),sa.applyMatrix4(t),this.setXYZ(e,sa.x,sa.y,sa.z);return this}applyNormalMatrix(t){for(let e=0,i=this.count;e<i;e++)sa.fromBufferAttribute(this,e),sa.applyNormalMatrix(t),this.setXYZ(e,sa.x,sa.y,sa.z);return this}transformDirection(t){for(let e=0,i=this.count;e<i;e++)sa.fromBufferAttribute(this,e),sa.transformDirection(t),this.setXYZ(e,sa.x,sa.y,sa.z);return this}set(t,e=0){return this.array.set(t,e),this}getComponent(t,e){let i=this.array[t*this.itemSize+e];return this.normalized&&(i=br(i,this.array)),i}setComponent(t,e,i){return this.normalized&&(i=pn(i,this.array)),this.array[t*this.itemSize+e]=i,this}getX(t){let e=this.array[t*this.itemSize];return this.normalized&&(e=br(e,this.array)),e}setX(t,e){return this.normalized&&(e=pn(e,this.array)),this.array[t*this.itemSize]=e,this}getY(t){let e=this.array[t*this.itemSize+1];return this.normalized&&(e=br(e,this.array)),e}setY(t,e){return this.normalized&&(e=pn(e,this.array)),this.array[t*this.itemSize+1]=e,this}getZ(t){let e=this.array[t*this.itemSize+2];return this.normalized&&(e=br(e,this.array)),e}setZ(t,e){return this.normalized&&(e=pn(e,this.array)),this.array[t*this.itemSize+2]=e,this}getW(t){let e=this.array[t*this.itemSize+3];return this.normalized&&(e=br(e,this.array)),e}setW(t,e){return this.normalized&&(e=pn(e,this.array)),this.array[t*this.itemSize+3]=e,this}setXY(t,e,i){return t*=this.itemSize,this.normalized&&(e=pn(e,this.array),i=pn(i,this.array)),this.array[t+0]=e,this.array[t+1]=i,this}setXYZ(t,e,i,a){return t*=this.itemSize,this.normalized&&(e=pn(e,this.array),i=pn(i,this.array),a=pn(a,this.array)),this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=a,this}setXYZW(t,e,i,a,o){return t*=this.itemSize,this.normalized&&(e=pn(e,this.array),i=pn(i,this.array),a=pn(a,this.array),o=pn(o,this.array)),this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=a,this.array[t+3]=o,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(t.name=this.name),this.usage!==T0&&(t.usage=this.usage),t}}class I4 extends ui{constructor(t,e,i){super(new Int8Array(t),e,i)}}class P4 extends ui{constructor(t,e,i){super(new Uint8Array(t),e,i)}}class H4 extends ui{constructor(t,e,i){super(new Uint8ClampedArray(t),e,i)}}class F4 extends ui{constructor(t,e,i){super(new Int16Array(t),e,i)}}class uM extends ui{constructor(t,e,i){super(new Uint16Array(t),e,i)}}class G4 extends ui{constructor(t,e,i){super(new Int32Array(t),e,i)}}class fM extends ui{constructor(t,e,i){super(new Uint32Array(t),e,i)}}class V4 extends ui{constructor(t,e,i){super(new Uint16Array(t),e,i),this.isFloat16BufferAttribute=!0}getX(t){let e=Vm(this.array[t*this.itemSize]);return this.normalized&&(e=br(e,this.array)),e}setX(t,e){return this.normalized&&(e=pn(e,this.array)),this.array[t*this.itemSize]=Xr(e),this}getY(t){let e=Vm(this.array[t*this.itemSize+1]);return this.normalized&&(e=br(e,this.array)),e}setY(t,e){return this.normalized&&(e=pn(e,this.array)),this.array[t*this.itemSize+1]=Xr(e),this}getZ(t){let e=Vm(this.array[t*this.itemSize+2]);return this.normalized&&(e=br(e,this.array)),e}setZ(t,e){return this.normalized&&(e=pn(e,this.array)),this.array[t*this.itemSize+2]=Xr(e),this}getW(t){let e=Vm(this.array[t*this.itemSize+3]);return this.normalized&&(e=br(e,this.array)),e}setW(t,e){return this.normalized&&(e=pn(e,this.array)),this.array[t*this.itemSize+3]=Xr(e),this}setXY(t,e,i){return t*=this.itemSize,this.normalized&&(e=pn(e,this.array),i=pn(i,this.array)),this.array[t+0]=Xr(e),this.array[t+1]=Xr(i),this}setXYZ(t,e,i,a){return t*=this.itemSize,this.normalized&&(e=pn(e,this.array),i=pn(i,this.array),a=pn(a,this.array)),this.array[t+0]=Xr(e),this.array[t+1]=Xr(i),this.array[t+2]=Xr(a),this}setXYZW(t,e,i,a,o){return t*=this.itemSize,this.normalized&&(e=pn(e,this.array),i=pn(i,this.array),a=pn(a,this.array),o=pn(o,this.array)),this.array[t+0]=Xr(e),this.array[t+1]=Xr(i),this.array[t+2]=Xr(a),this.array[t+3]=Xr(o),this}}class He extends ui{constructor(t,e,i){super(new Float32Array(t),e,i)}}let k4=0;const Os=new $e,fS=new Gn,bd=new J,us=new Tr,Cm=new Tr,Aa=new J;class xn extends Cl{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:k4++}),this.uuid=ps(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return Array.isArray(t)?this.index=new(PR(t)?fM:uM)(t,1):this.index=t,this}setIndirect(t){return this.indirect=t,this}getIndirect(){return this.indirect}getAttribute(t){return this.attributes[t]}setAttribute(t,e){return this.attributes[t]=e,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return this.attributes[t]!==void 0}addGroup(t,e,i=0){this.groups.push({start:t,count:e,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e}applyMatrix4(t){const e=this.attributes.position;e!==void 0&&(e.applyMatrix4(t),e.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const o=new hn().getNormalMatrix(t);i.applyNormalMatrix(o),i.needsUpdate=!0}const a=this.attributes.tangent;return a!==void 0&&(a.transformDirection(t),a.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(t){return Os.makeRotationFromQuaternion(t),this.applyMatrix4(Os),this}rotateX(t){return Os.makeRotationX(t),this.applyMatrix4(Os),this}rotateY(t){return Os.makeRotationY(t),this.applyMatrix4(Os),this}rotateZ(t){return Os.makeRotationZ(t),this.applyMatrix4(Os),this}translate(t,e,i){return Os.makeTranslation(t,e,i),this.applyMatrix4(Os),this}scale(t,e,i){return Os.makeScale(t,e,i),this.applyMatrix4(Os),this}lookAt(t){return fS.lookAt(t),fS.updateMatrix(),this.applyMatrix4(fS.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(bd).negate(),this.translate(bd.x,bd.y,bd.z),this}setFromPoints(t){const e=this.getAttribute("position");if(e===void 0){const i=[];for(let a=0,o=t.length;a<o;a++){const u=t[a];i.push(u.x,u.y,u.z||0)}this.setAttribute("position",new He(i,3))}else{const i=Math.min(t.length,e.count);for(let a=0;a<i;a++){const o=t[a];e.setXYZ(a,o.x,o.y,o.z||0)}t.length>e.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),e.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Tr);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new J(-1/0,-1/0,-1/0),new J(1/0,1/0,1/0));return}if(t!==void 0){if(this.boundingBox.setFromBufferAttribute(t),e)for(let i=0,a=e.length;i<a;i++){const o=e[i];us.setFromBufferAttribute(o),this.morphTargetsRelative?(Aa.addVectors(this.boundingBox.min,us.min),this.boundingBox.expandByPoint(Aa),Aa.addVectors(this.boundingBox.max,us.max),this.boundingBox.expandByPoint(Aa)):(this.boundingBox.expandByPoint(us.min),this.boundingBox.expandByPoint(us.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new or);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new J,1/0);return}if(t){const i=this.boundingSphere.center;if(us.setFromBufferAttribute(t),e)for(let o=0,u=e.length;o<u;o++){const h=e[o];Cm.setFromBufferAttribute(h),this.morphTargetsRelative?(Aa.addVectors(us.min,Cm.min),us.expandByPoint(Aa),Aa.addVectors(us.max,Cm.max),us.expandByPoint(Aa)):(us.expandByPoint(Cm.min),us.expandByPoint(Cm.max))}us.getCenter(i);let a=0;for(let o=0,u=t.count;o<u;o++)Aa.fromBufferAttribute(t,o),a=Math.max(a,i.distanceToSquared(Aa));if(e)for(let o=0,u=e.length;o<u;o++){const h=e[o],d=this.morphTargetsRelative;for(let p=0,v=h.count;p<v;p++)Aa.fromBufferAttribute(h,p),d&&(bd.fromBufferAttribute(t,p),Aa.add(bd)),a=Math.max(a,i.distanceToSquared(Aa))}this.boundingSphere.radius=Math.sqrt(a),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const t=this.index,e=this.attributes;if(t===null||e.position===void 0||e.normal===void 0||e.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=e.position,a=e.normal,o=e.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new ui(new Float32Array(4*i.count),4));const u=this.getAttribute("tangent"),h=[],d=[];for(let G=0;G<i.count;G++)h[G]=new J,d[G]=new J;const p=new J,v=new J,_=new J,x=new jt,b=new jt,E=new jt,R=new J,w=new J;function M(G,L,O){p.fromBufferAttribute(i,G),v.fromBufferAttribute(i,L),_.fromBufferAttribute(i,O),x.fromBufferAttribute(o,G),b.fromBufferAttribute(o,L),E.fromBufferAttribute(o,O),v.sub(p),_.sub(p),b.sub(x),E.sub(x);const V=1/(b.x*E.y-E.x*b.y);isFinite(V)&&(R.copy(v).multiplyScalar(E.y).addScaledVector(_,-b.y).multiplyScalar(V),w.copy(_).multiplyScalar(b.x).addScaledVector(v,-E.x).multiplyScalar(V),h[G].add(R),h[L].add(R),h[O].add(R),d[G].add(w),d[L].add(w),d[O].add(w))}let C=this.groups;C.length===0&&(C=[{start:0,count:t.count}]);for(let G=0,L=C.length;G<L;++G){const O=C[G],V=O.start,et=O.count;for(let W=V,j=V+et;W<j;W+=3)M(t.getX(W+0),t.getX(W+1),t.getX(W+2))}const U=new J,D=new J,z=new J,B=new J;function F(G){z.fromBufferAttribute(a,G),B.copy(z);const L=h[G];U.copy(L),U.sub(z.multiplyScalar(z.dot(L))).normalize(),D.crossVectors(B,L);const V=D.dot(d[G])<0?-1:1;u.setXYZW(G,U.x,U.y,U.z,V)}for(let G=0,L=C.length;G<L;++G){const O=C[G],V=O.start,et=O.count;for(let W=V,j=V+et;W<j;W+=3)F(t.getX(W+0)),F(t.getX(W+1)),F(t.getX(W+2))}}computeVertexNormals(){const t=this.index,e=this.getAttribute("position");if(e!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new ui(new Float32Array(e.count*3),3),this.setAttribute("normal",i);else for(let x=0,b=i.count;x<b;x++)i.setXYZ(x,0,0,0);const a=new J,o=new J,u=new J,h=new J,d=new J,p=new J,v=new J,_=new J;if(t)for(let x=0,b=t.count;x<b;x+=3){const E=t.getX(x+0),R=t.getX(x+1),w=t.getX(x+2);a.fromBufferAttribute(e,E),o.fromBufferAttribute(e,R),u.fromBufferAttribute(e,w),v.subVectors(u,o),_.subVectors(a,o),v.cross(_),h.fromBufferAttribute(i,E),d.fromBufferAttribute(i,R),p.fromBufferAttribute(i,w),h.add(v),d.add(v),p.add(v),i.setXYZ(E,h.x,h.y,h.z),i.setXYZ(R,d.x,d.y,d.z),i.setXYZ(w,p.x,p.y,p.z)}else for(let x=0,b=e.count;x<b;x+=3)a.fromBufferAttribute(e,x+0),o.fromBufferAttribute(e,x+1),u.fromBufferAttribute(e,x+2),v.subVectors(u,o),_.subVectors(a,o),v.cross(_),i.setXYZ(x+0,v.x,v.y,v.z),i.setXYZ(x+1,v.x,v.y,v.z),i.setXYZ(x+2,v.x,v.y,v.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const t=this.attributes.normal;for(let e=0,i=t.count;e<i;e++)Aa.fromBufferAttribute(t,e),Aa.normalize(),t.setXYZ(e,Aa.x,Aa.y,Aa.z)}toNonIndexed(){function t(h,d){const p=h.array,v=h.itemSize,_=h.normalized,x=new p.constructor(d.length*v);let b=0,E=0;for(let R=0,w=d.length;R<w;R++){h.isInterleavedBufferAttribute?b=d[R]*h.data.stride+h.offset:b=d[R]*v;for(let M=0;M<v;M++)x[E++]=p[b++]}return new ui(x,v,_)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const e=new xn,i=this.index.array,a=this.attributes;for(const h in a){const d=a[h],p=t(d,i);e.setAttribute(h,p)}const o=this.morphAttributes;for(const h in o){const d=[],p=o[h];for(let v=0,_=p.length;v<_;v++){const x=p[v],b=t(x,i);d.push(b)}e.morphAttributes[h]=d}e.morphTargetsRelative=this.morphTargetsRelative;const u=this.groups;for(let h=0,d=u.length;h<d;h++){const p=u[h];e.addGroup(p.start,p.count,p.materialIndex)}return e}toJSON(){const t={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,this.name!==""&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),this.parameters!==void 0){const d=this.parameters;for(const p in d)d[p]!==void 0&&(t[p]=d[p]);return t}t.data={attributes:{}};const e=this.index;e!==null&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});const i=this.attributes;for(const d in i){const p=i[d];t.data.attributes[d]=p.toJSON(t.data)}const a={};let o=!1;for(const d in this.morphAttributes){const p=this.morphAttributes[d],v=[];for(let _=0,x=p.length;_<x;_++){const b=p[_];v.push(b.toJSON(t.data))}v.length>0&&(a[d]=v,o=!0)}o&&(t.data.morphAttributes=a,t.data.morphTargetsRelative=this.morphTargetsRelative);const u=this.groups;u.length>0&&(t.data.groups=JSON.parse(JSON.stringify(u)));const h=this.boundingSphere;return h!==null&&(t.data.boundingSphere={center:h.center.toArray(),radius:h.radius}),t}clone(){return new this.constructor().copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const e={};this.name=t.name;const i=t.index;i!==null&&this.setIndex(i.clone(e));const a=t.attributes;for(const p in a){const v=a[p];this.setAttribute(p,v.clone(e))}const o=t.morphAttributes;for(const p in o){const v=[],_=o[p];for(let x=0,b=_.length;x<b;x++)v.push(_[x].clone(e));this.morphAttributes[p]=v}this.morphTargetsRelative=t.morphTargetsRelative;const u=t.groups;for(let p=0,v=u.length;p<v;p++){const _=u[p];this.addGroup(_.start,_.count,_.materialIndex)}const h=t.boundingBox;h!==null&&(this.boundingBox=h.clone());const d=t.boundingSphere;return d!==null&&(this.boundingSphere=d.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const oA=new $e,Af=new dh,r_=new or,lA=new J,s_=new J,o_=new J,l_=new J,hS=new J,c_=new J,cA=new J,u_=new J;class Gi extends Gn{constructor(t=new xn,e=new Mc){super(),this.isMesh=!0,this.type="Mesh",this.geometry=t,this.material=e,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),t.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),t.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}updateMorphTargets(){const e=this.geometry.morphAttributes,i=Object.keys(e);if(i.length>0){const a=e[i[0]];if(a!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,u=a.length;o<u;o++){const h=a[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[h]=o}}}}getVertexPosition(t,e){const i=this.geometry,a=i.attributes.position,o=i.morphAttributes.position,u=i.morphTargetsRelative;e.fromBufferAttribute(a,t);const h=this.morphTargetInfluences;if(o&&h){c_.set(0,0,0);for(let d=0,p=o.length;d<p;d++){const v=h[d],_=o[d];v!==0&&(hS.fromBufferAttribute(_,t),u?c_.addScaledVector(hS,v):c_.addScaledVector(hS.sub(e),v))}e.add(c_)}return e}raycast(t,e){const i=this.geometry,a=this.material,o=this.matrixWorld;a!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),r_.copy(i.boundingSphere),r_.applyMatrix4(o),Af.copy(t.ray).recast(t.near),!(r_.containsPoint(Af.origin)===!1&&(Af.intersectSphere(r_,lA)===null||Af.origin.distanceToSquared(lA)>(t.far-t.near)**2))&&(oA.copy(o).invert(),Af.copy(t.ray).applyMatrix4(oA),!(i.boundingBox!==null&&Af.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(t,e,Af)))}_computeIntersections(t,e,i){let a;const o=this.geometry,u=this.material,h=o.index,d=o.attributes.position,p=o.attributes.uv,v=o.attributes.uv1,_=o.attributes.normal,x=o.groups,b=o.drawRange;if(h!==null)if(Array.isArray(u))for(let E=0,R=x.length;E<R;E++){const w=x[E],M=u[w.materialIndex],C=Math.max(w.start,b.start),U=Math.min(h.count,Math.min(w.start+w.count,b.start+b.count));for(let D=C,z=U;D<z;D+=3){const B=h.getX(D),F=h.getX(D+1),G=h.getX(D+2);a=f_(this,M,t,i,p,v,_,B,F,G),a&&(a.faceIndex=Math.floor(D/3),a.face.materialIndex=w.materialIndex,e.push(a))}}else{const E=Math.max(0,b.start),R=Math.min(h.count,b.start+b.count);for(let w=E,M=R;w<M;w+=3){const C=h.getX(w),U=h.getX(w+1),D=h.getX(w+2);a=f_(this,u,t,i,p,v,_,C,U,D),a&&(a.faceIndex=Math.floor(w/3),e.push(a))}}else if(d!==void 0)if(Array.isArray(u))for(let E=0,R=x.length;E<R;E++){const w=x[E],M=u[w.materialIndex],C=Math.max(w.start,b.start),U=Math.min(d.count,Math.min(w.start+w.count,b.start+b.count));for(let D=C,z=U;D<z;D+=3){const B=D,F=D+1,G=D+2;a=f_(this,M,t,i,p,v,_,B,F,G),a&&(a.faceIndex=Math.floor(D/3),a.face.materialIndex=w.materialIndex,e.push(a))}}else{const E=Math.max(0,b.start),R=Math.min(d.count,b.start+b.count);for(let w=E,M=R;w<M;w+=3){const C=w,U=w+1,D=w+2;a=f_(this,u,t,i,p,v,_,C,U,D),a&&(a.faceIndex=Math.floor(w/3),e.push(a))}}}}function X4(n,t,e,i,a,o,u,h){let d;if(t.side===Er?d=i.intersectTriangle(u,o,a,!0,h):d=i.intersectTriangle(a,o,u,t.side===bc,h),d===null)return null;u_.copy(h),u_.applyMatrix4(n.matrixWorld);const p=e.ray.origin.distanceTo(u_);return p<e.near||p>e.far?null:{distance:p,point:u_.clone(),object:n}}function f_(n,t,e,i,a,o,u,h,d,p){n.getVertexPosition(h,s_),n.getVertexPosition(d,o_),n.getVertexPosition(p,l_);const v=X4(n,t,e,i,s_,o_,l_,cA);if(v){const _=new J;qr.getBarycoord(cA,s_,o_,l_,_),a&&(v.uv=qr.getInterpolatedAttribute(a,h,d,p,_,new jt)),o&&(v.uv1=qr.getInterpolatedAttribute(o,h,d,p,_,new jt)),u&&(v.normal=qr.getInterpolatedAttribute(u,h,d,p,_,new J),v.normal.dot(i.direction)>0&&v.normal.multiplyScalar(-1));const x={a:h,b:d,c:p,normal:new J,materialIndex:0};qr.getNormal(s_,o_,l_,x.normal),v.face=x,v.barycoord=_}return v}class ph extends xn{constructor(t=1,e=1,i=1,a=1,o=1,u=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:i,widthSegments:a,heightSegments:o,depthSegments:u};const h=this;a=Math.floor(a),o=Math.floor(o),u=Math.floor(u);const d=[],p=[],v=[],_=[];let x=0,b=0;E("z","y","x",-1,-1,i,e,t,u,o,0),E("z","y","x",1,-1,i,e,-t,u,o,1),E("x","z","y",1,1,t,i,e,a,u,2),E("x","z","y",1,-1,t,i,-e,a,u,3),E("x","y","z",1,-1,t,e,i,a,o,4),E("x","y","z",-1,-1,t,e,-i,a,o,5),this.setIndex(d),this.setAttribute("position",new He(p,3)),this.setAttribute("normal",new He(v,3)),this.setAttribute("uv",new He(_,2));function E(R,w,M,C,U,D,z,B,F,G,L){const O=D/F,V=z/G,et=D/2,W=z/2,j=B/2,ut=F+1,tt=G+1;let pt=0,ot=0;const Dt=new J;for(let Z=0;Z<tt;Z++){const ht=Z*V-W;for(let Tt=0;Tt<ut;Tt++){const Ft=Tt*O-et;Dt[R]=Ft*C,Dt[w]=ht*U,Dt[M]=j,p.push(Dt.x,Dt.y,Dt.z),Dt[R]=0,Dt[w]=0,Dt[M]=B>0?1:-1,v.push(Dt.x,Dt.y,Dt.z),_.push(Tt/F),_.push(1-Z/G),pt+=1}}for(let Z=0;Z<G;Z++)for(let ht=0;ht<F;ht++){const Tt=x+ht+ut*Z,Ft=x+ht+ut*(Z+1),rt=x+(ht+1)+ut*(Z+1),Lt=x+(ht+1)+ut*Z;d.push(Tt,Ft,Lt),d.push(Ft,rt,Lt),ot+=6}h.addGroup(b,ot,L),b+=ot,x+=pt}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new ph(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}}function Kd(n){const t={};for(const e in n){t[e]={};for(const i in n[e]){const a=n[e][i];a&&(a.isColor||a.isMatrix3||a.isMatrix4||a.isVector2||a.isVector3||a.isVector4||a.isTexture||a.isQuaternion)?a.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),t[e][i]=null):t[e][i]=a.clone():Array.isArray(a)?t[e][i]=a.slice():t[e][i]=a}}return t}function yr(n){const t={};for(let e=0;e<n.length;e++){const i=Kd(n[e]);for(const a in i)t[a]=i[a]}return t}function Y4(n){const t=[];for(let e=0;e<n.length;e++)t.push(n[e].clone());return t}function VR(n){const t=n.getRenderTarget();return t===null?n.outputColorSpace:t.isXRRenderTarget===!0?t.texture.colorSpace:On.workingColorSpace}const kR={clone:Kd,merge:yr};var q4=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,Z4=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Kr extends cr{constructor(t){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=q4,this.fragmentShader=Z4,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,t!==void 0&&this.setValues(t)}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=Kd(t.uniforms),this.uniformsGroups=Y4(t.uniformsGroups),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.fog=t.fog,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){const e=super.toJSON(t);e.glslVersion=this.glslVersion,e.uniforms={};for(const a in this.uniforms){const u=this.uniforms[a].value;u&&u.isTexture?e.uniforms[a]={type:"t",value:u.toJSON(t).uuid}:u&&u.isColor?e.uniforms[a]={type:"c",value:u.getHex()}:u&&u.isVector2?e.uniforms[a]={type:"v2",value:u.toArray()}:u&&u.isVector3?e.uniforms[a]={type:"v3",value:u.toArray()}:u&&u.isVector4?e.uniforms[a]={type:"v4",value:u.toArray()}:u&&u.isMatrix3?e.uniforms[a]={type:"m3",value:u.toArray()}:u&&u.isMatrix4?e.uniforms[a]={type:"m4",value:u.toArray()}:e.uniforms[a]={value:u}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader,e.lights=this.lights,e.clipping=this.clipping;const i={};for(const a in this.extensions)this.extensions[a]===!0&&(i[a]=!0);return Object.keys(i).length>0&&(e.extensions=i),e}}class px extends Gn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new $e,this.projectionMatrix=new $e,this.projectionMatrixInverse=new $e,this.coordinateSystem=Ao}copy(t,e){return super.copy(t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this.coordinateSystem=t.coordinateSystem,this}getWorldDirection(t){return super.getWorldDirection(t).negate()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,e){super.updateWorldMatrix(t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const gu=new J,uA=new jt,fA=new jt;class ta extends px{constructor(t=50,e=1,i=.1,a=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=i,this.far=a,this.focus=10,this.aspect=e,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=t.view===null?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){const e=.5*this.getFilmHeight()/t;this.fov=Wd*2*Math.atan(e),this.updateProjectionMatrix()}getFocalLength(){const t=Math.tan(eh*.5*this.fov);return .5*this.getFilmHeight()/t}getEffectiveFOV(){return Wd*2*Math.atan(Math.tan(eh*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(t,e,i){gu.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),e.set(gu.x,gu.y).multiplyScalar(-t/gu.z),gu.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(gu.x,gu.y).multiplyScalar(-t/gu.z)}getViewSize(t,e){return this.getViewBounds(t,uA,fA),e.subVectors(fA,uA)}setViewOffset(t,e,i,a,o,u){this.aspect=t/e,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=i,this.view.offsetY=a,this.view.width=o,this.view.height=u,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=this.near;let e=t*Math.tan(eh*.5*this.fov)/this.zoom,i=2*e,a=this.aspect*i,o=-.5*a;const u=this.view;if(this.view!==null&&this.view.enabled){const d=u.fullWidth,p=u.fullHeight;o+=u.offsetX*a/d,e-=u.offsetY*i/p,a*=u.width/d,i*=u.height/p}const h=this.filmOffset;h!==0&&(o+=t*h/this.getFilmWidth()),this.projectionMatrix.makePerspective(o,o+a,e,e-i,t,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,this.view!==null&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}const Md=-90,Ed=1;class XR extends Gn{constructor(t,e,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const a=new ta(Md,Ed,t,e);a.layers=this.layers,this.add(a);const o=new ta(Md,Ed,t,e);o.layers=this.layers,this.add(o);const u=new ta(Md,Ed,t,e);u.layers=this.layers,this.add(u);const h=new ta(Md,Ed,t,e);h.layers=this.layers,this.add(h);const d=new ta(Md,Ed,t,e);d.layers=this.layers,this.add(d);const p=new ta(Md,Ed,t,e);p.layers=this.layers,this.add(p)}updateCoordinateSystem(){const t=this.coordinateSystem,e=this.children.concat(),[i,a,o,u,h,d]=e;for(const p of e)this.remove(p);if(t===Ao)i.up.set(0,1,0),i.lookAt(1,0,0),a.up.set(0,1,0),a.lookAt(-1,0,0),o.up.set(0,0,-1),o.lookAt(0,1,0),u.up.set(0,0,1),u.lookAt(0,-1,0),h.up.set(0,1,0),h.lookAt(0,0,1),d.up.set(0,1,0),d.lookAt(0,0,-1);else if(t===A0)i.up.set(0,-1,0),i.lookAt(-1,0,0),a.up.set(0,-1,0),a.lookAt(1,0,0),o.up.set(0,0,1),o.lookAt(0,1,0),u.up.set(0,0,-1),u.lookAt(0,-1,0),h.up.set(0,-1,0),h.lookAt(0,0,1),d.up.set(0,-1,0),d.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+t);for(const p of e)this.add(p),p.updateMatrixWorld()}update(t,e){this.parent===null&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:a}=this;this.coordinateSystem!==t.coordinateSystem&&(this.coordinateSystem=t.coordinateSystem,this.updateCoordinateSystem());const[o,u,h,d,p,v]=this.children,_=t.getRenderTarget(),x=t.getActiveCubeFace(),b=t.getActiveMipmapLevel(),E=t.xr.enabled;t.xr.enabled=!1;const R=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,t.setRenderTarget(i,0,a),t.render(e,o),t.setRenderTarget(i,1,a),t.render(e,u),t.setRenderTarget(i,2,a),t.render(e,h),t.setRenderTarget(i,3,a),t.render(e,d),t.setRenderTarget(i,4,a),t.render(e,p),i.texture.generateMipmaps=R,t.setRenderTarget(i,5,a),t.render(e,v),t.setRenderTarget(_,x,b),t.xr.enabled=E,i.texture.needsPMREMUpdate=!0}}class ng extends ci{constructor(t,e,i,a,o,u,h,d,p,v){t=t!==void 0?t:[],e=e!==void 0?e:wl,super(t,e,i,a,o,u,h,d,p,v),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(t){this.image=t}}class hM extends Is{constructor(t=1,e={}){super(t,t,e),this.isWebGLCubeRenderTarget=!0;const i={width:t,height:t,depth:1},a=[i,i,i,i,i,i];this.texture=new ng(a,e.mapping,e.wrapS,e.wrapT,e.magFilter,e.minFilter,e.format,e.type,e.anisotropy,e.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=e.generateMipmaps!==void 0?e.generateMipmaps:!1,this.texture.minFilter=e.minFilter!==void 0?e.minFilter:ai}fromEquirectangularTexture(t,e){this.texture.type=e.type,this.texture.colorSpace=e.colorSpace,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},a=new ph(5,5,5),o=new Kr({name:"CubemapFromEquirect",uniforms:Kd(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:Er,blending:El});o.uniforms.tEquirect.value=e;const u=new Gi(a,o),h=e.minFilter;return e.minFilter===xl&&(e.minFilter=ai),new XR(1,10,this).update(t,u),e.minFilter=h,u.geometry.dispose(),u.material.dispose(),this}clear(t,e,i,a){const o=t.getRenderTarget();for(let u=0;u<6;u++)t.setRenderTarget(this,u),t.clear(e,i,a);t.setRenderTarget(o)}}class Bd extends Gn{constructor(){super(),this.isGroup=!0,this.type="Group"}}const W4={type:"move"};class Q_{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Bd,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Bd,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new J,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new J),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Bd,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new J,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new J),this._grip}dispatchEvent(t){return this._targetRay!==null&&this._targetRay.dispatchEvent(t),this._grip!==null&&this._grip.dispatchEvent(t),this._hand!==null&&this._hand.dispatchEvent(t),this}connect(t){if(t&&t.hand){const e=this._hand;if(e)for(const i of t.hand.values())this._getHandJoint(e,i)}return this.dispatchEvent({type:"connected",data:t}),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(t,e,i){let a=null,o=null,u=null;const h=this._targetRay,d=this._grip,p=this._hand;if(t&&e.session.visibilityState!=="visible-blurred"){if(p&&t.hand){u=!0;for(const R of t.hand.values()){const w=e.getJointPose(R,i),M=this._getHandJoint(p,R);w!==null&&(M.matrix.fromArray(w.transform.matrix),M.matrix.decompose(M.position,M.rotation,M.scale),M.matrixWorldNeedsUpdate=!0,M.jointRadius=w.radius),M.visible=w!==null}const v=p.joints["index-finger-tip"],_=p.joints["thumb-tip"],x=v.position.distanceTo(_.position),b=.02,E=.005;p.inputState.pinching&&x>b+E?(p.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!p.inputState.pinching&&x<=b-E&&(p.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else d!==null&&t.gripSpace&&(o=e.getPose(t.gripSpace,i),o!==null&&(d.matrix.fromArray(o.transform.matrix),d.matrix.decompose(d.position,d.rotation,d.scale),d.matrixWorldNeedsUpdate=!0,o.linearVelocity?(d.hasLinearVelocity=!0,d.linearVelocity.copy(o.linearVelocity)):d.hasLinearVelocity=!1,o.angularVelocity?(d.hasAngularVelocity=!0,d.angularVelocity.copy(o.angularVelocity)):d.hasAngularVelocity=!1));h!==null&&(a=e.getPose(t.targetRaySpace,i),a===null&&o!==null&&(a=o),a!==null&&(h.matrix.fromArray(a.transform.matrix),h.matrix.decompose(h.position,h.rotation,h.scale),h.matrixWorldNeedsUpdate=!0,a.linearVelocity?(h.hasLinearVelocity=!0,h.linearVelocity.copy(a.linearVelocity)):h.hasLinearVelocity=!1,a.angularVelocity?(h.hasAngularVelocity=!0,h.angularVelocity.copy(a.angularVelocity)):h.hasAngularVelocity=!1,this.dispatchEvent(W4)))}return h!==null&&(h.visible=a!==null),d!==null&&(d.visible=o!==null),p!==null&&(p.visible=u!==null),this}_getHandJoint(t,e){if(t.joints[e.jointName]===void 0){const i=new Bd;i.matrixAutoUpdate=!1,i.visible=!1,t.joints[e.jointName]=i,t.add(i)}return t.joints[e.jointName]}}class mx{constructor(t,e=25e-5){this.isFogExp2=!0,this.name="",this.color=new De(t),this.density=e}clone(){return new mx(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class gx{constructor(t,e=1,i=1e3){this.isFog=!0,this.name="",this.color=new De(t),this.near=e,this.far=i}clone(){return new gx(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class ig extends Gn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new gs,this.environmentIntensity=1,this.environmentRotation=new gs,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,e){return super.copy(t,e),t.background!==null&&(this.background=t.background.clone()),t.environment!==null&&(this.environment=t.environment.clone()),t.fog!==null&&(this.fog=t.fog.clone()),this.backgroundBlurriness=t.backgroundBlurriness,this.backgroundIntensity=t.backgroundIntensity,this.backgroundRotation.copy(t.backgroundRotation),this.environmentIntensity=t.environmentIntensity,this.environmentRotation.copy(t.environmentRotation),t.overrideMaterial!==null&&(this.overrideMaterial=t.overrideMaterial.clone()),this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const e=super.toJSON(t);return this.fog!==null&&(e.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(e.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(e.object.backgroundIntensity=this.backgroundIntensity),e.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(e.object.environmentIntensity=this.environmentIntensity),e.object.environmentRotation=this.environmentRotation.toArray(),e}}class vx{constructor(t,e){this.isInterleavedBuffer=!0,this.array=t,this.stride=e,this.count=t!==void 0?t.length/e:0,this.usage=T0,this.updateRanges=[],this.version=0,this.uuid=ps()}onUploadCallback(){}set needsUpdate(t){t===!0&&this.version++}setUsage(t){return this.usage=t,this}addUpdateRange(t,e){this.updateRanges.push({start:t,count:e})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this}copyAt(t,e,i){t*=this.stride,i*=e.stride;for(let a=0,o=this.stride;a<o;a++)this.array[t+a]=e.array[i+a];return this}set(t,e=0){return this.array.set(t,e),this}clone(t){t.arrayBuffers===void 0&&(t.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ps()),t.arrayBuffers[this.array.buffer._uuid]===void 0&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const e=new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(e,this.stride);return i.setUsage(this.usage),i}onUpload(t){return this.onUploadCallback=t,this}toJSON(t){return t.arrayBuffers===void 0&&(t.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ps()),t.arrayBuffers[this.array.buffer._uuid]===void 0&&(t.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const _r=new J;class ch{constructor(t,e,i,a=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=t,this.itemSize=e,this.offset=i,this.normalized=a}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(t){this.data.needsUpdate=t}applyMatrix4(t){for(let e=0,i=this.data.count;e<i;e++)_r.fromBufferAttribute(this,e),_r.applyMatrix4(t),this.setXYZ(e,_r.x,_r.y,_r.z);return this}applyNormalMatrix(t){for(let e=0,i=this.count;e<i;e++)_r.fromBufferAttribute(this,e),_r.applyNormalMatrix(t),this.setXYZ(e,_r.x,_r.y,_r.z);return this}transformDirection(t){for(let e=0,i=this.count;e<i;e++)_r.fromBufferAttribute(this,e),_r.transformDirection(t),this.setXYZ(e,_r.x,_r.y,_r.z);return this}getComponent(t,e){let i=this.array[t*this.data.stride+this.offset+e];return this.normalized&&(i=br(i,this.array)),i}setComponent(t,e,i){return this.normalized&&(i=pn(i,this.array)),this.data.array[t*this.data.stride+this.offset+e]=i,this}setX(t,e){return this.normalized&&(e=pn(e,this.array)),this.data.array[t*this.data.stride+this.offset]=e,this}setY(t,e){return this.normalized&&(e=pn(e,this.array)),this.data.array[t*this.data.stride+this.offset+1]=e,this}setZ(t,e){return this.normalized&&(e=pn(e,this.array)),this.data.array[t*this.data.stride+this.offset+2]=e,this}setW(t,e){return this.normalized&&(e=pn(e,this.array)),this.data.array[t*this.data.stride+this.offset+3]=e,this}getX(t){let e=this.data.array[t*this.data.stride+this.offset];return this.normalized&&(e=br(e,this.array)),e}getY(t){let e=this.data.array[t*this.data.stride+this.offset+1];return this.normalized&&(e=br(e,this.array)),e}getZ(t){let e=this.data.array[t*this.data.stride+this.offset+2];return this.normalized&&(e=br(e,this.array)),e}getW(t){let e=this.data.array[t*this.data.stride+this.offset+3];return this.normalized&&(e=br(e,this.array)),e}setXY(t,e,i){return t=t*this.data.stride+this.offset,this.normalized&&(e=pn(e,this.array),i=pn(i,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=i,this}setXYZ(t,e,i,a){return t=t*this.data.stride+this.offset,this.normalized&&(e=pn(e,this.array),i=pn(i,this.array),a=pn(a,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=i,this.data.array[t+2]=a,this}setXYZW(t,e,i,a,o){return t=t*this.data.stride+this.offset,this.normalized&&(e=pn(e,this.array),i=pn(i,this.array),a=pn(a,this.array),o=pn(o,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=i,this.data.array[t+2]=a,this.data.array[t+3]=o,this}clone(t){if(t===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const e=[];for(let i=0;i<this.count;i++){const a=i*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)e.push(this.data.array[a+o])}return new ui(new this.array.constructor(e),this.itemSize,this.normalized)}else return t.interleavedBuffers===void 0&&(t.interleavedBuffers={}),t.interleavedBuffers[this.data.uuid]===void 0&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new ch(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(t){if(t===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const e=[];for(let i=0;i<this.count;i++){const a=i*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)e.push(this.data.array[a+o])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}else return t.interleavedBuffers===void 0&&(t.interleavedBuffers={}),t.interleavedBuffers[this.data.uuid]===void 0&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class dM extends cr{constructor(t){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new De(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}}let Td;const Dm=new J,Ad=new J,wd=new J,Rd=new jt,Nm=new jt,YR=new $e,h_=new J,Um=new J,d_=new J,hA=new jt,dS=new jt,dA=new jt;class qR extends Gn{constructor(t=new dM){if(super(),this.isSprite=!0,this.type="Sprite",Td===void 0){Td=new xn;const e=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new vx(e,5);Td.setIndex([0,1,2,0,2,3]),Td.setAttribute("position",new ch(i,3,0,!1)),Td.setAttribute("uv",new ch(i,2,3,!1))}this.geometry=Td,this.material=t,this.center=new jt(.5,.5)}raycast(t,e){t.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Ad.setFromMatrixScale(this.matrixWorld),YR.copy(t.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(t.camera.matrixWorldInverse,this.matrixWorld),wd.setFromMatrixPosition(this.modelViewMatrix),t.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Ad.multiplyScalar(-wd.z);const i=this.material.rotation;let a,o;i!==0&&(o=Math.cos(i),a=Math.sin(i));const u=this.center;p_(h_.set(-.5,-.5,0),wd,u,Ad,a,o),p_(Um.set(.5,-.5,0),wd,u,Ad,a,o),p_(d_.set(.5,.5,0),wd,u,Ad,a,o),hA.set(0,0),dS.set(1,0),dA.set(1,1);let h=t.ray.intersectTriangle(h_,Um,d_,!1,Dm);if(h===null&&(p_(Um.set(-.5,.5,0),wd,u,Ad,a,o),dS.set(0,1),h=t.ray.intersectTriangle(h_,d_,Um,!1,Dm),h===null))return;const d=t.ray.origin.distanceTo(Dm);d<t.near||d>t.far||e.push({distance:d,point:Dm.clone(),uv:qr.getInterpolation(Dm,h_,Um,d_,hA,dS,dA,new jt),face:null,object:this})}copy(t,e){return super.copy(t,e),t.center!==void 0&&this.center.copy(t.center),this.material=t.material,this}}function p_(n,t,e,i,a,o){Rd.subVectors(n,e).addScalar(.5).multiply(i),a!==void 0?(Nm.x=o*Rd.x-a*Rd.y,Nm.y=a*Rd.x+o*Rd.y):Nm.copy(Rd),n.copy(t),n.x+=Nm.x,n.y+=Nm.y,n.applyMatrix4(YR)}const m_=new J,pA=new J;class ZR extends Gn{constructor(){super(),this.isLOD=!0,this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}copy(t){super.copy(t,!1);const e=t.levels;for(let i=0,a=e.length;i<a;i++){const o=e[i];this.addLevel(o.object.clone(),o.distance,o.hysteresis)}return this.autoUpdate=t.autoUpdate,this}addLevel(t,e=0,i=0){e=Math.abs(e);const a=this.levels;let o;for(o=0;o<a.length&&!(e<a[o].distance);o++);return a.splice(o,0,{distance:e,hysteresis:i,object:t}),this.add(t),this}removeLevel(t){const e=this.levels;for(let i=0;i<e.length;i++)if(e[i].distance===t){const a=e.splice(i,1);return this.remove(a[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(t){const e=this.levels;if(e.length>0){let i,a;for(i=1,a=e.length;i<a;i++){let o=e[i].distance;if(e[i].object.visible&&(o-=o*e[i].hysteresis),t<o)break}return e[i-1].object}return null}raycast(t,e){if(this.levels.length>0){m_.setFromMatrixPosition(this.matrixWorld);const a=t.ray.origin.distanceTo(m_);this.getObjectForDistance(a).raycast(t,e)}}update(t){const e=this.levels;if(e.length>1){m_.setFromMatrixPosition(t.matrixWorld),pA.setFromMatrixPosition(this.matrixWorld);const i=m_.distanceTo(pA)/t.zoom;e[0].object.visible=!0;let a,o;for(a=1,o=e.length;a<o;a++){let u=e[a].distance;if(e[a].object.visible&&(u-=u*e[a].hysteresis),i>=u)e[a-1].object.visible=!1,e[a].object.visible=!0;else break}for(this._currentLevel=a-1;a<o;a++)e[a].object.visible=!1}}toJSON(t){const e=super.toJSON(t);this.autoUpdate===!1&&(e.object.autoUpdate=!1),e.object.levels=[];const i=this.levels;for(let a=0,o=i.length;a<o;a++){const u=i[a];e.object.levels.push({object:u.object.uuid,distance:u.distance,hysteresis:u.hysteresis})}return e}}const mA=new J,gA=new Fn,vA=new Fn,j4=new J,_A=new $e,g_=new J,pS=new or,yA=new $e,mS=new dh;class WR extends Gi{constructor(t,e){super(t,e),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=mb,this.bindMatrix=new $e,this.bindMatrixInverse=new $e,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const t=this.geometry;this.boundingBox===null&&(this.boundingBox=new Tr),this.boundingBox.makeEmpty();const e=t.getAttribute("position");for(let i=0;i<e.count;i++)this.getVertexPosition(i,g_),this.boundingBox.expandByPoint(g_)}computeBoundingSphere(){const t=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new or),this.boundingSphere.makeEmpty();const e=t.getAttribute("position");for(let i=0;i<e.count;i++)this.getVertexPosition(i,g_),this.boundingSphere.expandByPoint(g_)}copy(t,e){return super.copy(t,e),this.bindMode=t.bindMode,this.bindMatrix.copy(t.bindMatrix),this.bindMatrixInverse.copy(t.bindMatrixInverse),this.skeleton=t.skeleton,t.boundingBox!==null&&(this.boundingBox=t.boundingBox.clone()),t.boundingSphere!==null&&(this.boundingSphere=t.boundingSphere.clone()),this}raycast(t,e){const i=this.material,a=this.matrixWorld;i!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),pS.copy(this.boundingSphere),pS.applyMatrix4(a),t.ray.intersectsSphere(pS)!==!1&&(yA.copy(a).invert(),mS.copy(t.ray).applyMatrix4(yA),!(this.boundingBox!==null&&mS.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(t,e,mS)))}getVertexPosition(t,e){return super.getVertexPosition(t,e),this.applyBoneTransform(t,e),e}bind(t,e){this.skeleton=t,e===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.copy(e).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const t=new Fn,e=this.geometry.attributes.skinWeight;for(let i=0,a=e.count;i<a;i++){t.fromBufferAttribute(e,i);const o=1/t.manhattanLength();o!==1/0?t.multiplyScalar(o):t.set(1,0,0,0),e.setXYZW(i,t.x,t.y,t.z,t.w)}}updateMatrixWorld(t){super.updateMatrixWorld(t),this.bindMode===mb?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===ER?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(t,e){const i=this.skeleton,a=this.geometry;gA.fromBufferAttribute(a.attributes.skinIndex,t),vA.fromBufferAttribute(a.attributes.skinWeight,t),mA.copy(e).applyMatrix4(this.bindMatrix),e.set(0,0,0);for(let o=0;o<4;o++){const u=vA.getComponent(o);if(u!==0){const h=gA.getComponent(o);_A.multiplyMatrices(i.bones[h].matrixWorld,i.boneInverses[h]),e.addScaledVector(j4.copy(mA).applyMatrix4(_A),u)}}return e.applyMatrix4(this.bindMatrixInverse)}}class pM extends Gn{constructor(){super(),this.isBone=!0,this.type="Bone"}}class wo extends ci{constructor(t=null,e=1,i=1,a,o,u,h,d,p=Xa,v=Xa,_,x){super(null,u,h,d,p,v,a,o,_,x),this.isDataTexture=!0,this.image={data:t,width:e,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const xA=new $e,K4=new $e;class _x{constructor(t=[],e=[]){this.uuid=ps(),this.bones=t.slice(0),this.boneInverses=e,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const t=this.bones,e=this.boneInverses;if(this.boneMatrices=new Float32Array(t.length*16),e.length===0)this.calculateInverses();else if(t.length!==e.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,a=this.bones.length;i<a;i++)this.boneInverses.push(new $e)}}calculateInverses(){this.boneInverses.length=0;for(let t=0,e=this.bones.length;t<e;t++){const i=new $e;this.bones[t]&&i.copy(this.bones[t].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let t=0,e=this.bones.length;t<e;t++){const i=this.bones[t];i&&i.matrixWorld.copy(this.boneInverses[t]).invert()}for(let t=0,e=this.bones.length;t<e;t++){const i=this.bones[t];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const t=this.bones,e=this.boneInverses,i=this.boneMatrices,a=this.boneTexture;for(let o=0,u=t.length;o<u;o++){const h=t[o]?t[o].matrixWorld:K4;xA.multiplyMatrices(h,e[o]),xA.toArray(i,o*16)}a!==null&&(a.needsUpdate=!0)}clone(){return new _x(this.bones,this.boneInverses)}computeBoneTexture(){let t=Math.sqrt(this.bones.length*4);t=Math.ceil(t/4)*4,t=Math.max(t,4);const e=new Float32Array(t*t*4);e.set(this.boneMatrices);const i=new wo(e,t,t,ea,Fi);return i.needsUpdate=!0,this.boneMatrices=e,this.boneTexture=i,this}getBoneByName(t){for(let e=0,i=this.bones.length;e<i;e++){const a=this.bones[e];if(a.name===t)return a}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(t,e){this.uuid=t.uuid;for(let i=0,a=t.bones.length;i<a;i++){const o=t.bones[i];let u=e[o];u===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",o),u=new pM),this.bones.push(u),this.boneInverses.push(new $e().fromArray(t.boneInverses[i]))}return this.init(),this}toJSON(){const t={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};t.uuid=this.uuid;const e=this.bones,i=this.boneInverses;for(let a=0,o=e.length;a<o;a++){const u=e[a];t.bones.push(u.uuid);const h=i[a];t.boneInverses.push(h.toArray())}return t}}class Qd extends ui{constructor(t,e,i,a=1){super(t,e,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=a}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}toJSON(){const t=super.toJSON();return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}}const Cd=new $e,SA=new $e,v_=[],bA=new Tr,Q4=new $e,Om=new Gi,Lm=new or;class jR extends Gi{constructor(t,e,i){super(t,e),this.isInstancedMesh=!0,this.instanceMatrix=new Qd(new Float32Array(i*16),16),this.instanceColor=null,this.morphTexture=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let a=0;a<i;a++)this.setMatrixAt(a,Q4)}computeBoundingBox(){const t=this.geometry,e=this.count;this.boundingBox===null&&(this.boundingBox=new Tr),t.boundingBox===null&&t.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<e;i++)this.getMatrixAt(i,Cd),bA.copy(t.boundingBox).applyMatrix4(Cd),this.boundingBox.union(bA)}computeBoundingSphere(){const t=this.geometry,e=this.count;this.boundingSphere===null&&(this.boundingSphere=new or),t.boundingSphere===null&&t.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<e;i++)this.getMatrixAt(i,Cd),Lm.copy(t.boundingSphere).applyMatrix4(Cd),this.boundingSphere.union(Lm)}copy(t,e){return super.copy(t,e),this.instanceMatrix.copy(t.instanceMatrix),t.morphTexture!==null&&(this.morphTexture=t.morphTexture.clone()),t.instanceColor!==null&&(this.instanceColor=t.instanceColor.clone()),this.count=t.count,t.boundingBox!==null&&(this.boundingBox=t.boundingBox.clone()),t.boundingSphere!==null&&(this.boundingSphere=t.boundingSphere.clone()),this}getColorAt(t,e){e.fromArray(this.instanceColor.array,t*3)}getMatrixAt(t,e){e.fromArray(this.instanceMatrix.array,t*16)}getMorphAt(t,e){const i=e.morphTargetInfluences,a=this.morphTexture.source.data.data,o=i.length+1,u=t*o+1;for(let h=0;h<i.length;h++)i[h]=a[u+h]}raycast(t,e){const i=this.matrixWorld,a=this.count;if(Om.geometry=this.geometry,Om.material=this.material,Om.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Lm.copy(this.boundingSphere),Lm.applyMatrix4(i),t.ray.intersectsSphere(Lm)!==!1))for(let o=0;o<a;o++){this.getMatrixAt(o,Cd),SA.multiplyMatrices(i,Cd),Om.matrixWorld=SA,Om.raycast(t,v_);for(let u=0,h=v_.length;u<h;u++){const d=v_[u];d.instanceId=o,d.object=this,e.push(d)}v_.length=0}}setColorAt(t,e){this.instanceColor===null&&(this.instanceColor=new Qd(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),e.toArray(this.instanceColor.array,t*3)}setMatrixAt(t,e){e.toArray(this.instanceMatrix.array,t*16)}setMorphAt(t,e){const i=e.morphTargetInfluences,a=i.length+1;this.morphTexture===null&&(this.morphTexture=new wo(new Float32Array(a*this.count),a,this.count,$0,Fi));const o=this.morphTexture.source.data.data;let u=0;for(let p=0;p<i.length;p++)u+=i[p];const h=this.geometry.morphTargetsRelative?1:1-u,d=a*t;o[d]=h,o.set(i,d+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null)}}const gS=new J,J4=new J,$4=new hn;class mc{constructor(t=new J(1,0,0),e=0){this.isPlane=!0,this.normal=t,this.constant=e}set(t,e){return this.normal.copy(t),this.constant=e,this}setComponents(t,e,i,a){return this.normal.set(t,e,i),this.constant=a,this}setFromNormalAndCoplanarPoint(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}setFromCoplanarPoints(t,e,i){const a=gS.subVectors(i,e).cross(J4.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(a,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,e){return e.copy(t).addScaledVector(this.normal,-this.distanceToPoint(t))}intersectLine(t,e){const i=t.delta(gS),a=this.normal.dot(i);if(a===0)return this.distanceToPoint(t.start)===0?e.copy(t.start):null;const o=-(t.start.dot(this.normal)+this.constant)/a;return o<0||o>1?null:e.copy(t.start).addScaledVector(i,o)}intersectsLine(t){const e=this.distanceToPoint(t.start),i=this.distanceToPoint(t.end);return e<0&&i>0||i<0&&e>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,e){const i=e||$4.getNormalMatrix(t),a=this.coplanarPoint(gS).applyMatrix4(t),o=this.normal.applyMatrix3(i).normalize();return this.constant=-a.dot(o),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return new this.constructor().copy(this)}}const wf=new or,__=new J;class ag{constructor(t=new mc,e=new mc,i=new mc,a=new mc,o=new mc,u=new mc){this.planes=[t,e,i,a,o,u]}set(t,e,i,a,o,u){const h=this.planes;return h[0].copy(t),h[1].copy(e),h[2].copy(i),h[3].copy(a),h[4].copy(o),h[5].copy(u),this}copy(t){const e=this.planes;for(let i=0;i<6;i++)e[i].copy(t.planes[i]);return this}setFromProjectionMatrix(t,e=Ao){const i=this.planes,a=t.elements,o=a[0],u=a[1],h=a[2],d=a[3],p=a[4],v=a[5],_=a[6],x=a[7],b=a[8],E=a[9],R=a[10],w=a[11],M=a[12],C=a[13],U=a[14],D=a[15];if(i[0].setComponents(d-o,x-p,w-b,D-M).normalize(),i[1].setComponents(d+o,x+p,w+b,D+M).normalize(),i[2].setComponents(d+u,x+v,w+E,D+C).normalize(),i[3].setComponents(d-u,x-v,w-E,D-C).normalize(),i[4].setComponents(d-h,x-_,w-R,D-U).normalize(),e===Ao)i[5].setComponents(d+h,x+_,w+R,D+U).normalize();else if(e===A0)i[5].setComponents(h,_,R,U).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+e);return this}intersectsObject(t){if(t.boundingSphere!==void 0)t.boundingSphere===null&&t.computeBoundingSphere(),wf.copy(t.boundingSphere).applyMatrix4(t.matrixWorld);else{const e=t.geometry;e.boundingSphere===null&&e.computeBoundingSphere(),wf.copy(e.boundingSphere).applyMatrix4(t.matrixWorld)}return this.intersectsSphere(wf)}intersectsSprite(t){return wf.center.set(0,0,0),wf.radius=.7071067811865476,wf.applyMatrix4(t.matrixWorld),this.intersectsSphere(wf)}intersectsSphere(t){const e=this.planes,i=t.center,a=-t.radius;for(let o=0;o<6;o++)if(e[o].distanceToPoint(i)<a)return!1;return!0}intersectsBox(t){const e=this.planes;for(let i=0;i<6;i++){const a=e[i];if(__.x=a.normal.x>0?t.max.x:t.min.x,__.y=a.normal.y>0?t.max.y:t.min.y,__.z=a.normal.z>0?t.max.z:t.min.z,a.distanceToPoint(__)<0)return!1}return!0}containsPoint(t){const e=this.planes;for(let i=0;i<6;i++)if(e[i].distanceToPoint(t)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function vS(n,t){return n-t}function tB(n,t){return n.z-t.z}function eB(n,t){return t.z-n.z}class nB{constructor(){this.index=0,this.pool=[],this.list=[]}push(t,e,i,a){const o=this.pool,u=this.list;this.index>=o.length&&o.push({start:-1,count:-1,z:-1,index:-1});const h=o[this.index];u.push(h),this.index++,h.start=t,h.count=e,h.z=i,h.index=a}reset(){this.list.length=0,this.index=0}}const kr=new $e,iB=new De(1,1,1),_S=new ag,y_=new Tr,Rf=new or,zm=new J,MA=new J,aB=new J,yS=new nB,ar=new Gi,x_=[];function rB(n,t,e=0){const i=t.itemSize;if(n.isInterleavedBufferAttribute||n.array.constructor!==t.array.constructor){const a=n.count;for(let o=0;o<a;o++)for(let u=0;u<i;u++)t.setComponent(o+e,u,n.getComponent(o,u))}else t.array.set(n.array,e*i);t.needsUpdate=!0}function Cf(n,t){if(n.constructor!==t.constructor){const e=Math.min(n.length,t.length);for(let i=0;i<e;i++)t[i]=n[i]}else{const e=Math.min(n.length,t.length);t.set(new n.constructor(n.buffer,0,e))}}class KR extends Gi{constructor(t,e,i=e*2,a){super(new xn,a),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=t,this._maxVertexCount=e,this._maxIndexCount=i,this._multiDrawCounts=new Int32Array(t),this._multiDrawStarts=new Int32Array(t),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}_initMatricesTexture(){let t=Math.sqrt(this._maxInstanceCount*4);t=Math.ceil(t/4)*4,t=Math.max(t,4);const e=new Float32Array(t*t*4),i=new wo(e,t,t,ea,Fi);this._matricesTexture=i}_initIndirectTexture(){let t=Math.sqrt(this._maxInstanceCount);t=Math.ceil(t);const e=new Uint32Array(t*t),i=new wo(e,t,t,tg,Rl);this._indirectTexture=i}_initColorsTexture(){let t=Math.sqrt(this._maxInstanceCount);t=Math.ceil(t);const e=new Float32Array(t*t*4).fill(1),i=new wo(e,t,t,ea,Fi);i.colorSpace=On.workingColorSpace,this._colorsTexture=i}_initializeGeometry(t){const e=this.geometry,i=this._maxVertexCount,a=this._maxIndexCount;if(this._geometryInitialized===!1){for(const o in t.attributes){const u=t.getAttribute(o),{array:h,itemSize:d,normalized:p}=u,v=new h.constructor(i*d),_=new ui(v,d,p);e.setAttribute(o,_)}if(t.getIndex()!==null){const o=i>65535?new Uint32Array(a):new Uint16Array(a);e.setIndex(new ui(o,1))}this._geometryInitialized=!0}}_validateGeometry(t){const e=this.geometry;if(!!t.getIndex()!=!!e.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const i in e.attributes){if(!t.hasAttribute(i))throw new Error(`THREE.BatchedMesh: Added geometry missing "${i}". All geometries must have consistent attributes.`);const a=t.getAttribute(i),o=e.getAttribute(i);if(a.itemSize!==o.itemSize||a.normalized!==o.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(t){const e=this._instanceInfo;if(t<0||t>=e.length||e[t].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${t}. Instance is either out of range or has been deleted.`)}validateGeometryId(t){const e=this._geometryInfo;if(t<0||t>=e.length||e[t].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${t}. Geometry is either out of range or has been deleted.`)}setCustomSort(t){return this.customSort=t,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Tr);const t=this.boundingBox,e=this._instanceInfo;t.makeEmpty();for(let i=0,a=e.length;i<a;i++){if(e[i].active===!1)continue;const o=e[i].geometryIndex;this.getMatrixAt(i,kr),this.getBoundingBoxAt(o,y_).applyMatrix4(kr),t.union(y_)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new or);const t=this.boundingSphere,e=this._instanceInfo;t.makeEmpty();for(let i=0,a=e.length;i<a;i++){if(e[i].active===!1)continue;const o=e[i].geometryIndex;this.getMatrixAt(i,kr),this.getBoundingSphereAt(o,Rf).applyMatrix4(kr),t.union(Rf)}}addInstance(t){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const i={visible:!0,active:!0,geometryIndex:t};let a=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(vS),a=this._availableInstanceIds.shift(),this._instanceInfo[a]=i):(a=this._instanceInfo.length,this._instanceInfo.push(i));const o=this._matricesTexture;kr.identity().toArray(o.image.data,a*16),o.needsUpdate=!0;const u=this._colorsTexture;return u&&(iB.toArray(u.image.data,a*4),u.needsUpdate=!0),this._visibilityChanged=!0,a}addGeometry(t,e=-1,i=-1){this._initializeGeometry(t),this._validateGeometry(t);const a={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},o=this._geometryInfo;a.vertexStart=this._nextVertexStart,a.reservedVertexCount=e===-1?t.getAttribute("position").count:e;const u=t.getIndex();if(u!==null&&(a.indexStart=this._nextIndexStart,a.reservedIndexCount=i===-1?u.count:i),a.indexStart!==-1&&a.indexStart+a.reservedIndexCount>this._maxIndexCount||a.vertexStart+a.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let d;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(vS),d=this._availableGeometryIds.shift(),o[d]=a):(d=this._geometryCount,this._geometryCount++,o.push(a)),this.setGeometryAt(d,t),this._nextIndexStart=a.indexStart+a.reservedIndexCount,this._nextVertexStart=a.vertexStart+a.reservedVertexCount,d}setGeometryAt(t,e){if(t>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(e);const i=this.geometry,a=i.getIndex()!==null,o=i.getIndex(),u=e.getIndex(),h=this._geometryInfo[t];if(a&&u.count>h.reservedIndexCount||e.attributes.position.count>h.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const d=h.vertexStart,p=h.reservedVertexCount;h.vertexCount=e.getAttribute("position").count;for(const v in i.attributes){const _=e.getAttribute(v),x=i.getAttribute(v);rB(_,x,d);const b=_.itemSize;for(let E=_.count,R=p;E<R;E++){const w=d+E;for(let M=0;M<b;M++)x.setComponent(w,M,0)}x.needsUpdate=!0,x.addUpdateRange(d*b,p*b)}if(a){const v=h.indexStart,_=h.reservedIndexCount;h.indexCount=e.getIndex().count;for(let x=0;x<u.count;x++)o.setX(v+x,d+u.getX(x));for(let x=u.count,b=_;x<b;x++)o.setX(v+x,d);o.needsUpdate=!0,o.addUpdateRange(v,h.reservedIndexCount)}return h.start=a?h.indexStart:h.vertexStart,h.count=a?h.indexCount:h.vertexCount,h.boundingBox=null,e.boundingBox!==null&&(h.boundingBox=e.boundingBox.clone()),h.boundingSphere=null,e.boundingSphere!==null&&(h.boundingSphere=e.boundingSphere.clone()),this._visibilityChanged=!0,t}deleteGeometry(t){const e=this._geometryInfo;if(t>=e.length||e[t].active===!1)return this;const i=this._instanceInfo;for(let a=0,o=i.length;a<o;a++)i[a].active&&i[a].geometryIndex===t&&this.deleteInstance(a);return e[t].active=!1,this._availableGeometryIds.push(t),this._visibilityChanged=!0,this}deleteInstance(t){return this.validateInstanceId(t),this._instanceInfo[t].active=!1,this._availableInstanceIds.push(t),this._visibilityChanged=!0,this}optimize(){let t=0,e=0;const i=this._geometryInfo,a=i.map((u,h)=>h).sort((u,h)=>i[u].vertexStart-i[h].vertexStart),o=this.geometry;for(let u=0,h=i.length;u<h;u++){const d=a[u],p=i[d];if(p.active!==!1){if(o.index!==null){if(p.indexStart!==e){const{indexStart:v,vertexStart:_,reservedIndexCount:x}=p,b=o.index,E=b.array,R=t-_;for(let w=v;w<v+x;w++)E[w]=E[w]+R;b.array.copyWithin(e,v,v+x),b.addUpdateRange(e,x),p.indexStart=e}e+=p.reservedIndexCount}if(p.vertexStart!==t){const{vertexStart:v,reservedVertexCount:_}=p,x=o.attributes;for(const b in x){const E=x[b],{array:R,itemSize:w}=E;R.copyWithin(t*w,v*w,(v+_)*w),E.addUpdateRange(t*w,_*w)}p.vertexStart=t}t+=p.reservedVertexCount,p.start=o.index?p.indexStart:p.vertexStart,this._nextIndexStart=o.index?p.indexStart+p.reservedIndexCount:0,this._nextVertexStart=p.vertexStart+p.reservedVertexCount}}return this}getBoundingBoxAt(t,e){if(t>=this._geometryCount)return null;const i=this.geometry,a=this._geometryInfo[t];if(a.boundingBox===null){const o=new Tr,u=i.index,h=i.attributes.position;for(let d=a.start,p=a.start+a.count;d<p;d++){let v=d;u&&(v=u.getX(v)),o.expandByPoint(zm.fromBufferAttribute(h,v))}a.boundingBox=o}return e.copy(a.boundingBox),e}getBoundingSphereAt(t,e){if(t>=this._geometryCount)return null;const i=this.geometry,a=this._geometryInfo[t];if(a.boundingSphere===null){const o=new or;this.getBoundingBoxAt(t,y_),y_.getCenter(o.center);const u=i.index,h=i.attributes.position;let d=0;for(let p=a.start,v=a.start+a.count;p<v;p++){let _=p;u&&(_=u.getX(_)),zm.fromBufferAttribute(h,_),d=Math.max(d,o.center.distanceToSquared(zm))}o.radius=Math.sqrt(d),a.boundingSphere=o}return e.copy(a.boundingSphere),e}setMatrixAt(t,e){this.validateInstanceId(t);const i=this._matricesTexture,a=this._matricesTexture.image.data;return e.toArray(a,t*16),i.needsUpdate=!0,this}getMatrixAt(t,e){return this.validateInstanceId(t),e.fromArray(this._matricesTexture.image.data,t*16)}setColorAt(t,e){return this.validateInstanceId(t),this._colorsTexture===null&&this._initColorsTexture(),e.toArray(this._colorsTexture.image.data,t*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(t,e){return this.validateInstanceId(t),e.fromArray(this._colorsTexture.image.data,t*4)}setVisibleAt(t,e){return this.validateInstanceId(t),this._instanceInfo[t].visible===e?this:(this._instanceInfo[t].visible=e,this._visibilityChanged=!0,this)}getVisibleAt(t){return this.validateInstanceId(t),this._instanceInfo[t].visible}setGeometryIdAt(t,e){return this.validateInstanceId(t),this.validateGeometryId(e),this._instanceInfo[t].geometryIndex=e,this}getGeometryIdAt(t){return this.validateInstanceId(t),this._instanceInfo[t].geometryIndex}getGeometryRangeAt(t,e={}){this.validateGeometryId(t);const i=this._geometryInfo[t];return e.vertexStart=i.vertexStart,e.vertexCount=i.vertexCount,e.reservedVertexCount=i.reservedVertexCount,e.indexStart=i.indexStart,e.indexCount=i.indexCount,e.reservedIndexCount=i.reservedIndexCount,e.start=i.start,e.count=i.count,e}setInstanceCount(t){const e=this._availableInstanceIds,i=this._instanceInfo;for(e.sort(vS);e[e.length-1]===i.length;)i.pop(),e.pop();if(t<i.length)throw new Error(`BatchedMesh: Instance ids outside the range ${t} are being used. Cannot shrink instance count.`);const a=new Int32Array(t),o=new Int32Array(t);Cf(this._multiDrawCounts,a),Cf(this._multiDrawStarts,o),this._multiDrawCounts=a,this._multiDrawStarts=o,this._maxInstanceCount=t;const u=this._indirectTexture,h=this._matricesTexture,d=this._colorsTexture;u.dispose(),this._initIndirectTexture(),Cf(u.image.data,this._indirectTexture.image.data),h.dispose(),this._initMatricesTexture(),Cf(h.image.data,this._matricesTexture.image.data),d&&(d.dispose(),this._initColorsTexture(),Cf(d.image.data,this._colorsTexture.image.data))}setGeometrySize(t,e){const i=[...this._geometryInfo].filter(h=>h.active);if(Math.max(...i.map(h=>h.vertexStart+h.reservedVertexCount))>t)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${e}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...i.map(d=>d.indexStart+d.reservedIndexCount))>e)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${e}. Cannot shrink further.`);const o=this.geometry;o.dispose(),this._maxVertexCount=t,this._maxIndexCount=e,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new xn,this._initializeGeometry(o));const u=this.geometry;o.index&&Cf(o.index.array,u.index.array);for(const h in o.attributes)Cf(o.attributes[h].array,u.attributes[h].array)}raycast(t,e){const i=this._instanceInfo,a=this._geometryInfo,o=this.matrixWorld,u=this.geometry;ar.material=this.material,ar.geometry.index=u.index,ar.geometry.attributes=u.attributes,ar.geometry.boundingBox===null&&(ar.geometry.boundingBox=new Tr),ar.geometry.boundingSphere===null&&(ar.geometry.boundingSphere=new or);for(let h=0,d=i.length;h<d;h++){if(!i[h].visible||!i[h].active)continue;const p=i[h].geometryIndex,v=a[p];ar.geometry.setDrawRange(v.start,v.count),this.getMatrixAt(h,ar.matrixWorld).premultiply(o),this.getBoundingBoxAt(p,ar.geometry.boundingBox),this.getBoundingSphereAt(p,ar.geometry.boundingSphere),ar.raycast(t,x_);for(let _=0,x=x_.length;_<x;_++){const b=x_[_];b.object=this,b.batchId=h,e.push(b)}x_.length=0}ar.material=null,ar.geometry.index=null,ar.geometry.attributes={},ar.geometry.setDrawRange(0,1/0)}copy(t){return super.copy(t),this.geometry=t.geometry.clone(),this.perObjectFrustumCulled=t.perObjectFrustumCulled,this.sortObjects=t.sortObjects,this.boundingBox=t.boundingBox!==null?t.boundingBox.clone():null,this.boundingSphere=t.boundingSphere!==null?t.boundingSphere.clone():null,this._geometryInfo=t._geometryInfo.map(e=>({...e,boundingBox:e.boundingBox!==null?e.boundingBox.clone():null,boundingSphere:e.boundingSphere!==null?e.boundingSphere.clone():null})),this._instanceInfo=t._instanceInfo.map(e=>({...e})),this._maxInstanceCount=t._maxInstanceCount,this._maxVertexCount=t._maxVertexCount,this._maxIndexCount=t._maxIndexCount,this._geometryInitialized=t._geometryInitialized,this._geometryCount=t._geometryCount,this._multiDrawCounts=t._multiDrawCounts.slice(),this._multiDrawStarts=t._multiDrawStarts.slice(),this._matricesTexture=t._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=t._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null)}onBeforeRender(t,e,i,a,o){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const u=a.getIndex(),h=u===null?1:u.array.BYTES_PER_ELEMENT,d=this._instanceInfo,p=this._multiDrawStarts,v=this._multiDrawCounts,_=this._geometryInfo,x=this.perObjectFrustumCulled,b=this._indirectTexture,E=b.image.data;x&&(kr.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse).multiply(this.matrixWorld),_S.setFromProjectionMatrix(kr,t.coordinateSystem));let R=0;if(this.sortObjects){kr.copy(this.matrixWorld).invert(),zm.setFromMatrixPosition(i.matrixWorld).applyMatrix4(kr),MA.set(0,0,-1).transformDirection(i.matrixWorld).transformDirection(kr);for(let C=0,U=d.length;C<U;C++)if(d[C].visible&&d[C].active){const D=d[C].geometryIndex;this.getMatrixAt(C,kr),this.getBoundingSphereAt(D,Rf).applyMatrix4(kr);let z=!1;if(x&&(z=!_S.intersectsSphere(Rf)),!z){const B=_[D],F=aB.subVectors(Rf.center,zm).dot(MA);yS.push(B.start,B.count,F,C)}}const w=yS.list,M=this.customSort;M===null?w.sort(o.transparent?eB:tB):M.call(this,w,i);for(let C=0,U=w.length;C<U;C++){const D=w[C];p[R]=D.start*h,v[R]=D.count,E[R]=D.index,R++}yS.reset()}else for(let w=0,M=d.length;w<M;w++)if(d[w].visible&&d[w].active){const C=d[w].geometryIndex;let U=!1;if(x&&(this.getMatrixAt(w,kr),this.getBoundingSphereAt(C,Rf).applyMatrix4(kr),U=!_S.intersectsSphere(Rf)),!U){const D=_[C];p[R]=D.start*h,v[R]=D.count,E[R]=w,R++}}b.needsUpdate=!0,this._multiDrawCount=R,this._visibilityChanged=!1}onBeforeShadow(t,e,i,a,o,u){this.onBeforeRender(t,null,a,o,u)}}class Ar extends cr{constructor(t){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new De(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.fog=t.fog,this}}const ky=new J,Xy=new J,EA=new $e,Bm=new dh,S_=new or,xS=new J,TA=new J;class Du extends Gn{constructor(t=new xn,e=new Ar){super(),this.isLine=!0,this.type="Line",this.geometry=t,this.material=e,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}computeLineDistances(){const t=this.geometry;if(t.index===null){const e=t.attributes.position,i=[0];for(let a=1,o=e.count;a<o;a++)ky.fromBufferAttribute(e,a-1),Xy.fromBufferAttribute(e,a),i[a]=i[a-1],i[a]+=ky.distanceTo(Xy);t.setAttribute("lineDistance",new He(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(t,e){const i=this.geometry,a=this.matrixWorld,o=t.params.Line.threshold,u=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),S_.copy(i.boundingSphere),S_.applyMatrix4(a),S_.radius+=o,t.ray.intersectsSphere(S_)===!1)return;EA.copy(a).invert(),Bm.copy(t.ray).applyMatrix4(EA);const h=o/((this.scale.x+this.scale.y+this.scale.z)/3),d=h*h,p=this.isLineSegments?2:1,v=i.index,x=i.attributes.position;if(v!==null){const b=Math.max(0,u.start),E=Math.min(v.count,u.start+u.count);for(let R=b,w=E-1;R<w;R+=p){const M=v.getX(R),C=v.getX(R+1),U=b_(this,t,Bm,d,M,C,R);U&&e.push(U)}if(this.isLineLoop){const R=v.getX(E-1),w=v.getX(b),M=b_(this,t,Bm,d,R,w,E-1);M&&e.push(M)}}else{const b=Math.max(0,u.start),E=Math.min(x.count,u.start+u.count);for(let R=b,w=E-1;R<w;R+=p){const M=b_(this,t,Bm,d,R,R+1,R);M&&e.push(M)}if(this.isLineLoop){const R=b_(this,t,Bm,d,E-1,b,E-1);R&&e.push(R)}}}updateMorphTargets(){const e=this.geometry.morphAttributes,i=Object.keys(e);if(i.length>0){const a=e[i[0]];if(a!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,u=a.length;o<u;o++){const h=a[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[h]=o}}}}}function b_(n,t,e,i,a,o,u){const h=n.geometry.attributes.position;if(ky.fromBufferAttribute(h,a),Xy.fromBufferAttribute(h,o),e.distanceSqToSegment(ky,Xy,xS,TA)>i)return;xS.applyMatrix4(n.matrixWorld);const p=t.ray.origin.distanceTo(xS);if(!(p<t.near||p>t.far))return{distance:p,point:TA.clone().applyMatrix4(n.matrixWorld),index:u,face:null,faceIndex:null,barycoord:null,object:n}}const AA=new J,wA=new J;class Dl extends Du{constructor(t,e){super(t,e),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const t=this.geometry;if(t.index===null){const e=t.attributes.position,i=[];for(let a=0,o=e.count;a<o;a+=2)AA.fromBufferAttribute(e,a),wA.fromBufferAttribute(e,a+1),i[a]=a===0?0:i[a-1],i[a+1]=i[a]+AA.distanceTo(wA);t.setAttribute("lineDistance",new He(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class QR extends Du{constructor(t,e){super(t,e),this.isLineLoop=!0,this.type="LineLoop"}}class mM extends cr{constructor(t){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new De(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}}const RA=new $e,yb=new dh,M_=new or,E_=new J;class JR extends Gn{constructor(t=new xn,e=new mM){super(),this.isPoints=!0,this.type="Points",this.geometry=t,this.material=e,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}raycast(t,e){const i=this.geometry,a=this.matrixWorld,o=t.params.Points.threshold,u=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),M_.copy(i.boundingSphere),M_.applyMatrix4(a),M_.radius+=o,t.ray.intersectsSphere(M_)===!1)return;RA.copy(a).invert(),yb.copy(t.ray).applyMatrix4(RA);const h=o/((this.scale.x+this.scale.y+this.scale.z)/3),d=h*h,p=i.index,_=i.attributes.position;if(p!==null){const x=Math.max(0,u.start),b=Math.min(p.count,u.start+u.count);for(let E=x,R=b;E<R;E++){const w=p.getX(E);E_.fromBufferAttribute(_,w),CA(E_,w,d,a,t,e,this)}}else{const x=Math.max(0,u.start),b=Math.min(_.count,u.start+u.count);for(let E=x,R=b;E<R;E++)E_.fromBufferAttribute(_,E),CA(E_,E,d,a,t,e,this)}}updateMorphTargets(){const e=this.geometry.morphAttributes,i=Object.keys(e);if(i.length>0){const a=e[i[0]];if(a!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,u=a.length;o<u;o++){const h=a[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[h]=o}}}}}function CA(n,t,e,i,a,o,u){const h=yb.distanceSqToPoint(n);if(h<e){const d=new J;yb.closestPointToPoint(n,d),d.applyMatrix4(i);const p=a.ray.origin.distanceTo(d);if(p<a.near||p>a.far)return;o.push({distance:p,distanceToRay:Math.sqrt(h),point:d,index:t,face:null,faceIndex:null,barycoord:null,object:u})}}class $R extends ci{constructor(t,e,i,a,o,u,h,d,p){super(t,e,i,a,o,u,h,d,p),this.isVideoTexture=!0,this.minFilter=u!==void 0?u:ai,this.magFilter=o!==void 0?o:ai,this.generateMipmaps=!1;const v=this;function _(){v.needsUpdate=!0,t.requestVideoFrameCallback(_)}"requestVideoFrameCallback"in t&&t.requestVideoFrameCallback(_)}clone(){return new this.constructor(this.image).copy(this)}update(){const t=this.image;"requestVideoFrameCallback"in t===!1&&t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class sB extends $R{constructor(t,e,i,a,o,u,h,d){super({},t,e,i,a,o,u,h,d),this.isVideoFrameTexture=!0}update(){}clone(){return new this.constructor().copy(this)}setFrame(t){this.image=t,this.needsUpdate=!0}}class oB extends ci{constructor(t,e){super({width:t,height:e}),this.isFramebufferTexture=!0,this.magFilter=Xa,this.minFilter=Xa,this.generateMipmaps=!1,this.needsUpdate=!0}}class yx extends ci{constructor(t,e,i,a,o,u,h,d,p,v,_,x){super(null,u,h,d,p,v,a,o,_,x),this.isCompressedTexture=!0,this.image={width:e,height:i},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1}}class lB extends yx{constructor(t,e,i,a,o,u){super(t,e,i,o,u),this.isCompressedArrayTexture=!0,this.image.depth=a,this.wrapR=la,this.layerUpdates=new Set}addLayerUpdate(t){this.layerUpdates.add(t)}clearLayerUpdates(){this.layerUpdates.clear()}}class cB extends yx{constructor(t,e,i){super(void 0,t[0].width,t[0].height,e,i,wl),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=t}}class uB extends ci{constructor(t,e,i,a,o,u,h,d,p){super(t,e,i,a,o,u,h,d,p),this.isCanvasTexture=!0,this.needsUpdate=!0}}class gM extends ci{constructor(t,e,i,a,o,u,h,d,p,v=th){if(v!==th&&v!==lh)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&v===th&&(i=Rl),i===void 0&&v===lh&&(i=oh),super(null,a,o,u,h,d,v,i,p),this.isDepthTexture=!0,this.image={width:t,height:e},this.magFilter=h!==void 0?h:Xa,this.minFilter=d!==void 0?d:Xa,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(t){return super.copy(t),this.source=new bu(Object.assign({},t.image)),this.compareFunction=t.compareFunction,this}toJSON(t){const e=super.toJSON(t);return this.compareFunction!==null&&(e.compareFunction=this.compareFunction),e}}class Do{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){console.warn("THREE.Curve: .getPoint() not implemented.")}getPointAt(t,e){const i=this.getUtoTmapping(t);return this.getPoint(i,e)}getPoints(t=5){const e=[];for(let i=0;i<=t;i++)e.push(this.getPoint(i/t));return e}getSpacedPoints(t=5){const e=[];for(let i=0;i<=t;i++)e.push(this.getPointAt(i/t));return e}getLength(){const t=this.getLengths();return t[t.length-1]}getLengths(t=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const e=[];let i,a=this.getPoint(0),o=0;e.push(0);for(let u=1;u<=t;u++)i=this.getPoint(u/t),o+=i.distanceTo(a),e.push(o),a=i;return this.cacheArcLengths=e,e}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(t,e=null){const i=this.getLengths();let a=0;const o=i.length;let u;e?u=e:u=t*i[o-1];let h=0,d=o-1,p;for(;h<=d;)if(a=Math.floor(h+(d-h)/2),p=i[a]-u,p<0)h=a+1;else if(p>0)d=a-1;else{d=a;break}if(a=d,i[a]===u)return a/(o-1);const v=i[a],x=i[a+1]-v,b=(u-v)/x;return(a+b)/(o-1)}getTangent(t,e){let a=t-1e-4,o=t+1e-4;a<0&&(a=0),o>1&&(o=1);const u=this.getPoint(a),h=this.getPoint(o),d=e||(u.isVector2?new jt:new J);return d.copy(h).sub(u).normalize(),d}getTangentAt(t,e){const i=this.getUtoTmapping(t);return this.getTangent(i,e)}computeFrenetFrames(t,e=!1){const i=new J,a=[],o=[],u=[],h=new J,d=new $e;for(let b=0;b<=t;b++){const E=b/t;a[b]=this.getTangentAt(E,new J)}o[0]=new J,u[0]=new J;let p=Number.MAX_VALUE;const v=Math.abs(a[0].x),_=Math.abs(a[0].y),x=Math.abs(a[0].z);v<=p&&(p=v,i.set(1,0,0)),_<=p&&(p=_,i.set(0,1,0)),x<=p&&i.set(0,0,1),h.crossVectors(a[0],i).normalize(),o[0].crossVectors(a[0],h),u[0].crossVectors(a[0],o[0]);for(let b=1;b<=t;b++){if(o[b]=o[b-1].clone(),u[b]=u[b-1].clone(),h.crossVectors(a[b-1],a[b]),h.length()>Number.EPSILON){h.normalize();const E=Math.acos(cn(a[b-1].dot(a[b]),-1,1));o[b].applyMatrix4(d.makeRotationAxis(h,E))}u[b].crossVectors(a[b],o[b])}if(e===!0){let b=Math.acos(cn(o[0].dot(o[t]),-1,1));b/=t,a[0].dot(h.crossVectors(o[0],o[t]))>0&&(b=-b);for(let E=1;E<=t;E++)o[E].applyMatrix4(d.makeRotationAxis(a[E],b*E)),u[E].crossVectors(a[E],o[E])}return{tangents:a,normals:o,binormals:u}}clone(){return new this.constructor().copy(this)}copy(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}toJSON(){const t={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t}fromJSON(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}class xx extends Do{constructor(t=0,e=0,i=1,a=1,o=0,u=Math.PI*2,h=!1,d=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=t,this.aY=e,this.xRadius=i,this.yRadius=a,this.aStartAngle=o,this.aEndAngle=u,this.aClockwise=h,this.aRotation=d}getPoint(t,e=new jt){const i=e,a=Math.PI*2;let o=this.aEndAngle-this.aStartAngle;const u=Math.abs(o)<Number.EPSILON;for(;o<0;)o+=a;for(;o>a;)o-=a;o<Number.EPSILON&&(u?o=0:o=a),this.aClockwise===!0&&!u&&(o===a?o=-a:o=o-a);const h=this.aStartAngle+t*o;let d=this.aX+this.xRadius*Math.cos(h),p=this.aY+this.yRadius*Math.sin(h);if(this.aRotation!==0){const v=Math.cos(this.aRotation),_=Math.sin(this.aRotation),x=d-this.aX,b=p-this.aY;d=x*v-b*_+this.aX,p=x*_+b*v+this.aY}return i.set(d,p)}copy(t){return super.copy(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}toJSON(){const t=super.toJSON();return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t}fromJSON(t){return super.fromJSON(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}}class tC extends xx{constructor(t,e,i,a,o,u){super(t,e,i,i,a,o,u),this.isArcCurve=!0,this.type="ArcCurve"}}function vM(){let n=0,t=0,e=0,i=0;function a(o,u,h,d){n=o,t=h,e=-3*o+3*u-2*h-d,i=2*o-2*u+h+d}return{initCatmullRom:function(o,u,h,d,p){a(u,h,p*(h-o),p*(d-u))},initNonuniformCatmullRom:function(o,u,h,d,p,v,_){let x=(u-o)/p-(h-o)/(p+v)+(h-u)/v,b=(h-u)/v-(d-u)/(v+_)+(d-h)/_;x*=v,b*=v,a(u,h,x,b)},calc:function(o){const u=o*o,h=u*o;return n+t*o+e*u+i*h}}}const T_=new J,SS=new vM,bS=new vM,MS=new vM;class eC extends Do{constructor(t=[],e=!1,i="centripetal",a=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=t,this.closed=e,this.curveType=i,this.tension=a}getPoint(t,e=new J){const i=e,a=this.points,o=a.length,u=(o-(this.closed?0:1))*t;let h=Math.floor(u),d=u-h;this.closed?h+=h>0?0:(Math.floor(Math.abs(h)/o)+1)*o:d===0&&h===o-1&&(h=o-2,d=1);let p,v;this.closed||h>0?p=a[(h-1)%o]:(T_.subVectors(a[0],a[1]).add(a[0]),p=T_);const _=a[h%o],x=a[(h+1)%o];if(this.closed||h+2<o?v=a[(h+2)%o]:(T_.subVectors(a[o-1],a[o-2]).add(a[o-1]),v=T_),this.curveType==="centripetal"||this.curveType==="chordal"){const b=this.curveType==="chordal"?.5:.25;let E=Math.pow(p.distanceToSquared(_),b),R=Math.pow(_.distanceToSquared(x),b),w=Math.pow(x.distanceToSquared(v),b);R<1e-4&&(R=1),E<1e-4&&(E=R),w<1e-4&&(w=R),SS.initNonuniformCatmullRom(p.x,_.x,x.x,v.x,E,R,w),bS.initNonuniformCatmullRom(p.y,_.y,x.y,v.y,E,R,w),MS.initNonuniformCatmullRom(p.z,_.z,x.z,v.z,E,R,w)}else this.curveType==="catmullrom"&&(SS.initCatmullRom(p.x,_.x,x.x,v.x,this.tension),bS.initCatmullRom(p.y,_.y,x.y,v.y,this.tension),MS.initCatmullRom(p.z,_.z,x.z,v.z,this.tension));return i.set(SS.calc(d),bS.calc(d),MS.calc(d)),i}copy(t){super.copy(t),this.points=[];for(let e=0,i=t.points.length;e<i;e++){const a=t.points[e];this.points.push(a.clone())}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,i=this.points.length;e<i;e++){const a=this.points[e];t.points.push(a.toArray())}return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,i=t.points.length;e<i;e++){const a=t.points[e];this.points.push(new J().fromArray(a))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}}function DA(n,t,e,i,a){const o=(i-t)*.5,u=(a-e)*.5,h=n*n,d=n*h;return(2*e-2*i+o+u)*d+(-3*e+3*i-2*o-u)*h+o*n+e}function fB(n,t){const e=1-n;return e*e*t}function hB(n,t){return 2*(1-n)*n*t}function dB(n,t){return n*n*t}function i0(n,t,e,i){return fB(n,t)+hB(n,e)+dB(n,i)}function pB(n,t){const e=1-n;return e*e*e*t}function mB(n,t){const e=1-n;return 3*e*e*n*t}function gB(n,t){return 3*(1-n)*n*n*t}function vB(n,t){return n*n*n*t}function a0(n,t,e,i,a){return pB(n,t)+mB(n,e)+gB(n,i)+vB(n,a)}class _M extends Do{constructor(t=new jt,e=new jt,i=new jt,a=new jt){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=t,this.v1=e,this.v2=i,this.v3=a}getPoint(t,e=new jt){const i=e,a=this.v0,o=this.v1,u=this.v2,h=this.v3;return i.set(a0(t,a.x,o.x,u.x,h.x),a0(t,a.y,o.y,u.y,h.y)),i}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}class nC extends Do{constructor(t=new J,e=new J,i=new J,a=new J){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=t,this.v1=e,this.v2=i,this.v3=a}getPoint(t,e=new J){const i=e,a=this.v0,o=this.v1,u=this.v2,h=this.v3;return i.set(a0(t,a.x,o.x,u.x,h.x),a0(t,a.y,o.y,u.y,h.y),a0(t,a.z,o.z,u.z,h.z)),i}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}class yM extends Do{constructor(t=new jt,e=new jt){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=t,this.v2=e}getPoint(t,e=new jt){const i=e;return t===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(t).add(this.v1)),i}getPointAt(t,e){return this.getPoint(t,e)}getTangent(t,e=new jt){return e.subVectors(this.v2,this.v1).normalize()}getTangentAt(t,e){return this.getTangent(t,e)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class iC extends Do{constructor(t=new J,e=new J){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=t,this.v2=e}getPoint(t,e=new J){const i=e;return t===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(t).add(this.v1)),i}getPointAt(t,e){return this.getPoint(t,e)}getTangent(t,e=new J){return e.subVectors(this.v2,this.v1).normalize()}getTangentAt(t,e){return this.getTangent(t,e)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class xM extends Do{constructor(t=new jt,e=new jt,i=new jt){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=t,this.v1=e,this.v2=i}getPoint(t,e=new jt){const i=e,a=this.v0,o=this.v1,u=this.v2;return i.set(i0(t,a.x,o.x,u.x),i0(t,a.y,o.y,u.y)),i}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class SM extends Do{constructor(t=new J,e=new J,i=new J){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=t,this.v1=e,this.v2=i}getPoint(t,e=new J){const i=e,a=this.v0,o=this.v1,u=this.v2;return i.set(i0(t,a.x,o.x,u.x),i0(t,a.y,o.y,u.y),i0(t,a.z,o.z,u.z)),i}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class bM extends Do{constructor(t=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=t}getPoint(t,e=new jt){const i=e,a=this.points,o=(a.length-1)*t,u=Math.floor(o),h=o-u,d=a[u===0?u:u-1],p=a[u],v=a[u>a.length-2?a.length-1:u+1],_=a[u>a.length-3?a.length-1:u+2];return i.set(DA(h,d.x,p.x,v.x,_.x),DA(h,d.y,p.y,v.y,_.y)),i}copy(t){super.copy(t),this.points=[];for(let e=0,i=t.points.length;e<i;e++){const a=t.points[e];this.points.push(a.clone())}return this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,i=this.points.length;e<i;e++){const a=this.points[e];t.points.push(a.toArray())}return t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,i=t.points.length;e<i;e++){const a=t.points[e];this.points.push(new jt().fromArray(a))}return this}}var Yy=Object.freeze({__proto__:null,ArcCurve:tC,CatmullRomCurve3:eC,CubicBezierCurve:_M,CubicBezierCurve3:nC,EllipseCurve:xx,LineCurve:yM,LineCurve3:iC,QuadraticBezierCurve:xM,QuadraticBezierCurve3:SM,SplineCurve:bM});class aC extends Do{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(t){this.curves.push(t)}closePath(){const t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);if(!t.equals(e)){const i=t.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new Yy[i](e,t))}return this}getPoint(t,e){const i=t*this.getLength(),a=this.getCurveLengths();let o=0;for(;o<a.length;){if(a[o]>=i){const u=a[o]-i,h=this.curves[o],d=h.getLength(),p=d===0?0:1-u/d;return h.getPointAt(p,e)}o++}return null}getLength(){const t=this.getCurveLengths();return t[t.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const t=[];let e=0;for(let i=0,a=this.curves.length;i<a;i++)e+=this.curves[i].getLength(),t.push(e);return this.cacheLengths=t,t}getSpacedPoints(t=40){const e=[];for(let i=0;i<=t;i++)e.push(this.getPoint(i/t));return this.autoClose&&e.push(e[0]),e}getPoints(t=12){const e=[];let i;for(let a=0,o=this.curves;a<o.length;a++){const u=o[a],h=u.isEllipseCurve?t*2:u.isLineCurve||u.isLineCurve3?1:u.isSplineCurve?t*u.points.length:t,d=u.getPoints(h);for(let p=0;p<d.length;p++){const v=d[p];i&&i.equals(v)||(e.push(v),i=v)}}return this.autoClose&&e.length>1&&!e[e.length-1].equals(e[0])&&e.push(e[0]),e}copy(t){super.copy(t),this.curves=[];for(let e=0,i=t.curves.length;e<i;e++){const a=t.curves[e];this.curves.push(a.clone())}return this.autoClose=t.autoClose,this}toJSON(){const t=super.toJSON();t.autoClose=this.autoClose,t.curves=[];for(let e=0,i=this.curves.length;e<i;e++){const a=this.curves[e];t.curves.push(a.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.autoClose=t.autoClose,this.curves=[];for(let e=0,i=t.curves.length;e<i;e++){const a=t.curves[e];this.curves.push(new Yy[a.type]().fromJSON(a))}return this}}class R0 extends aC{constructor(t){super(),this.type="Path",this.currentPoint=new jt,t&&this.setFromPoints(t)}setFromPoints(t){this.moveTo(t[0].x,t[0].y);for(let e=1,i=t.length;e<i;e++)this.lineTo(t[e].x,t[e].y);return this}moveTo(t,e){return this.currentPoint.set(t,e),this}lineTo(t,e){const i=new yM(this.currentPoint.clone(),new jt(t,e));return this.curves.push(i),this.currentPoint.set(t,e),this}quadraticCurveTo(t,e,i,a){const o=new xM(this.currentPoint.clone(),new jt(t,e),new jt(i,a));return this.curves.push(o),this.currentPoint.set(i,a),this}bezierCurveTo(t,e,i,a,o,u){const h=new _M(this.currentPoint.clone(),new jt(t,e),new jt(i,a),new jt(o,u));return this.curves.push(h),this.currentPoint.set(o,u),this}splineThru(t){const e=[this.currentPoint.clone()].concat(t),i=new bM(e);return this.curves.push(i),this.currentPoint.copy(t[t.length-1]),this}arc(t,e,i,a,o,u){const h=this.currentPoint.x,d=this.currentPoint.y;return this.absarc(t+h,e+d,i,a,o,u),this}absarc(t,e,i,a,o,u){return this.absellipse(t,e,i,i,a,o,u),this}ellipse(t,e,i,a,o,u,h,d){const p=this.currentPoint.x,v=this.currentPoint.y;return this.absellipse(t+p,e+v,i,a,o,u,h,d),this}absellipse(t,e,i,a,o,u,h,d){const p=new xx(t,e,i,a,o,u,h,d);if(this.curves.length>0){const _=p.getPoint(0);_.equals(this.currentPoint)||this.lineTo(_.x,_.y)}this.curves.push(p);const v=p.getPoint(1);return this.currentPoint.copy(v),this}copy(t){return super.copy(t),this.currentPoint.copy(t.currentPoint),this}toJSON(){const t=super.toJSON();return t.currentPoint=this.currentPoint.toArray(),t}fromJSON(t){return super.fromJSON(t),this.currentPoint.fromArray(t.currentPoint),this}}class rg extends xn{constructor(t=[new jt(0,-.5),new jt(.5,0),new jt(0,.5)],e=12,i=0,a=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:t,segments:e,phiStart:i,phiLength:a},e=Math.floor(e),a=cn(a,0,Math.PI*2);const o=[],u=[],h=[],d=[],p=[],v=1/e,_=new J,x=new jt,b=new J,E=new J,R=new J;let w=0,M=0;for(let C=0;C<=t.length-1;C++)switch(C){case 0:w=t[C+1].x-t[C].x,M=t[C+1].y-t[C].y,b.x=M*1,b.y=-w,b.z=M*0,R.copy(b),b.normalize(),d.push(b.x,b.y,b.z);break;case t.length-1:d.push(R.x,R.y,R.z);break;default:w=t[C+1].x-t[C].x,M=t[C+1].y-t[C].y,b.x=M*1,b.y=-w,b.z=M*0,E.copy(b),b.x+=R.x,b.y+=R.y,b.z+=R.z,b.normalize(),d.push(b.x,b.y,b.z),R.copy(E)}for(let C=0;C<=e;C++){const U=i+C*v*a,D=Math.sin(U),z=Math.cos(U);for(let B=0;B<=t.length-1;B++){_.x=t[B].x*D,_.y=t[B].y,_.z=t[B].x*z,u.push(_.x,_.y,_.z),x.x=C/e,x.y=B/(t.length-1),h.push(x.x,x.y);const F=d[3*B+0]*D,G=d[3*B+1],L=d[3*B+0]*z;p.push(F,G,L)}}for(let C=0;C<e;C++)for(let U=0;U<t.length-1;U++){const D=U+C*t.length,z=D,B=D+t.length,F=D+t.length+1,G=D+1;o.push(z,B,G),o.push(F,G,B)}this.setIndex(o),this.setAttribute("position",new He(u,3)),this.setAttribute("uv",new He(h,2)),this.setAttribute("normal",new He(p,3))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new rg(t.points,t.segments,t.phiStart,t.phiLength)}}class Sx extends rg{constructor(t=1,e=1,i=4,a=8){const o=new R0;o.absarc(0,-e/2,t,Math.PI*1.5,0),o.absarc(0,e/2,t,0,Math.PI*.5),super(o.getPoints(i),a),this.type="CapsuleGeometry",this.parameters={radius:t,length:e,capSegments:i,radialSegments:a}}static fromJSON(t){return new Sx(t.radius,t.length,t.capSegments,t.radialSegments)}}class bx extends xn{constructor(t=1,e=32,i=0,a=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:t,segments:e,thetaStart:i,thetaLength:a},e=Math.max(3,e);const o=[],u=[],h=[],d=[],p=new J,v=new jt;u.push(0,0,0),h.push(0,0,1),d.push(.5,.5);for(let _=0,x=3;_<=e;_++,x+=3){const b=i+_/e*a;p.x=t*Math.cos(b),p.y=t*Math.sin(b),u.push(p.x,p.y,p.z),h.push(0,0,1),v.x=(u[x]/t+1)/2,v.y=(u[x+1]/t+1)/2,d.push(v.x,v.y)}for(let _=1;_<=e;_++)o.push(_,_+1,0);this.setIndex(o),this.setAttribute("position",new He(u,3)),this.setAttribute("normal",new He(h,3)),this.setAttribute("uv",new He(d,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new bx(t.radius,t.segments,t.thetaStart,t.thetaLength)}}class sp extends xn{constructor(t=1,e=1,i=1,a=32,o=1,u=!1,h=0,d=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:i,radialSegments:a,heightSegments:o,openEnded:u,thetaStart:h,thetaLength:d};const p=this;a=Math.floor(a),o=Math.floor(o);const v=[],_=[],x=[],b=[];let E=0;const R=[],w=i/2;let M=0;C(),u===!1&&(t>0&&U(!0),e>0&&U(!1)),this.setIndex(v),this.setAttribute("position",new He(_,3)),this.setAttribute("normal",new He(x,3)),this.setAttribute("uv",new He(b,2));function C(){const D=new J,z=new J;let B=0;const F=(e-t)/i;for(let G=0;G<=o;G++){const L=[],O=G/o,V=O*(e-t)+t;for(let et=0;et<=a;et++){const W=et/a,j=W*d+h,ut=Math.sin(j),tt=Math.cos(j);z.x=V*ut,z.y=-O*i+w,z.z=V*tt,_.push(z.x,z.y,z.z),D.set(ut,F,tt).normalize(),x.push(D.x,D.y,D.z),b.push(W,1-O),L.push(E++)}R.push(L)}for(let G=0;G<a;G++)for(let L=0;L<o;L++){const O=R[L][G],V=R[L+1][G],et=R[L+1][G+1],W=R[L][G+1];(t>0||L!==0)&&(v.push(O,V,W),B+=3),(e>0||L!==o-1)&&(v.push(V,et,W),B+=3)}p.addGroup(M,B,0),M+=B}function U(D){const z=E,B=new jt,F=new J;let G=0;const L=D===!0?t:e,O=D===!0?1:-1;for(let et=1;et<=a;et++)_.push(0,w*O,0),x.push(0,O,0),b.push(.5,.5),E++;const V=E;for(let et=0;et<=a;et++){const j=et/a*d+h,ut=Math.cos(j),tt=Math.sin(j);F.x=L*tt,F.y=w*O,F.z=L*ut,_.push(F.x,F.y,F.z),x.push(0,O,0),B.x=ut*.5+.5,B.y=tt*.5*O+.5,b.push(B.x,B.y),E++}for(let et=0;et<a;et++){const W=z+et,j=V+et;D===!0?v.push(j,j+1,W):v.push(j+1,j,W),G+=3}p.addGroup(M,G,D===!0?1:2),M+=G}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new sp(t.radiusTop,t.radiusBottom,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}}class Mx extends sp{constructor(t=1,e=1,i=32,a=1,o=!1,u=0,h=Math.PI*2){super(0,t,e,i,a,o,u,h),this.type="ConeGeometry",this.parameters={radius:t,height:e,radialSegments:i,heightSegments:a,openEnded:o,thetaStart:u,thetaLength:h}}static fromJSON(t){return new Mx(t.radius,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}}class Uu extends xn{constructor(t=[],e=[],i=1,a=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:t,indices:e,radius:i,detail:a};const o=[],u=[];h(a),p(i),v(),this.setAttribute("position",new He(o,3)),this.setAttribute("normal",new He(o.slice(),3)),this.setAttribute("uv",new He(u,2)),a===0?this.computeVertexNormals():this.normalizeNormals();function h(C){const U=new J,D=new J,z=new J;for(let B=0;B<e.length;B+=3)b(e[B+0],U),b(e[B+1],D),b(e[B+2],z),d(U,D,z,C)}function d(C,U,D,z){const B=z+1,F=[];for(let G=0;G<=B;G++){F[G]=[];const L=C.clone().lerp(D,G/B),O=U.clone().lerp(D,G/B),V=B-G;for(let et=0;et<=V;et++)et===0&&G===B?F[G][et]=L:F[G][et]=L.clone().lerp(O,et/V)}for(let G=0;G<B;G++)for(let L=0;L<2*(B-G)-1;L++){const O=Math.floor(L/2);L%2===0?(x(F[G][O+1]),x(F[G+1][O]),x(F[G][O])):(x(F[G][O+1]),x(F[G+1][O+1]),x(F[G+1][O]))}}function p(C){const U=new J;for(let D=0;D<o.length;D+=3)U.x=o[D+0],U.y=o[D+1],U.z=o[D+2],U.normalize().multiplyScalar(C),o[D+0]=U.x,o[D+1]=U.y,o[D+2]=U.z}function v(){const C=new J;for(let U=0;U<o.length;U+=3){C.x=o[U+0],C.y=o[U+1],C.z=o[U+2];const D=w(C)/2/Math.PI+.5,z=M(C)/Math.PI+.5;u.push(D,1-z)}E(),_()}function _(){for(let C=0;C<u.length;C+=6){const U=u[C+0],D=u[C+2],z=u[C+4],B=Math.max(U,D,z),F=Math.min(U,D,z);B>.9&&F<.1&&(U<.2&&(u[C+0]+=1),D<.2&&(u[C+2]+=1),z<.2&&(u[C+4]+=1))}}function x(C){o.push(C.x,C.y,C.z)}function b(C,U){const D=C*3;U.x=t[D+0],U.y=t[D+1],U.z=t[D+2]}function E(){const C=new J,U=new J,D=new J,z=new J,B=new jt,F=new jt,G=new jt;for(let L=0,O=0;L<o.length;L+=9,O+=6){C.set(o[L+0],o[L+1],o[L+2]),U.set(o[L+3],o[L+4],o[L+5]),D.set(o[L+6],o[L+7],o[L+8]),B.set(u[O+0],u[O+1]),F.set(u[O+2],u[O+3]),G.set(u[O+4],u[O+5]),z.copy(C).add(U).add(D).divideScalar(3);const V=w(z);R(B,O+0,C,V),R(F,O+2,U,V),R(G,O+4,D,V)}}function R(C,U,D,z){z<0&&C.x===1&&(u[U]=C.x-1),D.x===0&&D.z===0&&(u[U]=z/2/Math.PI+.5)}function w(C){return Math.atan2(C.z,-C.x)}function M(C){return Math.atan2(-C.y,Math.sqrt(C.x*C.x+C.z*C.z))}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Uu(t.vertices,t.indices,t.radius,t.details)}}class Ex extends Uu{constructor(t=1,e=0){const i=(1+Math.sqrt(5))/2,a=1/i,o=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-a,-i,0,-a,i,0,a,-i,0,a,i,-a,-i,0,-a,i,0,a,-i,0,a,i,0,-i,0,-a,i,0,-a,-i,0,a,i,0,a],u=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(o,u,t,e),this.type="DodecahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new Ex(t.radius,t.detail)}}const A_=new J,w_=new J,ES=new J,R_=new qr;class rC extends xn{constructor(t=null,e=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:t,thresholdAngle:e},t!==null){const a=Math.pow(10,4),o=Math.cos(eh*e),u=t.getIndex(),h=t.getAttribute("position"),d=u?u.count:h.count,p=[0,0,0],v=["a","b","c"],_=new Array(3),x={},b=[];for(let E=0;E<d;E+=3){u?(p[0]=u.getX(E),p[1]=u.getX(E+1),p[2]=u.getX(E+2)):(p[0]=E,p[1]=E+1,p[2]=E+2);const{a:R,b:w,c:M}=R_;if(R.fromBufferAttribute(h,p[0]),w.fromBufferAttribute(h,p[1]),M.fromBufferAttribute(h,p[2]),R_.getNormal(ES),_[0]=`${Math.round(R.x*a)},${Math.round(R.y*a)},${Math.round(R.z*a)}`,_[1]=`${Math.round(w.x*a)},${Math.round(w.y*a)},${Math.round(w.z*a)}`,_[2]=`${Math.round(M.x*a)},${Math.round(M.y*a)},${Math.round(M.z*a)}`,!(_[0]===_[1]||_[1]===_[2]||_[2]===_[0]))for(let C=0;C<3;C++){const U=(C+1)%3,D=_[C],z=_[U],B=R_[v[C]],F=R_[v[U]],G=`${D}_${z}`,L=`${z}_${D}`;L in x&&x[L]?(ES.dot(x[L].normal)<=o&&(b.push(B.x,B.y,B.z),b.push(F.x,F.y,F.z)),x[L]=null):G in x||(x[G]={index0:p[C],index1:p[U],normal:ES.clone()})}}for(const E in x)if(x[E]){const{index0:R,index1:w}=x[E];A_.fromBufferAttribute(h,R),w_.fromBufferAttribute(h,w),b.push(A_.x,A_.y,A_.z),b.push(w_.x,w_.y,w_.z)}this.setAttribute("position",new He(b,3))}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}}class wu extends R0{constructor(t){super(t),this.uuid=ps(),this.type="Shape",this.holes=[]}getPointsHoles(t){const e=[];for(let i=0,a=this.holes.length;i<a;i++)e[i]=this.holes[i].getPoints(t);return e}extractPoints(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}}copy(t){super.copy(t),this.holes=[];for(let e=0,i=t.holes.length;e<i;e++){const a=t.holes[e];this.holes.push(a.clone())}return this}toJSON(){const t=super.toJSON();t.uuid=this.uuid,t.holes=[];for(let e=0,i=this.holes.length;e<i;e++){const a=this.holes[e];t.holes.push(a.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.uuid=t.uuid,this.holes=[];for(let e=0,i=t.holes.length;e<i;e++){const a=t.holes[e];this.holes.push(new R0().fromJSON(a))}return this}}class _B{static triangulate(t,e,i=2){const a=e&&e.length,o=a?e[0]*i:t.length;let u=sC(t,0,o,i,!0);const h=[];if(!u||u.next===u.prev)return h;let d,p,v,_,x,b,E;if(a&&(u=MB(t,e,u,i)),t.length>80*i){d=v=t[0],p=_=t[1];for(let R=i;R<o;R+=i)x=t[R],b=t[R+1],x<d&&(d=x),b<p&&(p=b),x>v&&(v=x),b>_&&(_=b);E=Math.max(v-d,_-p),E=E!==0?32767/E:0}return C0(u,h,i,d,p,E,0),h}}function sC(n,t,e,i,a){let o,u;if(a===LB(n,t,e,i)>0)for(o=t;o<e;o+=i)u=NA(o,n[o],n[o+1],u);else for(o=e-i;o>=t;o-=i)u=NA(o,n[o],n[o+1],u);return u&&Tx(u,u.next)&&(N0(u),u=u.next),u}function uh(n,t){if(!n)return n;t||(t=n);let e=n,i;do if(i=!1,!e.steiner&&(Tx(e,e.next)||Hi(e.prev,e,e.next)===0)){if(N0(e),e=t=e.prev,e===e.next)break;i=!0}else e=e.next;while(i||e!==t);return t}function C0(n,t,e,i,a,o,u){if(!n)return;!u&&o&&RB(n,i,a,o);let h=n,d,p;for(;n.prev!==n.next;){if(d=n.prev,p=n.next,o?xB(n,i,a,o):yB(n)){t.push(d.i/e|0),t.push(n.i/e|0),t.push(p.i/e|0),N0(n),n=p.next,h=p.next;continue}if(n=p,n===h){u?u===1?(n=SB(uh(n),t,e),C0(n,t,e,i,a,o,2)):u===2&&bB(n,t,e,i,a,o):C0(uh(n),t,e,i,a,o,1);break}}}function yB(n){const t=n.prev,e=n,i=n.next;if(Hi(t,e,i)>=0)return!1;const a=t.x,o=e.x,u=i.x,h=t.y,d=e.y,p=i.y,v=a<o?a<u?a:u:o<u?o:u,_=h<d?h<p?h:p:d<p?d:p,x=a>o?a>u?a:u:o>u?o:u,b=h>d?h>p?h:p:d>p?d:p;let E=i.next;for(;E!==t;){if(E.x>=v&&E.x<=x&&E.y>=_&&E.y<=b&&Id(a,h,o,d,u,p,E.x,E.y)&&Hi(E.prev,E,E.next)>=0)return!1;E=E.next}return!0}function xB(n,t,e,i){const a=n.prev,o=n,u=n.next;if(Hi(a,o,u)>=0)return!1;const h=a.x,d=o.x,p=u.x,v=a.y,_=o.y,x=u.y,b=h<d?h<p?h:p:d<p?d:p,E=v<_?v<x?v:x:_<x?_:x,R=h>d?h>p?h:p:d>p?d:p,w=v>_?v>x?v:x:_>x?_:x,M=xb(b,E,t,e,i),C=xb(R,w,t,e,i);let U=n.prevZ,D=n.nextZ;for(;U&&U.z>=M&&D&&D.z<=C;){if(U.x>=b&&U.x<=R&&U.y>=E&&U.y<=w&&U!==a&&U!==u&&Id(h,v,d,_,p,x,U.x,U.y)&&Hi(U.prev,U,U.next)>=0||(U=U.prevZ,D.x>=b&&D.x<=R&&D.y>=E&&D.y<=w&&D!==a&&D!==u&&Id(h,v,d,_,p,x,D.x,D.y)&&Hi(D.prev,D,D.next)>=0))return!1;D=D.nextZ}for(;U&&U.z>=M;){if(U.x>=b&&U.x<=R&&U.y>=E&&U.y<=w&&U!==a&&U!==u&&Id(h,v,d,_,p,x,U.x,U.y)&&Hi(U.prev,U,U.next)>=0)return!1;U=U.prevZ}for(;D&&D.z<=C;){if(D.x>=b&&D.x<=R&&D.y>=E&&D.y<=w&&D!==a&&D!==u&&Id(h,v,d,_,p,x,D.x,D.y)&&Hi(D.prev,D,D.next)>=0)return!1;D=D.nextZ}return!0}function SB(n,t,e){let i=n;do{const a=i.prev,o=i.next.next;!Tx(a,o)&&oC(a,i,i.next,o)&&D0(a,o)&&D0(o,a)&&(t.push(a.i/e|0),t.push(i.i/e|0),t.push(o.i/e|0),N0(i),N0(i.next),i=n=o),i=i.next}while(i!==n);return uh(i)}function bB(n,t,e,i,a,o){let u=n;do{let h=u.next.next;for(;h!==u.prev;){if(u.i!==h.i&&NB(u,h)){let d=lC(u,h);u=uh(u,u.next),d=uh(d,d.next),C0(u,t,e,i,a,o,0),C0(d,t,e,i,a,o,0);return}h=h.next}u=u.next}while(u!==n)}function MB(n,t,e,i){const a=[];let o,u,h,d,p;for(o=0,u=t.length;o<u;o++)h=t[o]*i,d=o<u-1?t[o+1]*i:n.length,p=sC(n,h,d,i,!1),p===p.next&&(p.steiner=!0),a.push(DB(p));for(a.sort(EB),o=0;o<a.length;o++)e=TB(a[o],e);return e}function EB(n,t){return n.x-t.x}function TB(n,t){const e=AB(n,t);if(!e)return t;const i=lC(e,n);return uh(i,i.next),uh(e,e.next)}function AB(n,t){let e=t,i=-1/0,a;const o=n.x,u=n.y;do{if(u<=e.y&&u>=e.next.y&&e.next.y!==e.y){const x=e.x+(u-e.y)*(e.next.x-e.x)/(e.next.y-e.y);if(x<=o&&x>i&&(i=x,a=e.x<e.next.x?e:e.next,x===o))return a}e=e.next}while(e!==t);if(!a)return null;const h=a,d=a.x,p=a.y;let v=1/0,_;e=a;do o>=e.x&&e.x>=d&&o!==e.x&&Id(u<p?o:i,u,d,p,u<p?i:o,u,e.x,e.y)&&(_=Math.abs(u-e.y)/(o-e.x),D0(e,n)&&(_<v||_===v&&(e.x>a.x||e.x===a.x&&wB(a,e)))&&(a=e,v=_)),e=e.next;while(e!==h);return a}function wB(n,t){return Hi(n.prev,n,t.prev)<0&&Hi(t.next,n,n.next)<0}function RB(n,t,e,i){let a=n;do a.z===0&&(a.z=xb(a.x,a.y,t,e,i)),a.prevZ=a.prev,a.nextZ=a.next,a=a.next;while(a!==n);a.prevZ.nextZ=null,a.prevZ=null,CB(a)}function CB(n){let t,e,i,a,o,u,h,d,p=1;do{for(e=n,n=null,o=null,u=0;e;){for(u++,i=e,h=0,t=0;t<p&&(h++,i=i.nextZ,!!i);t++);for(d=p;h>0||d>0&&i;)h!==0&&(d===0||!i||e.z<=i.z)?(a=e,e=e.nextZ,h--):(a=i,i=i.nextZ,d--),o?o.nextZ=a:n=a,a.prevZ=o,o=a;e=i}o.nextZ=null,p*=2}while(u>1);return n}function xb(n,t,e,i,a){return n=(n-e)*a|0,t=(t-i)*a|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,n|t<<1}function DB(n){let t=n,e=n;do(t.x<e.x||t.x===e.x&&t.y<e.y)&&(e=t),t=t.next;while(t!==n);return e}function Id(n,t,e,i,a,o,u,h){return(a-u)*(t-h)>=(n-u)*(o-h)&&(n-u)*(i-h)>=(e-u)*(t-h)&&(e-u)*(o-h)>=(a-u)*(i-h)}function NB(n,t){return n.next.i!==t.i&&n.prev.i!==t.i&&!UB(n,t)&&(D0(n,t)&&D0(t,n)&&OB(n,t)&&(Hi(n.prev,n,t.prev)||Hi(n,t.prev,t))||Tx(n,t)&&Hi(n.prev,n,n.next)>0&&Hi(t.prev,t,t.next)>0)}function Hi(n,t,e){return(t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y)}function Tx(n,t){return n.x===t.x&&n.y===t.y}function oC(n,t,e,i){const a=D_(Hi(n,t,e)),o=D_(Hi(n,t,i)),u=D_(Hi(e,i,n)),h=D_(Hi(e,i,t));return!!(a!==o&&u!==h||a===0&&C_(n,e,t)||o===0&&C_(n,i,t)||u===0&&C_(e,n,i)||h===0&&C_(e,t,i))}function C_(n,t,e){return t.x<=Math.max(n.x,e.x)&&t.x>=Math.min(n.x,e.x)&&t.y<=Math.max(n.y,e.y)&&t.y>=Math.min(n.y,e.y)}function D_(n){return n>0?1:n<0?-1:0}function UB(n,t){let e=n;do{if(e.i!==n.i&&e.next.i!==n.i&&e.i!==t.i&&e.next.i!==t.i&&oC(e,e.next,n,t))return!0;e=e.next}while(e!==n);return!1}function D0(n,t){return Hi(n.prev,n,n.next)<0?Hi(n,t,n.next)>=0&&Hi(n,n.prev,t)>=0:Hi(n,t,n.prev)<0||Hi(n,n.next,t)<0}function OB(n,t){let e=n,i=!1;const a=(n.x+t.x)/2,o=(n.y+t.y)/2;do e.y>o!=e.next.y>o&&e.next.y!==e.y&&a<(e.next.x-e.x)*(o-e.y)/(e.next.y-e.y)+e.x&&(i=!i),e=e.next;while(e!==n);return i}function lC(n,t){const e=new Sb(n.i,n.x,n.y),i=new Sb(t.i,t.x,t.y),a=n.next,o=t.prev;return n.next=t,t.prev=n,e.next=a,a.prev=e,i.next=e,e.prev=i,o.next=i,i.prev=o,i}function NA(n,t,e,i){const a=new Sb(n,t,e);return i?(a.next=i.next,a.prev=i,i.next.prev=a,i.next=a):(a.prev=a,a.next=a),a}function N0(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function Sb(n,t,e){this.i=n,this.x=t,this.y=e,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function LB(n,t,e,i){let a=0;for(let o=t,u=e-i;o<e;o+=i)a+=(n[u]-n[o])*(n[o+1]+n[u+1]),u=o;return a}class Al{static area(t){const e=t.length;let i=0;for(let a=e-1,o=0;o<e;a=o++)i+=t[a].x*t[o].y-t[o].x*t[a].y;return i*.5}static isClockWise(t){return Al.area(t)<0}static triangulateShape(t,e){const i=[],a=[],o=[];UA(t),OA(i,t);let u=t.length;e.forEach(UA);for(let d=0;d<e.length;d++)a.push(u),u+=e[d].length,OA(i,e[d]);const h=_B.triangulate(i,a);for(let d=0;d<h.length;d+=3)o.push(h.slice(d,d+3));return o}}function UA(n){const t=n.length;t>2&&n[t-1].equals(n[0])&&n.pop()}function OA(n,t){for(let e=0;e<t.length;e++)n.push(t[e].x),n.push(t[e].y)}class sg extends xn{constructor(t=new wu([new jt(.5,.5),new jt(-.5,.5),new jt(-.5,-.5),new jt(.5,-.5)]),e={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:t,options:e},t=Array.isArray(t)?t:[t];const i=this,a=[],o=[];for(let h=0,d=t.length;h<d;h++){const p=t[h];u(p)}this.setAttribute("position",new He(a,3)),this.setAttribute("uv",new He(o,2)),this.computeVertexNormals();function u(h){const d=[],p=e.curveSegments!==void 0?e.curveSegments:12,v=e.steps!==void 0?e.steps:1,_=e.depth!==void 0?e.depth:1;let x=e.bevelEnabled!==void 0?e.bevelEnabled:!0,b=e.bevelThickness!==void 0?e.bevelThickness:.2,E=e.bevelSize!==void 0?e.bevelSize:b-.1,R=e.bevelOffset!==void 0?e.bevelOffset:0,w=e.bevelSegments!==void 0?e.bevelSegments:3;const M=e.extrudePath,C=e.UVGenerator!==void 0?e.UVGenerator:zB;let U,D=!1,z,B,F,G;M&&(U=M.getSpacedPoints(v),D=!0,x=!1,z=M.computeFrenetFrames(v,!1),B=new J,F=new J,G=new J),x||(w=0,b=0,E=0,R=0);const L=h.extractPoints(p);let O=L.shape;const V=L.holes;if(!Al.isClockWise(O)){O=O.reverse();for(let Jt=0,Yt=V.length;Jt<Yt;Jt++){const Q=V[Jt];Al.isClockWise(Q)&&(V[Jt]=Q.reverse())}}const W=Al.triangulateShape(O,V),j=O;for(let Jt=0,Yt=V.length;Jt<Yt;Jt++){const Q=V[Jt];O=O.concat(Q)}function ut(Jt,Yt,Q){return Yt||console.error("THREE.ExtrudeGeometry: vec does not exist"),Jt.clone().addScaledVector(Yt,Q)}const tt=O.length,pt=W.length;function ot(Jt,Yt,Q){let Me,ee,pe;const se=Jt.x-Yt.x,Be=Jt.y-Yt.y,he=Q.x-Jt.x,K=Q.y-Jt.y,k=se*se+Be*Be,xt=se*K-Be*he;if(Math.abs(xt)>Number.EPSILON){const Pt=Math.sqrt(k),$t=Math.sqrt(he*he+K*K),Xt=Yt.x-Be/Pt,Re=Yt.y+se/Pt,de=Q.x-K/$t,_e=Q.y+he/$t,an=((de-Xt)*K-(_e-Re)*he)/(se*K-Be*he);Me=Xt+se*an-Jt.x,ee=Re+Be*an-Jt.y;const ae=Me*Me+ee*ee;if(ae<=2)return new jt(Me,ee);pe=Math.sqrt(ae/2)}else{let Pt=!1;se>Number.EPSILON?he>Number.EPSILON&&(Pt=!0):se<-Number.EPSILON?he<-Number.EPSILON&&(Pt=!0):Math.sign(Be)===Math.sign(K)&&(Pt=!0),Pt?(Me=-Be,ee=se,pe=Math.sqrt(k)):(Me=se,ee=Be,pe=Math.sqrt(k/2))}return new jt(Me/pe,ee/pe)}const Dt=[];for(let Jt=0,Yt=j.length,Q=Yt-1,Me=Jt+1;Jt<Yt;Jt++,Q++,Me++)Q===Yt&&(Q=0),Me===Yt&&(Me=0),Dt[Jt]=ot(j[Jt],j[Q],j[Me]);const Z=[];let ht,Tt=Dt.concat();for(let Jt=0,Yt=V.length;Jt<Yt;Jt++){const Q=V[Jt];ht=[];for(let Me=0,ee=Q.length,pe=ee-1,se=Me+1;Me<ee;Me++,pe++,se++)pe===ee&&(pe=0),se===ee&&(se=0),ht[Me]=ot(Q[Me],Q[pe],Q[se]);Z.push(ht),Tt=Tt.concat(ht)}for(let Jt=0;Jt<w;Jt++){const Yt=Jt/w,Q=b*Math.cos(Yt*Math.PI/2),Me=E*Math.sin(Yt*Math.PI/2)+R;for(let ee=0,pe=j.length;ee<pe;ee++){const se=ut(j[ee],Dt[ee],Me);Nt(se.x,se.y,-Q)}for(let ee=0,pe=V.length;ee<pe;ee++){const se=V[ee];ht=Z[ee];for(let Be=0,he=se.length;Be<he;Be++){const K=ut(se[Be],ht[Be],Me);Nt(K.x,K.y,-Q)}}}const Ft=E+R;for(let Jt=0;Jt<tt;Jt++){const Yt=x?ut(O[Jt],Tt[Jt],Ft):O[Jt];D?(F.copy(z.normals[0]).multiplyScalar(Yt.x),B.copy(z.binormals[0]).multiplyScalar(Yt.y),G.copy(U[0]).add(F).add(B),Nt(G.x,G.y,G.z)):Nt(Yt.x,Yt.y,0)}for(let Jt=1;Jt<=v;Jt++)for(let Yt=0;Yt<tt;Yt++){const Q=x?ut(O[Yt],Tt[Yt],Ft):O[Yt];D?(F.copy(z.normals[Jt]).multiplyScalar(Q.x),B.copy(z.binormals[Jt]).multiplyScalar(Q.y),G.copy(U[Jt]).add(F).add(B),Nt(G.x,G.y,G.z)):Nt(Q.x,Q.y,_/v*Jt)}for(let Jt=w-1;Jt>=0;Jt--){const Yt=Jt/w,Q=b*Math.cos(Yt*Math.PI/2),Me=E*Math.sin(Yt*Math.PI/2)+R;for(let ee=0,pe=j.length;ee<pe;ee++){const se=ut(j[ee],Dt[ee],Me);Nt(se.x,se.y,_+Q)}for(let ee=0,pe=V.length;ee<pe;ee++){const se=V[ee];ht=Z[ee];for(let Be=0,he=se.length;Be<he;Be++){const K=ut(se[Be],ht[Be],Me);D?Nt(K.x,K.y+U[v-1].y,U[v-1].x+Q):Nt(K.x,K.y,_+Q)}}}rt(),Lt();function rt(){const Jt=a.length/3;if(x){let Yt=0,Q=tt*Yt;for(let Me=0;Me<pt;Me++){const ee=W[Me];Qt(ee[2]+Q,ee[1]+Q,ee[0]+Q)}Yt=v+w*2,Q=tt*Yt;for(let Me=0;Me<pt;Me++){const ee=W[Me];Qt(ee[0]+Q,ee[1]+Q,ee[2]+Q)}}else{for(let Yt=0;Yt<pt;Yt++){const Q=W[Yt];Qt(Q[2],Q[1],Q[0])}for(let Yt=0;Yt<pt;Yt++){const Q=W[Yt];Qt(Q[0]+tt*v,Q[1]+tt*v,Q[2]+tt*v)}}i.addGroup(Jt,a.length/3-Jt,0)}function Lt(){const Jt=a.length/3;let Yt=0;Et(j,Yt),Yt+=j.length;for(let Q=0,Me=V.length;Q<Me;Q++){const ee=V[Q];Et(ee,Yt),Yt+=ee.length}i.addGroup(Jt,a.length/3-Jt,1)}function Et(Jt,Yt){let Q=Jt.length;for(;--Q>=0;){const Me=Q;let ee=Q-1;ee<0&&(ee=Jt.length-1);for(let pe=0,se=v+w*2;pe<se;pe++){const Be=tt*pe,he=tt*(pe+1),K=Yt+Me+Be,k=Yt+ee+Be,xt=Yt+ee+he,Pt=Yt+Me+he;we(K,k,xt,Pt)}}}function Nt(Jt,Yt,Q){d.push(Jt),d.push(Yt),d.push(Q)}function Qt(Jt,Yt,Q){re(Jt),re(Yt),re(Q);const Me=a.length/3,ee=C.generateTopUV(i,a,Me-3,Me-2,Me-1);ke(ee[0]),ke(ee[1]),ke(ee[2])}function we(Jt,Yt,Q,Me){re(Jt),re(Yt),re(Me),re(Yt),re(Q),re(Me);const ee=a.length/3,pe=C.generateSideWallUV(i,a,ee-6,ee-3,ee-2,ee-1);ke(pe[0]),ke(pe[1]),ke(pe[3]),ke(pe[1]),ke(pe[2]),ke(pe[3])}function re(Jt){a.push(d[Jt*3+0]),a.push(d[Jt*3+1]),a.push(d[Jt*3+2])}function ke(Jt){o.push(Jt.x),o.push(Jt.y)}}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}toJSON(){const t=super.toJSON(),e=this.parameters.shapes,i=this.parameters.options;return BB(e,i,t)}static fromJSON(t,e){const i=[];for(let o=0,u=t.shapes.length;o<u;o++){const h=e[t.shapes[o]];i.push(h)}const a=t.options.extrudePath;return a!==void 0&&(t.options.extrudePath=new Yy[a.type]().fromJSON(a)),new sg(i,t.options)}}const zB={generateTopUV:function(n,t,e,i,a){const o=t[e*3],u=t[e*3+1],h=t[i*3],d=t[i*3+1],p=t[a*3],v=t[a*3+1];return[new jt(o,u),new jt(h,d),new jt(p,v)]},generateSideWallUV:function(n,t,e,i,a,o){const u=t[e*3],h=t[e*3+1],d=t[e*3+2],p=t[i*3],v=t[i*3+1],_=t[i*3+2],x=t[a*3],b=t[a*3+1],E=t[a*3+2],R=t[o*3],w=t[o*3+1],M=t[o*3+2];return Math.abs(h-v)<Math.abs(u-p)?[new jt(u,1-d),new jt(p,1-_),new jt(x,1-E),new jt(R,1-M)]:[new jt(h,1-d),new jt(v,1-_),new jt(b,1-E),new jt(w,1-M)]}};function BB(n,t,e){if(e.shapes=[],Array.isArray(n))for(let i=0,a=n.length;i<a;i++){const o=n[i];e.shapes.push(o.uuid)}else e.shapes.push(n.uuid);return e.options=Object.assign({},t),t.extrudePath!==void 0&&(e.options.extrudePath=t.extrudePath.toJSON()),e}class og extends Uu{constructor(t=1,e=0){const i=(1+Math.sqrt(5))/2,a=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],o=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(a,o,t,e),this.type="IcosahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new og(t.radius,t.detail)}}class lg extends Uu{constructor(t=1,e=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],a=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,a,t,e),this.type="OctahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new lg(t.radius,t.detail)}}class Ou extends xn{constructor(t=1,e=1,i=1,a=1){super(),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:i,heightSegments:a};const o=t/2,u=e/2,h=Math.floor(i),d=Math.floor(a),p=h+1,v=d+1,_=t/h,x=e/d,b=[],E=[],R=[],w=[];for(let M=0;M<v;M++){const C=M*x-u;for(let U=0;U<p;U++){const D=U*_-o;E.push(D,-C,0),R.push(0,0,1),w.push(U/h),w.push(1-M/d)}}for(let M=0;M<d;M++)for(let C=0;C<h;C++){const U=C+p*M,D=C+p*(M+1),z=C+1+p*(M+1),B=C+1+p*M;b.push(U,D,B),b.push(D,z,B)}this.setIndex(b),this.setAttribute("position",new He(E,3)),this.setAttribute("normal",new He(R,3)),this.setAttribute("uv",new He(w,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Ou(t.width,t.height,t.widthSegments,t.heightSegments)}}class Ax extends xn{constructor(t=.5,e=1,i=32,a=1,o=0,u=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:i,phiSegments:a,thetaStart:o,thetaLength:u},i=Math.max(3,i),a=Math.max(1,a);const h=[],d=[],p=[],v=[];let _=t;const x=(e-t)/a,b=new J,E=new jt;for(let R=0;R<=a;R++){for(let w=0;w<=i;w++){const M=o+w/i*u;b.x=_*Math.cos(M),b.y=_*Math.sin(M),d.push(b.x,b.y,b.z),p.push(0,0,1),E.x=(b.x/e+1)/2,E.y=(b.y/e+1)/2,v.push(E.x,E.y)}_+=x}for(let R=0;R<a;R++){const w=R*(i+1);for(let M=0;M<i;M++){const C=M+w,U=C,D=C+i+1,z=C+i+2,B=C+1;h.push(U,D,B),h.push(D,z,B)}}this.setIndex(h),this.setAttribute("position",new He(d,3)),this.setAttribute("normal",new He(p,3)),this.setAttribute("uv",new He(v,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Ax(t.innerRadius,t.outerRadius,t.thetaSegments,t.phiSegments,t.thetaStart,t.thetaLength)}}class wx extends xn{constructor(t=new wu([new jt(0,.5),new jt(-.5,-.5),new jt(.5,-.5)]),e=12){super(),this.type="ShapeGeometry",this.parameters={shapes:t,curveSegments:e};const i=[],a=[],o=[],u=[];let h=0,d=0;if(Array.isArray(t)===!1)p(t);else for(let v=0;v<t.length;v++)p(t[v]),this.addGroup(h,d,v),h+=d,d=0;this.setIndex(i),this.setAttribute("position",new He(a,3)),this.setAttribute("normal",new He(o,3)),this.setAttribute("uv",new He(u,2));function p(v){const _=a.length/3,x=v.extractPoints(e);let b=x.shape;const E=x.holes;Al.isClockWise(b)===!1&&(b=b.reverse());for(let w=0,M=E.length;w<M;w++){const C=E[w];Al.isClockWise(C)===!0&&(E[w]=C.reverse())}const R=Al.triangulateShape(b,E);for(let w=0,M=E.length;w<M;w++){const C=E[w];b=b.concat(C)}for(let w=0,M=b.length;w<M;w++){const C=b[w];a.push(C.x,C.y,0),o.push(0,0,1),u.push(C.x,C.y)}for(let w=0,M=R.length;w<M;w++){const C=R[w],U=C[0]+_,D=C[1]+_,z=C[2]+_;i.push(U,D,z),d+=3}}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}toJSON(){const t=super.toJSON(),e=this.parameters.shapes;return IB(e,t)}static fromJSON(t,e){const i=[];for(let a=0,o=t.shapes.length;a<o;a++){const u=e[t.shapes[a]];i.push(u)}return new wx(i,t.curveSegments)}}function IB(n,t){if(t.shapes=[],Array.isArray(n))for(let e=0,i=n.length;e<i;e++){const a=n[e];t.shapes.push(a.uuid)}else t.shapes.push(n.uuid);return t}class cg extends xn{constructor(t=1,e=32,i=16,a=0,o=Math.PI*2,u=0,h=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:i,phiStart:a,phiLength:o,thetaStart:u,thetaLength:h},e=Math.max(3,Math.floor(e)),i=Math.max(2,Math.floor(i));const d=Math.min(u+h,Math.PI);let p=0;const v=[],_=new J,x=new J,b=[],E=[],R=[],w=[];for(let M=0;M<=i;M++){const C=[],U=M/i;let D=0;M===0&&u===0?D=.5/e:M===i&&d===Math.PI&&(D=-.5/e);for(let z=0;z<=e;z++){const B=z/e;_.x=-t*Math.cos(a+B*o)*Math.sin(u+U*h),_.y=t*Math.cos(u+U*h),_.z=t*Math.sin(a+B*o)*Math.sin(u+U*h),E.push(_.x,_.y,_.z),x.copy(_).normalize(),R.push(x.x,x.y,x.z),w.push(B+D,1-U),C.push(p++)}v.push(C)}for(let M=0;M<i;M++)for(let C=0;C<e;C++){const U=v[M][C+1],D=v[M][C],z=v[M+1][C],B=v[M+1][C+1];(M!==0||u>0)&&b.push(U,D,B),(M!==i-1||d<Math.PI)&&b.push(D,z,B)}this.setIndex(b),this.setAttribute("position",new He(E,3)),this.setAttribute("normal",new He(R,3)),this.setAttribute("uv",new He(w,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new cg(t.radius,t.widthSegments,t.heightSegments,t.phiStart,t.phiLength,t.thetaStart,t.thetaLength)}}class Rx extends Uu{constructor(t=1,e=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],a=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,a,t,e),this.type="TetrahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new Rx(t.radius,t.detail)}}class Cx extends xn{constructor(t=1,e=.4,i=12,a=48,o=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:t,tube:e,radialSegments:i,tubularSegments:a,arc:o},i=Math.floor(i),a=Math.floor(a);const u=[],h=[],d=[],p=[],v=new J,_=new J,x=new J;for(let b=0;b<=i;b++)for(let E=0;E<=a;E++){const R=E/a*o,w=b/i*Math.PI*2;_.x=(t+e*Math.cos(w))*Math.cos(R),_.y=(t+e*Math.cos(w))*Math.sin(R),_.z=e*Math.sin(w),h.push(_.x,_.y,_.z),v.x=t*Math.cos(R),v.y=t*Math.sin(R),x.subVectors(_,v).normalize(),d.push(x.x,x.y,x.z),p.push(E/a),p.push(b/i)}for(let b=1;b<=i;b++)for(let E=1;E<=a;E++){const R=(a+1)*b+E-1,w=(a+1)*(b-1)+E-1,M=(a+1)*(b-1)+E,C=(a+1)*b+E;u.push(R,w,C),u.push(w,M,C)}this.setIndex(u),this.setAttribute("position",new He(h,3)),this.setAttribute("normal",new He(d,3)),this.setAttribute("uv",new He(p,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Cx(t.radius,t.tube,t.radialSegments,t.tubularSegments,t.arc)}}class Dx extends xn{constructor(t=1,e=.4,i=64,a=8,o=2,u=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:t,tube:e,tubularSegments:i,radialSegments:a,p:o,q:u},i=Math.floor(i),a=Math.floor(a);const h=[],d=[],p=[],v=[],_=new J,x=new J,b=new J,E=new J,R=new J,w=new J,M=new J;for(let U=0;U<=i;++U){const D=U/i*o*Math.PI*2;C(D,o,u,t,b),C(D+.01,o,u,t,E),w.subVectors(E,b),M.addVectors(E,b),R.crossVectors(w,M),M.crossVectors(R,w),R.normalize(),M.normalize();for(let z=0;z<=a;++z){const B=z/a*Math.PI*2,F=-e*Math.cos(B),G=e*Math.sin(B);_.x=b.x+(F*M.x+G*R.x),_.y=b.y+(F*M.y+G*R.y),_.z=b.z+(F*M.z+G*R.z),d.push(_.x,_.y,_.z),x.subVectors(_,b).normalize(),p.push(x.x,x.y,x.z),v.push(U/i),v.push(z/a)}}for(let U=1;U<=i;U++)for(let D=1;D<=a;D++){const z=(a+1)*(U-1)+(D-1),B=(a+1)*U+(D-1),F=(a+1)*U+D,G=(a+1)*(U-1)+D;h.push(z,B,G),h.push(B,F,G)}this.setIndex(h),this.setAttribute("position",new He(d,3)),this.setAttribute("normal",new He(p,3)),this.setAttribute("uv",new He(v,2));function C(U,D,z,B,F){const G=Math.cos(U),L=Math.sin(U),O=z/D*U,V=Math.cos(O);F.x=B*(2+V)*.5*G,F.y=B*(2+V)*L*.5,F.z=B*Math.sin(O)*.5}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Dx(t.radius,t.tube,t.tubularSegments,t.radialSegments,t.p,t.q)}}class Nx extends xn{constructor(t=new SM(new J(-1,-1,0),new J(-1,1,0),new J(1,1,0)),e=64,i=1,a=8,o=!1){super(),this.type="TubeGeometry",this.parameters={path:t,tubularSegments:e,radius:i,radialSegments:a,closed:o};const u=t.computeFrenetFrames(e,o);this.tangents=u.tangents,this.normals=u.normals,this.binormals=u.binormals;const h=new J,d=new J,p=new jt;let v=new J;const _=[],x=[],b=[],E=[];R(),this.setIndex(E),this.setAttribute("position",new He(_,3)),this.setAttribute("normal",new He(x,3)),this.setAttribute("uv",new He(b,2));function R(){for(let U=0;U<e;U++)w(U);w(o===!1?e:0),C(),M()}function w(U){v=t.getPointAt(U/e,v);const D=u.normals[U],z=u.binormals[U];for(let B=0;B<=a;B++){const F=B/a*Math.PI*2,G=Math.sin(F),L=-Math.cos(F);d.x=L*D.x+G*z.x,d.y=L*D.y+G*z.y,d.z=L*D.z+G*z.z,d.normalize(),x.push(d.x,d.y,d.z),h.x=v.x+i*d.x,h.y=v.y+i*d.y,h.z=v.z+i*d.z,_.push(h.x,h.y,h.z)}}function M(){for(let U=1;U<=e;U++)for(let D=1;D<=a;D++){const z=(a+1)*(U-1)+(D-1),B=(a+1)*U+(D-1),F=(a+1)*U+D,G=(a+1)*(U-1)+D;E.push(z,B,G),E.push(B,F,G)}}function C(){for(let U=0;U<=e;U++)for(let D=0;D<=a;D++)p.x=U/e,p.y=D/a,b.push(p.x,p.y)}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}toJSON(){const t=super.toJSON();return t.path=this.parameters.path.toJSON(),t}static fromJSON(t){return new Nx(new Yy[t.path.type]().fromJSON(t.path),t.tubularSegments,t.radius,t.radialSegments,t.closed)}}class cC extends xn{constructor(t=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:t},t!==null){const e=[],i=new Set,a=new J,o=new J;if(t.index!==null){const u=t.attributes.position,h=t.index;let d=t.groups;d.length===0&&(d=[{start:0,count:h.count,materialIndex:0}]);for(let p=0,v=d.length;p<v;++p){const _=d[p],x=_.start,b=_.count;for(let E=x,R=x+b;E<R;E+=3)for(let w=0;w<3;w++){const M=h.getX(E+w),C=h.getX(E+(w+1)%3);a.fromBufferAttribute(u,M),o.fromBufferAttribute(u,C),LA(a,o,i)===!0&&(e.push(a.x,a.y,a.z),e.push(o.x,o.y,o.z))}}}else{const u=t.attributes.position;for(let h=0,d=u.count/3;h<d;h++)for(let p=0;p<3;p++){const v=3*h+p,_=3*h+(p+1)%3;a.fromBufferAttribute(u,v),o.fromBufferAttribute(u,_),LA(a,o,i)===!0&&(e.push(a.x,a.y,a.z),e.push(o.x,o.y,o.z))}}this.setAttribute("position",new He(e,3))}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}}function LA(n,t,e){const i=`${n.x},${n.y},${n.z}-${t.x},${t.y},${t.z}`,a=`${t.x},${t.y},${t.z}-${n.x},${n.y},${n.z}`;return e.has(i)===!0||e.has(a)===!0?!1:(e.add(i),e.add(a),!0)}var zA=Object.freeze({__proto__:null,BoxGeometry:ph,CapsuleGeometry:Sx,CircleGeometry:bx,ConeGeometry:Mx,CylinderGeometry:sp,DodecahedronGeometry:Ex,EdgesGeometry:rC,ExtrudeGeometry:sg,IcosahedronGeometry:og,LatheGeometry:rg,OctahedronGeometry:lg,PlaneGeometry:Ou,PolyhedronGeometry:Uu,RingGeometry:Ax,ShapeGeometry:wx,SphereGeometry:cg,TetrahedronGeometry:Rx,TorusGeometry:Cx,TorusKnotGeometry:Dx,TubeGeometry:Nx,WireframeGeometry:cC});class uC extends cr{constructor(t){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new De(0),this.transparent=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.fog=t.fog,this}}class fC extends Kr{constructor(t){super(t),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class MM extends cr{constructor(t){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new De(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new De(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Nu,this.normalScale=new jt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new gs,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.envMapIntensity=t.envMapIntensity,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class hC extends MM{constructor(t){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new jt(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return cn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new De(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new De(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new De(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(t)}get anisotropy(){return this._anisotropy}set anisotropy(t){this._anisotropy>0!=t>0&&this.version++,this._anisotropy=t}get clearcoat(){return this._clearcoat}set clearcoat(t){this._clearcoat>0!=t>0&&this.version++,this._clearcoat=t}get iridescence(){return this._iridescence}set iridescence(t){this._iridescence>0!=t>0&&this.version++,this._iridescence=t}get dispersion(){return this._dispersion}set dispersion(t){this._dispersion>0!=t>0&&this.version++,this._dispersion=t}get sheen(){return this._sheen}set sheen(t){this._sheen>0!=t>0&&this.version++,this._sheen=t}get transmission(){return this._transmission}set transmission(t){this._transmission>0!=t>0&&this.version++,this._transmission=t}copy(t){return super.copy(t),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=t.anisotropy,this.anisotropyRotation=t.anisotropyRotation,this.anisotropyMap=t.anisotropyMap,this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.dispersion=t.dispersion,this.ior=t.ior,this.iridescence=t.iridescence,this.iridescenceMap=t.iridescenceMap,this.iridescenceIOR=t.iridescenceIOR,this.iridescenceThicknessRange=[...t.iridescenceThicknessRange],this.iridescenceThicknessMap=t.iridescenceThicknessMap,this.sheen=t.sheen,this.sheenColor.copy(t.sheenColor),this.sheenColorMap=t.sheenColorMap,this.sheenRoughness=t.sheenRoughness,this.sheenRoughnessMap=t.sheenRoughnessMap,this.transmission=t.transmission,this.transmissionMap=t.transmissionMap,this.thickness=t.thickness,this.thicknessMap=t.thicknessMap,this.attenuationDistance=t.attenuationDistance,this.attenuationColor.copy(t.attenuationColor),this.specularIntensity=t.specularIntensity,this.specularIntensityMap=t.specularIntensityMap,this.specularColor.copy(t.specularColor),this.specularColorMap=t.specularColorMap,this}}class dC extends cr{constructor(t){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new De(16777215),this.specular=new De(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new De(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Nu,this.normalScale=new jt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new gs,this.combine=Q0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class pC extends cr{constructor(t){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new De(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new De(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Nu,this.normalScale=new jt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.gradientMap=t.gradientMap,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}class mC extends cr{constructor(t){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Nu,this.normalScale=new jt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(t)}copy(t){return super.copy(t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.flatShading=t.flatShading,this}}class gC extends cr{constructor(t){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new De(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new De(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Nu,this.normalScale=new jt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new gs,this.combine=Q0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class EM extends cr{constructor(t){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=RR,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}}class TM extends cr{constructor(t){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(t)}copy(t){return super.copy(t),this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}}class vC extends cr{constructor(t){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new De(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Nu,this.normalScale=new jt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={MATCAP:""},this.color.copy(t.color),this.matcap=t.matcap,this.map=t.map,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.flatShading=t.flatShading,this.fog=t.fog,this}}class _C extends Ar{constructor(t){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}copy(t){return super.copy(t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this}}function Kf(n,t,e){return!n||!e&&n.constructor===t?n:typeof t.BYTES_PER_ELEMENT=="number"?new t(n):Array.prototype.slice.call(n)}function yC(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function xC(n){function t(a,o){return n[a]-n[o]}const e=n.length,i=new Array(e);for(let a=0;a!==e;++a)i[a]=a;return i.sort(t),i}function bb(n,t,e){const i=n.length,a=new n.constructor(i);for(let o=0,u=0;u!==i;++o){const h=e[o]*t;for(let d=0;d!==t;++d)a[u++]=n[h+d]}return a}function AM(n,t,e,i){let a=1,o=n[0];for(;o!==void 0&&o[i]===void 0;)o=n[a++];if(o===void 0)return;let u=o[i];if(u!==void 0)if(Array.isArray(u))do u=o[i],u!==void 0&&(t.push(o.time),e.push(...u)),o=n[a++];while(o!==void 0);else if(u.toArray!==void 0)do u=o[i],u!==void 0&&(t.push(o.time),u.toArray(e,e.length)),o=n[a++];while(o!==void 0);else do u=o[i],u!==void 0&&(t.push(o.time),e.push(u)),o=n[a++];while(o!==void 0)}function PB(n,t,e,i,a=30){const o=n.clone();o.name=t;const u=[];for(let d=0;d<o.tracks.length;++d){const p=o.tracks[d],v=p.getValueSize(),_=[],x=[];for(let b=0;b<p.times.length;++b){const E=p.times[b]*a;if(!(E<e||E>=i)){_.push(p.times[b]);for(let R=0;R<v;++R)x.push(p.values[b*v+R])}}_.length!==0&&(p.times=Kf(_,p.times.constructor),p.values=Kf(x,p.values.constructor),u.push(p))}o.tracks=u;let h=1/0;for(let d=0;d<o.tracks.length;++d)h>o.tracks[d].times[0]&&(h=o.tracks[d].times[0]);for(let d=0;d<o.tracks.length;++d)o.tracks[d].shift(-1*h);return o.resetDuration(),o}function HB(n,t=0,e=n,i=30){i<=0&&(i=30);const a=e.tracks.length,o=t/i;for(let u=0;u<a;++u){const h=e.tracks[u],d=h.ValueTypeName;if(d==="bool"||d==="string")continue;const p=n.tracks.find(function(M){return M.name===h.name&&M.ValueTypeName===d});if(p===void 0)continue;let v=0;const _=h.getValueSize();h.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(v=_/3);let x=0;const b=p.getValueSize();p.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(x=b/3);const E=h.times.length-1;let R;if(o<=h.times[0]){const M=v,C=_-v;R=h.values.slice(M,C)}else if(o>=h.times[E]){const M=E*_+v,C=M+_-v;R=h.values.slice(M,C)}else{const M=h.createInterpolant(),C=v,U=_-v;M.evaluate(o),R=M.resultBuffer.slice(C,U)}d==="quaternion"&&new sr().fromArray(R).normalize().conjugate().toArray(R);const w=p.times.length;for(let M=0;M<w;++M){const C=M*b+x;if(d==="quaternion")sr.multiplyQuaternionsFlat(p.values,C,R,0,p.values,C);else{const U=b-x*2;for(let D=0;D<U;++D)p.values[C+D]-=R[D]}}}return n.blendMode=oM,n}const FB={convertArray:Kf,isTypedArray:yC,getKeyframeOrder:xC,sortedArray:bb,flattenJSON:AM,subclip:PB,makeClipAdditive:HB};class ug{constructor(t,e,i,a){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=a!==void 0?a:new e.constructor(i),this.sampleValues=e,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(t){const e=this.parameterPositions;let i=this._cachedIndex,a=e[i],o=e[i-1];t:{e:{let u;n:{i:if(!(t<a)){for(let h=i+2;;){if(a===void 0){if(t<o)break i;return i=e.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===h)break;if(o=a,a=e[++i],t<a)break e}u=e.length;break n}if(!(t>=o)){const h=e[1];t<h&&(i=2,o=h);for(let d=i-2;;){if(o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===d)break;if(a=o,o=e[--i-1],t>=o)break e}u=i,i=0;break n}break t}for(;i<u;){const h=i+u>>>1;t<e[h]?u=h:i=h+1}if(a=e[i],o=e[i-1],o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(a===void 0)return i=e.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,o,a)}return this.interpolate_(i,o,t,a)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){const e=this.resultBuffer,i=this.sampleValues,a=this.valueSize,o=t*a;for(let u=0;u!==a;++u)e[u]=i[o+u];return e}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class SC extends ug{constructor(t,e,i,a){super(t,e,i,a),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Zf,endingEnd:Zf}}intervalChanged_(t,e,i){const a=this.parameterPositions;let o=t-2,u=t+1,h=a[o],d=a[u];if(h===void 0)switch(this.getSettings_().endingStart){case Wf:o=t,h=2*e-i;break;case M0:o=a.length-2,h=e+a[o]-a[o+1];break;default:o=t,h=i}if(d===void 0)switch(this.getSettings_().endingEnd){case Wf:u=t,d=2*i-e;break;case M0:u=1,d=i+a[1]-a[0];break;default:u=t-1,d=e}const p=(i-e)*.5,v=this.valueSize;this._weightPrev=p/(e-h),this._weightNext=p/(d-i),this._offsetPrev=o*v,this._offsetNext=u*v}interpolate_(t,e,i,a){const o=this.resultBuffer,u=this.sampleValues,h=this.valueSize,d=t*h,p=d-h,v=this._offsetPrev,_=this._offsetNext,x=this._weightPrev,b=this._weightNext,E=(i-e)/(a-e),R=E*E,w=R*E,M=-x*w+2*x*R-x*E,C=(1+x)*w+(-1.5-2*x)*R+(-.5+x)*E+1,U=(-1-b)*w+(1.5+b)*R+.5*E,D=b*w-b*R;for(let z=0;z!==h;++z)o[z]=M*u[v+z]+C*u[p+z]+U*u[d+z]+D*u[_+z];return o}}class wM extends ug{constructor(t,e,i,a){super(t,e,i,a)}interpolate_(t,e,i,a){const o=this.resultBuffer,u=this.sampleValues,h=this.valueSize,d=t*h,p=d-h,v=(i-e)/(a-e),_=1-v;for(let x=0;x!==h;++x)o[x]=u[p+x]*_+u[d+x]*v;return o}}class bC extends ug{constructor(t,e,i,a){super(t,e,i,a)}interpolate_(t){return this.copySampleValue_(t-1)}}class No{constructor(t,e,i,a){if(t===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(e===void 0||e.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=Kf(e,this.TimeBufferType),this.values=Kf(i,this.ValueBufferType),this.setInterpolation(a||this.DefaultInterpolation)}static toJSON(t){const e=t.constructor;let i;if(e.toJSON!==this.toJSON)i=e.toJSON(t);else{i={name:t.name,times:Kf(t.times,Array),values:Kf(t.values,Array)};const a=t.getInterpolation();a!==t.DefaultInterpolation&&(i.interpolation=a)}return i.type=t.ValueTypeName,i}InterpolantFactoryMethodDiscrete(t){return new bC(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new wM(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new SC(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let e;switch(t){case b0:e=this.InterpolantFactoryMethodDiscrete;break;case Vy:e=this.InterpolantFactoryMethodLinear;break;case K_:e=this.InterpolantFactoryMethodSmooth;break}if(e===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(t!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=e,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return b0;case this.InterpolantFactoryMethodLinear:return Vy;case this.InterpolantFactoryMethodSmooth:return K_}}getValueSize(){return this.values.length/this.times.length}shift(t){if(t!==0){const e=this.times;for(let i=0,a=e.length;i!==a;++i)e[i]+=t}return this}scale(t){if(t!==1){const e=this.times;for(let i=0,a=e.length;i!==a;++i)e[i]*=t}return this}trim(t,e){const i=this.times,a=i.length;let o=0,u=a-1;for(;o!==a&&i[o]<t;)++o;for(;u!==-1&&i[u]>e;)--u;if(++u,o!==0||u!==a){o>=u&&(u=Math.max(u,1),o=u-1);const h=this.getValueSize();this.times=i.slice(o,u),this.values=this.values.slice(o*h,u*h)}return this}validate(){let t=!0;const e=this.getValueSize();e-Math.floor(e)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);const i=this.times,a=this.values,o=i.length;o===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);let u=null;for(let h=0;h!==o;h++){const d=i[h];if(typeof d=="number"&&isNaN(d)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,h,d),t=!1;break}if(u!==null&&u>d){console.error("THREE.KeyframeTrack: Out of order keys.",this,h,d,u),t=!1;break}u=d}if(a!==void 0&&yC(a))for(let h=0,d=a.length;h!==d;++h){const p=a[h];if(isNaN(p)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,h,p),t=!1;break}}return t}optimize(){const t=this.times.slice(),e=this.values.slice(),i=this.getValueSize(),a=this.getInterpolation()===K_,o=t.length-1;let u=1;for(let h=1;h<o;++h){let d=!1;const p=t[h],v=t[h+1];if(p!==v&&(h!==1||p!==t[0]))if(a)d=!0;else{const _=h*i,x=_-i,b=_+i;for(let E=0;E!==i;++E){const R=e[_+E];if(R!==e[x+E]||R!==e[b+E]){d=!0;break}}}if(d){if(h!==u){t[u]=t[h];const _=h*i,x=u*i;for(let b=0;b!==i;++b)e[x+b]=e[_+b]}++u}}if(o>0){t[u]=t[o];for(let h=o*i,d=u*i,p=0;p!==i;++p)e[d+p]=e[h+p];++u}return u!==t.length?(this.times=t.slice(0,u),this.values=e.slice(0,u*i)):(this.times=t,this.values=e),this}clone(){const t=this.times.slice(),e=this.values.slice(),i=this.constructor,a=new i(this.name,t,e);return a.createInterpolant=this.createInterpolant,a}}No.prototype.TimeBufferType=Float32Array;No.prototype.ValueBufferType=Float32Array;No.prototype.DefaultInterpolation=Vy;class mh extends No{constructor(t,e,i){super(t,e,i)}}mh.prototype.ValueTypeName="bool";mh.prototype.ValueBufferType=Array;mh.prototype.DefaultInterpolation=b0;mh.prototype.InterpolantFactoryMethodLinear=void 0;mh.prototype.InterpolantFactoryMethodSmooth=void 0;class RM extends No{}RM.prototype.ValueTypeName="color";class U0 extends No{}U0.prototype.ValueTypeName="number";class MC extends ug{constructor(t,e,i,a){super(t,e,i,a)}interpolate_(t,e,i,a){const o=this.resultBuffer,u=this.sampleValues,h=this.valueSize,d=(i-e)/(a-e);let p=t*h;for(let v=p+h;p!==v;p+=4)sr.slerpFlat(o,0,u,p-h,u,p,d);return o}}class fg extends No{InterpolantFactoryMethodLinear(t){return new MC(this.times,this.values,this.getValueSize(),t)}}fg.prototype.ValueTypeName="quaternion";fg.prototype.InterpolantFactoryMethodSmooth=void 0;class gh extends No{constructor(t,e,i){super(t,e,i)}}gh.prototype.ValueTypeName="string";gh.prototype.ValueBufferType=Array;gh.prototype.DefaultInterpolation=b0;gh.prototype.InterpolantFactoryMethodLinear=void 0;gh.prototype.InterpolantFactoryMethodSmooth=void 0;class O0 extends No{}O0.prototype.ValueTypeName="vector";class L0{constructor(t="",e=-1,i=[],a=fx){this.name=t,this.tracks=i,this.duration=e,this.blendMode=a,this.uuid=ps(),this.duration<0&&this.resetDuration()}static parse(t){const e=[],i=t.tracks,a=1/(t.fps||1);for(let u=0,h=i.length;u!==h;++u)e.push(VB(i[u]).scale(a));const o=new this(t.name,t.duration,e,t.blendMode);return o.uuid=t.uuid,o}static toJSON(t){const e=[],i=t.tracks,a={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid,blendMode:t.blendMode};for(let o=0,u=i.length;o!==u;++o)e.push(No.toJSON(i[o]));return a}static CreateFromMorphTargetSequence(t,e,i,a){const o=e.length,u=[];for(let h=0;h<o;h++){let d=[],p=[];d.push((h+o-1)%o,h,(h+1)%o),p.push(0,1,0);const v=xC(d);d=bb(d,1,v),p=bb(p,1,v),!a&&d[0]===0&&(d.push(o),p.push(p[0])),u.push(new U0(".morphTargetInfluences["+e[h].name+"]",d,p).scale(1/i))}return new this(t,-1,u)}static findByName(t,e){let i=t;if(!Array.isArray(t)){const a=t;i=a.geometry&&a.geometry.animations||a.animations}for(let a=0;a<i.length;a++)if(i[a].name===e)return i[a];return null}static CreateClipsFromMorphTargetSequences(t,e,i){const a={},o=/^([\w-]*?)([\d]+)$/;for(let h=0,d=t.length;h<d;h++){const p=t[h],v=p.name.match(o);if(v&&v.length>1){const _=v[1];let x=a[_];x||(a[_]=x=[]),x.push(p)}}const u=[];for(const h in a)u.push(this.CreateFromMorphTargetSequence(h,a[h],e,i));return u}static parseAnimation(t,e){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(_,x,b,E,R){if(b.length!==0){const w=[],M=[];AM(b,w,M,E),w.length!==0&&R.push(new _(x,w,M))}},a=[],o=t.name||"default",u=t.fps||30,h=t.blendMode;let d=t.length||-1;const p=t.hierarchy||[];for(let _=0;_<p.length;_++){const x=p[_].keys;if(!(!x||x.length===0))if(x[0].morphTargets){const b={};let E;for(E=0;E<x.length;E++)if(x[E].morphTargets)for(let R=0;R<x[E].morphTargets.length;R++)b[x[E].morphTargets[R]]=-1;for(const R in b){const w=[],M=[];for(let C=0;C!==x[E].morphTargets.length;++C){const U=x[E];w.push(U.time),M.push(U.morphTarget===R?1:0)}a.push(new U0(".morphTargetInfluence["+R+"]",w,M))}d=b.length*u}else{const b=".bones["+e[_].name+"]";i(O0,b+".position",x,"pos",a),i(fg,b+".quaternion",x,"rot",a),i(O0,b+".scale",x,"scl",a)}}return a.length===0?null:new this(o,d,a,h)}resetDuration(){const t=this.tracks;let e=0;for(let i=0,a=t.length;i!==a;++i){const o=this.tracks[i];e=Math.max(e,o.times[o.times.length-1])}return this.duration=e,this}trim(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this}validate(){let t=!0;for(let e=0;e<this.tracks.length;e++)t=t&&this.tracks[e].validate();return t}optimize(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}clone(){const t=[];for(let e=0;e<this.tracks.length;e++)t.push(this.tracks[e].clone());return new this.constructor(this.name,this.duration,t,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function GB(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return U0;case"vector":case"vector2":case"vector3":case"vector4":return O0;case"color":return RM;case"quaternion":return fg;case"bool":case"boolean":return mh;case"string":return gh}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function VB(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=GB(n.type);if(n.times===void 0){const e=[],i=[];AM(n.keys,e,i,"value"),n.times=e,n.values=i}return t.parse!==void 0?t.parse(n):new t(n.name,n.times,n.values,n.interpolation)}const _c={enabled:!1,files:{},add:function(n,t){this.enabled!==!1&&(this.files[n]=t)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class Ux{constructor(t,e,i){const a=this;let o=!1,u=0,h=0,d;const p=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=i,this.itemStart=function(v){h++,o===!1&&a.onStart!==void 0&&a.onStart(v,u,h),o=!0},this.itemEnd=function(v){u++,a.onProgress!==void 0&&a.onProgress(v,u,h),u===h&&(o=!1,a.onLoad!==void 0&&a.onLoad())},this.itemError=function(v){a.onError!==void 0&&a.onError(v)},this.resolveURL=function(v){return d?d(v):v},this.setURLModifier=function(v){return d=v,this},this.addHandler=function(v,_){return p.push(v,_),this},this.removeHandler=function(v){const _=p.indexOf(v);return _!==-1&&p.splice(_,2),this},this.getHandler=function(v){for(let _=0,x=p.length;_<x;_+=2){const b=p[_],E=p[_+1];if(b.global&&(b.lastIndex=0),b.test(v))return E}return null}}}const EC=new Ux;class wr{constructor(t){this.manager=t!==void 0?t:EC,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,e){const i=this;return new Promise(function(a,o){i.load(t,a,e,o)})}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}}wr.DEFAULT_MATERIAL_NAME="__DEFAULT";const fc={};class kB extends Error{constructor(t,e){super(t),this.response=e}}class ms extends wr{constructor(t){super(t)}load(t,e,i,a){t===void 0&&(t=""),this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const o=_c.get(t);if(o!==void 0)return this.manager.itemStart(t),setTimeout(()=>{e&&e(o),this.manager.itemEnd(t)},0),o;if(fc[t]!==void 0){fc[t].push({onLoad:e,onProgress:i,onError:a});return}fc[t]=[],fc[t].push({onLoad:e,onProgress:i,onError:a});const u=new Request(t,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),h=this.mimeType,d=this.responseType;fetch(u).then(p=>{if(p.status===200||p.status===0){if(p.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||p.body===void 0||p.body.getReader===void 0)return p;const v=fc[t],_=p.body.getReader(),x=p.headers.get("X-File-Size")||p.headers.get("Content-Length"),b=x?parseInt(x):0,E=b!==0;let R=0;const w=new ReadableStream({start(M){C();function C(){_.read().then(({done:U,value:D})=>{if(U)M.close();else{R+=D.byteLength;const z=new ProgressEvent("progress",{lengthComputable:E,loaded:R,total:b});for(let B=0,F=v.length;B<F;B++){const G=v[B];G.onProgress&&G.onProgress(z)}M.enqueue(D),C()}},U=>{M.error(U)})}}});return new Response(w)}else throw new kB(`fetch for "${p.url}" responded with ${p.status}: ${p.statusText}`,p)}).then(p=>{switch(d){case"arraybuffer":return p.arrayBuffer();case"blob":return p.blob();case"document":return p.text().then(v=>new DOMParser().parseFromString(v,h));case"json":return p.json();default:if(h===void 0)return p.text();{const _=/charset="?([^;"\s]*)"?/i.exec(h),x=_&&_[1]?_[1].toLowerCase():void 0,b=new TextDecoder(x);return p.arrayBuffer().then(E=>b.decode(E))}}}).then(p=>{_c.add(t,p);const v=fc[t];delete fc[t];for(let _=0,x=v.length;_<x;_++){const b=v[_];b.onLoad&&b.onLoad(p)}}).catch(p=>{const v=fc[t];if(v===void 0)throw this.manager.itemError(t),p;delete fc[t];for(let _=0,x=v.length;_<x;_++){const b=v[_];b.onError&&b.onError(p)}this.manager.itemError(t)}).finally(()=>{this.manager.itemEnd(t)}),this.manager.itemStart(t)}setResponseType(t){return this.responseType=t,this}setMimeType(t){return this.mimeType=t,this}}class XB extends wr{constructor(t){super(t)}load(t,e,i,a){const o=this,u=new ms(this.manager);u.setPath(this.path),u.setRequestHeader(this.requestHeader),u.setWithCredentials(this.withCredentials),u.load(t,function(h){try{e(o.parse(JSON.parse(h)))}catch(d){a?a(d):console.error(d),o.manager.itemError(t)}},i,a)}parse(t){const e=[];for(let i=0;i<t.length;i++){const a=L0.parse(t[i]);e.push(a)}return e}}class YB extends wr{constructor(t){super(t)}load(t,e,i,a){const o=this,u=[],h=new yx,d=new ms(this.manager);d.setPath(this.path),d.setResponseType("arraybuffer"),d.setRequestHeader(this.requestHeader),d.setWithCredentials(o.withCredentials);let p=0;function v(_){d.load(t[_],function(x){const b=o.parse(x,!0);u[_]={width:b.width,height:b.height,format:b.format,mipmaps:b.mipmaps},p+=1,p===6&&(b.mipmapCount===1&&(h.minFilter=ai),h.image=u,h.format=b.format,h.needsUpdate=!0,e&&e(h))},i,a)}if(Array.isArray(t))for(let _=0,x=t.length;_<x;++_)v(_);else d.load(t,function(_){const x=o.parse(_,!0);if(x.isCubemap){const b=x.mipmaps.length/x.mipmapCount;for(let E=0;E<b;E++){u[E]={mipmaps:[]};for(let R=0;R<x.mipmapCount;R++)u[E].mipmaps.push(x.mipmaps[E*x.mipmapCount+R]),u[E].format=x.format,u[E].width=x.width,u[E].height=x.height}h.image=u}else h.image.width=x.width,h.image.height=x.height,h.mipmaps=x.mipmaps;x.mipmapCount===1&&(h.minFilter=ai),h.format=x.format,h.needsUpdate=!0,e&&e(h)},i,a);return h}}class z0 extends wr{constructor(t){super(t)}load(t,e,i,a){this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const o=this,u=_c.get(t);if(u!==void 0)return o.manager.itemStart(t),setTimeout(function(){e&&e(u),o.manager.itemEnd(t)},0),u;const h=w0("img");function d(){v(),_c.add(t,this),e&&e(this),o.manager.itemEnd(t)}function p(_){v(),a&&a(_),o.manager.itemError(t),o.manager.itemEnd(t)}function v(){h.removeEventListener("load",d,!1),h.removeEventListener("error",p,!1)}return h.addEventListener("load",d,!1),h.addEventListener("error",p,!1),t.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(h.crossOrigin=this.crossOrigin),o.manager.itemStart(t),h.src=t,h}}class TC extends wr{constructor(t){super(t)}load(t,e,i,a){const o=new ng;o.colorSpace=Va;const u=new z0(this.manager);u.setCrossOrigin(this.crossOrigin),u.setPath(this.path);let h=0;function d(p){u.load(t[p],function(v){o.images[p]=v,h++,h===6&&(o.needsUpdate=!0,e&&e(o))},void 0,a)}for(let p=0;p<t.length;++p)d(p);return o}}class CM extends wr{constructor(t){super(t)}load(t,e,i,a){const o=this,u=new wo,h=new ms(this.manager);return h.setResponseType("arraybuffer"),h.setRequestHeader(this.requestHeader),h.setPath(this.path),h.setWithCredentials(o.withCredentials),h.load(t,function(d){let p;try{p=o.parse(d)}catch(v){if(a!==void 0)a(v);else{console.error(v);return}}p.image!==void 0?u.image=p.image:p.data!==void 0&&(u.image.width=p.width,u.image.height=p.height,u.image.data=p.data),u.wrapS=p.wrapS!==void 0?p.wrapS:la,u.wrapT=p.wrapT!==void 0?p.wrapT:la,u.magFilter=p.magFilter!==void 0?p.magFilter:ai,u.minFilter=p.minFilter!==void 0?p.minFilter:ai,u.anisotropy=p.anisotropy!==void 0?p.anisotropy:1,p.colorSpace!==void 0&&(u.colorSpace=p.colorSpace),p.flipY!==void 0&&(u.flipY=p.flipY),p.format!==void 0&&(u.format=p.format),p.type!==void 0&&(u.type=p.type),p.mipmaps!==void 0&&(u.mipmaps=p.mipmaps,u.minFilter=xl),p.mipmapCount===1&&(u.minFilter=ai),p.generateMipmaps!==void 0&&(u.generateMipmaps=p.generateMipmaps),u.needsUpdate=!0,e&&e(u,p)},i,a),u}}class qB extends wr{constructor(t){super(t)}load(t,e,i,a){const o=new ci,u=new z0(this.manager);return u.setCrossOrigin(this.crossOrigin),u.setPath(this.path),u.load(t,function(h){o.image=h,o.needsUpdate=!0,e!==void 0&&e(o)},i,a),o}}class Lu extends Gn{constructor(t,e=1){super(),this.isLight=!0,this.type="Light",this.color=new De(t),this.intensity=e}dispose(){}copy(t,e){return super.copy(t,e),this.color.copy(t.color),this.intensity=t.intensity,this}toJSON(t){const e=super.toJSON(t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,this.groundColor!==void 0&&(e.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(e.object.distance=this.distance),this.angle!==void 0&&(e.object.angle=this.angle),this.decay!==void 0&&(e.object.decay=this.decay),this.penumbra!==void 0&&(e.object.penumbra=this.penumbra),this.shadow!==void 0&&(e.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(e.object.target=this.target.uuid),e}}class AC extends Lu{constructor(t,e,i){super(t,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Gn.DEFAULT_UP),this.updateMatrix(),this.groundColor=new De(e)}copy(t,e){return super.copy(t,e),this.groundColor.copy(t.groundColor),this}}const TS=new $e,BA=new J,IA=new J;class DM{constructor(t){this.camera=t,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new jt(512,512),this.map=null,this.mapPass=null,this.matrix=new $e,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new ag,this._frameExtents=new jt(1,1),this._viewportCount=1,this._viewports=[new Fn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(t){const e=this.camera,i=this.matrix;BA.setFromMatrixPosition(t.matrixWorld),e.position.copy(BA),IA.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(IA),e.updateMatrixWorld(),TS.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(TS),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(TS)}getViewport(t){return this._viewports[t]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(t){return this.camera=t.camera.clone(),this.intensity=t.intensity,this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const t={};return this.intensity!==1&&(t.intensity=this.intensity),this.bias!==0&&(t.bias=this.bias),this.normalBias!==0&&(t.normalBias=this.normalBias),this.radius!==1&&(t.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}class ZB extends DM{constructor(){super(new ta(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(t){const e=this.camera,i=Wd*2*t.angle*this.focus,a=this.mapSize.width/this.mapSize.height,o=t.distance||e.far;(i!==e.fov||a!==e.aspect||o!==e.far)&&(e.fov=i,e.aspect=a,e.far=o,e.updateProjectionMatrix()),super.updateMatrices(t)}copy(t){return super.copy(t),this.focus=t.focus,this}}class wC extends Lu{constructor(t,e,i=0,a=Math.PI/3,o=0,u=2){super(t,e),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Gn.DEFAULT_UP),this.updateMatrix(),this.target=new Gn,this.distance=i,this.angle=a,this.penumbra=o,this.decay=u,this.map=null,this.shadow=new ZB}get power(){return this.intensity*Math.PI}set power(t){this.intensity=t/Math.PI}dispose(){this.shadow.dispose()}copy(t,e){return super.copy(t,e),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}const PA=new $e,Im=new J,AS=new J;class WB extends DM{constructor(){super(new ta(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new jt(4,2),this._viewportCount=6,this._viewports=[new Fn(2,1,1,1),new Fn(0,1,1,1),new Fn(3,1,1,1),new Fn(1,1,1,1),new Fn(3,0,1,1),new Fn(1,0,1,1)],this._cubeDirections=[new J(1,0,0),new J(-1,0,0),new J(0,0,1),new J(0,0,-1),new J(0,1,0),new J(0,-1,0)],this._cubeUps=[new J(0,1,0),new J(0,1,0),new J(0,1,0),new J(0,1,0),new J(0,0,1),new J(0,0,-1)]}updateMatrices(t,e=0){const i=this.camera,a=this.matrix,o=t.distance||i.far;o!==i.far&&(i.far=o,i.updateProjectionMatrix()),Im.setFromMatrixPosition(t.matrixWorld),i.position.copy(Im),AS.copy(i.position),AS.add(this._cubeDirections[e]),i.up.copy(this._cubeUps[e]),i.lookAt(AS),i.updateMatrixWorld(),a.makeTranslation(-Im.x,-Im.y,-Im.z),PA.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(PA)}}class RC extends Lu{constructor(t,e,i=0,a=2){super(t,e),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=a,this.shadow=new WB}get power(){return this.intensity*4*Math.PI}set power(t){this.intensity=t/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(t,e){return super.copy(t,e),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}class xc extends px{constructor(t=-1,e=1,i=1,a=-1,o=.1,u=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=i,this.bottom=a,this.near=o,this.far=u,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=t.view===null?null:Object.assign({},t.view),this}setViewOffset(t,e,i,a,o,u){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=i,this.view.offsetY=a,this.view.width=o,this.view.height=u,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,a=(this.top+this.bottom)/2;let o=i-t,u=i+t,h=a+e,d=a-e;if(this.view!==null&&this.view.enabled){const p=(this.right-this.left)/this.view.fullWidth/this.zoom,v=(this.top-this.bottom)/this.view.fullHeight/this.zoom;o+=p*this.view.offsetX,u=o+p*this.view.width,h-=v*this.view.offsetY,d=h-v*this.view.height}this.projectionMatrix.makeOrthographic(o,u,h,d,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,this.view!==null&&(e.object.view=Object.assign({},this.view)),e}}class jB extends DM{constructor(){super(new xc(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class CC extends Lu{constructor(t,e){super(t,e),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Gn.DEFAULT_UP),this.updateMatrix(),this.target=new Gn,this.shadow=new jB}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}class DC extends Lu{constructor(t,e){super(t,e),this.isAmbientLight=!0,this.type="AmbientLight"}}class NC extends Lu{constructor(t,e,i=10,a=10){super(t,e),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=a}get power(){return this.intensity*this.width*this.height*Math.PI}set power(t){this.intensity=t/(this.width*this.height*Math.PI)}copy(t){return super.copy(t),this.width=t.width,this.height=t.height,this}toJSON(t){const e=super.toJSON(t);return e.object.width=this.width,e.object.height=this.height,e}}class UC{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let t=0;t<9;t++)this.coefficients.push(new J)}set(t){for(let e=0;e<9;e++)this.coefficients[e].copy(t[e]);return this}zero(){for(let t=0;t<9;t++)this.coefficients[t].set(0,0,0);return this}getAt(t,e){const i=t.x,a=t.y,o=t.z,u=this.coefficients;return e.copy(u[0]).multiplyScalar(.282095),e.addScaledVector(u[1],.488603*a),e.addScaledVector(u[2],.488603*o),e.addScaledVector(u[3],.488603*i),e.addScaledVector(u[4],1.092548*(i*a)),e.addScaledVector(u[5],1.092548*(a*o)),e.addScaledVector(u[6],.315392*(3*o*o-1)),e.addScaledVector(u[7],1.092548*(i*o)),e.addScaledVector(u[8],.546274*(i*i-a*a)),e}getIrradianceAt(t,e){const i=t.x,a=t.y,o=t.z,u=this.coefficients;return e.copy(u[0]).multiplyScalar(.886227),e.addScaledVector(u[1],2*.511664*a),e.addScaledVector(u[2],2*.511664*o),e.addScaledVector(u[3],2*.511664*i),e.addScaledVector(u[4],2*.429043*i*a),e.addScaledVector(u[5],2*.429043*a*o),e.addScaledVector(u[6],.743125*o*o-.247708),e.addScaledVector(u[7],2*.429043*i*o),e.addScaledVector(u[8],.429043*(i*i-a*a)),e}add(t){for(let e=0;e<9;e++)this.coefficients[e].add(t.coefficients[e]);return this}addScaledSH(t,e){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(t.coefficients[i],e);return this}scale(t){for(let e=0;e<9;e++)this.coefficients[e].multiplyScalar(t);return this}lerp(t,e){for(let i=0;i<9;i++)this.coefficients[i].lerp(t.coefficients[i],e);return this}equals(t){for(let e=0;e<9;e++)if(!this.coefficients[e].equals(t.coefficients[e]))return!1;return!0}copy(t){return this.set(t.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(t,e=0){const i=this.coefficients;for(let a=0;a<9;a++)i[a].fromArray(t,e+a*3);return this}toArray(t=[],e=0){const i=this.coefficients;for(let a=0;a<9;a++)i[a].toArray(t,e+a*3);return t}static getBasisAt(t,e){const i=t.x,a=t.y,o=t.z;e[0]=.282095,e[1]=.488603*a,e[2]=.488603*o,e[3]=.488603*i,e[4]=1.092548*i*a,e[5]=1.092548*a*o,e[6]=.315392*(3*o*o-1),e[7]=1.092548*i*o,e[8]=.546274*(i*i-a*a)}}class OC extends Lu{constructor(t=new UC,e=1){super(void 0,e),this.isLightProbe=!0,this.sh=t}copy(t){return super.copy(t),this.sh.copy(t.sh),this}fromJSON(t){return this.intensity=t.intensity,this.sh.fromArray(t.sh),this}toJSON(t){const e=super.toJSON(t);return e.object.sh=this.sh.toArray(),e}}class Ox extends wr{constructor(t){super(t),this.textures={}}load(t,e,i,a){const o=this,u=new ms(o.manager);u.setPath(o.path),u.setRequestHeader(o.requestHeader),u.setWithCredentials(o.withCredentials),u.load(t,function(h){try{e(o.parse(JSON.parse(h)))}catch(d){a?a(d):console.error(d),o.manager.itemError(t)}},i,a)}parse(t){const e=this.textures;function i(o){return e[o]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",o),e[o]}const a=this.createMaterialFromType(t.type);if(t.uuid!==void 0&&(a.uuid=t.uuid),t.name!==void 0&&(a.name=t.name),t.color!==void 0&&a.color!==void 0&&a.color.setHex(t.color),t.roughness!==void 0&&(a.roughness=t.roughness),t.metalness!==void 0&&(a.metalness=t.metalness),t.sheen!==void 0&&(a.sheen=t.sheen),t.sheenColor!==void 0&&(a.sheenColor=new De().setHex(t.sheenColor)),t.sheenRoughness!==void 0&&(a.sheenRoughness=t.sheenRoughness),t.emissive!==void 0&&a.emissive!==void 0&&a.emissive.setHex(t.emissive),t.specular!==void 0&&a.specular!==void 0&&a.specular.setHex(t.specular),t.specularIntensity!==void 0&&(a.specularIntensity=t.specularIntensity),t.specularColor!==void 0&&a.specularColor!==void 0&&a.specularColor.setHex(t.specularColor),t.shininess!==void 0&&(a.shininess=t.shininess),t.clearcoat!==void 0&&(a.clearcoat=t.clearcoat),t.clearcoatRoughness!==void 0&&(a.clearcoatRoughness=t.clearcoatRoughness),t.dispersion!==void 0&&(a.dispersion=t.dispersion),t.iridescence!==void 0&&(a.iridescence=t.iridescence),t.iridescenceIOR!==void 0&&(a.iridescenceIOR=t.iridescenceIOR),t.iridescenceThicknessRange!==void 0&&(a.iridescenceThicknessRange=t.iridescenceThicknessRange),t.transmission!==void 0&&(a.transmission=t.transmission),t.thickness!==void 0&&(a.thickness=t.thickness),t.attenuationDistance!==void 0&&(a.attenuationDistance=t.attenuationDistance),t.attenuationColor!==void 0&&a.attenuationColor!==void 0&&a.attenuationColor.setHex(t.attenuationColor),t.anisotropy!==void 0&&(a.anisotropy=t.anisotropy),t.anisotropyRotation!==void 0&&(a.anisotropyRotation=t.anisotropyRotation),t.fog!==void 0&&(a.fog=t.fog),t.flatShading!==void 0&&(a.flatShading=t.flatShading),t.blending!==void 0&&(a.blending=t.blending),t.combine!==void 0&&(a.combine=t.combine),t.side!==void 0&&(a.side=t.side),t.shadowSide!==void 0&&(a.shadowSide=t.shadowSide),t.opacity!==void 0&&(a.opacity=t.opacity),t.transparent!==void 0&&(a.transparent=t.transparent),t.alphaTest!==void 0&&(a.alphaTest=t.alphaTest),t.alphaHash!==void 0&&(a.alphaHash=t.alphaHash),t.depthFunc!==void 0&&(a.depthFunc=t.depthFunc),t.depthTest!==void 0&&(a.depthTest=t.depthTest),t.depthWrite!==void 0&&(a.depthWrite=t.depthWrite),t.colorWrite!==void 0&&(a.colorWrite=t.colorWrite),t.blendSrc!==void 0&&(a.blendSrc=t.blendSrc),t.blendDst!==void 0&&(a.blendDst=t.blendDst),t.blendEquation!==void 0&&(a.blendEquation=t.blendEquation),t.blendSrcAlpha!==void 0&&(a.blendSrcAlpha=t.blendSrcAlpha),t.blendDstAlpha!==void 0&&(a.blendDstAlpha=t.blendDstAlpha),t.blendEquationAlpha!==void 0&&(a.blendEquationAlpha=t.blendEquationAlpha),t.blendColor!==void 0&&a.blendColor!==void 0&&a.blendColor.setHex(t.blendColor),t.blendAlpha!==void 0&&(a.blendAlpha=t.blendAlpha),t.stencilWriteMask!==void 0&&(a.stencilWriteMask=t.stencilWriteMask),t.stencilFunc!==void 0&&(a.stencilFunc=t.stencilFunc),t.stencilRef!==void 0&&(a.stencilRef=t.stencilRef),t.stencilFuncMask!==void 0&&(a.stencilFuncMask=t.stencilFuncMask),t.stencilFail!==void 0&&(a.stencilFail=t.stencilFail),t.stencilZFail!==void 0&&(a.stencilZFail=t.stencilZFail),t.stencilZPass!==void 0&&(a.stencilZPass=t.stencilZPass),t.stencilWrite!==void 0&&(a.stencilWrite=t.stencilWrite),t.wireframe!==void 0&&(a.wireframe=t.wireframe),t.wireframeLinewidth!==void 0&&(a.wireframeLinewidth=t.wireframeLinewidth),t.wireframeLinecap!==void 0&&(a.wireframeLinecap=t.wireframeLinecap),t.wireframeLinejoin!==void 0&&(a.wireframeLinejoin=t.wireframeLinejoin),t.rotation!==void 0&&(a.rotation=t.rotation),t.linewidth!==void 0&&(a.linewidth=t.linewidth),t.dashSize!==void 0&&(a.dashSize=t.dashSize),t.gapSize!==void 0&&(a.gapSize=t.gapSize),t.scale!==void 0&&(a.scale=t.scale),t.polygonOffset!==void 0&&(a.polygonOffset=t.polygonOffset),t.polygonOffsetFactor!==void 0&&(a.polygonOffsetFactor=t.polygonOffsetFactor),t.polygonOffsetUnits!==void 0&&(a.polygonOffsetUnits=t.polygonOffsetUnits),t.dithering!==void 0&&(a.dithering=t.dithering),t.alphaToCoverage!==void 0&&(a.alphaToCoverage=t.alphaToCoverage),t.premultipliedAlpha!==void 0&&(a.premultipliedAlpha=t.premultipliedAlpha),t.forceSinglePass!==void 0&&(a.forceSinglePass=t.forceSinglePass),t.visible!==void 0&&(a.visible=t.visible),t.toneMapped!==void 0&&(a.toneMapped=t.toneMapped),t.userData!==void 0&&(a.userData=t.userData),t.vertexColors!==void 0&&(typeof t.vertexColors=="number"?a.vertexColors=t.vertexColors>0:a.vertexColors=t.vertexColors),t.uniforms!==void 0)for(const o in t.uniforms){const u=t.uniforms[o];switch(a.uniforms[o]={},u.type){case"t":a.uniforms[o].value=i(u.value);break;case"c":a.uniforms[o].value=new De().setHex(u.value);break;case"v2":a.uniforms[o].value=new jt().fromArray(u.value);break;case"v3":a.uniforms[o].value=new J().fromArray(u.value);break;case"v4":a.uniforms[o].value=new Fn().fromArray(u.value);break;case"m3":a.uniforms[o].value=new hn().fromArray(u.value);break;case"m4":a.uniforms[o].value=new $e().fromArray(u.value);break;default:a.uniforms[o].value=u.value}}if(t.defines!==void 0&&(a.defines=t.defines),t.vertexShader!==void 0&&(a.vertexShader=t.vertexShader),t.fragmentShader!==void 0&&(a.fragmentShader=t.fragmentShader),t.glslVersion!==void 0&&(a.glslVersion=t.glslVersion),t.extensions!==void 0)for(const o in t.extensions)a.extensions[o]=t.extensions[o];if(t.lights!==void 0&&(a.lights=t.lights),t.clipping!==void 0&&(a.clipping=t.clipping),t.size!==void 0&&(a.size=t.size),t.sizeAttenuation!==void 0&&(a.sizeAttenuation=t.sizeAttenuation),t.map!==void 0&&(a.map=i(t.map)),t.matcap!==void 0&&(a.matcap=i(t.matcap)),t.alphaMap!==void 0&&(a.alphaMap=i(t.alphaMap)),t.bumpMap!==void 0&&(a.bumpMap=i(t.bumpMap)),t.bumpScale!==void 0&&(a.bumpScale=t.bumpScale),t.normalMap!==void 0&&(a.normalMap=i(t.normalMap)),t.normalMapType!==void 0&&(a.normalMapType=t.normalMapType),t.normalScale!==void 0){let o=t.normalScale;Array.isArray(o)===!1&&(o=[o,o]),a.normalScale=new jt().fromArray(o)}return t.displacementMap!==void 0&&(a.displacementMap=i(t.displacementMap)),t.displacementScale!==void 0&&(a.displacementScale=t.displacementScale),t.displacementBias!==void 0&&(a.displacementBias=t.displacementBias),t.roughnessMap!==void 0&&(a.roughnessMap=i(t.roughnessMap)),t.metalnessMap!==void 0&&(a.metalnessMap=i(t.metalnessMap)),t.emissiveMap!==void 0&&(a.emissiveMap=i(t.emissiveMap)),t.emissiveIntensity!==void 0&&(a.emissiveIntensity=t.emissiveIntensity),t.specularMap!==void 0&&(a.specularMap=i(t.specularMap)),t.specularIntensityMap!==void 0&&(a.specularIntensityMap=i(t.specularIntensityMap)),t.specularColorMap!==void 0&&(a.specularColorMap=i(t.specularColorMap)),t.envMap!==void 0&&(a.envMap=i(t.envMap)),t.envMapRotation!==void 0&&a.envMapRotation.fromArray(t.envMapRotation),t.envMapIntensity!==void 0&&(a.envMapIntensity=t.envMapIntensity),t.reflectivity!==void 0&&(a.reflectivity=t.reflectivity),t.refractionRatio!==void 0&&(a.refractionRatio=t.refractionRatio),t.lightMap!==void 0&&(a.lightMap=i(t.lightMap)),t.lightMapIntensity!==void 0&&(a.lightMapIntensity=t.lightMapIntensity),t.aoMap!==void 0&&(a.aoMap=i(t.aoMap)),t.aoMapIntensity!==void 0&&(a.aoMapIntensity=t.aoMapIntensity),t.gradientMap!==void 0&&(a.gradientMap=i(t.gradientMap)),t.clearcoatMap!==void 0&&(a.clearcoatMap=i(t.clearcoatMap)),t.clearcoatRoughnessMap!==void 0&&(a.clearcoatRoughnessMap=i(t.clearcoatRoughnessMap)),t.clearcoatNormalMap!==void 0&&(a.clearcoatNormalMap=i(t.clearcoatNormalMap)),t.clearcoatNormalScale!==void 0&&(a.clearcoatNormalScale=new jt().fromArray(t.clearcoatNormalScale)),t.iridescenceMap!==void 0&&(a.iridescenceMap=i(t.iridescenceMap)),t.iridescenceThicknessMap!==void 0&&(a.iridescenceThicknessMap=i(t.iridescenceThicknessMap)),t.transmissionMap!==void 0&&(a.transmissionMap=i(t.transmissionMap)),t.thicknessMap!==void 0&&(a.thicknessMap=i(t.thicknessMap)),t.anisotropyMap!==void 0&&(a.anisotropyMap=i(t.anisotropyMap)),t.sheenColorMap!==void 0&&(a.sheenColorMap=i(t.sheenColorMap)),t.sheenRoughnessMap!==void 0&&(a.sheenRoughnessMap=i(t.sheenRoughnessMap)),a}setTextures(t){return this.textures=t,this}createMaterialFromType(t){return Ox.createMaterialFromType(t)}static createMaterialFromType(t){const e={ShadowMaterial:uC,SpriteMaterial:dM,RawShaderMaterial:fC,ShaderMaterial:Kr,PointsMaterial:mM,MeshPhysicalMaterial:hC,MeshStandardMaterial:MM,MeshPhongMaterial:dC,MeshToonMaterial:pC,MeshNormalMaterial:mC,MeshLambertMaterial:gC,MeshDepthMaterial:EM,MeshDistanceMaterial:TM,MeshBasicMaterial:Mc,MeshMatcapMaterial:vC,LineDashedMaterial:_C,LineBasicMaterial:Ar,Material:cr};return new e[t]}}class Mb{static decodeText(t){if(console.warn("THREE.LoaderUtils: decodeText() has been deprecated with r165 and will be removed with r175. Use TextDecoder instead."),typeof TextDecoder<"u")return new TextDecoder().decode(t);let e="";for(let i=0,a=t.length;i<a;i++)e+=String.fromCharCode(t[i]);try{return decodeURIComponent(escape(e))}catch{return e}}static extractUrlBase(t){const e=t.lastIndexOf("/");return e===-1?"./":t.slice(0,e+1)}static resolveURL(t,e){return typeof t!="string"||t===""?"":(/^https?:\/\//i.test(e)&&/^\//.test(t)&&(e=e.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(t)||/^data:.*,.*$/i.test(t)||/^blob:.*$/i.test(t)?t:e+t)}}class LC extends xn{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(t){return super.copy(t),this.instanceCount=t.instanceCount,this}toJSON(){const t=super.toJSON();return t.instanceCount=this.instanceCount,t.isInstancedBufferGeometry=!0,t}}class zC extends wr{constructor(t){super(t)}load(t,e,i,a){const o=this,u=new ms(o.manager);u.setPath(o.path),u.setRequestHeader(o.requestHeader),u.setWithCredentials(o.withCredentials),u.load(t,function(h){try{e(o.parse(JSON.parse(h)))}catch(d){a?a(d):console.error(d),o.manager.itemError(t)}},i,a)}parse(t){const e={},i={};function a(b,E){if(e[E]!==void 0)return e[E];const w=b.interleavedBuffers[E],M=o(b,w.buffer),C=zd(w.type,M),U=new vx(C,w.stride);return U.uuid=w.uuid,e[E]=U,U}function o(b,E){if(i[E]!==void 0)return i[E];const w=b.arrayBuffers[E],M=new Uint32Array(w).buffer;return i[E]=M,M}const u=t.isInstancedBufferGeometry?new LC:new xn,h=t.data.index;if(h!==void 0){const b=zd(h.type,h.array);u.setIndex(new ui(b,1))}const d=t.data.attributes;for(const b in d){const E=d[b];let R;if(E.isInterleavedBufferAttribute){const w=a(t.data,E.data);R=new ch(w,E.itemSize,E.offset,E.normalized)}else{const w=zd(E.type,E.array),M=E.isInstancedBufferAttribute?Qd:ui;R=new M(w,E.itemSize,E.normalized)}E.name!==void 0&&(R.name=E.name),E.usage!==void 0&&R.setUsage(E.usage),u.setAttribute(b,R)}const p=t.data.morphAttributes;if(p)for(const b in p){const E=p[b],R=[];for(let w=0,M=E.length;w<M;w++){const C=E[w];let U;if(C.isInterleavedBufferAttribute){const D=a(t.data,C.data);U=new ch(D,C.itemSize,C.offset,C.normalized)}else{const D=zd(C.type,C.array);U=new ui(D,C.itemSize,C.normalized)}C.name!==void 0&&(U.name=C.name),R.push(U)}u.morphAttributes[b]=R}t.data.morphTargetsRelative&&(u.morphTargetsRelative=!0);const _=t.data.groups||t.data.drawcalls||t.data.offsets;if(_!==void 0)for(let b=0,E=_.length;b!==E;++b){const R=_[b];u.addGroup(R.start,R.count,R.materialIndex)}const x=t.data.boundingSphere;if(x!==void 0){const b=new J;x.center!==void 0&&b.fromArray(x.center),u.boundingSphere=new or(b,x.radius)}return t.name&&(u.name=t.name),t.userData&&(u.userData=t.userData),u}}class KB extends wr{constructor(t){super(t)}load(t,e,i,a){const o=this,u=this.path===""?Mb.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||u;const h=new ms(this.manager);h.setPath(this.path),h.setRequestHeader(this.requestHeader),h.setWithCredentials(this.withCredentials),h.load(t,function(d){let p=null;try{p=JSON.parse(d)}catch(_){a!==void 0&&a(_),console.error("THREE:ObjectLoader: Can't parse "+t+".",_.message);return}const v=p.metadata;if(v===void 0||v.type===void 0||v.type.toLowerCase()==="geometry"){a!==void 0&&a(new Error("THREE.ObjectLoader: Can't load "+t)),console.error("THREE.ObjectLoader: Can't load "+t);return}o.parse(p,e)},i,a)}async loadAsync(t,e){const i=this,a=this.path===""?Mb.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||a;const o=new ms(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials);const u=await o.loadAsync(t,e),h=JSON.parse(u),d=h.metadata;if(d===void 0||d.type===void 0||d.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+t);return await i.parseAsync(h)}parse(t,e){const i=this.parseAnimations(t.animations),a=this.parseShapes(t.shapes),o=this.parseGeometries(t.geometries,a),u=this.parseImages(t.images,function(){e!==void 0&&e(p)}),h=this.parseTextures(t.textures,u),d=this.parseMaterials(t.materials,h),p=this.parseObject(t.object,o,d,h,i),v=this.parseSkeletons(t.skeletons,p);if(this.bindSkeletons(p,v),this.bindLightTargets(p),e!==void 0){let _=!1;for(const x in u)if(u[x].data instanceof HTMLImageElement){_=!0;break}_===!1&&e(p)}return p}async parseAsync(t){const e=this.parseAnimations(t.animations),i=this.parseShapes(t.shapes),a=this.parseGeometries(t.geometries,i),o=await this.parseImagesAsync(t.images),u=this.parseTextures(t.textures,o),h=this.parseMaterials(t.materials,u),d=this.parseObject(t.object,a,h,u,e),p=this.parseSkeletons(t.skeletons,d);return this.bindSkeletons(d,p),this.bindLightTargets(d),d}parseShapes(t){const e={};if(t!==void 0)for(let i=0,a=t.length;i<a;i++){const o=new wu().fromJSON(t[i]);e[o.uuid]=o}return e}parseSkeletons(t,e){const i={},a={};if(e.traverse(function(o){o.isBone&&(a[o.uuid]=o)}),t!==void 0)for(let o=0,u=t.length;o<u;o++){const h=new _x().fromJSON(t[o],a);i[h.uuid]=h}return i}parseGeometries(t,e){const i={};if(t!==void 0){const a=new zC;for(let o=0,u=t.length;o<u;o++){let h;const d=t[o];switch(d.type){case"BufferGeometry":case"InstancedBufferGeometry":h=a.parse(d);break;default:d.type in zA?h=zA[d.type].fromJSON(d,e):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${d.type}"`)}h.uuid=d.uuid,d.name!==void 0&&(h.name=d.name),d.userData!==void 0&&(h.userData=d.userData),i[d.uuid]=h}}return i}parseMaterials(t,e){const i={},a={};if(t!==void 0){const o=new Ox;o.setTextures(e);for(let u=0,h=t.length;u<h;u++){const d=t[u];i[d.uuid]===void 0&&(i[d.uuid]=o.parse(d)),a[d.uuid]=i[d.uuid]}}return a}parseAnimations(t){const e={};if(t!==void 0)for(let i=0;i<t.length;i++){const a=t[i],o=L0.parse(a);e[o.uuid]=o}return e}parseImages(t,e){const i=this,a={};let o;function u(d){return i.manager.itemStart(d),o.load(d,function(){i.manager.itemEnd(d)},void 0,function(){i.manager.itemError(d),i.manager.itemEnd(d)})}function h(d){if(typeof d=="string"){const p=d,v=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(p)?p:i.resourcePath+p;return u(v)}else return d.data?{data:zd(d.type,d.data),width:d.width,height:d.height}:null}if(t!==void 0&&t.length>0){const d=new Ux(e);o=new z0(d),o.setCrossOrigin(this.crossOrigin);for(let p=0,v=t.length;p<v;p++){const _=t[p],x=_.url;if(Array.isArray(x)){const b=[];for(let E=0,R=x.length;E<R;E++){const w=x[E],M=h(w);M!==null&&(M instanceof HTMLImageElement?b.push(M):b.push(new wo(M.data,M.width,M.height)))}a[_.uuid]=new bu(b)}else{const b=h(_.url);a[_.uuid]=new bu(b)}}}return a}async parseImagesAsync(t){const e=this,i={};let a;async function o(u){if(typeof u=="string"){const h=u,d=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(h)?h:e.resourcePath+h;return await a.loadAsync(d)}else return u.data?{data:zd(u.type,u.data),width:u.width,height:u.height}:null}if(t!==void 0&&t.length>0){a=new z0(this.manager),a.setCrossOrigin(this.crossOrigin);for(let u=0,h=t.length;u<h;u++){const d=t[u],p=d.url;if(Array.isArray(p)){const v=[];for(let _=0,x=p.length;_<x;_++){const b=p[_],E=await o(b);E!==null&&(E instanceof HTMLImageElement?v.push(E):v.push(new wo(E.data,E.width,E.height)))}i[d.uuid]=new bu(v)}else{const v=await o(d.url);i[d.uuid]=new bu(v)}}}return i}parseTextures(t,e){function i(o,u){return typeof o=="number"?o:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",o),u[o])}const a={};if(t!==void 0)for(let o=0,u=t.length;o<u;o++){const h=t[o];h.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',h.uuid),e[h.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",h.image);const d=e[h.image],p=d.data;let v;Array.isArray(p)?(v=new ng,p.length===6&&(v.needsUpdate=!0)):(p&&p.data?v=new wo:v=new ci,p&&(v.needsUpdate=!0)),v.source=d,v.uuid=h.uuid,h.name!==void 0&&(v.name=h.name),h.mapping!==void 0&&(v.mapping=i(h.mapping,QB)),h.channel!==void 0&&(v.channel=h.channel),h.offset!==void 0&&v.offset.fromArray(h.offset),h.repeat!==void 0&&v.repeat.fromArray(h.repeat),h.center!==void 0&&v.center.fromArray(h.center),h.rotation!==void 0&&(v.rotation=h.rotation),h.wrap!==void 0&&(v.wrapS=i(h.wrap[0],HA),v.wrapT=i(h.wrap[1],HA)),h.format!==void 0&&(v.format=h.format),h.internalFormat!==void 0&&(v.internalFormat=h.internalFormat),h.type!==void 0&&(v.type=h.type),h.colorSpace!==void 0&&(v.colorSpace=h.colorSpace),h.minFilter!==void 0&&(v.minFilter=i(h.minFilter,FA)),h.magFilter!==void 0&&(v.magFilter=i(h.magFilter,FA)),h.anisotropy!==void 0&&(v.anisotropy=h.anisotropy),h.flipY!==void 0&&(v.flipY=h.flipY),h.generateMipmaps!==void 0&&(v.generateMipmaps=h.generateMipmaps),h.premultiplyAlpha!==void 0&&(v.premultiplyAlpha=h.premultiplyAlpha),h.unpackAlignment!==void 0&&(v.unpackAlignment=h.unpackAlignment),h.compareFunction!==void 0&&(v.compareFunction=h.compareFunction),h.userData!==void 0&&(v.userData=h.userData),a[h.uuid]=v}return a}parseObject(t,e,i,a,o){let u;function h(x){return e[x]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",x),e[x]}function d(x){if(x!==void 0){if(Array.isArray(x)){const b=[];for(let E=0,R=x.length;E<R;E++){const w=x[E];i[w]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",w),b.push(i[w])}return b}return i[x]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",x),i[x]}}function p(x){return a[x]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",x),a[x]}let v,_;switch(t.type){case"Scene":u=new ig,t.background!==void 0&&(Number.isInteger(t.background)?u.background=new De(t.background):u.background=p(t.background)),t.environment!==void 0&&(u.environment=p(t.environment)),t.fog!==void 0&&(t.fog.type==="Fog"?u.fog=new gx(t.fog.color,t.fog.near,t.fog.far):t.fog.type==="FogExp2"&&(u.fog=new mx(t.fog.color,t.fog.density)),t.fog.name!==""&&(u.fog.name=t.fog.name)),t.backgroundBlurriness!==void 0&&(u.backgroundBlurriness=t.backgroundBlurriness),t.backgroundIntensity!==void 0&&(u.backgroundIntensity=t.backgroundIntensity),t.backgroundRotation!==void 0&&u.backgroundRotation.fromArray(t.backgroundRotation),t.environmentIntensity!==void 0&&(u.environmentIntensity=t.environmentIntensity),t.environmentRotation!==void 0&&u.environmentRotation.fromArray(t.environmentRotation);break;case"PerspectiveCamera":u=new ta(t.fov,t.aspect,t.near,t.far),t.focus!==void 0&&(u.focus=t.focus),t.zoom!==void 0&&(u.zoom=t.zoom),t.filmGauge!==void 0&&(u.filmGauge=t.filmGauge),t.filmOffset!==void 0&&(u.filmOffset=t.filmOffset),t.view!==void 0&&(u.view=Object.assign({},t.view));break;case"OrthographicCamera":u=new xc(t.left,t.right,t.top,t.bottom,t.near,t.far),t.zoom!==void 0&&(u.zoom=t.zoom),t.view!==void 0&&(u.view=Object.assign({},t.view));break;case"AmbientLight":u=new DC(t.color,t.intensity);break;case"DirectionalLight":u=new CC(t.color,t.intensity),u.target=t.target||"";break;case"PointLight":u=new RC(t.color,t.intensity,t.distance,t.decay);break;case"RectAreaLight":u=new NC(t.color,t.intensity,t.width,t.height);break;case"SpotLight":u=new wC(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay),u.target=t.target||"";break;case"HemisphereLight":u=new AC(t.color,t.groundColor,t.intensity);break;case"LightProbe":u=new OC().fromJSON(t);break;case"SkinnedMesh":v=h(t.geometry),_=d(t.material),u=new WR(v,_),t.bindMode!==void 0&&(u.bindMode=t.bindMode),t.bindMatrix!==void 0&&u.bindMatrix.fromArray(t.bindMatrix),t.skeleton!==void 0&&(u.skeleton=t.skeleton);break;case"Mesh":v=h(t.geometry),_=d(t.material),u=new Gi(v,_);break;case"InstancedMesh":v=h(t.geometry),_=d(t.material);const x=t.count,b=t.instanceMatrix,E=t.instanceColor;u=new jR(v,_,x),u.instanceMatrix=new Qd(new Float32Array(b.array),16),E!==void 0&&(u.instanceColor=new Qd(new Float32Array(E.array),E.itemSize));break;case"BatchedMesh":v=h(t.geometry),_=d(t.material),u=new KR(t.maxInstanceCount,t.maxVertexCount,t.maxIndexCount,_),u.geometry=v,u.perObjectFrustumCulled=t.perObjectFrustumCulled,u.sortObjects=t.sortObjects,u._drawRanges=t.drawRanges,u._reservedRanges=t.reservedRanges,u._visibility=t.visibility,u._active=t.active,u._bounds=t.bounds.map(R=>{const w=new Tr;w.min.fromArray(R.boxMin),w.max.fromArray(R.boxMax);const M=new or;return M.radius=R.sphereRadius,M.center.fromArray(R.sphereCenter),{boxInitialized:R.boxInitialized,box:w,sphereInitialized:R.sphereInitialized,sphere:M}}),u._maxInstanceCount=t.maxInstanceCount,u._maxVertexCount=t.maxVertexCount,u._maxIndexCount=t.maxIndexCount,u._geometryInitialized=t.geometryInitialized,u._geometryCount=t.geometryCount,u._matricesTexture=p(t.matricesTexture.uuid),t.colorsTexture!==void 0&&(u._colorsTexture=p(t.colorsTexture.uuid));break;case"LOD":u=new ZR;break;case"Line":u=new Du(h(t.geometry),d(t.material));break;case"LineLoop":u=new QR(h(t.geometry),d(t.material));break;case"LineSegments":u=new Dl(h(t.geometry),d(t.material));break;case"PointCloud":case"Points":u=new JR(h(t.geometry),d(t.material));break;case"Sprite":u=new qR(d(t.material));break;case"Group":u=new Bd;break;case"Bone":u=new pM;break;default:u=new Gn}if(u.uuid=t.uuid,t.name!==void 0&&(u.name=t.name),t.matrix!==void 0?(u.matrix.fromArray(t.matrix),t.matrixAutoUpdate!==void 0&&(u.matrixAutoUpdate=t.matrixAutoUpdate),u.matrixAutoUpdate&&u.matrix.decompose(u.position,u.quaternion,u.scale)):(t.position!==void 0&&u.position.fromArray(t.position),t.rotation!==void 0&&u.rotation.fromArray(t.rotation),t.quaternion!==void 0&&u.quaternion.fromArray(t.quaternion),t.scale!==void 0&&u.scale.fromArray(t.scale)),t.up!==void 0&&u.up.fromArray(t.up),t.castShadow!==void 0&&(u.castShadow=t.castShadow),t.receiveShadow!==void 0&&(u.receiveShadow=t.receiveShadow),t.shadow&&(t.shadow.intensity!==void 0&&(u.shadow.intensity=t.shadow.intensity),t.shadow.bias!==void 0&&(u.shadow.bias=t.shadow.bias),t.shadow.normalBias!==void 0&&(u.shadow.normalBias=t.shadow.normalBias),t.shadow.radius!==void 0&&(u.shadow.radius=t.shadow.radius),t.shadow.mapSize!==void 0&&u.shadow.mapSize.fromArray(t.shadow.mapSize),t.shadow.camera!==void 0&&(u.shadow.camera=this.parseObject(t.shadow.camera))),t.visible!==void 0&&(u.visible=t.visible),t.frustumCulled!==void 0&&(u.frustumCulled=t.frustumCulled),t.renderOrder!==void 0&&(u.renderOrder=t.renderOrder),t.userData!==void 0&&(u.userData=t.userData),t.layers!==void 0&&(u.layers.mask=t.layers),t.children!==void 0){const x=t.children;for(let b=0;b<x.length;b++)u.add(this.parseObject(x[b],e,i,a,o))}if(t.animations!==void 0){const x=t.animations;for(let b=0;b<x.length;b++){const E=x[b];u.animations.push(o[E])}}if(t.type==="LOD"){t.autoUpdate!==void 0&&(u.autoUpdate=t.autoUpdate);const x=t.levels;for(let b=0;b<x.length;b++){const E=x[b],R=u.getObjectByProperty("uuid",E.object);R!==void 0&&u.addLevel(R,E.distance,E.hysteresis)}}return u}bindSkeletons(t,e){Object.keys(e).length!==0&&t.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){const a=e[i.skeleton];a===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(a,i.bindMatrix)}})}bindLightTargets(t){t.traverse(function(e){if(e.isDirectionalLight||e.isSpotLight){const i=e.target,a=t.getObjectByProperty("uuid",i);a!==void 0?e.target=a:e.target=new Gn}})}}const QB={UVMapping:Ru,CubeReflectionMapping:wl,CubeRefractionMapping:Cu,EquirectangularReflectionMapping:sh,EquirectangularRefractionMapping:y0,CubeUVReflectionMapping:rp},HA={RepeatWrapping:x0,ClampToEdgeWrapping:la,MirroredRepeatWrapping:S0},FA={NearestFilter:Xa,NearestMipmapNearestFilter:$b,NearestMipmapLinearFilter:Ld,LinearFilter:ai,LinearMipmapNearestFilter:Km,LinearMipmapLinearFilter:xl};class JB extends wr{constructor(t){super(t),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(t){return this.options=t,this}load(t,e,i,a){t===void 0&&(t=""),this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const o=this,u=_c.get(t);if(u!==void 0){if(o.manager.itemStart(t),u.then){u.then(p=>{e&&e(p),o.manager.itemEnd(t)}).catch(p=>{a&&a(p)});return}return setTimeout(function(){e&&e(u),o.manager.itemEnd(t)},0),u}const h={};h.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",h.headers=this.requestHeader;const d=fetch(t,h).then(function(p){return p.blob()}).then(function(p){return createImageBitmap(p,Object.assign(o.options,{colorSpaceConversion:"none"}))}).then(function(p){return _c.add(t,p),e&&e(p),o.manager.itemEnd(t),p}).catch(function(p){a&&a(p),_c.remove(t),o.manager.itemError(t),o.manager.itemEnd(t)});_c.add(t,d),o.manager.itemStart(t)}}let N_;class NM{static getContext(){return N_===void 0&&(N_=new(window.AudioContext||window.webkitAudioContext)),N_}static setContext(t){N_=t}}class $B extends wr{constructor(t){super(t)}load(t,e,i,a){const o=this,u=new ms(this.manager);u.setResponseType("arraybuffer"),u.setPath(this.path),u.setRequestHeader(this.requestHeader),u.setWithCredentials(this.withCredentials),u.load(t,function(d){try{const p=d.slice(0);NM.getContext().decodeAudioData(p,function(_){e(_)}).catch(h)}catch(p){h(p)}},i,a);function h(d){a?a(d):console.error(d),o.manager.itemError(t)}}}const GA=new $e,VA=new $e,Df=new $e;class t5{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new ta,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new ta,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(t){const e=this._cache;if(e.focus!==t.focus||e.fov!==t.fov||e.aspect!==t.aspect*this.aspect||e.near!==t.near||e.far!==t.far||e.zoom!==t.zoom||e.eyeSep!==this.eyeSep){e.focus=t.focus,e.fov=t.fov,e.aspect=t.aspect*this.aspect,e.near=t.near,e.far=t.far,e.zoom=t.zoom,e.eyeSep=this.eyeSep,Df.copy(t.projectionMatrix);const a=e.eyeSep/2,o=a*e.near/e.focus,u=e.near*Math.tan(eh*e.fov*.5)/e.zoom;let h,d;VA.elements[12]=-a,GA.elements[12]=a,h=-u*e.aspect+o,d=u*e.aspect+o,Df.elements[0]=2*e.near/(d-h),Df.elements[8]=(d+h)/(d-h),this.cameraL.projectionMatrix.copy(Df),h=-u*e.aspect-o,d=u*e.aspect-o,Df.elements[0]=2*e.near/(d-h),Df.elements[8]=(d+h)/(d-h),this.cameraR.projectionMatrix.copy(Df)}this.cameraL.matrixWorld.copy(t.matrixWorld).multiply(VA),this.cameraR.matrixWorld.copy(t.matrixWorld).multiply(GA)}}class BC extends ta{constructor(t=[]){super(),this.isArrayCamera=!0,this.cameras=t,this.index=0}}class UM{constructor(t=!0){this.autoStart=t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=kA(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const e=kA();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}}function kA(){return performance.now()}const Nf=new J,XA=new sr,e5=new J,Uf=new J;class n5 extends Gn{constructor(){super(),this.type="AudioListener",this.context=NM.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new UM}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(t){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=t,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}updateMatrixWorld(t){super.updateMatrixWorld(t);const e=this.context.listener,i=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Nf,XA,e5),Uf.set(0,0,-1).applyQuaternion(XA),e.positionX){const a=this.context.currentTime+this.timeDelta;e.positionX.linearRampToValueAtTime(Nf.x,a),e.positionY.linearRampToValueAtTime(Nf.y,a),e.positionZ.linearRampToValueAtTime(Nf.z,a),e.forwardX.linearRampToValueAtTime(Uf.x,a),e.forwardY.linearRampToValueAtTime(Uf.y,a),e.forwardZ.linearRampToValueAtTime(Uf.z,a),e.upX.linearRampToValueAtTime(i.x,a),e.upY.linearRampToValueAtTime(i.y,a),e.upZ.linearRampToValueAtTime(i.z,a)}else e.setPosition(Nf.x,Nf.y,Nf.z),e.setOrientation(Uf.x,Uf.y,Uf.z,i.x,i.y,i.z)}}class IC extends Gn{constructor(t){super(),this.type="Audio",this.listener=t,this.context=t.context,this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this}setMediaElementSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(t),this.connect(),this}setMediaStreamSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(t),this.connect(),this}setBuffer(t){return this.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this}play(t=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+t;const e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.loopStart=this.loopStart,e.loopEnd=this.loopEnd,e.onended=this.onEnded.bind(this),e.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=e,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(t=0){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+t),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let t=1,e=this.filters.length;t<e;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let t=1,e=this.filters.length;t<e;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(t){return t||(t=[]),this._connected===!0?(this.disconnect(),this.filters=t.slice(),this.connect()):this.filters=t.slice(),this}setDetune(t){return this.detune=t,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(t){return this.setFilters(t?[t]:[])}setPlaybackRate(t){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=t,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(t){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=t,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(t){return this.loopStart=t,this}setLoopEnd(t){return this.loopEnd=t,this}getVolume(){return this.gain.gain.value}setVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}copy(t,e){return super.copy(t,e),t.sourceType!=="buffer"?(console.warn("THREE.Audio: Audio source type cannot be copied."),this):(this.autoplay=t.autoplay,this.buffer=t.buffer,this.detune=t.detune,this.loop=t.loop,this.loopStart=t.loopStart,this.loopEnd=t.loopEnd,this.offset=t.offset,this.duration=t.duration,this.playbackRate=t.playbackRate,this.hasPlaybackControl=t.hasPlaybackControl,this.sourceType=t.sourceType,this.filters=t.filters.slice(),this)}clone(t){return new this.constructor(this.listener).copy(this,t)}}const Of=new J,YA=new sr,i5=new J,Lf=new J;class a5 extends IC{constructor(t){super(t),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){return super.connect(),this.panner.connect(this.gain),this}disconnect(){return super.disconnect(),this.panner.disconnect(this.gain),this}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(t){return this.panner.refDistance=t,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(t){return this.panner.rolloffFactor=t,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(t){return this.panner.distanceModel=t,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(t){return this.panner.maxDistance=t,this}setDirectionalCone(t,e,i){return this.panner.coneInnerAngle=t,this.panner.coneOuterAngle=e,this.panner.coneOuterGain=i,this}updateMatrixWorld(t){if(super.updateMatrixWorld(t),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Of,YA,i5),Lf.set(0,0,1).applyQuaternion(YA);const e=this.panner;if(e.positionX){const i=this.context.currentTime+this.listener.timeDelta;e.positionX.linearRampToValueAtTime(Of.x,i),e.positionY.linearRampToValueAtTime(Of.y,i),e.positionZ.linearRampToValueAtTime(Of.z,i),e.orientationX.linearRampToValueAtTime(Lf.x,i),e.orientationY.linearRampToValueAtTime(Lf.y,i),e.orientationZ.linearRampToValueAtTime(Lf.z,i)}else e.setPosition(Of.x,Of.y,Of.z),e.setOrientation(Lf.x,Lf.y,Lf.z)}}class r5{constructor(t,e=2048){this.analyser=t.context.createAnalyser(),this.analyser.fftSize=e,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let t=0;const e=this.getFrequencyData();for(let i=0;i<e.length;i++)t+=e[i];return t/e.length}}class PC{constructor(t,e,i){this.binding=t,this.valueSize=i;let a,o,u;switch(e){case"quaternion":a=this._slerp,o=this._slerpAdditive,u=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":a=this._select,o=this._select,u=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:a=this._lerp,o=this._lerpAdditive,u=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=a,this._mixBufferRegionAdditive=o,this._setIdentity=u,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(t,e){const i=this.buffer,a=this.valueSize,o=t*a+a;let u=this.cumulativeWeight;if(u===0){for(let h=0;h!==a;++h)i[o+h]=i[h];u=e}else{u+=e;const h=e/u;this._mixBufferRegion(i,o,0,h,a)}this.cumulativeWeight=u}accumulateAdditive(t){const e=this.buffer,i=this.valueSize,a=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(e,a,0,t,i),this.cumulativeWeightAdditive+=t}apply(t){const e=this.valueSize,i=this.buffer,a=t*e+e,o=this.cumulativeWeight,u=this.cumulativeWeightAdditive,h=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,o<1){const d=e*this._origIndex;this._mixBufferRegion(i,a,d,1-o,e)}u>0&&this._mixBufferRegionAdditive(i,a,this._addIndex*e,1,e);for(let d=e,p=e+e;d!==p;++d)if(i[d]!==i[d+e]){h.setValue(i,a);break}}saveOriginalState(){const t=this.binding,e=this.buffer,i=this.valueSize,a=i*this._origIndex;t.getValue(e,a);for(let o=i,u=a;o!==u;++o)e[o]=e[a+o%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const t=this.valueSize*3;this.binding.setValue(this.buffer,t)}_setAdditiveIdentityNumeric(){const t=this._addIndex*this.valueSize,e=t+this.valueSize;for(let i=t;i<e;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const t=this._origIndex*this.valueSize,e=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[e+i]=this.buffer[t+i]}_select(t,e,i,a,o){if(a>=.5)for(let u=0;u!==o;++u)t[e+u]=t[i+u]}_slerp(t,e,i,a){sr.slerpFlat(t,e,t,e,t,i,a)}_slerpAdditive(t,e,i,a,o){const u=this._workIndex*o;sr.multiplyQuaternionsFlat(t,u,t,e,t,i),sr.slerpFlat(t,e,t,e,t,u,a)}_lerp(t,e,i,a,o){const u=1-a;for(let h=0;h!==o;++h){const d=e+h;t[d]=t[d]*u+t[i+h]*a}}_lerpAdditive(t,e,i,a,o){for(let u=0;u!==o;++u){const h=e+u;t[h]=t[h]+t[i+u]*a}}}const OM="\\[\\]\\.:\\/",s5=new RegExp("["+OM+"]","g"),LM="[^"+OM+"]",o5="[^"+OM.replace("\\.","")+"]",l5=/((?:WC+[\/:])*)/.source.replace("WC",LM),c5=/(WCOD+)?/.source.replace("WCOD",o5),u5=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",LM),f5=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",LM),h5=new RegExp("^"+l5+c5+u5+f5+"$"),d5=["material","materials","bones","map"];class p5{constructor(t,e,i){const a=i||Hn.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,a)}getValue(t,e){this.bind();const i=this._targetGroup.nCachedObjects_,a=this._bindings[i];a!==void 0&&a.getValue(t,e)}setValue(t,e){const i=this._bindings;for(let a=this._targetGroup.nCachedObjects_,o=i.length;a!==o;++a)i[a].setValue(t,e)}bind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,i=t.length;e!==i;++e)t[e].bind()}unbind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,i=t.length;e!==i;++e)t[e].unbind()}}class Hn{constructor(t,e,i){this.path=e,this.parsedPath=i||Hn.parseTrackName(e),this.node=Hn.findNode(t,this.parsedPath.nodeName),this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,e,i){return t&&t.isAnimationObjectGroup?new Hn.Composite(t,e,i):new Hn(t,e,i)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(s5,"")}static parseTrackName(t){const e=h5.exec(t);if(e===null)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const i={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},a=i.nodeName&&i.nodeName.lastIndexOf(".");if(a!==void 0&&a!==-1){const o=i.nodeName.substring(a+1);d5.indexOf(o)!==-1&&(i.nodeName=i.nodeName.substring(0,a),i.objectName=o)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return i}static findNode(t,e){if(e===void 0||e===""||e==="."||e===-1||e===t.name||e===t.uuid)return t;if(t.skeleton){const i=t.skeleton.getBoneByName(e);if(i!==void 0)return i}if(t.children){const i=function(o){for(let u=0;u<o.length;u++){const h=o[u];if(h.name===e||h.uuid===e)return h;const d=i(h.children);if(d)return d}return null},a=i(t.children);if(a)return a}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,e){t[e]=this.targetObject[this.propertyName]}_getValue_array(t,e){const i=this.resolvedProperty;for(let a=0,o=i.length;a!==o;++a)t[e++]=i[a]}_getValue_arrayElement(t,e){t[e]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,e){this.resolvedProperty.toArray(t,e)}_setValue_direct(t,e){this.targetObject[this.propertyName]=t[e]}_setValue_direct_setNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,e){const i=this.resolvedProperty;for(let a=0,o=i.length;a!==o;++a)i[a]=t[e++]}_setValue_array_setNeedsUpdate(t,e){const i=this.resolvedProperty;for(let a=0,o=i.length;a!==o;++a)i[a]=t[e++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,e){const i=this.resolvedProperty;for(let a=0,o=i.length;a!==o;++a)i[a]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,e){this.resolvedProperty[this.propertyIndex]=t[e]}_setValue_arrayElement_setNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,e){this.resolvedProperty.fromArray(t,e)}_setValue_fromArray_setNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,e){this.bind(),this.getValue(t,e)}_setValue_unbound(t,e){this.bind(),this.setValue(t,e)}bind(){let t=this.node;const e=this.parsedPath,i=e.objectName,a=e.propertyName;let o=e.propertyIndex;if(t||(t=Hn.findNode(this.rootNode,e.nodeName),this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(i){let p=e.objectIndex;switch(i){case"materials":if(!t.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}t=t.material.materials;break;case"bones":if(!t.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}t=t.skeleton.bones;for(let v=0;v<t.length;v++)if(t[v].name===p){p=v;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}t=t.material.map;break;default:if(t[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}t=t[i]}if(p!==void 0){if(t[p]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);return}t=t[p]}}const u=t[a];if(u===void 0){const p=e.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+p+"."+a+" but it wasn't found.",t);return}let h=this.Versioning.None;this.targetObject=t,t.isMaterial===!0?h=this.Versioning.NeedsUpdate:t.isObject3D===!0&&(h=this.Versioning.MatrixWorldNeedsUpdate);let d=this.BindingType.Direct;if(o!==void 0){if(a==="morphTargetInfluences"){if(!t.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!t.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}t.morphTargetDictionary[o]!==void 0&&(o=t.morphTargetDictionary[o])}d=this.BindingType.ArrayElement,this.resolvedProperty=u,this.propertyIndex=o}else u.fromArray!==void 0&&u.toArray!==void 0?(d=this.BindingType.HasFromToArray,this.resolvedProperty=u):Array.isArray(u)?(d=this.BindingType.EntireArray,this.resolvedProperty=u):this.propertyName=a;this.getValue=this.GetterByBindingType[d],this.setValue=this.SetterByBindingTypeAndVersioning[d][h]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Hn.Composite=p5;Hn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Hn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Hn.prototype.GetterByBindingType=[Hn.prototype._getValue_direct,Hn.prototype._getValue_array,Hn.prototype._getValue_arrayElement,Hn.prototype._getValue_toArray];Hn.prototype.SetterByBindingTypeAndVersioning=[[Hn.prototype._setValue_direct,Hn.prototype._setValue_direct_setNeedsUpdate,Hn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Hn.prototype._setValue_array,Hn.prototype._setValue_array_setNeedsUpdate,Hn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Hn.prototype._setValue_arrayElement,Hn.prototype._setValue_arrayElement_setNeedsUpdate,Hn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Hn.prototype._setValue_fromArray,Hn.prototype._setValue_fromArray_setNeedsUpdate,Hn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class m5{constructor(){this.isAnimationObjectGroup=!0,this.uuid=ps(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const t={};this._indicesByUUID=t;for(let i=0,a=arguments.length;i!==a;++i)t[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const e=this;this.stats={objects:{get total(){return e._objects.length},get inUse(){return this.total-e.nCachedObjects_}},get bindingsPerObject(){return e._bindings.length}}}add(){const t=this._objects,e=this._indicesByUUID,i=this._paths,a=this._parsedPaths,o=this._bindings,u=o.length;let h,d=t.length,p=this.nCachedObjects_;for(let v=0,_=arguments.length;v!==_;++v){const x=arguments[v],b=x.uuid;let E=e[b];if(E===void 0){E=d++,e[b]=E,t.push(x);for(let R=0,w=u;R!==w;++R)o[R].push(new Hn(x,i[R],a[R]))}else if(E<p){h=t[E];const R=--p,w=t[R];e[w.uuid]=E,t[E]=w,e[b]=R,t[R]=x;for(let M=0,C=u;M!==C;++M){const U=o[M],D=U[R];let z=U[E];U[E]=D,z===void 0&&(z=new Hn(x,i[M],a[M])),U[R]=z}}else t[E]!==h&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=p}remove(){const t=this._objects,e=this._indicesByUUID,i=this._bindings,a=i.length;let o=this.nCachedObjects_;for(let u=0,h=arguments.length;u!==h;++u){const d=arguments[u],p=d.uuid,v=e[p];if(v!==void 0&&v>=o){const _=o++,x=t[_];e[x.uuid]=v,t[v]=x,e[p]=_,t[_]=d;for(let b=0,E=a;b!==E;++b){const R=i[b],w=R[_],M=R[v];R[v]=w,R[_]=M}}}this.nCachedObjects_=o}uncache(){const t=this._objects,e=this._indicesByUUID,i=this._bindings,a=i.length;let o=this.nCachedObjects_,u=t.length;for(let h=0,d=arguments.length;h!==d;++h){const p=arguments[h],v=p.uuid,_=e[v];if(_!==void 0)if(delete e[v],_<o){const x=--o,b=t[x],E=--u,R=t[E];e[b.uuid]=_,t[_]=b,e[R.uuid]=x,t[x]=R,t.pop();for(let w=0,M=a;w!==M;++w){const C=i[w],U=C[x],D=C[E];C[_]=U,C[x]=D,C.pop()}}else{const x=--u,b=t[x];x>0&&(e[b.uuid]=_),t[_]=b,t.pop();for(let E=0,R=a;E!==R;++E){const w=i[E];w[_]=w[x],w.pop()}}}this.nCachedObjects_=o}subscribe_(t,e){const i=this._bindingsIndicesByPath;let a=i[t];const o=this._bindings;if(a!==void 0)return o[a];const u=this._paths,h=this._parsedPaths,d=this._objects,p=d.length,v=this.nCachedObjects_,_=new Array(p);a=o.length,i[t]=a,u.push(t),h.push(e),o.push(_);for(let x=v,b=d.length;x!==b;++x){const E=d[x];_[x]=new Hn(E,t,e)}return _}unsubscribe_(t){const e=this._bindingsIndicesByPath,i=e[t];if(i!==void 0){const a=this._paths,o=this._parsedPaths,u=this._bindings,h=u.length-1,d=u[h],p=t[h];e[p]=i,u[i]=d,u.pop(),o[i]=o[h],o.pop(),a[i]=a[h],a.pop()}}}class HC{constructor(t,e,i=null,a=e.blendMode){this._mixer=t,this._clip=e,this._localRoot=i,this.blendMode=a;const o=e.tracks,u=o.length,h=new Array(u),d={endingStart:Zf,endingEnd:Zf};for(let p=0;p!==u;++p){const v=o[p].createInterpolant(null);h[p]=v,v.settings=d}this._interpolantSettings=d,this._interpolants=h,this._propertyBindings=new Array(u),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=AR,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(t){return this._startTime=t,this}setLoop(t,e){return this.loop=t,this.repetitions=e,this}setEffectiveWeight(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(t){return this._scheduleFading(t,0,1)}fadeOut(t){return this._scheduleFading(t,1,0)}crossFadeFrom(t,e,i){if(t.fadeOut(e),this.fadeIn(e),i){const a=this._clip.duration,o=t._clip.duration,u=o/a,h=a/o;t.warp(1,u,e),this.warp(h,1,e)}return this}crossFadeTo(t,e,i){return t.crossFadeFrom(this,e,i)}stopFading(){const t=this._weightInterpolant;return t!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}setEffectiveTimeScale(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(t){return this.timeScale=this._clip.duration/t,this.stopWarping()}syncWith(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()}halt(t){return this.warp(this._effectiveTimeScale,0,t)}warp(t,e,i){const a=this._mixer,o=a.time,u=this.timeScale;let h=this._timeScaleInterpolant;h===null&&(h=a._lendControlInterpolant(),this._timeScaleInterpolant=h);const d=h.parameterPositions,p=h.sampleValues;return d[0]=o,d[1]=o+i,p[0]=t/u,p[1]=e/u,this}stopWarping(){const t=this._timeScaleInterpolant;return t!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(t,e,i,a){if(!this.enabled){this._updateWeight(t);return}const o=this._startTime;if(o!==null){const d=(t-o)*i;d<0||i===0?e=0:(this._startTime=null,e=i*d)}e*=this._updateTimeScale(t);const u=this._updateTime(e),h=this._updateWeight(t);if(h>0){const d=this._interpolants,p=this._propertyBindings;switch(this.blendMode){case oM:for(let v=0,_=d.length;v!==_;++v)d[v].evaluate(u),p[v].accumulateAdditive(h);break;case fx:default:for(let v=0,_=d.length;v!==_;++v)d[v].evaluate(u),p[v].accumulate(a,h)}}}_updateWeight(t){let e=0;if(this.enabled){e=this.weight;const i=this._weightInterpolant;if(i!==null){const a=i.evaluate(t)[0];e*=a,t>i.parameterPositions[1]&&(this.stopFading(),a===0&&(this.enabled=!1))}}return this._effectiveWeight=e,e}_updateTimeScale(t){let e=0;if(!this.paused){e=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const a=i.evaluate(t)[0];e*=a,t>i.parameterPositions[1]&&(this.stopWarping(),e===0?this.paused=!0:this.timeScale=e)}}return this._effectiveTimeScale=e,e}_updateTime(t){const e=this._clip.duration,i=this.loop;let a=this.time+t,o=this._loopCount;const u=i===wR;if(t===0)return o===-1?a:u&&(o&1)===1?e-a:a;if(i===TR){o===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));t:{if(a>=e)a=e;else if(a<0)a=0;else{this.time=a;break t}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=a,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{if(o===-1&&(t>=0?(o=0,this._setEndings(!0,this.repetitions===0,u)):this._setEndings(this.repetitions===0,!0,u)),a>=e||a<0){const h=Math.floor(a/e);a-=e*h,o+=Math.abs(h);const d=this.repetitions-o;if(d<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,a=t>0?e:0,this.time=a,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(d===1){const p=t<0;this._setEndings(p,!p,u)}else this._setEndings(!1,!1,u);this._loopCount=o,this.time=a,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:h})}}else this.time=a;if(u&&(o&1)===1)return e-a}return a}_setEndings(t,e,i){const a=this._interpolantSettings;i?(a.endingStart=Wf,a.endingEnd=Wf):(t?a.endingStart=this.zeroSlopeAtStart?Wf:Zf:a.endingStart=M0,e?a.endingEnd=this.zeroSlopeAtEnd?Wf:Zf:a.endingEnd=M0)}_scheduleFading(t,e,i){const a=this._mixer,o=a.time;let u=this._weightInterpolant;u===null&&(u=a._lendControlInterpolant(),this._weightInterpolant=u);const h=u.parameterPositions,d=u.sampleValues;return h[0]=o,d[0]=e,h[1]=o+t,d[1]=i,this}}const g5=new Float32Array(1);class v5 extends Cl{constructor(t){super(),this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(t,e){const i=t._localRoot||this._root,a=t._clip.tracks,o=a.length,u=t._propertyBindings,h=t._interpolants,d=i.uuid,p=this._bindingsByRootAndName;let v=p[d];v===void 0&&(v={},p[d]=v);for(let _=0;_!==o;++_){const x=a[_],b=x.name;let E=v[b];if(E!==void 0)++E.referenceCount,u[_]=E;else{if(E=u[_],E!==void 0){E._cacheIndex===null&&(++E.referenceCount,this._addInactiveBinding(E,d,b));continue}const R=e&&e._propertyBindings[_].binding.parsedPath;E=new PC(Hn.create(i,b,R),x.ValueTypeName,x.getValueSize()),++E.referenceCount,this._addInactiveBinding(E,d,b),u[_]=E}h[_].resultBuffer=E.buffer}}_activateAction(t){if(!this._isActiveAction(t)){if(t._cacheIndex===null){const i=(t._localRoot||this._root).uuid,a=t._clip.uuid,o=this._actionsByClip[a];this._bindAction(t,o&&o.knownActions[0]),this._addInactiveAction(t,a,i)}const e=t._propertyBindings;for(let i=0,a=e.length;i!==a;++i){const o=e[i];o.useCount++===0&&(this._lendBinding(o),o.saveOriginalState())}this._lendAction(t)}}_deactivateAction(t){if(this._isActiveAction(t)){const e=t._propertyBindings;for(let i=0,a=e.length;i!==a;++i){const o=e[i];--o.useCount===0&&(o.restoreOriginalState(),this._takeBackBinding(o))}this._takeBackAction(t)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}}_isActiveAction(t){const e=t._cacheIndex;return e!==null&&e<this._nActiveActions}_addInactiveAction(t,e,i){const a=this._actions,o=this._actionsByClip;let u=o[e];if(u===void 0)u={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,o[e]=u;else{const h=u.knownActions;t._byClipCacheIndex=h.length,h.push(t)}t._cacheIndex=a.length,a.push(t),u.actionByRoot[i]=t}_removeInactiveAction(t){const e=this._actions,i=e[e.length-1],a=t._cacheIndex;i._cacheIndex=a,e[a]=i,e.pop(),t._cacheIndex=null;const o=t._clip.uuid,u=this._actionsByClip,h=u[o],d=h.knownActions,p=d[d.length-1],v=t._byClipCacheIndex;p._byClipCacheIndex=v,d[v]=p,d.pop(),t._byClipCacheIndex=null;const _=h.actionByRoot,x=(t._localRoot||this._root).uuid;delete _[x],d.length===0&&delete u[o],this._removeInactiveBindingsForAction(t)}_removeInactiveBindingsForAction(t){const e=t._propertyBindings;for(let i=0,a=e.length;i!==a;++i){const o=e[i];--o.referenceCount===0&&this._removeInactiveBinding(o)}}_lendAction(t){const e=this._actions,i=t._cacheIndex,a=this._nActiveActions++,o=e[a];t._cacheIndex=a,e[a]=t,o._cacheIndex=i,e[i]=o}_takeBackAction(t){const e=this._actions,i=t._cacheIndex,a=--this._nActiveActions,o=e[a];t._cacheIndex=a,e[a]=t,o._cacheIndex=i,e[i]=o}_addInactiveBinding(t,e,i){const a=this._bindingsByRootAndName,o=this._bindings;let u=a[e];u===void 0&&(u={},a[e]=u),u[i]=t,t._cacheIndex=o.length,o.push(t)}_removeInactiveBinding(t){const e=this._bindings,i=t.binding,a=i.rootNode.uuid,o=i.path,u=this._bindingsByRootAndName,h=u[a],d=e[e.length-1],p=t._cacheIndex;d._cacheIndex=p,e[p]=d,e.pop(),delete h[o],Object.keys(h).length===0&&delete u[a]}_lendBinding(t){const e=this._bindings,i=t._cacheIndex,a=this._nActiveBindings++,o=e[a];t._cacheIndex=a,e[a]=t,o._cacheIndex=i,e[i]=o}_takeBackBinding(t){const e=this._bindings,i=t._cacheIndex,a=--this._nActiveBindings,o=e[a];t._cacheIndex=a,e[a]=t,o._cacheIndex=i,e[i]=o}_lendControlInterpolant(){const t=this._controlInterpolants,e=this._nActiveControlInterpolants++;let i=t[e];return i===void 0&&(i=new wM(new Float32Array(2),new Float32Array(2),1,g5),i.__cacheIndex=e,t[e]=i),i}_takeBackControlInterpolant(t){const e=this._controlInterpolants,i=t.__cacheIndex,a=--this._nActiveControlInterpolants,o=e[a];t.__cacheIndex=a,e[a]=t,o.__cacheIndex=i,e[i]=o}clipAction(t,e,i){const a=e||this._root,o=a.uuid;let u=typeof t=="string"?L0.findByName(a,t):t;const h=u!==null?u.uuid:t,d=this._actionsByClip[h];let p=null;if(i===void 0&&(u!==null?i=u.blendMode:i=fx),d!==void 0){const _=d.actionByRoot[o];if(_!==void 0&&_.blendMode===i)return _;p=d.knownActions[0],u===null&&(u=p._clip)}if(u===null)return null;const v=new HC(this,u,e,i);return this._bindAction(v,p),this._addInactiveAction(v,h,o),v}existingAction(t,e){const i=e||this._root,a=i.uuid,o=typeof t=="string"?L0.findByName(i,t):t,u=o?o.uuid:t,h=this._actionsByClip[u];return h!==void 0&&h.actionByRoot[a]||null}stopAllAction(){const t=this._actions,e=this._nActiveActions;for(let i=e-1;i>=0;--i)t[i].stop();return this}update(t){t*=this.timeScale;const e=this._actions,i=this._nActiveActions,a=this.time+=t,o=Math.sign(t),u=this._accuIndex^=1;for(let p=0;p!==i;++p)e[p]._update(a,t,o,u);const h=this._bindings,d=this._nActiveBindings;for(let p=0;p!==d;++p)h[p].apply(u);return this}setTime(t){this.time=0;for(let e=0;e<this._actions.length;e++)this._actions[e].time=0;return this.update(t)}getRoot(){return this._root}uncacheClip(t){const e=this._actions,i=t.uuid,a=this._actionsByClip,o=a[i];if(o!==void 0){const u=o.knownActions;for(let h=0,d=u.length;h!==d;++h){const p=u[h];this._deactivateAction(p);const v=p._cacheIndex,_=e[e.length-1];p._cacheIndex=null,p._byClipCacheIndex=null,_._cacheIndex=v,e[v]=_,e.pop(),this._removeInactiveBindingsForAction(p)}delete a[i]}}uncacheRoot(t){const e=t.uuid,i=this._actionsByClip;for(const u in i){const h=i[u].actionByRoot,d=h[e];d!==void 0&&(this._deactivateAction(d),this._removeInactiveAction(d))}const a=this._bindingsByRootAndName,o=a[e];if(o!==void 0)for(const u in o){const h=o[u];h.restoreOriginalState(),this._removeInactiveBinding(h)}}uncacheAction(t,e){const i=this.existingAction(t,e);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class _5 extends hx{constructor(t=1,e=1,i=1,a={}){super(t,e,a),this.isRenderTarget3D=!0,this.depth=i,this.texture=new dx(null,t,e,i),this.texture.isRenderTargetTexture=!0}}class y5 extends hx{constructor(t=1,e=1,i=1,a={}){super(t,e,a),this.isRenderTargetArray=!0,this.depth=i,this.texture=new eg(null,t,e,i),this.texture.isRenderTargetTexture=!0}}class zM{constructor(t){this.value=t}clone(){return new zM(this.value.clone===void 0?this.value:this.value.clone())}}let x5=0;class S5 extends Cl{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:x5++}),this.name="",this.usage=T0,this.uniforms=[]}add(t){return this.uniforms.push(t),this}remove(t){const e=this.uniforms.indexOf(t);return e!==-1&&this.uniforms.splice(e,1),this}setName(t){return this.name=t,this}setUsage(t){return this.usage=t,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(t){this.name=t.name,this.usage=t.usage;const e=t.uniforms;this.uniforms.length=0;for(let i=0,a=e.length;i<a;i++){const o=Array.isArray(e[i])?e[i]:[e[i]];for(let u=0;u<o.length;u++)this.uniforms.push(o[u].clone())}return this}clone(){return new this.constructor().copy(this)}}class b5 extends vx{constructor(t,e,i=1){super(t,e),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}clone(t){const e=super.clone(t);return e.meshPerAttribute=this.meshPerAttribute,e}toJSON(t){const e=super.toJSON(t);return e.isInstancedInterleavedBuffer=!0,e.meshPerAttribute=this.meshPerAttribute,e}}class M5{constructor(t,e,i,a,o){this.isGLBufferAttribute=!0,this.name="",this.buffer=t,this.type=e,this.itemSize=i,this.elementSize=a,this.count=o,this.version=0}set needsUpdate(t){t===!0&&this.version++}setBuffer(t){return this.buffer=t,this}setType(t,e){return this.type=t,this.elementSize=e,this}setItemSize(t){return this.itemSize=t,this}setCount(t){return this.count=t,this}}const qA=new $e;class BM{constructor(t,e,i=0,a=1/0){this.ray=new dh(t,e),this.near=i,this.far=a,this.camera=null,this.layers=new jd,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(t,e){this.ray.set(t,e)}setFromCamera(t,e){e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize(),this.camera=e):e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld),this.camera=e):console.error("THREE.Raycaster: Unsupported camera type: "+e.type)}setFromXRController(t){return qA.identity().extractRotation(t.matrixWorld),this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(qA),this}intersectObject(t,e=!0,i=[]){return Eb(t,this,i,e),i.sort(ZA),i}intersectObjects(t,e=!0,i=[]){for(let a=0,o=t.length;a<o;a++)Eb(t[a],this,i,e);return i.sort(ZA),i}}function ZA(n,t){return n.distance-t.distance}function Eb(n,t,e,i){let a=!0;if(n.layers.test(t.layers)&&n.raycast(t,e)===!1&&(a=!1),a===!0&&i===!0){const o=n.children;for(let u=0,h=o.length;u<h;u++)Eb(o[u],t,e,!0)}}class Tb{constructor(t=1,e=0,i=0){this.radius=t,this.phi=e,this.theta=i}set(t,e,i){return this.radius=t,this.phi=e,this.theta=i,this}copy(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this}makeSafe(){return this.phi=cn(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,e,i){return this.radius=Math.sqrt(t*t+e*e+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,i),this.phi=Math.acos(cn(e/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class E5{constructor(t=1,e=0,i=0){this.radius=t,this.theta=e,this.y=i}set(t,e,i){return this.radius=t,this.theta=e,this.y=i,this}copy(t){return this.radius=t.radius,this.theta=t.theta,this.y=t.y,this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,e,i){return this.radius=Math.sqrt(t*t+i*i),this.theta=Math.atan2(t,i),this.y=e,this}clone(){return new this.constructor().copy(this)}}class IM{constructor(t,e,i,a){IM.prototype.isMatrix2=!0,this.elements=[1,0,0,1],t!==void 0&&this.set(t,e,i,a)}identity(){return this.set(1,0,0,1),this}fromArray(t,e=0){for(let i=0;i<4;i++)this.elements[i]=t[i+e];return this}set(t,e,i,a){const o=this.elements;return o[0]=t,o[2]=e,o[1]=i,o[3]=a,this}}const WA=new jt;class T5{constructor(t=new jt(1/0,1/0),e=new jt(-1/0,-1/0)){this.isBox2=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromPoints(t){this.makeEmpty();for(let e=0,i=t.length;e<i;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const i=WA.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(i),this.max.copy(t).add(i),this}clone(){return new this.constructor().copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(t){return this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}containsPoint(t){return t.x>=this.min.x&&t.x<=this.max.x&&t.y>=this.min.y&&t.y<=this.max.y}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(t){return t.max.x>=this.min.x&&t.min.x<=this.max.x&&t.max.y>=this.min.y&&t.min.y<=this.max.y}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,WA).distanceTo(t)}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const jA=new J,U_=new J;class A5{constructor(t=new J,e=new J){this.start=t,this.end=e}set(t,e){return this.start.copy(t),this.end.copy(e),this}copy(t){return this.start.copy(t.start),this.end.copy(t.end),this}getCenter(t){return t.addVectors(this.start,this.end).multiplyScalar(.5)}delta(t){return t.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(t,e){return this.delta(e).multiplyScalar(t).add(this.start)}closestPointToPointParameter(t,e){jA.subVectors(t,this.start),U_.subVectors(this.end,this.start);const i=U_.dot(U_);let o=U_.dot(jA)/i;return e&&(o=cn(o,0,1)),o}closestPointToPoint(t,e,i){const a=this.closestPointToPointParameter(t,e);return this.delta(i).multiplyScalar(a).add(this.start)}applyMatrix4(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this}equals(t){return t.start.equals(this.start)&&t.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const KA=new J;class w5 extends Gn{constructor(t,e){super(),this.light=t,this.matrixAutoUpdate=!1,this.color=e,this.type="SpotLightHelper";const i=new xn,a=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let u=0,h=1,d=32;u<d;u++,h++){const p=u/d*Math.PI*2,v=h/d*Math.PI*2;a.push(Math.cos(p),Math.sin(p),1,Math.cos(v),Math.sin(v),1)}i.setAttribute("position",new He(a,3));const o=new Ar({fog:!1,toneMapped:!1});this.cone=new Dl(i,o),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const t=this.light.distance?this.light.distance:1e3,e=t*Math.tan(this.light.angle);this.cone.scale.set(e,e,t),KA.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(KA),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const vu=new J,O_=new $e,wS=new $e;class R5 extends Dl{constructor(t){const e=FC(t),i=new xn,a=[],o=[],u=new De(0,0,1),h=new De(0,1,0);for(let p=0;p<e.length;p++){const v=e[p];v.parent&&v.parent.isBone&&(a.push(0,0,0),a.push(0,0,0),o.push(u.r,u.g,u.b),o.push(h.r,h.g,h.b))}i.setAttribute("position",new He(a,3)),i.setAttribute("color",new He(o,3));const d=new Ar({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,d),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=t,this.bones=e,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(t){const e=this.bones,i=this.geometry,a=i.getAttribute("position");wS.copy(this.root.matrixWorld).invert();for(let o=0,u=0;o<e.length;o++){const h=e[o];h.parent&&h.parent.isBone&&(O_.multiplyMatrices(wS,h.matrixWorld),vu.setFromMatrixPosition(O_),a.setXYZ(u,vu.x,vu.y,vu.z),O_.multiplyMatrices(wS,h.parent.matrixWorld),vu.setFromMatrixPosition(O_),a.setXYZ(u+1,vu.x,vu.y,vu.z),u+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(t)}dispose(){this.geometry.dispose(),this.material.dispose()}}function FC(n){const t=[];n.isBone===!0&&t.push(n);for(let e=0;e<n.children.length;e++)t.push(...FC(n.children[e]));return t}class C5 extends Gi{constructor(t,e,i){const a=new cg(e,4,2),o=new Mc({wireframe:!0,fog:!1,toneMapped:!1});super(a,o),this.light=t,this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const D5=new J,QA=new De,JA=new De;class N5 extends Gn{constructor(t,e,i){super(),this.light=t,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="HemisphereLightHelper";const a=new lg(e);a.rotateY(Math.PI*.5),this.material=new Mc({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const o=a.getAttribute("position"),u=new Float32Array(o.count*3);a.setAttribute("color",new ui(u,3)),this.add(new Gi(a,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const t=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const e=t.geometry.getAttribute("color");QA.copy(this.light.color),JA.copy(this.light.groundColor);for(let i=0,a=e.count;i<a;i++){const o=i<a/2?QA:JA;e.setXYZ(i,o.r,o.g,o.b)}e.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),t.lookAt(D5.setFromMatrixPosition(this.light.matrixWorld).negate())}}class U5 extends Dl{constructor(t=10,e=10,i=4473924,a=8947848){i=new De(i),a=new De(a);const o=e/2,u=t/e,h=t/2,d=[],p=[];for(let x=0,b=0,E=-h;x<=e;x++,E+=u){d.push(-h,0,E,h,0,E),d.push(E,0,-h,E,0,h);const R=x===o?i:a;R.toArray(p,b),b+=3,R.toArray(p,b),b+=3,R.toArray(p,b),b+=3,R.toArray(p,b),b+=3}const v=new xn;v.setAttribute("position",new He(d,3)),v.setAttribute("color",new He(p,3));const _=new Ar({vertexColors:!0,toneMapped:!1});super(v,_),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class O5 extends Dl{constructor(t=10,e=16,i=8,a=64,o=4473924,u=8947848){o=new De(o),u=new De(u);const h=[],d=[];if(e>1)for(let _=0;_<e;_++){const x=_/e*(Math.PI*2),b=Math.sin(x)*t,E=Math.cos(x)*t;h.push(0,0,0),h.push(b,0,E);const R=_&1?o:u;d.push(R.r,R.g,R.b),d.push(R.r,R.g,R.b)}for(let _=0;_<i;_++){const x=_&1?o:u,b=t-t/i*_;for(let E=0;E<a;E++){let R=E/a*(Math.PI*2),w=Math.sin(R)*b,M=Math.cos(R)*b;h.push(w,0,M),d.push(x.r,x.g,x.b),R=(E+1)/a*(Math.PI*2),w=Math.sin(R)*b,M=Math.cos(R)*b,h.push(w,0,M),d.push(x.r,x.g,x.b)}}const p=new xn;p.setAttribute("position",new He(h,3)),p.setAttribute("color",new He(d,3));const v=new Ar({vertexColors:!0,toneMapped:!1});super(p,v),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const $A=new J,L_=new J,tw=new J;class L5 extends Gn{constructor(t,e,i){super(),this.light=t,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="DirectionalLightHelper",e===void 0&&(e=1);let a=new xn;a.setAttribute("position",new He([-e,e,0,e,e,0,e,-e,0,-e,-e,0,-e,e,0],3));const o=new Ar({fog:!1,toneMapped:!1});this.lightPlane=new Du(a,o),this.add(this.lightPlane),a=new xn,a.setAttribute("position",new He([0,0,0,0,0,1],3)),this.targetLine=new Du(a,o),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),$A.setFromMatrixPosition(this.light.matrixWorld),L_.setFromMatrixPosition(this.light.target.matrixWorld),tw.subVectors(L_,$A),this.lightPlane.lookAt(L_),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(L_),this.targetLine.scale.z=tw.length()}}const z_=new J,Ki=new px;class z5 extends Dl{constructor(t){const e=new xn,i=new Ar({color:16777215,vertexColors:!0,toneMapped:!1}),a=[],o=[],u={};h("n1","n2"),h("n2","n4"),h("n4","n3"),h("n3","n1"),h("f1","f2"),h("f2","f4"),h("f4","f3"),h("f3","f1"),h("n1","f1"),h("n2","f2"),h("n3","f3"),h("n4","f4"),h("p","n1"),h("p","n2"),h("p","n3"),h("p","n4"),h("u1","u2"),h("u2","u3"),h("u3","u1"),h("c","t"),h("p","c"),h("cn1","cn2"),h("cn3","cn4"),h("cf1","cf2"),h("cf3","cf4");function h(E,R){d(E),d(R)}function d(E){a.push(0,0,0),o.push(0,0,0),u[E]===void 0&&(u[E]=[]),u[E].push(a.length/3-1)}e.setAttribute("position",new He(a,3)),e.setAttribute("color",new He(o,3)),super(e,i),this.type="CameraHelper",this.camera=t,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=u,this.update();const p=new De(16755200),v=new De(16711680),_=new De(43775),x=new De(16777215),b=new De(3355443);this.setColors(p,v,_,x,b)}setColors(t,e,i,a,o){const h=this.geometry.getAttribute("color");h.setXYZ(0,t.r,t.g,t.b),h.setXYZ(1,t.r,t.g,t.b),h.setXYZ(2,t.r,t.g,t.b),h.setXYZ(3,t.r,t.g,t.b),h.setXYZ(4,t.r,t.g,t.b),h.setXYZ(5,t.r,t.g,t.b),h.setXYZ(6,t.r,t.g,t.b),h.setXYZ(7,t.r,t.g,t.b),h.setXYZ(8,t.r,t.g,t.b),h.setXYZ(9,t.r,t.g,t.b),h.setXYZ(10,t.r,t.g,t.b),h.setXYZ(11,t.r,t.g,t.b),h.setXYZ(12,t.r,t.g,t.b),h.setXYZ(13,t.r,t.g,t.b),h.setXYZ(14,t.r,t.g,t.b),h.setXYZ(15,t.r,t.g,t.b),h.setXYZ(16,t.r,t.g,t.b),h.setXYZ(17,t.r,t.g,t.b),h.setXYZ(18,t.r,t.g,t.b),h.setXYZ(19,t.r,t.g,t.b),h.setXYZ(20,t.r,t.g,t.b),h.setXYZ(21,t.r,t.g,t.b),h.setXYZ(22,t.r,t.g,t.b),h.setXYZ(23,t.r,t.g,t.b),h.setXYZ(24,e.r,e.g,e.b),h.setXYZ(25,e.r,e.g,e.b),h.setXYZ(26,e.r,e.g,e.b),h.setXYZ(27,e.r,e.g,e.b),h.setXYZ(28,e.r,e.g,e.b),h.setXYZ(29,e.r,e.g,e.b),h.setXYZ(30,e.r,e.g,e.b),h.setXYZ(31,e.r,e.g,e.b),h.setXYZ(32,i.r,i.g,i.b),h.setXYZ(33,i.r,i.g,i.b),h.setXYZ(34,i.r,i.g,i.b),h.setXYZ(35,i.r,i.g,i.b),h.setXYZ(36,i.r,i.g,i.b),h.setXYZ(37,i.r,i.g,i.b),h.setXYZ(38,a.r,a.g,a.b),h.setXYZ(39,a.r,a.g,a.b),h.setXYZ(40,o.r,o.g,o.b),h.setXYZ(41,o.r,o.g,o.b),h.setXYZ(42,o.r,o.g,o.b),h.setXYZ(43,o.r,o.g,o.b),h.setXYZ(44,o.r,o.g,o.b),h.setXYZ(45,o.r,o.g,o.b),h.setXYZ(46,o.r,o.g,o.b),h.setXYZ(47,o.r,o.g,o.b),h.setXYZ(48,o.r,o.g,o.b),h.setXYZ(49,o.r,o.g,o.b),h.needsUpdate=!0}update(){const t=this.geometry,e=this.pointMap,i=1,a=1;Ki.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse);const o=this.camera.coordinateSystem===Ao?-1:0;$i("c",e,t,Ki,0,0,o),$i("t",e,t,Ki,0,0,1),$i("n1",e,t,Ki,-1,-1,o),$i("n2",e,t,Ki,i,-1,o),$i("n3",e,t,Ki,-1,a,o),$i("n4",e,t,Ki,i,a,o),$i("f1",e,t,Ki,-1,-1,1),$i("f2",e,t,Ki,i,-1,1),$i("f3",e,t,Ki,-1,a,1),$i("f4",e,t,Ki,i,a,1),$i("u1",e,t,Ki,i*.7,a*1.1,o),$i("u2",e,t,Ki,-1*.7,a*1.1,o),$i("u3",e,t,Ki,0,a*2,o),$i("cf1",e,t,Ki,-1,0,1),$i("cf2",e,t,Ki,i,0,1),$i("cf3",e,t,Ki,0,-1,1),$i("cf4",e,t,Ki,0,a,1),$i("cn1",e,t,Ki,-1,0,o),$i("cn2",e,t,Ki,i,0,o),$i("cn3",e,t,Ki,0,-1,o),$i("cn4",e,t,Ki,0,a,o),t.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function $i(n,t,e,i,a,o,u){z_.set(a,o,u).unproject(i);const h=t[n];if(h!==void 0){const d=e.getAttribute("position");for(let p=0,v=h.length;p<v;p++)d.setXYZ(h[p],z_.x,z_.y,z_.z)}}const B_=new Tr;class B5 extends Dl{constructor(t,e=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),a=new Float32Array(8*3),o=new xn;o.setIndex(new ui(i,1)),o.setAttribute("position",new ui(a,3)),super(o,new Ar({color:e,toneMapped:!1})),this.object=t,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(){if(this.object!==void 0&&B_.setFromObject(this.object),B_.isEmpty())return;const t=B_.min,e=B_.max,i=this.geometry.attributes.position,a=i.array;a[0]=e.x,a[1]=e.y,a[2]=e.z,a[3]=t.x,a[4]=e.y,a[5]=e.z,a[6]=t.x,a[7]=t.y,a[8]=e.z,a[9]=e.x,a[10]=t.y,a[11]=e.z,a[12]=e.x,a[13]=e.y,a[14]=t.z,a[15]=t.x,a[16]=e.y,a[17]=t.z,a[18]=t.x,a[19]=t.y,a[20]=t.z,a[21]=e.x,a[22]=t.y,a[23]=t.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(t){return this.object=t,this.update(),this}copy(t,e){return super.copy(t,e),this.object=t.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class I5 extends Dl{constructor(t,e=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),a=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],o=new xn;o.setIndex(new ui(i,1)),o.setAttribute("position",new He(a,3)),super(o,new Ar({color:e,toneMapped:!1})),this.box=t,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(t){const e=this.box;e.isEmpty()||(e.getCenter(this.position),e.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(t))}dispose(){this.geometry.dispose(),this.material.dispose()}}class P5 extends Du{constructor(t,e=1,i=16776960){const a=i,o=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],u=new xn;u.setAttribute("position",new He(o,3)),u.computeBoundingSphere(),super(u,new Ar({color:a,toneMapped:!1})),this.type="PlaneHelper",this.plane=t,this.size=e;const h=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],d=new xn;d.setAttribute("position",new He(h,3)),d.computeBoundingSphere(),this.add(new Gi(d,new Mc({color:a,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(t){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(t)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const ew=new J;let I_,RS;class H5 extends Gn{constructor(t=new J(0,0,1),e=new J(0,0,0),i=1,a=16776960,o=i*.2,u=o*.2){super(),this.type="ArrowHelper",I_===void 0&&(I_=new xn,I_.setAttribute("position",new He([0,0,0,0,1,0],3)),RS=new sp(0,.5,1,5,1),RS.translate(0,-.5,0)),this.position.copy(e),this.line=new Du(I_,new Ar({color:a,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Gi(RS,new Mc({color:a,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(t),this.setLength(i,o,u)}setDirection(t){if(t.y>.99999)this.quaternion.set(0,0,0,1);else if(t.y<-.99999)this.quaternion.set(1,0,0,0);else{ew.set(t.z,0,-t.x).normalize();const e=Math.acos(t.y);this.quaternion.setFromAxisAngle(ew,e)}}setLength(t,e=t*.2,i=e*.2){this.line.scale.set(1,Math.max(1e-4,t-e),1),this.line.updateMatrix(),this.cone.scale.set(i,e,i),this.cone.position.y=t,this.cone.updateMatrix()}setColor(t){this.line.material.color.set(t),this.cone.material.color.set(t)}copy(t){return super.copy(t,!1),this.line.copy(t.line),this.cone.copy(t.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class F5 extends Dl{constructor(t=1){const e=[0,0,0,t,0,0,0,0,0,0,t,0,0,0,0,0,0,t],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],a=new xn;a.setAttribute("position",new He(e,3)),a.setAttribute("color",new He(i,3));const o=new Ar({vertexColors:!0,toneMapped:!1});super(a,o),this.type="AxesHelper"}setColors(t,e,i){const a=new De,o=this.geometry.attributes.color.array;return a.set(t),a.toArray(o,0),a.toArray(o,3),a.set(e),a.toArray(o,6),a.toArray(o,9),a.set(i),a.toArray(o,12),a.toArray(o,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class G5{constructor(){this.type="ShapePath",this.color=new De,this.subPaths=[],this.currentPath=null}moveTo(t,e){return this.currentPath=new R0,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e),this}lineTo(t,e){return this.currentPath.lineTo(t,e),this}quadraticCurveTo(t,e,i,a){return this.currentPath.quadraticCurveTo(t,e,i,a),this}bezierCurveTo(t,e,i,a,o,u){return this.currentPath.bezierCurveTo(t,e,i,a,o,u),this}splineThru(t){return this.currentPath.splineThru(t),this}toShapes(t){function e(M){const C=[];for(let U=0,D=M.length;U<D;U++){const z=M[U],B=new wu;B.curves=z.curves,C.push(B)}return C}function i(M,C){const U=C.length;let D=!1;for(let z=U-1,B=0;B<U;z=B++){let F=C[z],G=C[B],L=G.x-F.x,O=G.y-F.y;if(Math.abs(O)>Number.EPSILON){if(O<0&&(F=C[B],L=-L,G=C[z],O=-O),M.y<F.y||M.y>G.y)continue;if(M.y===F.y){if(M.x===F.x)return!0}else{const V=O*(M.x-F.x)-L*(M.y-F.y);if(V===0)return!0;if(V<0)continue;D=!D}}else{if(M.y!==F.y)continue;if(G.x<=M.x&&M.x<=F.x||F.x<=M.x&&M.x<=G.x)return!0}}return D}const a=Al.isClockWise,o=this.subPaths;if(o.length===0)return[];let u,h,d;const p=[];if(o.length===1)return h=o[0],d=new wu,d.curves=h.curves,p.push(d),p;let v=!a(o[0].getPoints());v=t?!v:v;const _=[],x=[];let b=[],E=0,R;x[E]=void 0,b[E]=[];for(let M=0,C=o.length;M<C;M++)h=o[M],R=h.getPoints(),u=a(R),u=t?!u:u,u?(!v&&x[E]&&E++,x[E]={s:new wu,p:R},x[E].s.curves=h.curves,v&&E++,b[E]=[]):b[E].push({h,p:R[0]});if(!x[0])return e(o);if(x.length>1){let M=!1,C=0;for(let U=0,D=x.length;U<D;U++)_[U]=[];for(let U=0,D=x.length;U<D;U++){const z=b[U];for(let B=0;B<z.length;B++){const F=z[B];let G=!0;for(let L=0;L<x.length;L++)i(F.p,x[L].p)&&(U!==L&&C++,G?(G=!1,_[L].push(F)):M=!0);G&&_[U].push(F)}}C>0&&M===!1&&(b=_)}let w;for(let M=0,C=x.length;M<C;M++){d=x[M].s,p.push(d),w=b[M];for(let U=0,D=w.length;U<D;U++)d.holes.push(w[U].h)}return p}}class V5 extends Cl{constructor(t,e=null){super(),this.object=t,this.domElement=e,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(){}disconnect(){}dispose(){}update(){}}function k5(n,t){const e=n.image&&n.image.width?n.image.width/n.image.height:1;return e>t?(n.repeat.x=1,n.repeat.y=e/t,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2):(n.repeat.x=t/e,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0),n}function X5(n,t){const e=n.image&&n.image.width?n.image.width/n.image.height:1;return e>t?(n.repeat.x=t/e,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0):(n.repeat.x=1,n.repeat.y=e/t,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2),n}function Y5(n){return n.repeat.x=1,n.repeat.y=1,n.offset.x=0,n.offset.y=0,n}function Ab(n,t,e,i){const a=q5(i);switch(e){case eM:return n*t;case iM:return n*t;case aM:return n*t*2;case $0:return n*t/a.components*a.byteLength;case tg:return n*t/a.components*a.byteLength;case rM:return n*t*2/a.components*a.byteLength;case cx:return n*t*2/a.components*a.byteLength;case nM:return n*t*3/a.components*a.byteLength;case ea:return n*t*4/a.components*a.byteLength;case ux:return n*t*4/a.components*a.byteLength;case Qm:case Jm:return Math.floor((n+3)/4)*Math.floor((t+3)/4)*8;case $m:case t0:return Math.floor((n+3)/4)*Math.floor((t+3)/4)*16;case vy:case yy:return Math.max(n,16)*Math.max(t,8)/4;case gy:case _y:return Math.max(n,8)*Math.max(t,8)/2;case xy:case Sy:return Math.floor((n+3)/4)*Math.floor((t+3)/4)*8;case by:return Math.floor((n+3)/4)*Math.floor((t+3)/4)*16;case My:return Math.floor((n+3)/4)*Math.floor((t+3)/4)*16;case Ey:return Math.floor((n+4)/5)*Math.floor((t+3)/4)*16;case Ty:return Math.floor((n+4)/5)*Math.floor((t+4)/5)*16;case Ay:return Math.floor((n+5)/6)*Math.floor((t+4)/5)*16;case wy:return Math.floor((n+5)/6)*Math.floor((t+5)/6)*16;case Ry:return Math.floor((n+7)/8)*Math.floor((t+4)/5)*16;case Cy:return Math.floor((n+7)/8)*Math.floor((t+5)/6)*16;case Dy:return Math.floor((n+7)/8)*Math.floor((t+7)/8)*16;case Ny:return Math.floor((n+9)/10)*Math.floor((t+4)/5)*16;case Uy:return Math.floor((n+9)/10)*Math.floor((t+5)/6)*16;case Oy:return Math.floor((n+9)/10)*Math.floor((t+7)/8)*16;case Ly:return Math.floor((n+9)/10)*Math.floor((t+9)/10)*16;case zy:return Math.floor((n+11)/12)*Math.floor((t+9)/10)*16;case By:return Math.floor((n+11)/12)*Math.floor((t+11)/12)*16;case e0:case Iy:case Py:return Math.ceil(n/4)*Math.ceil(t/4)*16;case sM:case Hy:return Math.ceil(n/4)*Math.ceil(t/4)*8;case Fy:case Gy:return Math.ceil(n/4)*Math.ceil(t/4)*16}throw new Error(`Unable to determine texture byte length for ${e} format.`)}function q5(n){switch(n){case jr:case rx:return{byteLength:1,components:1};case Zd:case sx:case Ra:return{byteLength:2,components:1};case ox:case lx:return{byteLength:2,components:4};case Rl:case J0:case Fi:return{byteLength:4,components:1};case tM:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${n}.`)}class Z5{static contain(t,e){return k5(t,e)}static cover(t,e){return X5(t,e)}static fill(t){return Y5(t)}static getByteLength(t,e,i,a){return Ab(t,e,i,a)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:K0}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=K0);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function GC(){let n=null,t=!1,e=null,i=null;function a(o,u){e(o,u),i=n.requestAnimationFrame(a)}return{start:function(){t!==!0&&e!==null&&(i=n.requestAnimationFrame(a),t=!0)},stop:function(){n.cancelAnimationFrame(i),t=!1},setAnimationLoop:function(o){e=o},setContext:function(o){n=o}}}function W5(n){const t=new WeakMap;function e(h,d){const p=h.array,v=h.usage,_=p.byteLength,x=n.createBuffer();n.bindBuffer(d,x),n.bufferData(d,p,v),h.onUploadCallback();let b;if(p instanceof Float32Array)b=n.FLOAT;else if(p instanceof Uint16Array)h.isFloat16BufferAttribute?b=n.HALF_FLOAT:b=n.UNSIGNED_SHORT;else if(p instanceof Int16Array)b=n.SHORT;else if(p instanceof Uint32Array)b=n.UNSIGNED_INT;else if(p instanceof Int32Array)b=n.INT;else if(p instanceof Int8Array)b=n.BYTE;else if(p instanceof Uint8Array)b=n.UNSIGNED_BYTE;else if(p instanceof Uint8ClampedArray)b=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+p);return{buffer:x,type:b,bytesPerElement:p.BYTES_PER_ELEMENT,version:h.version,size:_}}function i(h,d,p){const v=d.array,_=d.updateRanges;if(n.bindBuffer(p,h),_.length===0)n.bufferSubData(p,0,v);else{_.sort((b,E)=>b.start-E.start);let x=0;for(let b=1;b<_.length;b++){const E=_[x],R=_[b];R.start<=E.start+E.count+1?E.count=Math.max(E.count,R.start+R.count-E.start):(++x,_[x]=R)}_.length=x+1;for(let b=0,E=_.length;b<E;b++){const R=_[b];n.bufferSubData(p,R.start*v.BYTES_PER_ELEMENT,v,R.start,R.count)}d.clearUpdateRanges()}d.onUploadCallback()}function a(h){return h.isInterleavedBufferAttribute&&(h=h.data),t.get(h)}function o(h){h.isInterleavedBufferAttribute&&(h=h.data);const d=t.get(h);d&&(n.deleteBuffer(d.buffer),t.delete(h))}function u(h,d){if(h.isInterleavedBufferAttribute&&(h=h.data),h.isGLBufferAttribute){const v=t.get(h);(!v||v.version<h.version)&&t.set(h,{buffer:h.buffer,type:h.type,bytesPerElement:h.elementSize,version:h.version});return}const p=t.get(h);if(p===void 0)t.set(h,e(h,d));else if(p.version<h.version){if(p.size!==h.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");i(p.buffer,h,d),p.version=h.version}}return{get:a,remove:o,update:u}}var j5=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,K5=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,Q5=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,J5=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,$5=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,tI=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,eI=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,nI=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,iI=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,aI=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,rI=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,sI=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,oI=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,lI=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,cI=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,uI=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,fI=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,hI=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,dI=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,pI=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,mI=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,gI=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,vI=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,_I=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,yI=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,xI=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,SI=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,bI=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,MI=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,EI=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,TI="gl_FragColor = linearToOutputTexel( gl_FragColor );",AI=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,wI=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,RI=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,CI=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,DI=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,NI=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,UI=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,OI=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,LI=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,zI=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,BI=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,II=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,PI=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,HI=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,FI=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,GI=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,VI=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,kI=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,XI=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,YI=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,qI=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,ZI=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,WI=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,jI=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,KI=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,QI=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,JI=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,$I=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,tP=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,eP=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,nP=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,iP=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,aP=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,rP=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,sP=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,oP=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,lP=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,cP=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,uP=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,fP=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,hP=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,dP=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,pP=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,mP=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,gP=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,vP=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,_P=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,yP=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,xP=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,SP=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,bP=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,MP=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,EP=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,TP=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,AP=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,wP=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,RP=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,CP=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,DP=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,NP=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,UP=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,OP=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,LP=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,zP=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,BP=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,IP=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,PP=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,HP=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,FP=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,GP=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,VP=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,kP=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,XP=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,YP=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,qP=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,ZP=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const WP=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,jP=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,KP=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,QP=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,JP=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,$P=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,tH=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,eH=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,nH=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,iH=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,aH=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,rH=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,sH=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,oH=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,lH=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,cH=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,uH=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fH=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,hH=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,dH=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,pH=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,mH=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,gH=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,vH=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,_H=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,yH=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,xH=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,SH=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,bH=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,MH=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,EH=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,TH=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,AH=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,wH=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,yn={alphahash_fragment:j5,alphahash_pars_fragment:K5,alphamap_fragment:Q5,alphamap_pars_fragment:J5,alphatest_fragment:$5,alphatest_pars_fragment:tI,aomap_fragment:eI,aomap_pars_fragment:nI,batching_pars_vertex:iI,batching_vertex:aI,begin_vertex:rI,beginnormal_vertex:sI,bsdfs:oI,iridescence_fragment:lI,bumpmap_pars_fragment:cI,clipping_planes_fragment:uI,clipping_planes_pars_fragment:fI,clipping_planes_pars_vertex:hI,clipping_planes_vertex:dI,color_fragment:pI,color_pars_fragment:mI,color_pars_vertex:gI,color_vertex:vI,common:_I,cube_uv_reflection_fragment:yI,defaultnormal_vertex:xI,displacementmap_pars_vertex:SI,displacementmap_vertex:bI,emissivemap_fragment:MI,emissivemap_pars_fragment:EI,colorspace_fragment:TI,colorspace_pars_fragment:AI,envmap_fragment:wI,envmap_common_pars_fragment:RI,envmap_pars_fragment:CI,envmap_pars_vertex:DI,envmap_physical_pars_fragment:GI,envmap_vertex:NI,fog_vertex:UI,fog_pars_vertex:OI,fog_fragment:LI,fog_pars_fragment:zI,gradientmap_pars_fragment:BI,lightmap_pars_fragment:II,lights_lambert_fragment:PI,lights_lambert_pars_fragment:HI,lights_pars_begin:FI,lights_toon_fragment:VI,lights_toon_pars_fragment:kI,lights_phong_fragment:XI,lights_phong_pars_fragment:YI,lights_physical_fragment:qI,lights_physical_pars_fragment:ZI,lights_fragment_begin:WI,lights_fragment_maps:jI,lights_fragment_end:KI,logdepthbuf_fragment:QI,logdepthbuf_pars_fragment:JI,logdepthbuf_pars_vertex:$I,logdepthbuf_vertex:tP,map_fragment:eP,map_pars_fragment:nP,map_particle_fragment:iP,map_particle_pars_fragment:aP,metalnessmap_fragment:rP,metalnessmap_pars_fragment:sP,morphinstance_vertex:oP,morphcolor_vertex:lP,morphnormal_vertex:cP,morphtarget_pars_vertex:uP,morphtarget_vertex:fP,normal_fragment_begin:hP,normal_fragment_maps:dP,normal_pars_fragment:pP,normal_pars_vertex:mP,normal_vertex:gP,normalmap_pars_fragment:vP,clearcoat_normal_fragment_begin:_P,clearcoat_normal_fragment_maps:yP,clearcoat_pars_fragment:xP,iridescence_pars_fragment:SP,opaque_fragment:bP,packing:MP,premultiplied_alpha_fragment:EP,project_vertex:TP,dithering_fragment:AP,dithering_pars_fragment:wP,roughnessmap_fragment:RP,roughnessmap_pars_fragment:CP,shadowmap_pars_fragment:DP,shadowmap_pars_vertex:NP,shadowmap_vertex:UP,shadowmask_pars_fragment:OP,skinbase_vertex:LP,skinning_pars_vertex:zP,skinning_vertex:BP,skinnormal_vertex:IP,specularmap_fragment:PP,specularmap_pars_fragment:HP,tonemapping_fragment:FP,tonemapping_pars_fragment:GP,transmission_fragment:VP,transmission_pars_fragment:kP,uv_pars_fragment:XP,uv_pars_vertex:YP,uv_vertex:qP,worldpos_vertex:ZP,background_vert:WP,background_frag:jP,backgroundCube_vert:KP,backgroundCube_frag:QP,cube_vert:JP,cube_frag:$P,depth_vert:tH,depth_frag:eH,distanceRGBA_vert:nH,distanceRGBA_frag:iH,equirect_vert:aH,equirect_frag:rH,linedashed_vert:sH,linedashed_frag:oH,meshbasic_vert:lH,meshbasic_frag:cH,meshlambert_vert:uH,meshlambert_frag:fH,meshmatcap_vert:hH,meshmatcap_frag:dH,meshnormal_vert:pH,meshnormal_frag:mH,meshphong_vert:gH,meshphong_frag:vH,meshphysical_vert:_H,meshphysical_frag:yH,meshtoon_vert:xH,meshtoon_frag:SH,points_vert:bH,points_frag:MH,shadow_vert:EH,shadow_frag:TH,sprite_vert:AH,sprite_frag:wH},Te={common:{diffuse:{value:new De(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new hn},alphaMap:{value:null},alphaMapTransform:{value:new hn},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new hn}},envmap:{envMap:{value:null},envMapRotation:{value:new hn},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new hn}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new hn}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new hn},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new hn},normalScale:{value:new jt(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new hn},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new hn}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new hn}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new hn}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new De(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new De(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new hn},alphaTest:{value:0},uvTransform:{value:new hn}},sprite:{diffuse:{value:new De(16777215)},opacity:{value:1},center:{value:new jt(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new hn},alphaMap:{value:null},alphaMapTransform:{value:new hn},alphaTest:{value:0}}},Mo={basic:{uniforms:yr([Te.common,Te.specularmap,Te.envmap,Te.aomap,Te.lightmap,Te.fog]),vertexShader:yn.meshbasic_vert,fragmentShader:yn.meshbasic_frag},lambert:{uniforms:yr([Te.common,Te.specularmap,Te.envmap,Te.aomap,Te.lightmap,Te.emissivemap,Te.bumpmap,Te.normalmap,Te.displacementmap,Te.fog,Te.lights,{emissive:{value:new De(0)}}]),vertexShader:yn.meshlambert_vert,fragmentShader:yn.meshlambert_frag},phong:{uniforms:yr([Te.common,Te.specularmap,Te.envmap,Te.aomap,Te.lightmap,Te.emissivemap,Te.bumpmap,Te.normalmap,Te.displacementmap,Te.fog,Te.lights,{emissive:{value:new De(0)},specular:{value:new De(1118481)},shininess:{value:30}}]),vertexShader:yn.meshphong_vert,fragmentShader:yn.meshphong_frag},standard:{uniforms:yr([Te.common,Te.envmap,Te.aomap,Te.lightmap,Te.emissivemap,Te.bumpmap,Te.normalmap,Te.displacementmap,Te.roughnessmap,Te.metalnessmap,Te.fog,Te.lights,{emissive:{value:new De(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:yn.meshphysical_vert,fragmentShader:yn.meshphysical_frag},toon:{uniforms:yr([Te.common,Te.aomap,Te.lightmap,Te.emissivemap,Te.bumpmap,Te.normalmap,Te.displacementmap,Te.gradientmap,Te.fog,Te.lights,{emissive:{value:new De(0)}}]),vertexShader:yn.meshtoon_vert,fragmentShader:yn.meshtoon_frag},matcap:{uniforms:yr([Te.common,Te.bumpmap,Te.normalmap,Te.displacementmap,Te.fog,{matcap:{value:null}}]),vertexShader:yn.meshmatcap_vert,fragmentShader:yn.meshmatcap_frag},points:{uniforms:yr([Te.points,Te.fog]),vertexShader:yn.points_vert,fragmentShader:yn.points_frag},dashed:{uniforms:yr([Te.common,Te.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:yn.linedashed_vert,fragmentShader:yn.linedashed_frag},depth:{uniforms:yr([Te.common,Te.displacementmap]),vertexShader:yn.depth_vert,fragmentShader:yn.depth_frag},normal:{uniforms:yr([Te.common,Te.bumpmap,Te.normalmap,Te.displacementmap,{opacity:{value:1}}]),vertexShader:yn.meshnormal_vert,fragmentShader:yn.meshnormal_frag},sprite:{uniforms:yr([Te.sprite,Te.fog]),vertexShader:yn.sprite_vert,fragmentShader:yn.sprite_frag},background:{uniforms:{uvTransform:{value:new hn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:yn.background_vert,fragmentShader:yn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new hn}},vertexShader:yn.backgroundCube_vert,fragmentShader:yn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:yn.cube_vert,fragmentShader:yn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:yn.equirect_vert,fragmentShader:yn.equirect_frag},distanceRGBA:{uniforms:yr([Te.common,Te.displacementmap,{referencePosition:{value:new J},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:yn.distanceRGBA_vert,fragmentShader:yn.distanceRGBA_frag},shadow:{uniforms:yr([Te.lights,Te.fog,{color:{value:new De(0)},opacity:{value:1}}]),vertexShader:yn.shadow_vert,fragmentShader:yn.shadow_frag}};Mo.physical={uniforms:yr([Mo.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new hn},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new hn},clearcoatNormalScale:{value:new jt(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new hn},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new hn},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new hn},sheen:{value:0},sheenColor:{value:new De(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new hn},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new hn},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new hn},transmissionSamplerSize:{value:new jt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new hn},attenuationDistance:{value:0},attenuationColor:{value:new De(0)},specularColor:{value:new De(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new hn},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new hn},anisotropyVector:{value:new jt},anisotropyMap:{value:null},anisotropyMapTransform:{value:new hn}}]),vertexShader:yn.meshphysical_vert,fragmentShader:yn.meshphysical_frag};const P_={r:0,b:0,g:0},zf=new gs,RH=new $e;function CH(n,t,e,i,a,o,u){const h=new De(0);let d=o===!0?0:1,p,v,_=null,x=0,b=null;function E(U){let D=U.isScene===!0?U.background:null;return D&&D.isTexture&&(D=(U.backgroundBlurriness>0?e:t).get(D)),D}function R(U){let D=!1;const z=E(U);z===null?M(h,d):z&&z.isColor&&(M(z,1),D=!0);const B=n.xr.getEnvironmentBlendMode();B==="additive"?i.buffers.color.setClear(0,0,0,1,u):B==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,u),(n.autoClear||D)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function w(U,D){const z=E(D);z&&(z.isCubeTexture||z.mapping===rp)?(v===void 0&&(v=new Gi(new ph(1,1,1),new Kr({name:"BackgroundCubeMaterial",uniforms:Kd(Mo.backgroundCube.uniforms),vertexShader:Mo.backgroundCube.vertexShader,fragmentShader:Mo.backgroundCube.fragmentShader,side:Er,depthTest:!1,depthWrite:!1,fog:!1})),v.geometry.deleteAttribute("normal"),v.geometry.deleteAttribute("uv"),v.onBeforeRender=function(B,F,G){this.matrixWorld.copyPosition(G.matrixWorld)},Object.defineProperty(v.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),a.update(v)),zf.copy(D.backgroundRotation),zf.x*=-1,zf.y*=-1,zf.z*=-1,z.isCubeTexture&&z.isRenderTargetTexture===!1&&(zf.y*=-1,zf.z*=-1),v.material.uniforms.envMap.value=z,v.material.uniforms.flipEnvMap.value=z.isCubeTexture&&z.isRenderTargetTexture===!1?-1:1,v.material.uniforms.backgroundBlurriness.value=D.backgroundBlurriness,v.material.uniforms.backgroundIntensity.value=D.backgroundIntensity,v.material.uniforms.backgroundRotation.value.setFromMatrix4(RH.makeRotationFromEuler(zf)),v.material.toneMapped=On.getTransfer(z.colorSpace)!==ii,(_!==z||x!==z.version||b!==n.toneMapping)&&(v.material.needsUpdate=!0,_=z,x=z.version,b=n.toneMapping),v.layers.enableAll(),U.unshift(v,v.geometry,v.material,0,0,null)):z&&z.isTexture&&(p===void 0&&(p=new Gi(new Ou(2,2),new Kr({name:"BackgroundMaterial",uniforms:Kd(Mo.background.uniforms),vertexShader:Mo.background.vertexShader,fragmentShader:Mo.background.fragmentShader,side:bc,depthTest:!1,depthWrite:!1,fog:!1})),p.geometry.deleteAttribute("normal"),Object.defineProperty(p.material,"map",{get:function(){return this.uniforms.t2D.value}}),a.update(p)),p.material.uniforms.t2D.value=z,p.material.uniforms.backgroundIntensity.value=D.backgroundIntensity,p.material.toneMapped=On.getTransfer(z.colorSpace)!==ii,z.matrixAutoUpdate===!0&&z.updateMatrix(),p.material.uniforms.uvTransform.value.copy(z.matrix),(_!==z||x!==z.version||b!==n.toneMapping)&&(p.material.needsUpdate=!0,_=z,x=z.version,b=n.toneMapping),p.layers.enableAll(),U.unshift(p,p.geometry,p.material,0,0,null))}function M(U,D){U.getRGB(P_,VR(n)),i.buffers.color.setClear(P_.r,P_.g,P_.b,D,u)}function C(){v!==void 0&&(v.geometry.dispose(),v.material.dispose(),v=void 0),p!==void 0&&(p.geometry.dispose(),p.material.dispose(),p=void 0)}return{getClearColor:function(){return h},setClearColor:function(U,D=1){h.set(U),d=D,M(h,d)},getClearAlpha:function(){return d},setClearAlpha:function(U){d=U,M(h,d)},render:R,addToRenderList:w,dispose:C}}function DH(n,t){const e=n.getParameter(n.MAX_VERTEX_ATTRIBS),i={},a=x(null);let o=a,u=!1;function h(O,V,et,W,j){let ut=!1;const tt=_(W,et,V);o!==tt&&(o=tt,p(o.object)),ut=b(O,W,et,j),ut&&E(O,W,et,j),j!==null&&t.update(j,n.ELEMENT_ARRAY_BUFFER),(ut||u)&&(u=!1,D(O,V,et,W),j!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t.get(j).buffer))}function d(){return n.createVertexArray()}function p(O){return n.bindVertexArray(O)}function v(O){return n.deleteVertexArray(O)}function _(O,V,et){const W=et.wireframe===!0;let j=i[O.id];j===void 0&&(j={},i[O.id]=j);let ut=j[V.id];ut===void 0&&(ut={},j[V.id]=ut);let tt=ut[W];return tt===void 0&&(tt=x(d()),ut[W]=tt),tt}function x(O){const V=[],et=[],W=[];for(let j=0;j<e;j++)V[j]=0,et[j]=0,W[j]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:V,enabledAttributes:et,attributeDivisors:W,object:O,attributes:{},index:null}}function b(O,V,et,W){const j=o.attributes,ut=V.attributes;let tt=0;const pt=et.getAttributes();for(const ot in pt)if(pt[ot].location>=0){const Z=j[ot];let ht=ut[ot];if(ht===void 0&&(ot==="instanceMatrix"&&O.instanceMatrix&&(ht=O.instanceMatrix),ot==="instanceColor"&&O.instanceColor&&(ht=O.instanceColor)),Z===void 0||Z.attribute!==ht||ht&&Z.data!==ht.data)return!0;tt++}return o.attributesNum!==tt||o.index!==W}function E(O,V,et,W){const j={},ut=V.attributes;let tt=0;const pt=et.getAttributes();for(const ot in pt)if(pt[ot].location>=0){let Z=ut[ot];Z===void 0&&(ot==="instanceMatrix"&&O.instanceMatrix&&(Z=O.instanceMatrix),ot==="instanceColor"&&O.instanceColor&&(Z=O.instanceColor));const ht={};ht.attribute=Z,Z&&Z.data&&(ht.data=Z.data),j[ot]=ht,tt++}o.attributes=j,o.attributesNum=tt,o.index=W}function R(){const O=o.newAttributes;for(let V=0,et=O.length;V<et;V++)O[V]=0}function w(O){M(O,0)}function M(O,V){const et=o.newAttributes,W=o.enabledAttributes,j=o.attributeDivisors;et[O]=1,W[O]===0&&(n.enableVertexAttribArray(O),W[O]=1),j[O]!==V&&(n.vertexAttribDivisor(O,V),j[O]=V)}function C(){const O=o.newAttributes,V=o.enabledAttributes;for(let et=0,W=V.length;et<W;et++)V[et]!==O[et]&&(n.disableVertexAttribArray(et),V[et]=0)}function U(O,V,et,W,j,ut,tt){tt===!0?n.vertexAttribIPointer(O,V,et,j,ut):n.vertexAttribPointer(O,V,et,W,j,ut)}function D(O,V,et,W){R();const j=W.attributes,ut=et.getAttributes(),tt=V.defaultAttributeValues;for(const pt in ut){const ot=ut[pt];if(ot.location>=0){let Dt=j[pt];if(Dt===void 0&&(pt==="instanceMatrix"&&O.instanceMatrix&&(Dt=O.instanceMatrix),pt==="instanceColor"&&O.instanceColor&&(Dt=O.instanceColor)),Dt!==void 0){const Z=Dt.normalized,ht=Dt.itemSize,Tt=t.get(Dt);if(Tt===void 0)continue;const Ft=Tt.buffer,rt=Tt.type,Lt=Tt.bytesPerElement,Et=rt===n.INT||rt===n.UNSIGNED_INT||Dt.gpuType===J0;if(Dt.isInterleavedBufferAttribute){const Nt=Dt.data,Qt=Nt.stride,we=Dt.offset;if(Nt.isInstancedInterleavedBuffer){for(let re=0;re<ot.locationSize;re++)M(ot.location+re,Nt.meshPerAttribute);O.isInstancedMesh!==!0&&W._maxInstanceCount===void 0&&(W._maxInstanceCount=Nt.meshPerAttribute*Nt.count)}else for(let re=0;re<ot.locationSize;re++)w(ot.location+re);n.bindBuffer(n.ARRAY_BUFFER,Ft);for(let re=0;re<ot.locationSize;re++)U(ot.location+re,ht/ot.locationSize,rt,Z,Qt*Lt,(we+ht/ot.locationSize*re)*Lt,Et)}else{if(Dt.isInstancedBufferAttribute){for(let Nt=0;Nt<ot.locationSize;Nt++)M(ot.location+Nt,Dt.meshPerAttribute);O.isInstancedMesh!==!0&&W._maxInstanceCount===void 0&&(W._maxInstanceCount=Dt.meshPerAttribute*Dt.count)}else for(let Nt=0;Nt<ot.locationSize;Nt++)w(ot.location+Nt);n.bindBuffer(n.ARRAY_BUFFER,Ft);for(let Nt=0;Nt<ot.locationSize;Nt++)U(ot.location+Nt,ht/ot.locationSize,rt,Z,ht*Lt,ht/ot.locationSize*Nt*Lt,Et)}}else if(tt!==void 0){const Z=tt[pt];if(Z!==void 0)switch(Z.length){case 2:n.vertexAttrib2fv(ot.location,Z);break;case 3:n.vertexAttrib3fv(ot.location,Z);break;case 4:n.vertexAttrib4fv(ot.location,Z);break;default:n.vertexAttrib1fv(ot.location,Z)}}}}C()}function z(){G();for(const O in i){const V=i[O];for(const et in V){const W=V[et];for(const j in W)v(W[j].object),delete W[j];delete V[et]}delete i[O]}}function B(O){if(i[O.id]===void 0)return;const V=i[O.id];for(const et in V){const W=V[et];for(const j in W)v(W[j].object),delete W[j];delete V[et]}delete i[O.id]}function F(O){for(const V in i){const et=i[V];if(et[O.id]===void 0)continue;const W=et[O.id];for(const j in W)v(W[j].object),delete W[j];delete et[O.id]}}function G(){L(),u=!0,o!==a&&(o=a,p(o.object))}function L(){a.geometry=null,a.program=null,a.wireframe=!1}return{setup:h,reset:G,resetDefaultState:L,dispose:z,releaseStatesOfGeometry:B,releaseStatesOfProgram:F,initAttributes:R,enableAttribute:w,disableUnusedAttributes:C}}function NH(n,t,e){let i;function a(p){i=p}function o(p,v){n.drawArrays(i,p,v),e.update(v,i,1)}function u(p,v,_){_!==0&&(n.drawArraysInstanced(i,p,v,_),e.update(v,i,_))}function h(p,v,_){if(_===0)return;t.get("WEBGL_multi_draw").multiDrawArraysWEBGL(i,p,0,v,0,_);let b=0;for(let E=0;E<_;E++)b+=v[E];e.update(b,i,1)}function d(p,v,_,x){if(_===0)return;const b=t.get("WEBGL_multi_draw");if(b===null)for(let E=0;E<p.length;E++)u(p[E],v[E],x[E]);else{b.multiDrawArraysInstancedWEBGL(i,p,0,v,0,x,0,_);let E=0;for(let R=0;R<_;R++)E+=v[R]*x[R];e.update(E,i,1)}}this.setMode=a,this.render=o,this.renderInstances=u,this.renderMultiDraw=h,this.renderMultiDrawInstances=d}function UH(n,t,e,i){let a;function o(){if(a!==void 0)return a;if(t.has("EXT_texture_filter_anisotropic")===!0){const F=t.get("EXT_texture_filter_anisotropic");a=n.getParameter(F.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else a=0;return a}function u(F){return!(F!==ea&&i.convert(F)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function h(F){const G=F===Ra&&(t.has("EXT_color_buffer_half_float")||t.has("EXT_color_buffer_float"));return!(F!==jr&&i.convert(F)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&F!==Fi&&!G)}function d(F){if(F==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";F="mediump"}return F==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let p=e.precision!==void 0?e.precision:"highp";const v=d(p);v!==p&&(console.warn("THREE.WebGLRenderer:",p,"not supported, using",v,"instead."),p=v);const _=e.logarithmicDepthBuffer===!0,x=e.reverseDepthBuffer===!0&&t.has("EXT_clip_control"),b=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),E=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),R=n.getParameter(n.MAX_TEXTURE_SIZE),w=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),M=n.getParameter(n.MAX_VERTEX_ATTRIBS),C=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),U=n.getParameter(n.MAX_VARYING_VECTORS),D=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),z=E>0,B=n.getParameter(n.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:o,getMaxPrecision:d,textureFormatReadable:u,textureTypeReadable:h,precision:p,logarithmicDepthBuffer:_,reverseDepthBuffer:x,maxTextures:b,maxVertexTextures:E,maxTextureSize:R,maxCubemapSize:w,maxAttributes:M,maxVertexUniforms:C,maxVaryings:U,maxFragmentUniforms:D,vertexTextures:z,maxSamples:B}}function OH(n){const t=this;let e=null,i=0,a=!1,o=!1;const u=new mc,h=new hn,d={value:null,needsUpdate:!1};this.uniform=d,this.numPlanes=0,this.numIntersection=0,this.init=function(_,x){const b=_.length!==0||x||i!==0||a;return a=x,i=_.length,b},this.beginShadows=function(){o=!0,v(null)},this.endShadows=function(){o=!1},this.setGlobalState=function(_,x){e=v(_,x,0)},this.setState=function(_,x,b){const E=_.clippingPlanes,R=_.clipIntersection,w=_.clipShadows,M=n.get(_);if(!a||E===null||E.length===0||o&&!w)o?v(null):p();else{const C=o?0:i,U=C*4;let D=M.clippingState||null;d.value=D,D=v(E,x,U,b);for(let z=0;z!==U;++z)D[z]=e[z];M.clippingState=D,this.numIntersection=R?this.numPlanes:0,this.numPlanes+=C}};function p(){d.value!==e&&(d.value=e,d.needsUpdate=i>0),t.numPlanes=i,t.numIntersection=0}function v(_,x,b,E){const R=_!==null?_.length:0;let w=null;if(R!==0){if(w=d.value,E!==!0||w===null){const M=b+R*4,C=x.matrixWorldInverse;h.getNormalMatrix(C),(w===null||w.length<M)&&(w=new Float32Array(M));for(let U=0,D=b;U!==R;++U,D+=4)u.copy(_[U]).applyMatrix4(C,h),u.normal.toArray(w,D),w[D+3]=u.constant}d.value=w,d.needsUpdate=!0}return t.numPlanes=R,t.numIntersection=0,w}}function LH(n){let t=new WeakMap;function e(u,h){return h===sh?u.mapping=wl:h===y0&&(u.mapping=Cu),u}function i(u){if(u&&u.isTexture){const h=u.mapping;if(h===sh||h===y0)if(t.has(u)){const d=t.get(u).texture;return e(d,u.mapping)}else{const d=u.image;if(d&&d.height>0){const p=new hM(d.height);return p.fromEquirectangularTexture(n,u),t.set(u,p),u.addEventListener("dispose",a),e(p.texture,u.mapping)}else return null}}return u}function a(u){const h=u.target;h.removeEventListener("dispose",a);const d=t.get(h);d!==void 0&&(t.delete(h),d.dispose())}function o(){t=new WeakMap}return{get:i,dispose:o}}const Pd=4,nw=[.125,.215,.35,.446,.526,.582],Vf=20,CS=new xc,iw=new De;let DS=null,NS=0,US=0,OS=!1;const Gf=(1+Math.sqrt(5))/2,Dd=1/Gf,aw=[new J(-Gf,Dd,0),new J(Gf,Dd,0),new J(-Dd,0,Gf),new J(Dd,0,Gf),new J(0,Gf,-Dd),new J(0,Gf,Dd),new J(-1,1,-1),new J(1,1,-1),new J(-1,1,1),new J(1,1,1)],zH=new J;class wb{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(t,e=0,i=.1,a=100,o={}){const{size:u=256,position:h=zH}=o;DS=this._renderer.getRenderTarget(),NS=this._renderer.getActiveCubeFace(),US=this._renderer.getActiveMipmapLevel(),OS=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(u);const d=this._allocateTargets();return d.depthBuffer=!0,this._sceneToCubeUV(t,i,a,d,h),e>0&&this._blur(d,0,0,e),this._applyPMREM(d),this._cleanup(d),d}fromEquirectangular(t,e=null){return this._fromTexture(t,e)}fromCubemap(t,e=null){return this._fromTexture(t,e)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=ow(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=sw(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(t){this._lodMax=Math.floor(Math.log2(t)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let t=0;t<this._lodPlanes.length;t++)this._lodPlanes[t].dispose()}_cleanup(t){this._renderer.setRenderTarget(DS,NS,US),this._renderer.xr.enabled=OS,t.scissorTest=!1,H_(t,0,0,t.width,t.height)}_fromTexture(t,e){t.mapping===wl||t.mapping===Cu?this._setSize(t.image.length===0?16:t.image[0].width||t.image[0].image.width):this._setSize(t.image.width/4),DS=this._renderer.getRenderTarget(),NS=this._renderer.getActiveCubeFace(),US=this._renderer.getActiveMipmapLevel(),OS=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const i=e||this._allocateTargets();return this._textureToCubeUV(t,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const t=3*Math.max(this._cubeSize,112),e=4*this._cubeSize,i={magFilter:ai,minFilter:ai,generateMipmaps:!1,type:Ra,format:ea,colorSpace:Ro,depthBuffer:!1},a=rw(t,e,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==t||this._pingPongRenderTarget.height!==e){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=rw(t,e,i);const{_lodMax:o}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=BH(o)),this._blurMaterial=IH(o,t,e)}return a}_compileMaterial(t){const e=new Gi(this._lodPlanes[0],t);this._renderer.compile(e,CS)}_sceneToCubeUV(t,e,i,a,o){const d=new ta(90,1,e,i),p=[1,-1,1,1,1,1],v=[1,1,1,-1,-1,-1],_=this._renderer,x=_.autoClear,b=_.toneMapping;_.getClearColor(iw),_.toneMapping=Tl,_.autoClear=!1;const E=new Mc({name:"PMREM.Background",side:Er,depthWrite:!1,depthTest:!1}),R=new Gi(new ph,E);let w=!1;const M=t.background;M?M.isColor&&(E.color.copy(M),t.background=null,w=!0):(E.color.copy(iw),w=!0);for(let C=0;C<6;C++){const U=C%3;U===0?(d.up.set(0,p[C],0),d.position.set(o.x,o.y,o.z),d.lookAt(o.x+v[C],o.y,o.z)):U===1?(d.up.set(0,0,p[C]),d.position.set(o.x,o.y,o.z),d.lookAt(o.x,o.y+v[C],o.z)):(d.up.set(0,p[C],0),d.position.set(o.x,o.y,o.z),d.lookAt(o.x,o.y,o.z+v[C]));const D=this._cubeSize;H_(a,U*D,C>2?D:0,D,D),_.setRenderTarget(a),w&&_.render(R,d),_.render(t,d)}R.geometry.dispose(),R.material.dispose(),_.toneMapping=b,_.autoClear=x,t.background=M}_textureToCubeUV(t,e){const i=this._renderer,a=t.mapping===wl||t.mapping===Cu;a?(this._cubemapMaterial===null&&(this._cubemapMaterial=ow()),this._cubemapMaterial.uniforms.flipEnvMap.value=t.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=sw());const o=a?this._cubemapMaterial:this._equirectMaterial,u=new Gi(this._lodPlanes[0],o),h=o.uniforms;h.envMap.value=t;const d=this._cubeSize;H_(e,0,0,3*d,2*d),i.setRenderTarget(e),i.render(u,CS)}_applyPMREM(t){const e=this._renderer,i=e.autoClear;e.autoClear=!1;const a=this._lodPlanes.length;for(let o=1;o<a;o++){const u=Math.sqrt(this._sigmas[o]*this._sigmas[o]-this._sigmas[o-1]*this._sigmas[o-1]),h=aw[(a-o-1)%aw.length];this._blur(t,o-1,o,u,h)}e.autoClear=i}_blur(t,e,i,a,o){const u=this._pingPongRenderTarget;this._halfBlur(t,u,e,i,a,"latitudinal",o),this._halfBlur(u,t,i,i,a,"longitudinal",o)}_halfBlur(t,e,i,a,o,u,h){const d=this._renderer,p=this._blurMaterial;u!=="latitudinal"&&u!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const v=3,_=new Gi(this._lodPlanes[a],p),x=p.uniforms,b=this._sizeLods[i]-1,E=isFinite(o)?Math.PI/(2*b):2*Math.PI/(2*Vf-1),R=o/E,w=isFinite(o)?1+Math.floor(v*R):Vf;w>Vf&&console.warn(`sigmaRadians, ${o}, is too large and will clip, as it requested ${w} samples when the maximum is set to ${Vf}`);const M=[];let C=0;for(let F=0;F<Vf;++F){const G=F/R,L=Math.exp(-G*G/2);M.push(L),F===0?C+=L:F<w&&(C+=2*L)}for(let F=0;F<M.length;F++)M[F]=M[F]/C;x.envMap.value=t.texture,x.samples.value=w,x.weights.value=M,x.latitudinal.value=u==="latitudinal",h&&(x.poleAxis.value=h);const{_lodMax:U}=this;x.dTheta.value=E,x.mipInt.value=U-i;const D=this._sizeLods[a],z=3*D*(a>U-Pd?a-U+Pd:0),B=4*(this._cubeSize-D);H_(e,z,B,3*D,2*D),d.setRenderTarget(e),d.render(_,CS)}}function BH(n){const t=[],e=[],i=[];let a=n;const o=n-Pd+1+nw.length;for(let u=0;u<o;u++){const h=Math.pow(2,a);e.push(h);let d=1/h;u>n-Pd?d=nw[u-n+Pd-1]:u===0&&(d=0),i.push(d);const p=1/(h-2),v=-p,_=1+p,x=[v,v,_,v,_,_,v,v,_,_,v,_],b=6,E=6,R=3,w=2,M=1,C=new Float32Array(R*E*b),U=new Float32Array(w*E*b),D=new Float32Array(M*E*b);for(let B=0;B<b;B++){const F=B%3*2/3-1,G=B>2?0:-1,L=[F,G,0,F+2/3,G,0,F+2/3,G+1,0,F,G,0,F+2/3,G+1,0,F,G+1,0];C.set(L,R*E*B),U.set(x,w*E*B);const O=[B,B,B,B,B,B];D.set(O,M*E*B)}const z=new xn;z.setAttribute("position",new ui(C,R)),z.setAttribute("uv",new ui(U,w)),z.setAttribute("faceIndex",new ui(D,M)),t.push(z),a>Pd&&a--}return{lodPlanes:t,sizeLods:e,sigmas:i}}function rw(n,t,e){const i=new Is(n,t,e);return i.texture.mapping=rp,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function H_(n,t,e,i,a){n.viewport.set(t,e,i,a),n.scissor.set(t,e,i,a)}function IH(n,t,e){const i=new Float32Array(Vf),a=new J(0,1,0);return new Kr({name:"SphericalGaussianBlur",defines:{n:Vf,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/e,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:a}},vertexShader:PM(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:El,depthTest:!1,depthWrite:!1})}function sw(){return new Kr({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:PM(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:El,depthTest:!1,depthWrite:!1})}function ow(){return new Kr({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:PM(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:El,depthTest:!1,depthWrite:!1})}function PM(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function PH(n){let t=new WeakMap,e=null;function i(h){if(h&&h.isTexture){const d=h.mapping,p=d===sh||d===y0,v=d===wl||d===Cu;if(p||v){let _=t.get(h);const x=_!==void 0?_.texture.pmremVersion:0;if(h.isRenderTargetTexture&&h.pmremVersion!==x)return e===null&&(e=new wb(n)),_=p?e.fromEquirectangular(h,_):e.fromCubemap(h,_),_.texture.pmremVersion=h.pmremVersion,t.set(h,_),_.texture;if(_!==void 0)return _.texture;{const b=h.image;return p&&b&&b.height>0||v&&b&&a(b)?(e===null&&(e=new wb(n)),_=p?e.fromEquirectangular(h):e.fromCubemap(h),_.texture.pmremVersion=h.pmremVersion,t.set(h,_),h.addEventListener("dispose",o),_.texture):null}}}return h}function a(h){let d=0;const p=6;for(let v=0;v<p;v++)h[v]!==void 0&&d++;return d===p}function o(h){const d=h.target;d.removeEventListener("dispose",o);const p=t.get(d);p!==void 0&&(t.delete(d),p.dispose())}function u(){t=new WeakMap,e!==null&&(e.dispose(),e=null)}return{get:i,dispose:u}}function HH(n){const t={};function e(i){if(t[i]!==void 0)return t[i];let a;switch(i){case"WEBGL_depth_texture":a=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":a=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":a=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":a=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:a=n.getExtension(i)}return t[i]=a,a}return{has:function(i){return e(i)!==null},init:function(){e("EXT_color_buffer_float"),e("WEBGL_clip_cull_distance"),e("OES_texture_float_linear"),e("EXT_color_buffer_half_float"),e("WEBGL_multisampled_render_to_texture"),e("WEBGL_render_shared_exponent")},get:function(i){const a=e(i);return a===null&&Ff("THREE.WebGLRenderer: "+i+" extension not supported."),a}}}function FH(n,t,e,i){const a={},o=new WeakMap;function u(_){const x=_.target;x.index!==null&&t.remove(x.index);for(const E in x.attributes)t.remove(x.attributes[E]);x.removeEventListener("dispose",u),delete a[x.id];const b=o.get(x);b&&(t.remove(b),o.delete(x)),i.releaseStatesOfGeometry(x),x.isInstancedBufferGeometry===!0&&delete x._maxInstanceCount,e.memory.geometries--}function h(_,x){return a[x.id]===!0||(x.addEventListener("dispose",u),a[x.id]=!0,e.memory.geometries++),x}function d(_){const x=_.attributes;for(const b in x)t.update(x[b],n.ARRAY_BUFFER)}function p(_){const x=[],b=_.index,E=_.attributes.position;let R=0;if(b!==null){const C=b.array;R=b.version;for(let U=0,D=C.length;U<D;U+=3){const z=C[U+0],B=C[U+1],F=C[U+2];x.push(z,B,B,F,F,z)}}else if(E!==void 0){const C=E.array;R=E.version;for(let U=0,D=C.length/3-1;U<D;U+=3){const z=U+0,B=U+1,F=U+2;x.push(z,B,B,F,F,z)}}else return;const w=new(PR(x)?fM:uM)(x,1);w.version=R;const M=o.get(_);M&&t.remove(M),o.set(_,w)}function v(_){const x=o.get(_);if(x){const b=_.index;b!==null&&x.version<b.version&&p(_)}else p(_);return o.get(_)}return{get:h,update:d,getWireframeAttribute:v}}function GH(n,t,e){let i;function a(x){i=x}let o,u;function h(x){o=x.type,u=x.bytesPerElement}function d(x,b){n.drawElements(i,b,o,x*u),e.update(b,i,1)}function p(x,b,E){E!==0&&(n.drawElementsInstanced(i,b,o,x*u,E),e.update(b,i,E))}function v(x,b,E){if(E===0)return;t.get("WEBGL_multi_draw").multiDrawElementsWEBGL(i,b,0,o,x,0,E);let w=0;for(let M=0;M<E;M++)w+=b[M];e.update(w,i,1)}function _(x,b,E,R){if(E===0)return;const w=t.get("WEBGL_multi_draw");if(w===null)for(let M=0;M<x.length;M++)p(x[M]/u,b[M],R[M]);else{w.multiDrawElementsInstancedWEBGL(i,b,0,o,x,0,R,0,E);let M=0;for(let C=0;C<E;C++)M+=b[C]*R[C];e.update(M,i,1)}}this.setMode=a,this.setIndex=h,this.render=d,this.renderInstances=p,this.renderMultiDraw=v,this.renderMultiDrawInstances=_}function VH(n){const t={geometries:0,textures:0},e={frame:0,calls:0,triangles:0,points:0,lines:0};function i(o,u,h){switch(e.calls++,u){case n.TRIANGLES:e.triangles+=h*(o/3);break;case n.LINES:e.lines+=h*(o/2);break;case n.LINE_STRIP:e.lines+=h*(o-1);break;case n.LINE_LOOP:e.lines+=h*o;break;case n.POINTS:e.points+=h*o;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",u);break}}function a(){e.calls=0,e.triangles=0,e.points=0,e.lines=0}return{memory:t,render:e,programs:null,autoReset:!0,reset:a,update:i}}function kH(n,t,e){const i=new WeakMap,a=new Fn;function o(u,h,d){const p=u.morphTargetInfluences,v=h.morphAttributes.position||h.morphAttributes.normal||h.morphAttributes.color,_=v!==void 0?v.length:0;let x=i.get(h);if(x===void 0||x.count!==_){let L=function(){F.dispose(),i.delete(h),h.removeEventListener("dispose",L)};x!==void 0&&x.texture.dispose();const b=h.morphAttributes.position!==void 0,E=h.morphAttributes.normal!==void 0,R=h.morphAttributes.color!==void 0,w=h.morphAttributes.position||[],M=h.morphAttributes.normal||[],C=h.morphAttributes.color||[];let U=0;b===!0&&(U=1),E===!0&&(U=2),R===!0&&(U=3);let D=h.attributes.position.count*U,z=1;D>t.maxTextureSize&&(z=Math.ceil(D/t.maxTextureSize),D=t.maxTextureSize);const B=new Float32Array(D*z*4*_),F=new eg(B,D,z,_);F.type=Fi,F.needsUpdate=!0;const G=U*4;for(let O=0;O<_;O++){const V=w[O],et=M[O],W=C[O],j=D*z*4*O;for(let ut=0;ut<V.count;ut++){const tt=ut*G;b===!0&&(a.fromBufferAttribute(V,ut),B[j+tt+0]=a.x,B[j+tt+1]=a.y,B[j+tt+2]=a.z,B[j+tt+3]=0),E===!0&&(a.fromBufferAttribute(et,ut),B[j+tt+4]=a.x,B[j+tt+5]=a.y,B[j+tt+6]=a.z,B[j+tt+7]=0),R===!0&&(a.fromBufferAttribute(W,ut),B[j+tt+8]=a.x,B[j+tt+9]=a.y,B[j+tt+10]=a.z,B[j+tt+11]=W.itemSize===4?a.w:1)}}x={count:_,texture:F,size:new jt(D,z)},i.set(h,x),h.addEventListener("dispose",L)}if(u.isInstancedMesh===!0&&u.morphTexture!==null)d.getUniforms().setValue(n,"morphTexture",u.morphTexture,e);else{let b=0;for(let R=0;R<p.length;R++)b+=p[R];const E=h.morphTargetsRelative?1:1-b;d.getUniforms().setValue(n,"morphTargetBaseInfluence",E),d.getUniforms().setValue(n,"morphTargetInfluences",p)}d.getUniforms().setValue(n,"morphTargetsTexture",x.texture,e),d.getUniforms().setValue(n,"morphTargetsTextureSize",x.size)}return{update:o}}function XH(n,t,e,i){let a=new WeakMap;function o(d){const p=i.render.frame,v=d.geometry,_=t.get(d,v);if(a.get(_)!==p&&(t.update(_),a.set(_,p)),d.isInstancedMesh&&(d.hasEventListener("dispose",h)===!1&&d.addEventListener("dispose",h),a.get(d)!==p&&(e.update(d.instanceMatrix,n.ARRAY_BUFFER),d.instanceColor!==null&&e.update(d.instanceColor,n.ARRAY_BUFFER),a.set(d,p))),d.isSkinnedMesh){const x=d.skeleton;a.get(x)!==p&&(x.update(),a.set(x,p))}return _}function u(){a=new WeakMap}function h(d){const p=d.target;p.removeEventListener("dispose",h),e.remove(p.instanceMatrix),p.instanceColor!==null&&e.remove(p.instanceColor)}return{update:o,dispose:u}}const VC=new ci,lw=new gM(1,1),kC=new eg,XC=new dx,YC=new ng,cw=[],uw=[],fw=new Float32Array(16),hw=new Float32Array(9),dw=new Float32Array(4);function op(n,t,e){const i=n[0];if(i<=0||i>0)return n;const a=t*e;let o=cw[a];if(o===void 0&&(o=new Float32Array(a),cw[a]=o),t!==0){i.toArray(o,0);for(let u=1,h=0;u!==t;++u)h+=e,n[u].toArray(o,h)}return o}function ma(n,t){if(n.length!==t.length)return!1;for(let e=0,i=n.length;e<i;e++)if(n[e]!==t[e])return!1;return!0}function ga(n,t){for(let e=0,i=t.length;e<i;e++)n[e]=t[e]}function Lx(n,t){let e=uw[t];e===void 0&&(e=new Int32Array(t),uw[t]=e);for(let i=0;i!==t;++i)e[i]=n.allocateTextureUnit();return e}function YH(n,t){const e=this.cache;e[0]!==t&&(n.uniform1f(this.addr,t),e[0]=t)}function qH(n,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y)&&(n.uniform2f(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(ma(e,t))return;n.uniform2fv(this.addr,t),ga(e,t)}}function ZH(n,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(n.uniform3f(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else if(t.r!==void 0)(e[0]!==t.r||e[1]!==t.g||e[2]!==t.b)&&(n.uniform3f(this.addr,t.r,t.g,t.b),e[0]=t.r,e[1]=t.g,e[2]=t.b);else{if(ma(e,t))return;n.uniform3fv(this.addr,t),ga(e,t)}}function WH(n,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(n.uniform4f(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(ma(e,t))return;n.uniform4fv(this.addr,t),ga(e,t)}}function jH(n,t){const e=this.cache,i=t.elements;if(i===void 0){if(ma(e,t))return;n.uniformMatrix2fv(this.addr,!1,t),ga(e,t)}else{if(ma(e,i))return;dw.set(i),n.uniformMatrix2fv(this.addr,!1,dw),ga(e,i)}}function KH(n,t){const e=this.cache,i=t.elements;if(i===void 0){if(ma(e,t))return;n.uniformMatrix3fv(this.addr,!1,t),ga(e,t)}else{if(ma(e,i))return;hw.set(i),n.uniformMatrix3fv(this.addr,!1,hw),ga(e,i)}}function QH(n,t){const e=this.cache,i=t.elements;if(i===void 0){if(ma(e,t))return;n.uniformMatrix4fv(this.addr,!1,t),ga(e,t)}else{if(ma(e,i))return;fw.set(i),n.uniformMatrix4fv(this.addr,!1,fw),ga(e,i)}}function JH(n,t){const e=this.cache;e[0]!==t&&(n.uniform1i(this.addr,t),e[0]=t)}function $H(n,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y)&&(n.uniform2i(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(ma(e,t))return;n.uniform2iv(this.addr,t),ga(e,t)}}function t6(n,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(n.uniform3i(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else{if(ma(e,t))return;n.uniform3iv(this.addr,t),ga(e,t)}}function e6(n,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(n.uniform4i(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(ma(e,t))return;n.uniform4iv(this.addr,t),ga(e,t)}}function n6(n,t){const e=this.cache;e[0]!==t&&(n.uniform1ui(this.addr,t),e[0]=t)}function i6(n,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y)&&(n.uniform2ui(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(ma(e,t))return;n.uniform2uiv(this.addr,t),ga(e,t)}}function a6(n,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(n.uniform3ui(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else{if(ma(e,t))return;n.uniform3uiv(this.addr,t),ga(e,t)}}function r6(n,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(n.uniform4ui(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(ma(e,t))return;n.uniform4uiv(this.addr,t),ga(e,t)}}function s6(n,t,e){const i=this.cache,a=e.allocateTextureUnit();i[0]!==a&&(n.uniform1i(this.addr,a),i[0]=a);let o;this.type===n.SAMPLER_2D_SHADOW?(lw.compareFunction=lM,o=lw):o=VC,e.setTexture2D(t||o,a)}function o6(n,t,e){const i=this.cache,a=e.allocateTextureUnit();i[0]!==a&&(n.uniform1i(this.addr,a),i[0]=a),e.setTexture3D(t||XC,a)}function l6(n,t,e){const i=this.cache,a=e.allocateTextureUnit();i[0]!==a&&(n.uniform1i(this.addr,a),i[0]=a),e.setTextureCube(t||YC,a)}function c6(n,t,e){const i=this.cache,a=e.allocateTextureUnit();i[0]!==a&&(n.uniform1i(this.addr,a),i[0]=a),e.setTexture2DArray(t||kC,a)}function u6(n){switch(n){case 5126:return YH;case 35664:return qH;case 35665:return ZH;case 35666:return WH;case 35674:return jH;case 35675:return KH;case 35676:return QH;case 5124:case 35670:return JH;case 35667:case 35671:return $H;case 35668:case 35672:return t6;case 35669:case 35673:return e6;case 5125:return n6;case 36294:return i6;case 36295:return a6;case 36296:return r6;case 35678:case 36198:case 36298:case 36306:case 35682:return s6;case 35679:case 36299:case 36307:return o6;case 35680:case 36300:case 36308:case 36293:return l6;case 36289:case 36303:case 36311:case 36292:return c6}}function f6(n,t){n.uniform1fv(this.addr,t)}function h6(n,t){const e=op(t,this.size,2);n.uniform2fv(this.addr,e)}function d6(n,t){const e=op(t,this.size,3);n.uniform3fv(this.addr,e)}function p6(n,t){const e=op(t,this.size,4);n.uniform4fv(this.addr,e)}function m6(n,t){const e=op(t,this.size,4);n.uniformMatrix2fv(this.addr,!1,e)}function g6(n,t){const e=op(t,this.size,9);n.uniformMatrix3fv(this.addr,!1,e)}function v6(n,t){const e=op(t,this.size,16);n.uniformMatrix4fv(this.addr,!1,e)}function _6(n,t){n.uniform1iv(this.addr,t)}function y6(n,t){n.uniform2iv(this.addr,t)}function x6(n,t){n.uniform3iv(this.addr,t)}function S6(n,t){n.uniform4iv(this.addr,t)}function b6(n,t){n.uniform1uiv(this.addr,t)}function M6(n,t){n.uniform2uiv(this.addr,t)}function E6(n,t){n.uniform3uiv(this.addr,t)}function T6(n,t){n.uniform4uiv(this.addr,t)}function A6(n,t,e){const i=this.cache,a=t.length,o=Lx(e,a);ma(i,o)||(n.uniform1iv(this.addr,o),ga(i,o));for(let u=0;u!==a;++u)e.setTexture2D(t[u]||VC,o[u])}function w6(n,t,e){const i=this.cache,a=t.length,o=Lx(e,a);ma(i,o)||(n.uniform1iv(this.addr,o),ga(i,o));for(let u=0;u!==a;++u)e.setTexture3D(t[u]||XC,o[u])}function R6(n,t,e){const i=this.cache,a=t.length,o=Lx(e,a);ma(i,o)||(n.uniform1iv(this.addr,o),ga(i,o));for(let u=0;u!==a;++u)e.setTextureCube(t[u]||YC,o[u])}function C6(n,t,e){const i=this.cache,a=t.length,o=Lx(e,a);ma(i,o)||(n.uniform1iv(this.addr,o),ga(i,o));for(let u=0;u!==a;++u)e.setTexture2DArray(t[u]||kC,o[u])}function D6(n){switch(n){case 5126:return f6;case 35664:return h6;case 35665:return d6;case 35666:return p6;case 35674:return m6;case 35675:return g6;case 35676:return v6;case 5124:case 35670:return _6;case 35667:case 35671:return y6;case 35668:case 35672:return x6;case 35669:case 35673:return S6;case 5125:return b6;case 36294:return M6;case 36295:return E6;case 36296:return T6;case 35678:case 36198:case 36298:case 36306:case 35682:return A6;case 35679:case 36299:case 36307:return w6;case 35680:case 36300:case 36308:case 36293:return R6;case 36289:case 36303:case 36311:case 36292:return C6}}class N6{constructor(t,e,i){this.id=t,this.addr=i,this.cache=[],this.type=e.type,this.setValue=u6(e.type)}}class U6{constructor(t,e,i){this.id=t,this.addr=i,this.cache=[],this.type=e.type,this.size=e.size,this.setValue=D6(e.type)}}class O6{constructor(t){this.id=t,this.seq=[],this.map={}}setValue(t,e,i){const a=this.seq;for(let o=0,u=a.length;o!==u;++o){const h=a[o];h.setValue(t,e[h.id],i)}}}const LS=/(\w+)(\])?(\[|\.)?/g;function pw(n,t){n.seq.push(t),n.map[t.id]=t}function L6(n,t,e){const i=n.name,a=i.length;for(LS.lastIndex=0;;){const o=LS.exec(i),u=LS.lastIndex;let h=o[1];const d=o[2]==="]",p=o[3];if(d&&(h=h|0),p===void 0||p==="["&&u+2===a){pw(e,p===void 0?new N6(h,n,t):new U6(h,n,t));break}else{let _=e.map[h];_===void 0&&(_=new O6(h),pw(e,_)),e=_}}}class J_{constructor(t,e){this.seq=[],this.map={};const i=t.getProgramParameter(e,t.ACTIVE_UNIFORMS);for(let a=0;a<i;++a){const o=t.getActiveUniform(e,a),u=t.getUniformLocation(e,o.name);L6(o,u,this)}}setValue(t,e,i,a){const o=this.map[e];o!==void 0&&o.setValue(t,i,a)}setOptional(t,e,i){const a=e[i];a!==void 0&&this.setValue(t,i,a)}static upload(t,e,i,a){for(let o=0,u=e.length;o!==u;++o){const h=e[o],d=i[h.id];d.needsUpdate!==!1&&h.setValue(t,d.value,a)}}static seqWithValue(t,e){const i=[];for(let a=0,o=t.length;a!==o;++a){const u=t[a];u.id in e&&i.push(u)}return i}}function mw(n,t,e){const i=n.createShader(t);return n.shaderSource(i,e),n.compileShader(i),i}const z6=37297;let B6=0;function I6(n,t){const e=n.split(`
`),i=[],a=Math.max(t-6,0),o=Math.min(t+6,e.length);for(let u=a;u<o;u++){const h=u+1;i.push(`${h===t?">":" "} ${h}: ${e[u]}`)}return i.join(`
`)}const gw=new hn;function P6(n){On._getMatrix(gw,On.workingColorSpace,n);const t=`mat3( ${gw.elements.map(e=>e.toFixed(4))} )`;switch(On.getTransfer(n)){case E0:return[t,"LinearTransferOETF"];case ii:return[t,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",n),[t,"LinearTransferOETF"]}}function vw(n,t,e){const i=n.getShaderParameter(t,n.COMPILE_STATUS),a=n.getShaderInfoLog(t).trim();if(i&&a==="")return"";const o=/ERROR: 0:(\d+)/.exec(a);if(o){const u=parseInt(o[1]);return e.toUpperCase()+`

`+a+`

`+I6(n.getShaderSource(t),u)}else return a}function H6(n,t){const e=P6(t);return[`vec4 ${n}( vec4 value ) {`,`	return ${e[1]}( vec4( value.rgb * ${e[0]}, value.a ) );`,"}"].join(`
`)}function F6(n,t){let e;switch(t){case _R:e="Linear";break;case yR:e="Reinhard";break;case xR:e="Cineon";break;case Jb:e="ACESFilmic";break;case bR:e="AgX";break;case MR:e="Neutral";break;case SR:e="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),e="Linear"}return"vec3 "+n+"( vec3 color ) { return "+e+"ToneMapping( color ); }"}const F_=new J;function G6(){On.getLuminanceCoefficients(F_);const n=F_.x.toFixed(4),t=F_.y.toFixed(4),e=F_.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${n}, ${t}, ${e} );`,"	return dot( weights, rgb );","}"].join(`
`)}function V6(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(km).join(`
`)}function k6(n){const t=[];for(const e in n){const i=n[e];i!==!1&&t.push("#define "+e+" "+i)}return t.join(`
`)}function X6(n,t){const e={},i=n.getProgramParameter(t,n.ACTIVE_ATTRIBUTES);for(let a=0;a<i;a++){const o=n.getActiveAttrib(t,a),u=o.name;let h=1;o.type===n.FLOAT_MAT2&&(h=2),o.type===n.FLOAT_MAT3&&(h=3),o.type===n.FLOAT_MAT4&&(h=4),e[u]={type:o.type,location:n.getAttribLocation(t,u),locationSize:h}}return e}function km(n){return n!==""}function _w(n,t){const e=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,e).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function yw(n,t){return n.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const Y6=/^[ \t]*#include +<([\w\d./]+)>/gm;function Rb(n){return n.replace(Y6,Z6)}const q6=new Map;function Z6(n,t){let e=yn[t];if(e===void 0){const i=q6.get(t);if(i!==void 0)e=yn[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',t,i);else throw new Error("Can not resolve #include <"+t+">")}return Rb(e)}const W6=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function xw(n){return n.replace(W6,j6)}function j6(n,t,e,i){let a="";for(let o=parseInt(t);o<parseInt(e);o++)a+=i.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return a}function Sw(n){let t=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?t+=`
#define HIGH_PRECISION`:n.precision==="mediump"?t+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(t+=`
#define LOW_PRECISION`),t}function K6(n){let t="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===ax?t="SHADOWMAP_TYPE_PCF":n.shadowMapType===jm?t="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===bo&&(t="SHADOWMAP_TYPE_VSM"),t}function Q6(n){let t="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case wl:case Cu:t="ENVMAP_TYPE_CUBE";break;case rp:t="ENVMAP_TYPE_CUBE_UV";break}return t}function J6(n){let t="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case Cu:t="ENVMAP_MODE_REFRACTION";break}return t}function $6(n){let t="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case Q0:t="ENVMAP_BLENDING_MULTIPLY";break;case gR:t="ENVMAP_BLENDING_MIX";break;case vR:t="ENVMAP_BLENDING_ADD";break}return t}function tF(n){const t=n.envMapCubeUVHeight;if(t===null)return null;const e=Math.log2(t)-2,i=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,e),7*16)),texelHeight:i,maxMip:e}}function eF(n,t,e,i){const a=n.getContext(),o=e.defines;let u=e.vertexShader,h=e.fragmentShader;const d=K6(e),p=Q6(e),v=J6(e),_=$6(e),x=tF(e),b=V6(e),E=k6(o),R=a.createProgram();let w,M,C=e.glslVersion?"#version "+e.glslVersion+`
`:"";e.isRawShaderMaterial?(w=["#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,E].filter(km).join(`
`),w.length>0&&(w+=`
`),M=["#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,E].filter(km).join(`
`),M.length>0&&(M+=`
`)):(w=[Sw(e),"#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,E,e.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",e.batching?"#define USE_BATCHING":"",e.batchingColor?"#define USE_BATCHING_COLOR":"",e.instancing?"#define USE_INSTANCING":"",e.instancingColor?"#define USE_INSTANCING_COLOR":"",e.instancingMorph?"#define USE_INSTANCING_MORPH":"",e.useFog&&e.fog?"#define USE_FOG":"",e.useFog&&e.fogExp2?"#define FOG_EXP2":"",e.map?"#define USE_MAP":"",e.envMap?"#define USE_ENVMAP":"",e.envMap?"#define "+v:"",e.lightMap?"#define USE_LIGHTMAP":"",e.aoMap?"#define USE_AOMAP":"",e.bumpMap?"#define USE_BUMPMAP":"",e.normalMap?"#define USE_NORMALMAP":"",e.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",e.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",e.displacementMap?"#define USE_DISPLACEMENTMAP":"",e.emissiveMap?"#define USE_EMISSIVEMAP":"",e.anisotropy?"#define USE_ANISOTROPY":"",e.anisotropyMap?"#define USE_ANISOTROPYMAP":"",e.clearcoatMap?"#define USE_CLEARCOATMAP":"",e.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",e.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",e.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",e.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",e.specularMap?"#define USE_SPECULARMAP":"",e.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",e.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",e.roughnessMap?"#define USE_ROUGHNESSMAP":"",e.metalnessMap?"#define USE_METALNESSMAP":"",e.alphaMap?"#define USE_ALPHAMAP":"",e.alphaHash?"#define USE_ALPHAHASH":"",e.transmission?"#define USE_TRANSMISSION":"",e.transmissionMap?"#define USE_TRANSMISSIONMAP":"",e.thicknessMap?"#define USE_THICKNESSMAP":"",e.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",e.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",e.mapUv?"#define MAP_UV "+e.mapUv:"",e.alphaMapUv?"#define ALPHAMAP_UV "+e.alphaMapUv:"",e.lightMapUv?"#define LIGHTMAP_UV "+e.lightMapUv:"",e.aoMapUv?"#define AOMAP_UV "+e.aoMapUv:"",e.emissiveMapUv?"#define EMISSIVEMAP_UV "+e.emissiveMapUv:"",e.bumpMapUv?"#define BUMPMAP_UV "+e.bumpMapUv:"",e.normalMapUv?"#define NORMALMAP_UV "+e.normalMapUv:"",e.displacementMapUv?"#define DISPLACEMENTMAP_UV "+e.displacementMapUv:"",e.metalnessMapUv?"#define METALNESSMAP_UV "+e.metalnessMapUv:"",e.roughnessMapUv?"#define ROUGHNESSMAP_UV "+e.roughnessMapUv:"",e.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+e.anisotropyMapUv:"",e.clearcoatMapUv?"#define CLEARCOATMAP_UV "+e.clearcoatMapUv:"",e.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+e.clearcoatNormalMapUv:"",e.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+e.clearcoatRoughnessMapUv:"",e.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+e.iridescenceMapUv:"",e.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+e.iridescenceThicknessMapUv:"",e.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+e.sheenColorMapUv:"",e.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+e.sheenRoughnessMapUv:"",e.specularMapUv?"#define SPECULARMAP_UV "+e.specularMapUv:"",e.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+e.specularColorMapUv:"",e.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+e.specularIntensityMapUv:"",e.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+e.transmissionMapUv:"",e.thicknessMapUv?"#define THICKNESSMAP_UV "+e.thicknessMapUv:"",e.vertexTangents&&e.flatShading===!1?"#define USE_TANGENT":"",e.vertexColors?"#define USE_COLOR":"",e.vertexAlphas?"#define USE_COLOR_ALPHA":"",e.vertexUv1s?"#define USE_UV1":"",e.vertexUv2s?"#define USE_UV2":"",e.vertexUv3s?"#define USE_UV3":"",e.pointsUvs?"#define USE_POINTS_UV":"",e.flatShading?"#define FLAT_SHADED":"",e.skinning?"#define USE_SKINNING":"",e.morphTargets?"#define USE_MORPHTARGETS":"",e.morphNormals&&e.flatShading===!1?"#define USE_MORPHNORMALS":"",e.morphColors?"#define USE_MORPHCOLORS":"",e.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+e.morphTextureStride:"",e.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+e.morphTargetsCount:"",e.doubleSided?"#define DOUBLE_SIDED":"",e.flipSided?"#define FLIP_SIDED":"",e.shadowMapEnabled?"#define USE_SHADOWMAP":"",e.shadowMapEnabled?"#define "+d:"",e.sizeAttenuation?"#define USE_SIZEATTENUATION":"",e.numLightProbes>0?"#define USE_LIGHT_PROBES":"",e.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",e.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(km).join(`
`),M=[Sw(e),"#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,E,e.useFog&&e.fog?"#define USE_FOG":"",e.useFog&&e.fogExp2?"#define FOG_EXP2":"",e.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",e.map?"#define USE_MAP":"",e.matcap?"#define USE_MATCAP":"",e.envMap?"#define USE_ENVMAP":"",e.envMap?"#define "+p:"",e.envMap?"#define "+v:"",e.envMap?"#define "+_:"",x?"#define CUBEUV_TEXEL_WIDTH "+x.texelWidth:"",x?"#define CUBEUV_TEXEL_HEIGHT "+x.texelHeight:"",x?"#define CUBEUV_MAX_MIP "+x.maxMip+".0":"",e.lightMap?"#define USE_LIGHTMAP":"",e.aoMap?"#define USE_AOMAP":"",e.bumpMap?"#define USE_BUMPMAP":"",e.normalMap?"#define USE_NORMALMAP":"",e.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",e.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",e.emissiveMap?"#define USE_EMISSIVEMAP":"",e.anisotropy?"#define USE_ANISOTROPY":"",e.anisotropyMap?"#define USE_ANISOTROPYMAP":"",e.clearcoat?"#define USE_CLEARCOAT":"",e.clearcoatMap?"#define USE_CLEARCOATMAP":"",e.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",e.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",e.dispersion?"#define USE_DISPERSION":"",e.iridescence?"#define USE_IRIDESCENCE":"",e.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",e.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",e.specularMap?"#define USE_SPECULARMAP":"",e.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",e.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",e.roughnessMap?"#define USE_ROUGHNESSMAP":"",e.metalnessMap?"#define USE_METALNESSMAP":"",e.alphaMap?"#define USE_ALPHAMAP":"",e.alphaTest?"#define USE_ALPHATEST":"",e.alphaHash?"#define USE_ALPHAHASH":"",e.sheen?"#define USE_SHEEN":"",e.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",e.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",e.transmission?"#define USE_TRANSMISSION":"",e.transmissionMap?"#define USE_TRANSMISSIONMAP":"",e.thicknessMap?"#define USE_THICKNESSMAP":"",e.vertexTangents&&e.flatShading===!1?"#define USE_TANGENT":"",e.vertexColors||e.instancingColor||e.batchingColor?"#define USE_COLOR":"",e.vertexAlphas?"#define USE_COLOR_ALPHA":"",e.vertexUv1s?"#define USE_UV1":"",e.vertexUv2s?"#define USE_UV2":"",e.vertexUv3s?"#define USE_UV3":"",e.pointsUvs?"#define USE_POINTS_UV":"",e.gradientMap?"#define USE_GRADIENTMAP":"",e.flatShading?"#define FLAT_SHADED":"",e.doubleSided?"#define DOUBLE_SIDED":"",e.flipSided?"#define FLIP_SIDED":"",e.shadowMapEnabled?"#define USE_SHADOWMAP":"",e.shadowMapEnabled?"#define "+d:"",e.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",e.numLightProbes>0?"#define USE_LIGHT_PROBES":"",e.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",e.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",e.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",e.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",e.toneMapping!==Tl?"#define TONE_MAPPING":"",e.toneMapping!==Tl?yn.tonemapping_pars_fragment:"",e.toneMapping!==Tl?F6("toneMapping",e.toneMapping):"",e.dithering?"#define DITHERING":"",e.opaque?"#define OPAQUE":"",yn.colorspace_pars_fragment,H6("linearToOutputTexel",e.outputColorSpace),G6(),e.useDepthPacking?"#define DEPTH_PACKING "+e.depthPacking:"",`
`].filter(km).join(`
`)),u=Rb(u),u=_w(u,e),u=yw(u,e),h=Rb(h),h=_w(h,e),h=yw(h,e),u=xw(u),h=xw(h),e.isRawShaderMaterial!==!0&&(C=`#version 300 es
`,w=[b,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+w,M=["#define varying in",e.glslVersion===_b?"":"layout(location = 0) out highp vec4 pc_fragColor;",e.glslVersion===_b?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+M);const U=C+w+u,D=C+M+h,z=mw(a,a.VERTEX_SHADER,U),B=mw(a,a.FRAGMENT_SHADER,D);a.attachShader(R,z),a.attachShader(R,B),e.index0AttributeName!==void 0?a.bindAttribLocation(R,0,e.index0AttributeName):e.morphTargets===!0&&a.bindAttribLocation(R,0,"position"),a.linkProgram(R);function F(V){if(n.debug.checkShaderErrors){const et=a.getProgramInfoLog(R).trim(),W=a.getShaderInfoLog(z).trim(),j=a.getShaderInfoLog(B).trim();let ut=!0,tt=!0;if(a.getProgramParameter(R,a.LINK_STATUS)===!1)if(ut=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(a,R,z,B);else{const pt=vw(a,z,"vertex"),ot=vw(a,B,"fragment");console.error("THREE.WebGLProgram: Shader Error "+a.getError()+" - VALIDATE_STATUS "+a.getProgramParameter(R,a.VALIDATE_STATUS)+`

Material Name: `+V.name+`
Material Type: `+V.type+`

Program Info Log: `+et+`
`+pt+`
`+ot)}else et!==""?console.warn("THREE.WebGLProgram: Program Info Log:",et):(W===""||j==="")&&(tt=!1);tt&&(V.diagnostics={runnable:ut,programLog:et,vertexShader:{log:W,prefix:w},fragmentShader:{log:j,prefix:M}})}a.deleteShader(z),a.deleteShader(B),G=new J_(a,R),L=X6(a,R)}let G;this.getUniforms=function(){return G===void 0&&F(this),G};let L;this.getAttributes=function(){return L===void 0&&F(this),L};let O=e.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return O===!1&&(O=a.getProgramParameter(R,z6)),O},this.destroy=function(){i.releaseStatesOfProgram(this),a.deleteProgram(R),this.program=void 0},this.type=e.shaderType,this.name=e.shaderName,this.id=B6++,this.cacheKey=t,this.usedTimes=1,this.program=R,this.vertexShader=z,this.fragmentShader=B,this}let nF=0;class iF{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(t){const e=t.vertexShader,i=t.fragmentShader,a=this._getShaderStage(e),o=this._getShaderStage(i),u=this._getShaderCacheForMaterial(t);return u.has(a)===!1&&(u.add(a),a.usedTimes++),u.has(o)===!1&&(u.add(o),o.usedTimes++),this}remove(t){const e=this.materialCache.get(t);for(const i of e)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(t),this}getVertexShaderID(t){return this._getShaderStage(t.vertexShader).id}getFragmentShaderID(t){return this._getShaderStage(t.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(t){const e=this.materialCache;let i=e.get(t);return i===void 0&&(i=new Set,e.set(t,i)),i}_getShaderStage(t){const e=this.shaderCache;let i=e.get(t);return i===void 0&&(i=new aF(t),e.set(t,i)),i}}class aF{constructor(t){this.id=nF++,this.code=t,this.usedTimes=0}}function rF(n,t,e,i,a,o,u){const h=new jd,d=new iF,p=new Set,v=[],_=a.logarithmicDepthBuffer,x=a.vertexTextures;let b=a.precision;const E={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function R(L){return p.add(L),L===0?"uv":`uv${L}`}function w(L,O,V,et,W){const j=et.fog,ut=W.geometry,tt=L.isMeshStandardMaterial?et.environment:null,pt=(L.isMeshStandardMaterial?e:t).get(L.envMap||tt),ot=pt&&pt.mapping===rp?pt.image.height:null,Dt=E[L.type];L.precision!==null&&(b=a.getMaxPrecision(L.precision),b!==L.precision&&console.warn("THREE.WebGLProgram.getParameters:",L.precision,"not supported, using",b,"instead."));const Z=ut.morphAttributes.position||ut.morphAttributes.normal||ut.morphAttributes.color,ht=Z!==void 0?Z.length:0;let Tt=0;ut.morphAttributes.position!==void 0&&(Tt=1),ut.morphAttributes.normal!==void 0&&(Tt=2),ut.morphAttributes.color!==void 0&&(Tt=3);let Ft,rt,Lt,Et;if(Dt){const rn=Mo[Dt];Ft=rn.vertexShader,rt=rn.fragmentShader}else Ft=L.vertexShader,rt=L.fragmentShader,d.update(L),Lt=d.getVertexShaderID(L),Et=d.getFragmentShaderID(L);const Nt=n.getRenderTarget(),Qt=n.state.buffers.depth.getReversed(),we=W.isInstancedMesh===!0,re=W.isBatchedMesh===!0,ke=!!L.map,Jt=!!L.matcap,Yt=!!pt,Q=!!L.aoMap,Me=!!L.lightMap,ee=!!L.bumpMap,pe=!!L.normalMap,se=!!L.displacementMap,Be=!!L.emissiveMap,he=!!L.metalnessMap,K=!!L.roughnessMap,k=L.anisotropy>0,xt=L.clearcoat>0,Pt=L.dispersion>0,$t=L.iridescence>0,Xt=L.sheen>0,Re=L.transmission>0,de=k&&!!L.anisotropyMap,_e=xt&&!!L.clearcoatMap,an=xt&&!!L.clearcoatNormalMap,ae=xt&&!!L.clearcoatRoughnessMap,Ae=$t&&!!L.iridescenceMap,Ce=$t&&!!L.iridescenceThicknessMap,me=Xt&&!!L.sheenColorMap,ye=Xt&&!!L.sheenRoughnessMap,lt=!!L.specularMap,wt=!!L.specularColorMap,le=!!L.specularIntensityMap,ct=Re&&!!L.transmissionMap,St=Re&&!!L.thicknessMap,Rt=!!L.gradientMap,Gt=!!L.alphaMap,ge=L.alphaTest>0,ve=!!L.alphaHash,Ie=!!L.extensions;let mn=Tl;L.toneMapped&&(Nt===null||Nt.isXRRenderTarget===!0)&&(mn=n.toneMapping);const Bn={shaderID:Dt,shaderType:L.type,shaderName:L.name,vertexShader:Ft,fragmentShader:rt,defines:L.defines,customVertexShaderID:Lt,customFragmentShaderID:Et,isRawShaderMaterial:L.isRawShaderMaterial===!0,glslVersion:L.glslVersion,precision:b,batching:re,batchingColor:re&&W._colorsTexture!==null,instancing:we,instancingColor:we&&W.instanceColor!==null,instancingMorph:we&&W.morphTexture!==null,supportsVertexTextures:x,outputColorSpace:Nt===null?n.outputColorSpace:Nt.isXRRenderTarget===!0?Nt.texture.colorSpace:Ro,alphaToCoverage:!!L.alphaToCoverage,map:ke,matcap:Jt,envMap:Yt,envMapMode:Yt&&pt.mapping,envMapCubeUVHeight:ot,aoMap:Q,lightMap:Me,bumpMap:ee,normalMap:pe,displacementMap:x&&se,emissiveMap:Be,normalMapObjectSpace:pe&&L.normalMapType===DR,normalMapTangentSpace:pe&&L.normalMapType===Nu,metalnessMap:he,roughnessMap:K,anisotropy:k,anisotropyMap:de,clearcoat:xt,clearcoatMap:_e,clearcoatNormalMap:an,clearcoatRoughnessMap:ae,dispersion:Pt,iridescence:$t,iridescenceMap:Ae,iridescenceThicknessMap:Ce,sheen:Xt,sheenColorMap:me,sheenRoughnessMap:ye,specularMap:lt,specularColorMap:wt,specularIntensityMap:le,transmission:Re,transmissionMap:ct,thicknessMap:St,gradientMap:Rt,opaque:L.transparent===!1&&L.blending===$f&&L.alphaToCoverage===!1,alphaMap:Gt,alphaTest:ge,alphaHash:ve,combine:L.combine,mapUv:ke&&R(L.map.channel),aoMapUv:Q&&R(L.aoMap.channel),lightMapUv:Me&&R(L.lightMap.channel),bumpMapUv:ee&&R(L.bumpMap.channel),normalMapUv:pe&&R(L.normalMap.channel),displacementMapUv:se&&R(L.displacementMap.channel),emissiveMapUv:Be&&R(L.emissiveMap.channel),metalnessMapUv:he&&R(L.metalnessMap.channel),roughnessMapUv:K&&R(L.roughnessMap.channel),anisotropyMapUv:de&&R(L.anisotropyMap.channel),clearcoatMapUv:_e&&R(L.clearcoatMap.channel),clearcoatNormalMapUv:an&&R(L.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:ae&&R(L.clearcoatRoughnessMap.channel),iridescenceMapUv:Ae&&R(L.iridescenceMap.channel),iridescenceThicknessMapUv:Ce&&R(L.iridescenceThicknessMap.channel),sheenColorMapUv:me&&R(L.sheenColorMap.channel),sheenRoughnessMapUv:ye&&R(L.sheenRoughnessMap.channel),specularMapUv:lt&&R(L.specularMap.channel),specularColorMapUv:wt&&R(L.specularColorMap.channel),specularIntensityMapUv:le&&R(L.specularIntensityMap.channel),transmissionMapUv:ct&&R(L.transmissionMap.channel),thicknessMapUv:St&&R(L.thicknessMap.channel),alphaMapUv:Gt&&R(L.alphaMap.channel),vertexTangents:!!ut.attributes.tangent&&(pe||k),vertexColors:L.vertexColors,vertexAlphas:L.vertexColors===!0&&!!ut.attributes.color&&ut.attributes.color.itemSize===4,pointsUvs:W.isPoints===!0&&!!ut.attributes.uv&&(ke||Gt),fog:!!j,useFog:L.fog===!0,fogExp2:!!j&&j.isFogExp2,flatShading:L.flatShading===!0,sizeAttenuation:L.sizeAttenuation===!0,logarithmicDepthBuffer:_,reverseDepthBuffer:Qt,skinning:W.isSkinnedMesh===!0,morphTargets:ut.morphAttributes.position!==void 0,morphNormals:ut.morphAttributes.normal!==void 0,morphColors:ut.morphAttributes.color!==void 0,morphTargetsCount:ht,morphTextureStride:Tt,numDirLights:O.directional.length,numPointLights:O.point.length,numSpotLights:O.spot.length,numSpotLightMaps:O.spotLightMap.length,numRectAreaLights:O.rectArea.length,numHemiLights:O.hemi.length,numDirLightShadows:O.directionalShadowMap.length,numPointLightShadows:O.pointShadowMap.length,numSpotLightShadows:O.spotShadowMap.length,numSpotLightShadowsWithMaps:O.numSpotLightShadowsWithMaps,numLightProbes:O.numLightProbes,numClippingPlanes:u.numPlanes,numClipIntersection:u.numIntersection,dithering:L.dithering,shadowMapEnabled:n.shadowMap.enabled&&V.length>0,shadowMapType:n.shadowMap.type,toneMapping:mn,decodeVideoTexture:ke&&L.map.isVideoTexture===!0&&On.getTransfer(L.map.colorSpace)===ii,decodeVideoTextureEmissive:Be&&L.emissiveMap.isVideoTexture===!0&&On.getTransfer(L.emissiveMap.colorSpace)===ii,premultipliedAlpha:L.premultipliedAlpha,doubleSided:L.side===Eo,flipSided:L.side===Er,useDepthPacking:L.depthPacking>=0,depthPacking:L.depthPacking||0,index0AttributeName:L.index0AttributeName,extensionClipCullDistance:Ie&&L.extensions.clipCullDistance===!0&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(Ie&&L.extensions.multiDraw===!0||re)&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:L.customProgramCacheKey()};return Bn.vertexUv1s=p.has(1),Bn.vertexUv2s=p.has(2),Bn.vertexUv3s=p.has(3),p.clear(),Bn}function M(L){const O=[];if(L.shaderID?O.push(L.shaderID):(O.push(L.customVertexShaderID),O.push(L.customFragmentShaderID)),L.defines!==void 0)for(const V in L.defines)O.push(V),O.push(L.defines[V]);return L.isRawShaderMaterial===!1&&(C(O,L),U(O,L),O.push(n.outputColorSpace)),O.push(L.customProgramCacheKey),O.join()}function C(L,O){L.push(O.precision),L.push(O.outputColorSpace),L.push(O.envMapMode),L.push(O.envMapCubeUVHeight),L.push(O.mapUv),L.push(O.alphaMapUv),L.push(O.lightMapUv),L.push(O.aoMapUv),L.push(O.bumpMapUv),L.push(O.normalMapUv),L.push(O.displacementMapUv),L.push(O.emissiveMapUv),L.push(O.metalnessMapUv),L.push(O.roughnessMapUv),L.push(O.anisotropyMapUv),L.push(O.clearcoatMapUv),L.push(O.clearcoatNormalMapUv),L.push(O.clearcoatRoughnessMapUv),L.push(O.iridescenceMapUv),L.push(O.iridescenceThicknessMapUv),L.push(O.sheenColorMapUv),L.push(O.sheenRoughnessMapUv),L.push(O.specularMapUv),L.push(O.specularColorMapUv),L.push(O.specularIntensityMapUv),L.push(O.transmissionMapUv),L.push(O.thicknessMapUv),L.push(O.combine),L.push(O.fogExp2),L.push(O.sizeAttenuation),L.push(O.morphTargetsCount),L.push(O.morphAttributeCount),L.push(O.numDirLights),L.push(O.numPointLights),L.push(O.numSpotLights),L.push(O.numSpotLightMaps),L.push(O.numHemiLights),L.push(O.numRectAreaLights),L.push(O.numDirLightShadows),L.push(O.numPointLightShadows),L.push(O.numSpotLightShadows),L.push(O.numSpotLightShadowsWithMaps),L.push(O.numLightProbes),L.push(O.shadowMapType),L.push(O.toneMapping),L.push(O.numClippingPlanes),L.push(O.numClipIntersection),L.push(O.depthPacking)}function U(L,O){h.disableAll(),O.supportsVertexTextures&&h.enable(0),O.instancing&&h.enable(1),O.instancingColor&&h.enable(2),O.instancingMorph&&h.enable(3),O.matcap&&h.enable(4),O.envMap&&h.enable(5),O.normalMapObjectSpace&&h.enable(6),O.normalMapTangentSpace&&h.enable(7),O.clearcoat&&h.enable(8),O.iridescence&&h.enable(9),O.alphaTest&&h.enable(10),O.vertexColors&&h.enable(11),O.vertexAlphas&&h.enable(12),O.vertexUv1s&&h.enable(13),O.vertexUv2s&&h.enable(14),O.vertexUv3s&&h.enable(15),O.vertexTangents&&h.enable(16),O.anisotropy&&h.enable(17),O.alphaHash&&h.enable(18),O.batching&&h.enable(19),O.dispersion&&h.enable(20),O.batchingColor&&h.enable(21),L.push(h.mask),h.disableAll(),O.fog&&h.enable(0),O.useFog&&h.enable(1),O.flatShading&&h.enable(2),O.logarithmicDepthBuffer&&h.enable(3),O.reverseDepthBuffer&&h.enable(4),O.skinning&&h.enable(5),O.morphTargets&&h.enable(6),O.morphNormals&&h.enable(7),O.morphColors&&h.enable(8),O.premultipliedAlpha&&h.enable(9),O.shadowMapEnabled&&h.enable(10),O.doubleSided&&h.enable(11),O.flipSided&&h.enable(12),O.useDepthPacking&&h.enable(13),O.dithering&&h.enable(14),O.transmission&&h.enable(15),O.sheen&&h.enable(16),O.opaque&&h.enable(17),O.pointsUvs&&h.enable(18),O.decodeVideoTexture&&h.enable(19),O.decodeVideoTextureEmissive&&h.enable(20),O.alphaToCoverage&&h.enable(21),L.push(h.mask)}function D(L){const O=E[L.type];let V;if(O){const et=Mo[O];V=kR.clone(et.uniforms)}else V=L.uniforms;return V}function z(L,O){let V;for(let et=0,W=v.length;et<W;et++){const j=v[et];if(j.cacheKey===O){V=j,++V.usedTimes;break}}return V===void 0&&(V=new eF(n,O,L,o),v.push(V)),V}function B(L){if(--L.usedTimes===0){const O=v.indexOf(L);v[O]=v[v.length-1],v.pop(),L.destroy()}}function F(L){d.remove(L)}function G(){d.dispose()}return{getParameters:w,getProgramCacheKey:M,getUniforms:D,acquireProgram:z,releaseProgram:B,releaseShaderCache:F,programs:v,dispose:G}}function sF(){let n=new WeakMap;function t(u){return n.has(u)}function e(u){let h=n.get(u);return h===void 0&&(h={},n.set(u,h)),h}function i(u){n.delete(u)}function a(u,h,d){n.get(u)[h]=d}function o(){n=new WeakMap}return{has:t,get:e,remove:i,update:a,dispose:o}}function oF(n,t){return n.groupOrder!==t.groupOrder?n.groupOrder-t.groupOrder:n.renderOrder!==t.renderOrder?n.renderOrder-t.renderOrder:n.material.id!==t.material.id?n.material.id-t.material.id:n.z!==t.z?n.z-t.z:n.id-t.id}function bw(n,t){return n.groupOrder!==t.groupOrder?n.groupOrder-t.groupOrder:n.renderOrder!==t.renderOrder?n.renderOrder-t.renderOrder:n.z!==t.z?t.z-n.z:n.id-t.id}function Mw(){const n=[];let t=0;const e=[],i=[],a=[];function o(){t=0,e.length=0,i.length=0,a.length=0}function u(_,x,b,E,R,w){let M=n[t];return M===void 0?(M={id:_.id,object:_,geometry:x,material:b,groupOrder:E,renderOrder:_.renderOrder,z:R,group:w},n[t]=M):(M.id=_.id,M.object=_,M.geometry=x,M.material=b,M.groupOrder=E,M.renderOrder=_.renderOrder,M.z=R,M.group=w),t++,M}function h(_,x,b,E,R,w){const M=u(_,x,b,E,R,w);b.transmission>0?i.push(M):b.transparent===!0?a.push(M):e.push(M)}function d(_,x,b,E,R,w){const M=u(_,x,b,E,R,w);b.transmission>0?i.unshift(M):b.transparent===!0?a.unshift(M):e.unshift(M)}function p(_,x){e.length>1&&e.sort(_||oF),i.length>1&&i.sort(x||bw),a.length>1&&a.sort(x||bw)}function v(){for(let _=t,x=n.length;_<x;_++){const b=n[_];if(b.id===null)break;b.id=null,b.object=null,b.geometry=null,b.material=null,b.group=null}}return{opaque:e,transmissive:i,transparent:a,init:o,push:h,unshift:d,finish:v,sort:p}}function lF(){let n=new WeakMap;function t(i,a){const o=n.get(i);let u;return o===void 0?(u=new Mw,n.set(i,[u])):a>=o.length?(u=new Mw,o.push(u)):u=o[a],u}function e(){n=new WeakMap}return{get:t,dispose:e}}function cF(){const n={};return{get:function(t){if(n[t.id]!==void 0)return n[t.id];let e;switch(t.type){case"DirectionalLight":e={direction:new J,color:new De};break;case"SpotLight":e={position:new J,direction:new J,color:new De,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":e={position:new J,color:new De,distance:0,decay:0};break;case"HemisphereLight":e={direction:new J,skyColor:new De,groundColor:new De};break;case"RectAreaLight":e={color:new De,position:new J,halfWidth:new J,halfHeight:new J};break}return n[t.id]=e,e}}}function uF(){const n={};return{get:function(t){if(n[t.id]!==void 0)return n[t.id];let e;switch(t.type){case"DirectionalLight":e={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new jt};break;case"SpotLight":e={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new jt};break;case"PointLight":e={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new jt,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[t.id]=e,e}}}let fF=0;function hF(n,t){return(t.castShadow?2:0)-(n.castShadow?2:0)+(t.map?1:0)-(n.map?1:0)}function dF(n){const t=new cF,e=uF(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let p=0;p<9;p++)i.probe.push(new J);const a=new J,o=new $e,u=new $e;function h(p){let v=0,_=0,x=0;for(let L=0;L<9;L++)i.probe[L].set(0,0,0);let b=0,E=0,R=0,w=0,M=0,C=0,U=0,D=0,z=0,B=0,F=0;p.sort(hF);for(let L=0,O=p.length;L<O;L++){const V=p[L],et=V.color,W=V.intensity,j=V.distance,ut=V.shadow&&V.shadow.map?V.shadow.map.texture:null;if(V.isAmbientLight)v+=et.r*W,_+=et.g*W,x+=et.b*W;else if(V.isLightProbe){for(let tt=0;tt<9;tt++)i.probe[tt].addScaledVector(V.sh.coefficients[tt],W);F++}else if(V.isDirectionalLight){const tt=t.get(V);if(tt.color.copy(V.color).multiplyScalar(V.intensity),V.castShadow){const pt=V.shadow,ot=e.get(V);ot.shadowIntensity=pt.intensity,ot.shadowBias=pt.bias,ot.shadowNormalBias=pt.normalBias,ot.shadowRadius=pt.radius,ot.shadowMapSize=pt.mapSize,i.directionalShadow[b]=ot,i.directionalShadowMap[b]=ut,i.directionalShadowMatrix[b]=V.shadow.matrix,C++}i.directional[b]=tt,b++}else if(V.isSpotLight){const tt=t.get(V);tt.position.setFromMatrixPosition(V.matrixWorld),tt.color.copy(et).multiplyScalar(W),tt.distance=j,tt.coneCos=Math.cos(V.angle),tt.penumbraCos=Math.cos(V.angle*(1-V.penumbra)),tt.decay=V.decay,i.spot[R]=tt;const pt=V.shadow;if(V.map&&(i.spotLightMap[z]=V.map,z++,pt.updateMatrices(V),V.castShadow&&B++),i.spotLightMatrix[R]=pt.matrix,V.castShadow){const ot=e.get(V);ot.shadowIntensity=pt.intensity,ot.shadowBias=pt.bias,ot.shadowNormalBias=pt.normalBias,ot.shadowRadius=pt.radius,ot.shadowMapSize=pt.mapSize,i.spotShadow[R]=ot,i.spotShadowMap[R]=ut,D++}R++}else if(V.isRectAreaLight){const tt=t.get(V);tt.color.copy(et).multiplyScalar(W),tt.halfWidth.set(V.width*.5,0,0),tt.halfHeight.set(0,V.height*.5,0),i.rectArea[w]=tt,w++}else if(V.isPointLight){const tt=t.get(V);if(tt.color.copy(V.color).multiplyScalar(V.intensity),tt.distance=V.distance,tt.decay=V.decay,V.castShadow){const pt=V.shadow,ot=e.get(V);ot.shadowIntensity=pt.intensity,ot.shadowBias=pt.bias,ot.shadowNormalBias=pt.normalBias,ot.shadowRadius=pt.radius,ot.shadowMapSize=pt.mapSize,ot.shadowCameraNear=pt.camera.near,ot.shadowCameraFar=pt.camera.far,i.pointShadow[E]=ot,i.pointShadowMap[E]=ut,i.pointShadowMatrix[E]=V.shadow.matrix,U++}i.point[E]=tt,E++}else if(V.isHemisphereLight){const tt=t.get(V);tt.skyColor.copy(V.color).multiplyScalar(W),tt.groundColor.copy(V.groundColor).multiplyScalar(W),i.hemi[M]=tt,M++}}w>0&&(n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=Te.LTC_FLOAT_1,i.rectAreaLTC2=Te.LTC_FLOAT_2):(i.rectAreaLTC1=Te.LTC_HALF_1,i.rectAreaLTC2=Te.LTC_HALF_2)),i.ambient[0]=v,i.ambient[1]=_,i.ambient[2]=x;const G=i.hash;(G.directionalLength!==b||G.pointLength!==E||G.spotLength!==R||G.rectAreaLength!==w||G.hemiLength!==M||G.numDirectionalShadows!==C||G.numPointShadows!==U||G.numSpotShadows!==D||G.numSpotMaps!==z||G.numLightProbes!==F)&&(i.directional.length=b,i.spot.length=R,i.rectArea.length=w,i.point.length=E,i.hemi.length=M,i.directionalShadow.length=C,i.directionalShadowMap.length=C,i.pointShadow.length=U,i.pointShadowMap.length=U,i.spotShadow.length=D,i.spotShadowMap.length=D,i.directionalShadowMatrix.length=C,i.pointShadowMatrix.length=U,i.spotLightMatrix.length=D+z-B,i.spotLightMap.length=z,i.numSpotLightShadowsWithMaps=B,i.numLightProbes=F,G.directionalLength=b,G.pointLength=E,G.spotLength=R,G.rectAreaLength=w,G.hemiLength=M,G.numDirectionalShadows=C,G.numPointShadows=U,G.numSpotShadows=D,G.numSpotMaps=z,G.numLightProbes=F,i.version=fF++)}function d(p,v){let _=0,x=0,b=0,E=0,R=0;const w=v.matrixWorldInverse;for(let M=0,C=p.length;M<C;M++){const U=p[M];if(U.isDirectionalLight){const D=i.directional[_];D.direction.setFromMatrixPosition(U.matrixWorld),a.setFromMatrixPosition(U.target.matrixWorld),D.direction.sub(a),D.direction.transformDirection(w),_++}else if(U.isSpotLight){const D=i.spot[b];D.position.setFromMatrixPosition(U.matrixWorld),D.position.applyMatrix4(w),D.direction.setFromMatrixPosition(U.matrixWorld),a.setFromMatrixPosition(U.target.matrixWorld),D.direction.sub(a),D.direction.transformDirection(w),b++}else if(U.isRectAreaLight){const D=i.rectArea[E];D.position.setFromMatrixPosition(U.matrixWorld),D.position.applyMatrix4(w),u.identity(),o.copy(U.matrixWorld),o.premultiply(w),u.extractRotation(o),D.halfWidth.set(U.width*.5,0,0),D.halfHeight.set(0,U.height*.5,0),D.halfWidth.applyMatrix4(u),D.halfHeight.applyMatrix4(u),E++}else if(U.isPointLight){const D=i.point[x];D.position.setFromMatrixPosition(U.matrixWorld),D.position.applyMatrix4(w),x++}else if(U.isHemisphereLight){const D=i.hemi[R];D.direction.setFromMatrixPosition(U.matrixWorld),D.direction.transformDirection(w),R++}}}return{setup:h,setupView:d,state:i}}function Ew(n){const t=new dF(n),e=[],i=[];function a(v){p.camera=v,e.length=0,i.length=0}function o(v){e.push(v)}function u(v){i.push(v)}function h(){t.setup(e)}function d(v){t.setupView(e,v)}const p={lightsArray:e,shadowsArray:i,camera:null,lights:t,transmissionRenderTarget:{}};return{init:a,state:p,setupLights:h,setupLightsView:d,pushLight:o,pushShadow:u}}function pF(n){let t=new WeakMap;function e(a,o=0){const u=t.get(a);let h;return u===void 0?(h=new Ew(n),t.set(a,[h])):o>=u.length?(h=new Ew(n),u.push(h)):h=u[o],h}function i(){t=new WeakMap}return{get:e,dispose:i}}const mF=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,gF=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function vF(n,t,e){let i=new ag;const a=new jt,o=new jt,u=new Fn,h=new EM({depthPacking:CR}),d=new TM,p={},v=e.maxTextureSize,_={[bc]:Er,[Er]:bc,[Eo]:Eo},x=new Kr({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new jt},radius:{value:4}},vertexShader:mF,fragmentShader:gF}),b=x.clone();b.defines.HORIZONTAL_PASS=1;const E=new xn;E.setAttribute("position",new ui(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const R=new Gi(E,x),w=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=ax;let M=this.type;this.render=function(B,F,G){if(w.enabled===!1||w.autoUpdate===!1&&w.needsUpdate===!1||B.length===0)return;const L=n.getRenderTarget(),O=n.getActiveCubeFace(),V=n.getActiveMipmapLevel(),et=n.state;et.setBlending(El),et.buffers.color.setClear(1,1,1,1),et.buffers.depth.setTest(!0),et.setScissorTest(!1);const W=M!==bo&&this.type===bo,j=M===bo&&this.type!==bo;for(let ut=0,tt=B.length;ut<tt;ut++){const pt=B[ut],ot=pt.shadow;if(ot===void 0){console.warn("THREE.WebGLShadowMap:",pt,"has no shadow.");continue}if(ot.autoUpdate===!1&&ot.needsUpdate===!1)continue;a.copy(ot.mapSize);const Dt=ot.getFrameExtents();if(a.multiply(Dt),o.copy(ot.mapSize),(a.x>v||a.y>v)&&(a.x>v&&(o.x=Math.floor(v/Dt.x),a.x=o.x*Dt.x,ot.mapSize.x=o.x),a.y>v&&(o.y=Math.floor(v/Dt.y),a.y=o.y*Dt.y,ot.mapSize.y=o.y)),ot.map===null||W===!0||j===!0){const ht=this.type!==bo?{minFilter:Xa,magFilter:Xa}:{};ot.map!==null&&ot.map.dispose(),ot.map=new Is(a.x,a.y,ht),ot.map.texture.name=pt.name+".shadowMap",ot.camera.updateProjectionMatrix()}n.setRenderTarget(ot.map),n.clear();const Z=ot.getViewportCount();for(let ht=0;ht<Z;ht++){const Tt=ot.getViewport(ht);u.set(o.x*Tt.x,o.y*Tt.y,o.x*Tt.z,o.y*Tt.w),et.viewport(u),ot.updateMatrices(pt,ht),i=ot.getFrustum(),D(F,G,ot.camera,pt,this.type)}ot.isPointLightShadow!==!0&&this.type===bo&&C(ot,G),ot.needsUpdate=!1}M=this.type,w.needsUpdate=!1,n.setRenderTarget(L,O,V)};function C(B,F){const G=t.update(R);x.defines.VSM_SAMPLES!==B.blurSamples&&(x.defines.VSM_SAMPLES=B.blurSamples,b.defines.VSM_SAMPLES=B.blurSamples,x.needsUpdate=!0,b.needsUpdate=!0),B.mapPass===null&&(B.mapPass=new Is(a.x,a.y)),x.uniforms.shadow_pass.value=B.map.texture,x.uniforms.resolution.value=B.mapSize,x.uniforms.radius.value=B.radius,n.setRenderTarget(B.mapPass),n.clear(),n.renderBufferDirect(F,null,G,x,R,null),b.uniforms.shadow_pass.value=B.mapPass.texture,b.uniforms.resolution.value=B.mapSize,b.uniforms.radius.value=B.radius,n.setRenderTarget(B.map),n.clear(),n.renderBufferDirect(F,null,G,b,R,null)}function U(B,F,G,L){let O=null;const V=G.isPointLight===!0?B.customDistanceMaterial:B.customDepthMaterial;if(V!==void 0)O=V;else if(O=G.isPointLight===!0?d:h,n.localClippingEnabled&&F.clipShadows===!0&&Array.isArray(F.clippingPlanes)&&F.clippingPlanes.length!==0||F.displacementMap&&F.displacementScale!==0||F.alphaMap&&F.alphaTest>0||F.map&&F.alphaTest>0){const et=O.uuid,W=F.uuid;let j=p[et];j===void 0&&(j={},p[et]=j);let ut=j[W];ut===void 0&&(ut=O.clone(),j[W]=ut,F.addEventListener("dispose",z)),O=ut}if(O.visible=F.visible,O.wireframe=F.wireframe,L===bo?O.side=F.shadowSide!==null?F.shadowSide:F.side:O.side=F.shadowSide!==null?F.shadowSide:_[F.side],O.alphaMap=F.alphaMap,O.alphaTest=F.alphaTest,O.map=F.map,O.clipShadows=F.clipShadows,O.clippingPlanes=F.clippingPlanes,O.clipIntersection=F.clipIntersection,O.displacementMap=F.displacementMap,O.displacementScale=F.displacementScale,O.displacementBias=F.displacementBias,O.wireframeLinewidth=F.wireframeLinewidth,O.linewidth=F.linewidth,G.isPointLight===!0&&O.isMeshDistanceMaterial===!0){const et=n.properties.get(O);et.light=G}return O}function D(B,F,G,L,O){if(B.visible===!1)return;if(B.layers.test(F.layers)&&(B.isMesh||B.isLine||B.isPoints)&&(B.castShadow||B.receiveShadow&&O===bo)&&(!B.frustumCulled||i.intersectsObject(B))){B.modelViewMatrix.multiplyMatrices(G.matrixWorldInverse,B.matrixWorld);const W=t.update(B),j=B.material;if(Array.isArray(j)){const ut=W.groups;for(let tt=0,pt=ut.length;tt<pt;tt++){const ot=ut[tt],Dt=j[ot.materialIndex];if(Dt&&Dt.visible){const Z=U(B,Dt,L,O);B.onBeforeShadow(n,B,F,G,W,Z,ot),n.renderBufferDirect(G,null,W,Z,B,ot),B.onAfterShadow(n,B,F,G,W,Z,ot)}}}else if(j.visible){const ut=U(B,j,L,O);B.onBeforeShadow(n,B,F,G,W,ut,null),n.renderBufferDirect(G,null,W,ut,B,null),B.onAfterShadow(n,B,F,G,W,ut,null)}}const et=B.children;for(let W=0,j=et.length;W<j;W++)D(et[W],F,G,L,O)}function z(B){B.target.removeEventListener("dispose",z);for(const G in p){const L=p[G],O=B.target.uuid;O in L&&(L[O].dispose(),delete L[O])}}}const _F={[cy]:uy,[fy]:py,[hy]:my,[rh]:dy,[uy]:cy,[py]:fy,[my]:hy,[dy]:rh};function yF(n,t){function e(){let ct=!1;const St=new Fn;let Rt=null;const Gt=new Fn(0,0,0,0);return{setMask:function(ge){Rt!==ge&&!ct&&(n.colorMask(ge,ge,ge,ge),Rt=ge)},setLocked:function(ge){ct=ge},setClear:function(ge,ve,Ie,mn,Bn){Bn===!0&&(ge*=mn,ve*=mn,Ie*=mn),St.set(ge,ve,Ie,mn),Gt.equals(St)===!1&&(n.clearColor(ge,ve,Ie,mn),Gt.copy(St))},reset:function(){ct=!1,Rt=null,Gt.set(-1,0,0,0)}}}function i(){let ct=!1,St=!1,Rt=null,Gt=null,ge=null;return{setReversed:function(ve){if(St!==ve){const Ie=t.get("EXT_clip_control");St?Ie.clipControlEXT(Ie.LOWER_LEFT_EXT,Ie.ZERO_TO_ONE_EXT):Ie.clipControlEXT(Ie.LOWER_LEFT_EXT,Ie.NEGATIVE_ONE_TO_ONE_EXT);const mn=ge;ge=null,this.setClear(mn)}St=ve},getReversed:function(){return St},setTest:function(ve){ve?Nt(n.DEPTH_TEST):Qt(n.DEPTH_TEST)},setMask:function(ve){Rt!==ve&&!ct&&(n.depthMask(ve),Rt=ve)},setFunc:function(ve){if(St&&(ve=_F[ve]),Gt!==ve){switch(ve){case cy:n.depthFunc(n.NEVER);break;case uy:n.depthFunc(n.ALWAYS);break;case fy:n.depthFunc(n.LESS);break;case rh:n.depthFunc(n.LEQUAL);break;case hy:n.depthFunc(n.EQUAL);break;case dy:n.depthFunc(n.GEQUAL);break;case py:n.depthFunc(n.GREATER);break;case my:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}Gt=ve}},setLocked:function(ve){ct=ve},setClear:function(ve){ge!==ve&&(St&&(ve=1-ve),n.clearDepth(ve),ge=ve)},reset:function(){ct=!1,Rt=null,Gt=null,ge=null,St=!1}}}function a(){let ct=!1,St=null,Rt=null,Gt=null,ge=null,ve=null,Ie=null,mn=null,Bn=null;return{setTest:function(rn){ct||(rn?Nt(n.STENCIL_TEST):Qt(n.STENCIL_TEST))},setMask:function(rn){St!==rn&&!ct&&(n.stencilMask(rn),St=rn)},setFunc:function(rn,gi,bi){(Rt!==rn||Gt!==gi||ge!==bi)&&(n.stencilFunc(rn,gi,bi),Rt=rn,Gt=gi,ge=bi)},setOp:function(rn,gi,bi){(ve!==rn||Ie!==gi||mn!==bi)&&(n.stencilOp(rn,gi,bi),ve=rn,Ie=gi,mn=bi)},setLocked:function(rn){ct=rn},setClear:function(rn){Bn!==rn&&(n.clearStencil(rn),Bn=rn)},reset:function(){ct=!1,St=null,Rt=null,Gt=null,ge=null,ve=null,Ie=null,mn=null,Bn=null}}}const o=new e,u=new i,h=new a,d=new WeakMap,p=new WeakMap;let v={},_={},x=new WeakMap,b=[],E=null,R=!1,w=null,M=null,C=null,U=null,D=null,z=null,B=null,F=new De(0,0,0),G=0,L=!1,O=null,V=null,et=null,W=null,j=null;const ut=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let tt=!1,pt=0;const ot=n.getParameter(n.VERSION);ot.indexOf("WebGL")!==-1?(pt=parseFloat(/^WebGL (\d)/.exec(ot)[1]),tt=pt>=1):ot.indexOf("OpenGL ES")!==-1&&(pt=parseFloat(/^OpenGL ES (\d)/.exec(ot)[1]),tt=pt>=2);let Dt=null,Z={};const ht=n.getParameter(n.SCISSOR_BOX),Tt=n.getParameter(n.VIEWPORT),Ft=new Fn().fromArray(ht),rt=new Fn().fromArray(Tt);function Lt(ct,St,Rt,Gt){const ge=new Uint8Array(4),ve=n.createTexture();n.bindTexture(ct,ve),n.texParameteri(ct,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(ct,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let Ie=0;Ie<Rt;Ie++)ct===n.TEXTURE_3D||ct===n.TEXTURE_2D_ARRAY?n.texImage3D(St,0,n.RGBA,1,1,Gt,0,n.RGBA,n.UNSIGNED_BYTE,ge):n.texImage2D(St+Ie,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,ge);return ve}const Et={};Et[n.TEXTURE_2D]=Lt(n.TEXTURE_2D,n.TEXTURE_2D,1),Et[n.TEXTURE_CUBE_MAP]=Lt(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),Et[n.TEXTURE_2D_ARRAY]=Lt(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),Et[n.TEXTURE_3D]=Lt(n.TEXTURE_3D,n.TEXTURE_3D,1,1),o.setClear(0,0,0,1),u.setClear(1),h.setClear(0),Nt(n.DEPTH_TEST),u.setFunc(rh),ee(!1),pe(fb),Nt(n.CULL_FACE),Q(El);function Nt(ct){v[ct]!==!0&&(n.enable(ct),v[ct]=!0)}function Qt(ct){v[ct]!==!1&&(n.disable(ct),v[ct]=!1)}function we(ct,St){return _[ct]!==St?(n.bindFramebuffer(ct,St),_[ct]=St,ct===n.DRAW_FRAMEBUFFER&&(_[n.FRAMEBUFFER]=St),ct===n.FRAMEBUFFER&&(_[n.DRAW_FRAMEBUFFER]=St),!0):!1}function re(ct,St){let Rt=b,Gt=!1;if(ct){Rt=x.get(St),Rt===void 0&&(Rt=[],x.set(St,Rt));const ge=ct.textures;if(Rt.length!==ge.length||Rt[0]!==n.COLOR_ATTACHMENT0){for(let ve=0,Ie=ge.length;ve<Ie;ve++)Rt[ve]=n.COLOR_ATTACHMENT0+ve;Rt.length=ge.length,Gt=!0}}else Rt[0]!==n.BACK&&(Rt[0]=n.BACK,Gt=!0);Gt&&n.drawBuffers(Rt)}function ke(ct){return E!==ct?(n.useProgram(ct),E=ct,!0):!1}const Jt={[xu]:n.FUNC_ADD,[$2]:n.FUNC_SUBTRACT,[tR]:n.FUNC_REVERSE_SUBTRACT};Jt[eR]=n.MIN,Jt[nR]=n.MAX;const Yt={[iR]:n.ZERO,[aR]:n.ONE,[rR]:n.SRC_COLOR,[oy]:n.SRC_ALPHA,[fR]:n.SRC_ALPHA_SATURATE,[cR]:n.DST_COLOR,[oR]:n.DST_ALPHA,[sR]:n.ONE_MINUS_SRC_COLOR,[ly]:n.ONE_MINUS_SRC_ALPHA,[uR]:n.ONE_MINUS_DST_COLOR,[lR]:n.ONE_MINUS_DST_ALPHA,[hR]:n.CONSTANT_COLOR,[dR]:n.ONE_MINUS_CONSTANT_COLOR,[pR]:n.CONSTANT_ALPHA,[mR]:n.ONE_MINUS_CONSTANT_ALPHA};function Q(ct,St,Rt,Gt,ge,ve,Ie,mn,Bn,rn){if(ct===El){R===!0&&(Qt(n.BLEND),R=!1);return}if(R===!1&&(Nt(n.BLEND),R=!0),ct!==J2){if(ct!==w||rn!==L){if((M!==xu||D!==xu)&&(n.blendEquation(n.FUNC_ADD),M=xu,D=xu),rn)switch(ct){case $f:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case hb:n.blendFunc(n.ONE,n.ONE);break;case db:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case pb:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",ct);break}else switch(ct){case $f:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case hb:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case db:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case pb:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",ct);break}C=null,U=null,z=null,B=null,F.set(0,0,0),G=0,w=ct,L=rn}return}ge=ge||St,ve=ve||Rt,Ie=Ie||Gt,(St!==M||ge!==D)&&(n.blendEquationSeparate(Jt[St],Jt[ge]),M=St,D=ge),(Rt!==C||Gt!==U||ve!==z||Ie!==B)&&(n.blendFuncSeparate(Yt[Rt],Yt[Gt],Yt[ve],Yt[Ie]),C=Rt,U=Gt,z=ve,B=Ie),(mn.equals(F)===!1||Bn!==G)&&(n.blendColor(mn.r,mn.g,mn.b,Bn),F.copy(mn),G=Bn),w=ct,L=!1}function Me(ct,St){ct.side===Eo?Qt(n.CULL_FACE):Nt(n.CULL_FACE);let Rt=ct.side===Er;St&&(Rt=!Rt),ee(Rt),ct.blending===$f&&ct.transparent===!1?Q(El):Q(ct.blending,ct.blendEquation,ct.blendSrc,ct.blendDst,ct.blendEquationAlpha,ct.blendSrcAlpha,ct.blendDstAlpha,ct.blendColor,ct.blendAlpha,ct.premultipliedAlpha),u.setFunc(ct.depthFunc),u.setTest(ct.depthTest),u.setMask(ct.depthWrite),o.setMask(ct.colorWrite);const Gt=ct.stencilWrite;h.setTest(Gt),Gt&&(h.setMask(ct.stencilWriteMask),h.setFunc(ct.stencilFunc,ct.stencilRef,ct.stencilFuncMask),h.setOp(ct.stencilFail,ct.stencilZFail,ct.stencilZPass)),Be(ct.polygonOffset,ct.polygonOffsetFactor,ct.polygonOffsetUnits),ct.alphaToCoverage===!0?Nt(n.SAMPLE_ALPHA_TO_COVERAGE):Qt(n.SAMPLE_ALPHA_TO_COVERAGE)}function ee(ct){O!==ct&&(ct?n.frontFace(n.CW):n.frontFace(n.CCW),O=ct)}function pe(ct){ct!==j2?(Nt(n.CULL_FACE),ct!==V&&(ct===fb?n.cullFace(n.BACK):ct===K2?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):Qt(n.CULL_FACE),V=ct}function se(ct){ct!==et&&(tt&&n.lineWidth(ct),et=ct)}function Be(ct,St,Rt){ct?(Nt(n.POLYGON_OFFSET_FILL),(W!==St||j!==Rt)&&(n.polygonOffset(St,Rt),W=St,j=Rt)):Qt(n.POLYGON_OFFSET_FILL)}function he(ct){ct?Nt(n.SCISSOR_TEST):Qt(n.SCISSOR_TEST)}function K(ct){ct===void 0&&(ct=n.TEXTURE0+ut-1),Dt!==ct&&(n.activeTexture(ct),Dt=ct)}function k(ct,St,Rt){Rt===void 0&&(Dt===null?Rt=n.TEXTURE0+ut-1:Rt=Dt);let Gt=Z[Rt];Gt===void 0&&(Gt={type:void 0,texture:void 0},Z[Rt]=Gt),(Gt.type!==ct||Gt.texture!==St)&&(Dt!==Rt&&(n.activeTexture(Rt),Dt=Rt),n.bindTexture(ct,St||Et[ct]),Gt.type=ct,Gt.texture=St)}function xt(){const ct=Z[Dt];ct!==void 0&&ct.type!==void 0&&(n.bindTexture(ct.type,null),ct.type=void 0,ct.texture=void 0)}function Pt(){try{n.compressedTexImage2D(...arguments)}catch(ct){console.error("THREE.WebGLState:",ct)}}function $t(){try{n.compressedTexImage3D(...arguments)}catch(ct){console.error("THREE.WebGLState:",ct)}}function Xt(){try{n.texSubImage2D(...arguments)}catch(ct){console.error("THREE.WebGLState:",ct)}}function Re(){try{n.texSubImage3D(...arguments)}catch(ct){console.error("THREE.WebGLState:",ct)}}function de(){try{n.compressedTexSubImage2D(...arguments)}catch(ct){console.error("THREE.WebGLState:",ct)}}function _e(){try{n.compressedTexSubImage3D(...arguments)}catch(ct){console.error("THREE.WebGLState:",ct)}}function an(){try{n.texStorage2D(...arguments)}catch(ct){console.error("THREE.WebGLState:",ct)}}function ae(){try{n.texStorage3D(...arguments)}catch(ct){console.error("THREE.WebGLState:",ct)}}function Ae(){try{n.texImage2D(...arguments)}catch(ct){console.error("THREE.WebGLState:",ct)}}function Ce(){try{n.texImage3D(...arguments)}catch(ct){console.error("THREE.WebGLState:",ct)}}function me(ct){Ft.equals(ct)===!1&&(n.scissor(ct.x,ct.y,ct.z,ct.w),Ft.copy(ct))}function ye(ct){rt.equals(ct)===!1&&(n.viewport(ct.x,ct.y,ct.z,ct.w),rt.copy(ct))}function lt(ct,St){let Rt=p.get(St);Rt===void 0&&(Rt=new WeakMap,p.set(St,Rt));let Gt=Rt.get(ct);Gt===void 0&&(Gt=n.getUniformBlockIndex(St,ct.name),Rt.set(ct,Gt))}function wt(ct,St){const Gt=p.get(St).get(ct);d.get(St)!==Gt&&(n.uniformBlockBinding(St,Gt,ct.__bindingPointIndex),d.set(St,Gt))}function le(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),u.setReversed(!1),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),v={},Dt=null,Z={},_={},x=new WeakMap,b=[],E=null,R=!1,w=null,M=null,C=null,U=null,D=null,z=null,B=null,F=new De(0,0,0),G=0,L=!1,O=null,V=null,et=null,W=null,j=null,Ft.set(0,0,n.canvas.width,n.canvas.height),rt.set(0,0,n.canvas.width,n.canvas.height),o.reset(),u.reset(),h.reset()}return{buffers:{color:o,depth:u,stencil:h},enable:Nt,disable:Qt,bindFramebuffer:we,drawBuffers:re,useProgram:ke,setBlending:Q,setMaterial:Me,setFlipSided:ee,setCullFace:pe,setLineWidth:se,setPolygonOffset:Be,setScissorTest:he,activeTexture:K,bindTexture:k,unbindTexture:xt,compressedTexImage2D:Pt,compressedTexImage3D:$t,texImage2D:Ae,texImage3D:Ce,updateUBOMapping:lt,uniformBlockBinding:wt,texStorage2D:an,texStorage3D:ae,texSubImage2D:Xt,texSubImage3D:Re,compressedTexSubImage2D:de,compressedTexSubImage3D:_e,scissor:me,viewport:ye,reset:le}}function xF(n,t,e,i,a,o,u){const h=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,d=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),p=new jt,v=new WeakMap;let _;const x=new WeakMap;let b=!1;try{b=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function E(K,k){return b?new OffscreenCanvas(K,k):w0("canvas")}function R(K,k,xt){let Pt=1;const $t=he(K);if(($t.width>xt||$t.height>xt)&&(Pt=xt/Math.max($t.width,$t.height)),Pt<1)if(typeof HTMLImageElement<"u"&&K instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&K instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&K instanceof ImageBitmap||typeof VideoFrame<"u"&&K instanceof VideoFrame){const Xt=Math.floor(Pt*$t.width),Re=Math.floor(Pt*$t.height);_===void 0&&(_=E(Xt,Re));const de=k?E(Xt,Re):_;return de.width=Xt,de.height=Re,de.getContext("2d").drawImage(K,0,0,Xt,Re),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+$t.width+"x"+$t.height+") to ("+Xt+"x"+Re+")."),de}else return"data"in K&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+$t.width+"x"+$t.height+")."),K;return K}function w(K){return K.generateMipmaps}function M(K){n.generateMipmap(K)}function C(K){return K.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:K.isWebGL3DRenderTarget?n.TEXTURE_3D:K.isWebGLArrayRenderTarget||K.isCompressedArrayTexture?n.TEXTURE_2D_ARRAY:n.TEXTURE_2D}function U(K,k,xt,Pt,$t=!1){if(K!==null){if(n[K]!==void 0)return n[K];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+K+"'")}let Xt=k;if(k===n.RED&&(xt===n.FLOAT&&(Xt=n.R32F),xt===n.HALF_FLOAT&&(Xt=n.R16F),xt===n.UNSIGNED_BYTE&&(Xt=n.R8)),k===n.RED_INTEGER&&(xt===n.UNSIGNED_BYTE&&(Xt=n.R8UI),xt===n.UNSIGNED_SHORT&&(Xt=n.R16UI),xt===n.UNSIGNED_INT&&(Xt=n.R32UI),xt===n.BYTE&&(Xt=n.R8I),xt===n.SHORT&&(Xt=n.R16I),xt===n.INT&&(Xt=n.R32I)),k===n.RG&&(xt===n.FLOAT&&(Xt=n.RG32F),xt===n.HALF_FLOAT&&(Xt=n.RG16F),xt===n.UNSIGNED_BYTE&&(Xt=n.RG8)),k===n.RG_INTEGER&&(xt===n.UNSIGNED_BYTE&&(Xt=n.RG8UI),xt===n.UNSIGNED_SHORT&&(Xt=n.RG16UI),xt===n.UNSIGNED_INT&&(Xt=n.RG32UI),xt===n.BYTE&&(Xt=n.RG8I),xt===n.SHORT&&(Xt=n.RG16I),xt===n.INT&&(Xt=n.RG32I)),k===n.RGB_INTEGER&&(xt===n.UNSIGNED_BYTE&&(Xt=n.RGB8UI),xt===n.UNSIGNED_SHORT&&(Xt=n.RGB16UI),xt===n.UNSIGNED_INT&&(Xt=n.RGB32UI),xt===n.BYTE&&(Xt=n.RGB8I),xt===n.SHORT&&(Xt=n.RGB16I),xt===n.INT&&(Xt=n.RGB32I)),k===n.RGBA_INTEGER&&(xt===n.UNSIGNED_BYTE&&(Xt=n.RGBA8UI),xt===n.UNSIGNED_SHORT&&(Xt=n.RGBA16UI),xt===n.UNSIGNED_INT&&(Xt=n.RGBA32UI),xt===n.BYTE&&(Xt=n.RGBA8I),xt===n.SHORT&&(Xt=n.RGBA16I),xt===n.INT&&(Xt=n.RGBA32I)),k===n.RGB&&xt===n.UNSIGNED_INT_5_9_9_9_REV&&(Xt=n.RGB9_E5),k===n.RGBA){const Re=$t?E0:On.getTransfer(Pt);xt===n.FLOAT&&(Xt=n.RGBA32F),xt===n.HALF_FLOAT&&(Xt=n.RGBA16F),xt===n.UNSIGNED_BYTE&&(Xt=Re===ii?n.SRGB8_ALPHA8:n.RGBA8),xt===n.UNSIGNED_SHORT_4_4_4_4&&(Xt=n.RGBA4),xt===n.UNSIGNED_SHORT_5_5_5_1&&(Xt=n.RGB5_A1)}return(Xt===n.R16F||Xt===n.R32F||Xt===n.RG16F||Xt===n.RG32F||Xt===n.RGBA16F||Xt===n.RGBA32F)&&t.get("EXT_color_buffer_float"),Xt}function D(K,k){let xt;return K?k===null||k===Rl||k===oh?xt=n.DEPTH24_STENCIL8:k===Fi?xt=n.DEPTH32F_STENCIL8:k===Zd&&(xt=n.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):k===null||k===Rl||k===oh?xt=n.DEPTH_COMPONENT24:k===Fi?xt=n.DEPTH_COMPONENT32F:k===Zd&&(xt=n.DEPTH_COMPONENT16),xt}function z(K,k){return w(K)===!0||K.isFramebufferTexture&&K.minFilter!==Xa&&K.minFilter!==ai?Math.log2(Math.max(k.width,k.height))+1:K.mipmaps!==void 0&&K.mipmaps.length>0?K.mipmaps.length:K.isCompressedTexture&&Array.isArray(K.image)?k.mipmaps.length:1}function B(K){const k=K.target;k.removeEventListener("dispose",B),G(k),k.isVideoTexture&&v.delete(k)}function F(K){const k=K.target;k.removeEventListener("dispose",F),O(k)}function G(K){const k=i.get(K);if(k.__webglInit===void 0)return;const xt=K.source,Pt=x.get(xt);if(Pt){const $t=Pt[k.__cacheKey];$t.usedTimes--,$t.usedTimes===0&&L(K),Object.keys(Pt).length===0&&x.delete(xt)}i.remove(K)}function L(K){const k=i.get(K);n.deleteTexture(k.__webglTexture);const xt=K.source,Pt=x.get(xt);delete Pt[k.__cacheKey],u.memory.textures--}function O(K){const k=i.get(K);if(K.depthTexture&&(K.depthTexture.dispose(),i.remove(K.depthTexture)),K.isWebGLCubeRenderTarget)for(let Pt=0;Pt<6;Pt++){if(Array.isArray(k.__webglFramebuffer[Pt]))for(let $t=0;$t<k.__webglFramebuffer[Pt].length;$t++)n.deleteFramebuffer(k.__webglFramebuffer[Pt][$t]);else n.deleteFramebuffer(k.__webglFramebuffer[Pt]);k.__webglDepthbuffer&&n.deleteRenderbuffer(k.__webglDepthbuffer[Pt])}else{if(Array.isArray(k.__webglFramebuffer))for(let Pt=0;Pt<k.__webglFramebuffer.length;Pt++)n.deleteFramebuffer(k.__webglFramebuffer[Pt]);else n.deleteFramebuffer(k.__webglFramebuffer);if(k.__webglDepthbuffer&&n.deleteRenderbuffer(k.__webglDepthbuffer),k.__webglMultisampledFramebuffer&&n.deleteFramebuffer(k.__webglMultisampledFramebuffer),k.__webglColorRenderbuffer)for(let Pt=0;Pt<k.__webglColorRenderbuffer.length;Pt++)k.__webglColorRenderbuffer[Pt]&&n.deleteRenderbuffer(k.__webglColorRenderbuffer[Pt]);k.__webglDepthRenderbuffer&&n.deleteRenderbuffer(k.__webglDepthRenderbuffer)}const xt=K.textures;for(let Pt=0,$t=xt.length;Pt<$t;Pt++){const Xt=i.get(xt[Pt]);Xt.__webglTexture&&(n.deleteTexture(Xt.__webglTexture),u.memory.textures--),i.remove(xt[Pt])}i.remove(K)}let V=0;function et(){V=0}function W(){const K=V;return K>=a.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+K+" texture units while this GPU supports only "+a.maxTextures),V+=1,K}function j(K){const k=[];return k.push(K.wrapS),k.push(K.wrapT),k.push(K.wrapR||0),k.push(K.magFilter),k.push(K.minFilter),k.push(K.anisotropy),k.push(K.internalFormat),k.push(K.format),k.push(K.type),k.push(K.generateMipmaps),k.push(K.premultiplyAlpha),k.push(K.flipY),k.push(K.unpackAlignment),k.push(K.colorSpace),k.join()}function ut(K,k){const xt=i.get(K);if(K.isVideoTexture&&se(K),K.isRenderTargetTexture===!1&&K.version>0&&xt.__version!==K.version){const Pt=K.image;if(Pt===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Pt.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{rt(xt,K,k);return}}e.bindTexture(n.TEXTURE_2D,xt.__webglTexture,n.TEXTURE0+k)}function tt(K,k){const xt=i.get(K);if(K.version>0&&xt.__version!==K.version){rt(xt,K,k);return}e.bindTexture(n.TEXTURE_2D_ARRAY,xt.__webglTexture,n.TEXTURE0+k)}function pt(K,k){const xt=i.get(K);if(K.version>0&&xt.__version!==K.version){rt(xt,K,k);return}e.bindTexture(n.TEXTURE_3D,xt.__webglTexture,n.TEXTURE0+k)}function ot(K,k){const xt=i.get(K);if(K.version>0&&xt.__version!==K.version){Lt(xt,K,k);return}e.bindTexture(n.TEXTURE_CUBE_MAP,xt.__webglTexture,n.TEXTURE0+k)}const Dt={[x0]:n.REPEAT,[la]:n.CLAMP_TO_EDGE,[S0]:n.MIRRORED_REPEAT},Z={[Xa]:n.NEAREST,[$b]:n.NEAREST_MIPMAP_NEAREST,[Ld]:n.NEAREST_MIPMAP_LINEAR,[ai]:n.LINEAR,[Km]:n.LINEAR_MIPMAP_NEAREST,[xl]:n.LINEAR_MIPMAP_LINEAR},ht={[NR]:n.NEVER,[IR]:n.ALWAYS,[UR]:n.LESS,[lM]:n.LEQUAL,[OR]:n.EQUAL,[BR]:n.GEQUAL,[LR]:n.GREATER,[zR]:n.NOTEQUAL};function Tt(K,k){if(k.type===Fi&&t.has("OES_texture_float_linear")===!1&&(k.magFilter===ai||k.magFilter===Km||k.magFilter===Ld||k.magFilter===xl||k.minFilter===ai||k.minFilter===Km||k.minFilter===Ld||k.minFilter===xl)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(K,n.TEXTURE_WRAP_S,Dt[k.wrapS]),n.texParameteri(K,n.TEXTURE_WRAP_T,Dt[k.wrapT]),(K===n.TEXTURE_3D||K===n.TEXTURE_2D_ARRAY)&&n.texParameteri(K,n.TEXTURE_WRAP_R,Dt[k.wrapR]),n.texParameteri(K,n.TEXTURE_MAG_FILTER,Z[k.magFilter]),n.texParameteri(K,n.TEXTURE_MIN_FILTER,Z[k.minFilter]),k.compareFunction&&(n.texParameteri(K,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(K,n.TEXTURE_COMPARE_FUNC,ht[k.compareFunction])),t.has("EXT_texture_filter_anisotropic")===!0){if(k.magFilter===Xa||k.minFilter!==Ld&&k.minFilter!==xl||k.type===Fi&&t.has("OES_texture_float_linear")===!1)return;if(k.anisotropy>1||i.get(k).__currentAnisotropy){const xt=t.get("EXT_texture_filter_anisotropic");n.texParameterf(K,xt.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(k.anisotropy,a.getMaxAnisotropy())),i.get(k).__currentAnisotropy=k.anisotropy}}}function Ft(K,k){let xt=!1;K.__webglInit===void 0&&(K.__webglInit=!0,k.addEventListener("dispose",B));const Pt=k.source;let $t=x.get(Pt);$t===void 0&&($t={},x.set(Pt,$t));const Xt=j(k);if(Xt!==K.__cacheKey){$t[Xt]===void 0&&($t[Xt]={texture:n.createTexture(),usedTimes:0},u.memory.textures++,xt=!0),$t[Xt].usedTimes++;const Re=$t[K.__cacheKey];Re!==void 0&&($t[K.__cacheKey].usedTimes--,Re.usedTimes===0&&L(k)),K.__cacheKey=Xt,K.__webglTexture=$t[Xt].texture}return xt}function rt(K,k,xt){let Pt=n.TEXTURE_2D;(k.isDataArrayTexture||k.isCompressedArrayTexture)&&(Pt=n.TEXTURE_2D_ARRAY),k.isData3DTexture&&(Pt=n.TEXTURE_3D);const $t=Ft(K,k),Xt=k.source;e.bindTexture(Pt,K.__webglTexture,n.TEXTURE0+xt);const Re=i.get(Xt);if(Xt.version!==Re.__version||$t===!0){e.activeTexture(n.TEXTURE0+xt);const de=On.getPrimaries(On.workingColorSpace),_e=k.colorSpace===gc?null:On.getPrimaries(k.colorSpace),an=k.colorSpace===gc||de===_e?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,k.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,k.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,k.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,an);let ae=R(k.image,!1,a.maxTextureSize);ae=Be(k,ae);const Ae=o.convert(k.format,k.colorSpace),Ce=o.convert(k.type);let me=U(k.internalFormat,Ae,Ce,k.colorSpace,k.isVideoTexture);Tt(Pt,k);let ye;const lt=k.mipmaps,wt=k.isVideoTexture!==!0,le=Re.__version===void 0||$t===!0,ct=Xt.dataReady,St=z(k,ae);if(k.isDepthTexture)me=D(k.format===lh,k.type),le&&(wt?e.texStorage2D(n.TEXTURE_2D,1,me,ae.width,ae.height):e.texImage2D(n.TEXTURE_2D,0,me,ae.width,ae.height,0,Ae,Ce,null));else if(k.isDataTexture)if(lt.length>0){wt&&le&&e.texStorage2D(n.TEXTURE_2D,St,me,lt[0].width,lt[0].height);for(let Rt=0,Gt=lt.length;Rt<Gt;Rt++)ye=lt[Rt],wt?ct&&e.texSubImage2D(n.TEXTURE_2D,Rt,0,0,ye.width,ye.height,Ae,Ce,ye.data):e.texImage2D(n.TEXTURE_2D,Rt,me,ye.width,ye.height,0,Ae,Ce,ye.data);k.generateMipmaps=!1}else wt?(le&&e.texStorage2D(n.TEXTURE_2D,St,me,ae.width,ae.height),ct&&e.texSubImage2D(n.TEXTURE_2D,0,0,0,ae.width,ae.height,Ae,Ce,ae.data)):e.texImage2D(n.TEXTURE_2D,0,me,ae.width,ae.height,0,Ae,Ce,ae.data);else if(k.isCompressedTexture)if(k.isCompressedArrayTexture){wt&&le&&e.texStorage3D(n.TEXTURE_2D_ARRAY,St,me,lt[0].width,lt[0].height,ae.depth);for(let Rt=0,Gt=lt.length;Rt<Gt;Rt++)if(ye=lt[Rt],k.format!==ea)if(Ae!==null)if(wt){if(ct)if(k.layerUpdates.size>0){const ge=Ab(ye.width,ye.height,k.format,k.type);for(const ve of k.layerUpdates){const Ie=ye.data.subarray(ve*ge/ye.data.BYTES_PER_ELEMENT,(ve+1)*ge/ye.data.BYTES_PER_ELEMENT);e.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Rt,0,0,ve,ye.width,ye.height,1,Ae,Ie)}k.clearLayerUpdates()}else e.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Rt,0,0,0,ye.width,ye.height,ae.depth,Ae,ye.data)}else e.compressedTexImage3D(n.TEXTURE_2D_ARRAY,Rt,me,ye.width,ye.height,ae.depth,0,ye.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else wt?ct&&e.texSubImage3D(n.TEXTURE_2D_ARRAY,Rt,0,0,0,ye.width,ye.height,ae.depth,Ae,Ce,ye.data):e.texImage3D(n.TEXTURE_2D_ARRAY,Rt,me,ye.width,ye.height,ae.depth,0,Ae,Ce,ye.data)}else{wt&&le&&e.texStorage2D(n.TEXTURE_2D,St,me,lt[0].width,lt[0].height);for(let Rt=0,Gt=lt.length;Rt<Gt;Rt++)ye=lt[Rt],k.format!==ea?Ae!==null?wt?ct&&e.compressedTexSubImage2D(n.TEXTURE_2D,Rt,0,0,ye.width,ye.height,Ae,ye.data):e.compressedTexImage2D(n.TEXTURE_2D,Rt,me,ye.width,ye.height,0,ye.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):wt?ct&&e.texSubImage2D(n.TEXTURE_2D,Rt,0,0,ye.width,ye.height,Ae,Ce,ye.data):e.texImage2D(n.TEXTURE_2D,Rt,me,ye.width,ye.height,0,Ae,Ce,ye.data)}else if(k.isDataArrayTexture)if(wt){if(le&&e.texStorage3D(n.TEXTURE_2D_ARRAY,St,me,ae.width,ae.height,ae.depth),ct)if(k.layerUpdates.size>0){const Rt=Ab(ae.width,ae.height,k.format,k.type);for(const Gt of k.layerUpdates){const ge=ae.data.subarray(Gt*Rt/ae.data.BYTES_PER_ELEMENT,(Gt+1)*Rt/ae.data.BYTES_PER_ELEMENT);e.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,Gt,ae.width,ae.height,1,Ae,Ce,ge)}k.clearLayerUpdates()}else e.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,ae.width,ae.height,ae.depth,Ae,Ce,ae.data)}else e.texImage3D(n.TEXTURE_2D_ARRAY,0,me,ae.width,ae.height,ae.depth,0,Ae,Ce,ae.data);else if(k.isData3DTexture)wt?(le&&e.texStorage3D(n.TEXTURE_3D,St,me,ae.width,ae.height,ae.depth),ct&&e.texSubImage3D(n.TEXTURE_3D,0,0,0,0,ae.width,ae.height,ae.depth,Ae,Ce,ae.data)):e.texImage3D(n.TEXTURE_3D,0,me,ae.width,ae.height,ae.depth,0,Ae,Ce,ae.data);else if(k.isFramebufferTexture){if(le)if(wt)e.texStorage2D(n.TEXTURE_2D,St,me,ae.width,ae.height);else{let Rt=ae.width,Gt=ae.height;for(let ge=0;ge<St;ge++)e.texImage2D(n.TEXTURE_2D,ge,me,Rt,Gt,0,Ae,Ce,null),Rt>>=1,Gt>>=1}}else if(lt.length>0){if(wt&&le){const Rt=he(lt[0]);e.texStorage2D(n.TEXTURE_2D,St,me,Rt.width,Rt.height)}for(let Rt=0,Gt=lt.length;Rt<Gt;Rt++)ye=lt[Rt],wt?ct&&e.texSubImage2D(n.TEXTURE_2D,Rt,0,0,Ae,Ce,ye):e.texImage2D(n.TEXTURE_2D,Rt,me,Ae,Ce,ye);k.generateMipmaps=!1}else if(wt){if(le){const Rt=he(ae);e.texStorage2D(n.TEXTURE_2D,St,me,Rt.width,Rt.height)}ct&&e.texSubImage2D(n.TEXTURE_2D,0,0,0,Ae,Ce,ae)}else e.texImage2D(n.TEXTURE_2D,0,me,Ae,Ce,ae);w(k)&&M(Pt),Re.__version=Xt.version,k.onUpdate&&k.onUpdate(k)}K.__version=k.version}function Lt(K,k,xt){if(k.image.length!==6)return;const Pt=Ft(K,k),$t=k.source;e.bindTexture(n.TEXTURE_CUBE_MAP,K.__webglTexture,n.TEXTURE0+xt);const Xt=i.get($t);if($t.version!==Xt.__version||Pt===!0){e.activeTexture(n.TEXTURE0+xt);const Re=On.getPrimaries(On.workingColorSpace),de=k.colorSpace===gc?null:On.getPrimaries(k.colorSpace),_e=k.colorSpace===gc||Re===de?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,k.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,k.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,k.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,_e);const an=k.isCompressedTexture||k.image[0].isCompressedTexture,ae=k.image[0]&&k.image[0].isDataTexture,Ae=[];for(let Gt=0;Gt<6;Gt++)!an&&!ae?Ae[Gt]=R(k.image[Gt],!0,a.maxCubemapSize):Ae[Gt]=ae?k.image[Gt].image:k.image[Gt],Ae[Gt]=Be(k,Ae[Gt]);const Ce=Ae[0],me=o.convert(k.format,k.colorSpace),ye=o.convert(k.type),lt=U(k.internalFormat,me,ye,k.colorSpace),wt=k.isVideoTexture!==!0,le=Xt.__version===void 0||Pt===!0,ct=$t.dataReady;let St=z(k,Ce);Tt(n.TEXTURE_CUBE_MAP,k);let Rt;if(an){wt&&le&&e.texStorage2D(n.TEXTURE_CUBE_MAP,St,lt,Ce.width,Ce.height);for(let Gt=0;Gt<6;Gt++){Rt=Ae[Gt].mipmaps;for(let ge=0;ge<Rt.length;ge++){const ve=Rt[ge];k.format!==ea?me!==null?wt?ct&&e.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Gt,ge,0,0,ve.width,ve.height,me,ve.data):e.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Gt,ge,lt,ve.width,ve.height,0,ve.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):wt?ct&&e.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Gt,ge,0,0,ve.width,ve.height,me,ye,ve.data):e.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Gt,ge,lt,ve.width,ve.height,0,me,ye,ve.data)}}}else{if(Rt=k.mipmaps,wt&&le){Rt.length>0&&St++;const Gt=he(Ae[0]);e.texStorage2D(n.TEXTURE_CUBE_MAP,St,lt,Gt.width,Gt.height)}for(let Gt=0;Gt<6;Gt++)if(ae){wt?ct&&e.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Gt,0,0,0,Ae[Gt].width,Ae[Gt].height,me,ye,Ae[Gt].data):e.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Gt,0,lt,Ae[Gt].width,Ae[Gt].height,0,me,ye,Ae[Gt].data);for(let ge=0;ge<Rt.length;ge++){const Ie=Rt[ge].image[Gt].image;wt?ct&&e.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Gt,ge+1,0,0,Ie.width,Ie.height,me,ye,Ie.data):e.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Gt,ge+1,lt,Ie.width,Ie.height,0,me,ye,Ie.data)}}else{wt?ct&&e.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Gt,0,0,0,me,ye,Ae[Gt]):e.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Gt,0,lt,me,ye,Ae[Gt]);for(let ge=0;ge<Rt.length;ge++){const ve=Rt[ge];wt?ct&&e.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Gt,ge+1,0,0,me,ye,ve.image[Gt]):e.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Gt,ge+1,lt,me,ye,ve.image[Gt])}}}w(k)&&M(n.TEXTURE_CUBE_MAP),Xt.__version=$t.version,k.onUpdate&&k.onUpdate(k)}K.__version=k.version}function Et(K,k,xt,Pt,$t,Xt){const Re=o.convert(xt.format,xt.colorSpace),de=o.convert(xt.type),_e=U(xt.internalFormat,Re,de,xt.colorSpace),an=i.get(k),ae=i.get(xt);if(ae.__renderTarget=k,!an.__hasExternalTextures){const Ae=Math.max(1,k.width>>Xt),Ce=Math.max(1,k.height>>Xt);$t===n.TEXTURE_3D||$t===n.TEXTURE_2D_ARRAY?e.texImage3D($t,Xt,_e,Ae,Ce,k.depth,0,Re,de,null):e.texImage2D($t,Xt,_e,Ae,Ce,0,Re,de,null)}e.bindFramebuffer(n.FRAMEBUFFER,K),pe(k)?h.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,Pt,$t,ae.__webglTexture,0,ee(k)):($t===n.TEXTURE_2D||$t>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&$t<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,Pt,$t,ae.__webglTexture,Xt),e.bindFramebuffer(n.FRAMEBUFFER,null)}function Nt(K,k,xt){if(n.bindRenderbuffer(n.RENDERBUFFER,K),k.depthBuffer){const Pt=k.depthTexture,$t=Pt&&Pt.isDepthTexture?Pt.type:null,Xt=D(k.stencilBuffer,$t),Re=k.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,de=ee(k);pe(k)?h.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,de,Xt,k.width,k.height):xt?n.renderbufferStorageMultisample(n.RENDERBUFFER,de,Xt,k.width,k.height):n.renderbufferStorage(n.RENDERBUFFER,Xt,k.width,k.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,Re,n.RENDERBUFFER,K)}else{const Pt=k.textures;for(let $t=0;$t<Pt.length;$t++){const Xt=Pt[$t],Re=o.convert(Xt.format,Xt.colorSpace),de=o.convert(Xt.type),_e=U(Xt.internalFormat,Re,de,Xt.colorSpace),an=ee(k);xt&&pe(k)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,an,_e,k.width,k.height):pe(k)?h.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,an,_e,k.width,k.height):n.renderbufferStorage(n.RENDERBUFFER,_e,k.width,k.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function Qt(K,k){if(k&&k.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(n.FRAMEBUFFER,K),!(k.depthTexture&&k.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const Pt=i.get(k.depthTexture);Pt.__renderTarget=k,(!Pt.__webglTexture||k.depthTexture.image.width!==k.width||k.depthTexture.image.height!==k.height)&&(k.depthTexture.image.width=k.width,k.depthTexture.image.height=k.height,k.depthTexture.needsUpdate=!0),ut(k.depthTexture,0);const $t=Pt.__webglTexture,Xt=ee(k);if(k.depthTexture.format===th)pe(k)?h.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,$t,0,Xt):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,$t,0);else if(k.depthTexture.format===lh)pe(k)?h.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,$t,0,Xt):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,$t,0);else throw new Error("Unknown depthTexture format")}function we(K){const k=i.get(K),xt=K.isWebGLCubeRenderTarget===!0;if(k.__boundDepthTexture!==K.depthTexture){const Pt=K.depthTexture;if(k.__depthDisposeCallback&&k.__depthDisposeCallback(),Pt){const $t=()=>{delete k.__boundDepthTexture,delete k.__depthDisposeCallback,Pt.removeEventListener("dispose",$t)};Pt.addEventListener("dispose",$t),k.__depthDisposeCallback=$t}k.__boundDepthTexture=Pt}if(K.depthTexture&&!k.__autoAllocateDepthBuffer){if(xt)throw new Error("target.depthTexture not supported in Cube render targets");Qt(k.__webglFramebuffer,K)}else if(xt){k.__webglDepthbuffer=[];for(let Pt=0;Pt<6;Pt++)if(e.bindFramebuffer(n.FRAMEBUFFER,k.__webglFramebuffer[Pt]),k.__webglDepthbuffer[Pt]===void 0)k.__webglDepthbuffer[Pt]=n.createRenderbuffer(),Nt(k.__webglDepthbuffer[Pt],K,!1);else{const $t=K.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Xt=k.__webglDepthbuffer[Pt];n.bindRenderbuffer(n.RENDERBUFFER,Xt),n.framebufferRenderbuffer(n.FRAMEBUFFER,$t,n.RENDERBUFFER,Xt)}}else if(e.bindFramebuffer(n.FRAMEBUFFER,k.__webglFramebuffer),k.__webglDepthbuffer===void 0)k.__webglDepthbuffer=n.createRenderbuffer(),Nt(k.__webglDepthbuffer,K,!1);else{const Pt=K.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,$t=k.__webglDepthbuffer;n.bindRenderbuffer(n.RENDERBUFFER,$t),n.framebufferRenderbuffer(n.FRAMEBUFFER,Pt,n.RENDERBUFFER,$t)}e.bindFramebuffer(n.FRAMEBUFFER,null)}function re(K,k,xt){const Pt=i.get(K);k!==void 0&&Et(Pt.__webglFramebuffer,K,K.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),xt!==void 0&&we(K)}function ke(K){const k=K.texture,xt=i.get(K),Pt=i.get(k);K.addEventListener("dispose",F);const $t=K.textures,Xt=K.isWebGLCubeRenderTarget===!0,Re=$t.length>1;if(Re||(Pt.__webglTexture===void 0&&(Pt.__webglTexture=n.createTexture()),Pt.__version=k.version,u.memory.textures++),Xt){xt.__webglFramebuffer=[];for(let de=0;de<6;de++)if(k.mipmaps&&k.mipmaps.length>0){xt.__webglFramebuffer[de]=[];for(let _e=0;_e<k.mipmaps.length;_e++)xt.__webglFramebuffer[de][_e]=n.createFramebuffer()}else xt.__webglFramebuffer[de]=n.createFramebuffer()}else{if(k.mipmaps&&k.mipmaps.length>0){xt.__webglFramebuffer=[];for(let de=0;de<k.mipmaps.length;de++)xt.__webglFramebuffer[de]=n.createFramebuffer()}else xt.__webglFramebuffer=n.createFramebuffer();if(Re)for(let de=0,_e=$t.length;de<_e;de++){const an=i.get($t[de]);an.__webglTexture===void 0&&(an.__webglTexture=n.createTexture(),u.memory.textures++)}if(K.samples>0&&pe(K)===!1){xt.__webglMultisampledFramebuffer=n.createFramebuffer(),xt.__webglColorRenderbuffer=[],e.bindFramebuffer(n.FRAMEBUFFER,xt.__webglMultisampledFramebuffer);for(let de=0;de<$t.length;de++){const _e=$t[de];xt.__webglColorRenderbuffer[de]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,xt.__webglColorRenderbuffer[de]);const an=o.convert(_e.format,_e.colorSpace),ae=o.convert(_e.type),Ae=U(_e.internalFormat,an,ae,_e.colorSpace,K.isXRRenderTarget===!0),Ce=ee(K);n.renderbufferStorageMultisample(n.RENDERBUFFER,Ce,Ae,K.width,K.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+de,n.RENDERBUFFER,xt.__webglColorRenderbuffer[de])}n.bindRenderbuffer(n.RENDERBUFFER,null),K.depthBuffer&&(xt.__webglDepthRenderbuffer=n.createRenderbuffer(),Nt(xt.__webglDepthRenderbuffer,K,!0)),e.bindFramebuffer(n.FRAMEBUFFER,null)}}if(Xt){e.bindTexture(n.TEXTURE_CUBE_MAP,Pt.__webglTexture),Tt(n.TEXTURE_CUBE_MAP,k);for(let de=0;de<6;de++)if(k.mipmaps&&k.mipmaps.length>0)for(let _e=0;_e<k.mipmaps.length;_e++)Et(xt.__webglFramebuffer[de][_e],K,k,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+de,_e);else Et(xt.__webglFramebuffer[de],K,k,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+de,0);w(k)&&M(n.TEXTURE_CUBE_MAP),e.unbindTexture()}else if(Re){for(let de=0,_e=$t.length;de<_e;de++){const an=$t[de],ae=i.get(an);e.bindTexture(n.TEXTURE_2D,ae.__webglTexture),Tt(n.TEXTURE_2D,an),Et(xt.__webglFramebuffer,K,an,n.COLOR_ATTACHMENT0+de,n.TEXTURE_2D,0),w(an)&&M(n.TEXTURE_2D)}e.unbindTexture()}else{let de=n.TEXTURE_2D;if((K.isWebGL3DRenderTarget||K.isWebGLArrayRenderTarget)&&(de=K.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),e.bindTexture(de,Pt.__webglTexture),Tt(de,k),k.mipmaps&&k.mipmaps.length>0)for(let _e=0;_e<k.mipmaps.length;_e++)Et(xt.__webglFramebuffer[_e],K,k,n.COLOR_ATTACHMENT0,de,_e);else Et(xt.__webglFramebuffer,K,k,n.COLOR_ATTACHMENT0,de,0);w(k)&&M(de),e.unbindTexture()}K.depthBuffer&&we(K)}function Jt(K){const k=K.textures;for(let xt=0,Pt=k.length;xt<Pt;xt++){const $t=k[xt];if(w($t)){const Xt=C(K),Re=i.get($t).__webglTexture;e.bindTexture(Xt,Re),M(Xt),e.unbindTexture()}}}const Yt=[],Q=[];function Me(K){if(K.samples>0){if(pe(K)===!1){const k=K.textures,xt=K.width,Pt=K.height;let $t=n.COLOR_BUFFER_BIT;const Xt=K.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Re=i.get(K),de=k.length>1;if(de)for(let _e=0;_e<k.length;_e++)e.bindFramebuffer(n.FRAMEBUFFER,Re.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+_e,n.RENDERBUFFER,null),e.bindFramebuffer(n.FRAMEBUFFER,Re.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+_e,n.TEXTURE_2D,null,0);e.bindFramebuffer(n.READ_FRAMEBUFFER,Re.__webglMultisampledFramebuffer),e.bindFramebuffer(n.DRAW_FRAMEBUFFER,Re.__webglFramebuffer);for(let _e=0;_e<k.length;_e++){if(K.resolveDepthBuffer&&(K.depthBuffer&&($t|=n.DEPTH_BUFFER_BIT),K.stencilBuffer&&K.resolveStencilBuffer&&($t|=n.STENCIL_BUFFER_BIT)),de){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,Re.__webglColorRenderbuffer[_e]);const an=i.get(k[_e]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,an,0)}n.blitFramebuffer(0,0,xt,Pt,0,0,xt,Pt,$t,n.NEAREST),d===!0&&(Yt.length=0,Q.length=0,Yt.push(n.COLOR_ATTACHMENT0+_e),K.depthBuffer&&K.resolveDepthBuffer===!1&&(Yt.push(Xt),Q.push(Xt),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,Q)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,Yt))}if(e.bindFramebuffer(n.READ_FRAMEBUFFER,null),e.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),de)for(let _e=0;_e<k.length;_e++){e.bindFramebuffer(n.FRAMEBUFFER,Re.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+_e,n.RENDERBUFFER,Re.__webglColorRenderbuffer[_e]);const an=i.get(k[_e]).__webglTexture;e.bindFramebuffer(n.FRAMEBUFFER,Re.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+_e,n.TEXTURE_2D,an,0)}e.bindFramebuffer(n.DRAW_FRAMEBUFFER,Re.__webglMultisampledFramebuffer)}else if(K.depthBuffer&&K.resolveDepthBuffer===!1&&d){const k=K.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[k])}}}function ee(K){return Math.min(a.maxSamples,K.samples)}function pe(K){const k=i.get(K);return K.samples>0&&t.has("WEBGL_multisampled_render_to_texture")===!0&&k.__useRenderToTexture!==!1}function se(K){const k=u.render.frame;v.get(K)!==k&&(v.set(K,k),K.update())}function Be(K,k){const xt=K.colorSpace,Pt=K.format,$t=K.type;return K.isCompressedTexture===!0||K.isVideoTexture===!0||xt!==Ro&&xt!==gc&&(On.getTransfer(xt)===ii?(Pt!==ea||$t!==jr)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",xt)),k}function he(K){return typeof HTMLImageElement<"u"&&K instanceof HTMLImageElement?(p.width=K.naturalWidth||K.width,p.height=K.naturalHeight||K.height):typeof VideoFrame<"u"&&K instanceof VideoFrame?(p.width=K.displayWidth,p.height=K.displayHeight):(p.width=K.width,p.height=K.height),p}this.allocateTextureUnit=W,this.resetTextureUnits=et,this.setTexture2D=ut,this.setTexture2DArray=tt,this.setTexture3D=pt,this.setTextureCube=ot,this.rebindTextures=re,this.setupRenderTarget=ke,this.updateRenderTargetMipmap=Jt,this.updateMultisampleRenderTarget=Me,this.setupDepthRenderbuffer=we,this.setupFrameBufferTexture=Et,this.useMultisampledRTT=pe}function qC(n,t){function e(i,a=gc){let o;const u=On.getTransfer(a);if(i===jr)return n.UNSIGNED_BYTE;if(i===ox)return n.UNSIGNED_SHORT_4_4_4_4;if(i===lx)return n.UNSIGNED_SHORT_5_5_5_1;if(i===tM)return n.UNSIGNED_INT_5_9_9_9_REV;if(i===rx)return n.BYTE;if(i===sx)return n.SHORT;if(i===Zd)return n.UNSIGNED_SHORT;if(i===J0)return n.INT;if(i===Rl)return n.UNSIGNED_INT;if(i===Fi)return n.FLOAT;if(i===Ra)return n.HALF_FLOAT;if(i===eM)return n.ALPHA;if(i===nM)return n.RGB;if(i===ea)return n.RGBA;if(i===iM)return n.LUMINANCE;if(i===aM)return n.LUMINANCE_ALPHA;if(i===th)return n.DEPTH_COMPONENT;if(i===lh)return n.DEPTH_STENCIL;if(i===$0)return n.RED;if(i===tg)return n.RED_INTEGER;if(i===rM)return n.RG;if(i===cx)return n.RG_INTEGER;if(i===ux)return n.RGBA_INTEGER;if(i===Qm||i===Jm||i===$m||i===t0)if(u===ii)if(o=t.get("WEBGL_compressed_texture_s3tc_srgb"),o!==null){if(i===Qm)return o.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===Jm)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===$m)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===t0)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(o=t.get("WEBGL_compressed_texture_s3tc"),o!==null){if(i===Qm)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===Jm)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===$m)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===t0)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(i===gy||i===vy||i===_y||i===yy)if(o=t.get("WEBGL_compressed_texture_pvrtc"),o!==null){if(i===gy)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===vy)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===_y)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===yy)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(i===xy||i===Sy||i===by)if(o=t.get("WEBGL_compressed_texture_etc"),o!==null){if(i===xy||i===Sy)return u===ii?o.COMPRESSED_SRGB8_ETC2:o.COMPRESSED_RGB8_ETC2;if(i===by)return u===ii?o.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:o.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(i===My||i===Ey||i===Ty||i===Ay||i===wy||i===Ry||i===Cy||i===Dy||i===Ny||i===Uy||i===Oy||i===Ly||i===zy||i===By)if(o=t.get("WEBGL_compressed_texture_astc"),o!==null){if(i===My)return u===ii?o.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:o.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===Ey)return u===ii?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:o.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===Ty)return u===ii?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:o.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===Ay)return u===ii?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:o.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===wy)return u===ii?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:o.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===Ry)return u===ii?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:o.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===Cy)return u===ii?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:o.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===Dy)return u===ii?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:o.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===Ny)return u===ii?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:o.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===Uy)return u===ii?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:o.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===Oy)return u===ii?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:o.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===Ly)return u===ii?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:o.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===zy)return u===ii?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:o.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===By)return u===ii?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:o.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(i===e0||i===Iy||i===Py)if(o=t.get("EXT_texture_compression_bptc"),o!==null){if(i===e0)return u===ii?o.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:o.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===Iy)return o.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===Py)return o.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(i===sM||i===Hy||i===Fy||i===Gy)if(o=t.get("EXT_texture_compression_rgtc"),o!==null){if(i===e0)return o.COMPRESSED_RED_RGTC1_EXT;if(i===Hy)return o.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===Fy)return o.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===Gy)return o.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return i===oh?n.UNSIGNED_INT_24_8:n[i]!==void 0?n[i]:null}return{convert:e}}const SF=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,bF=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class MF{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(t,e,i){if(this.texture===null){const a=new ci,o=t.properties.get(a);o.__webglTexture=e.texture,(e.depthNear!==i.depthNear||e.depthFar!==i.depthFar)&&(this.depthNear=e.depthNear,this.depthFar=e.depthFar),this.texture=a}}getMesh(t){if(this.texture!==null&&this.mesh===null){const e=t.cameras[0].viewport,i=new Kr({vertexShader:SF,fragmentShader:bF,uniforms:{depthColor:{value:this.texture},depthWidth:{value:e.z},depthHeight:{value:e.w}}});this.mesh=new Gi(new Ou(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class EF extends Cl{constructor(t,e){super();const i=this;let a=null,o=1,u=null,h="local-floor",d=1,p=null,v=null,_=null,x=null,b=null,E=null;const R=new MF,w=e.getContextAttributes();let M=null,C=null;const U=[],D=[],z=new jt;let B=null;const F=new ta;F.viewport=new Fn;const G=new ta;G.viewport=new Fn;const L=[F,G],O=new BC;let V=null,et=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(rt){let Lt=U[rt];return Lt===void 0&&(Lt=new Q_,U[rt]=Lt),Lt.getTargetRaySpace()},this.getControllerGrip=function(rt){let Lt=U[rt];return Lt===void 0&&(Lt=new Q_,U[rt]=Lt),Lt.getGripSpace()},this.getHand=function(rt){let Lt=U[rt];return Lt===void 0&&(Lt=new Q_,U[rt]=Lt),Lt.getHandSpace()};function W(rt){const Lt=D.indexOf(rt.inputSource);if(Lt===-1)return;const Et=U[Lt];Et!==void 0&&(Et.update(rt.inputSource,rt.frame,p||u),Et.dispatchEvent({type:rt.type,data:rt.inputSource}))}function j(){a.removeEventListener("select",W),a.removeEventListener("selectstart",W),a.removeEventListener("selectend",W),a.removeEventListener("squeeze",W),a.removeEventListener("squeezestart",W),a.removeEventListener("squeezeend",W),a.removeEventListener("end",j),a.removeEventListener("inputsourceschange",ut);for(let rt=0;rt<U.length;rt++){const Lt=D[rt];Lt!==null&&(D[rt]=null,U[rt].disconnect(Lt))}V=null,et=null,R.reset(),t.setRenderTarget(M),b=null,x=null,_=null,a=null,C=null,Ft.stop(),i.isPresenting=!1,t.setPixelRatio(B),t.setSize(z.width,z.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(rt){o=rt,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(rt){h=rt,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return p||u},this.setReferenceSpace=function(rt){p=rt},this.getBaseLayer=function(){return x!==null?x:b},this.getBinding=function(){return _},this.getFrame=function(){return E},this.getSession=function(){return a},this.setSession=async function(rt){if(a=rt,a!==null){if(M=t.getRenderTarget(),a.addEventListener("select",W),a.addEventListener("selectstart",W),a.addEventListener("selectend",W),a.addEventListener("squeeze",W),a.addEventListener("squeezestart",W),a.addEventListener("squeezeend",W),a.addEventListener("end",j),a.addEventListener("inputsourceschange",ut),w.xrCompatible!==!0&&await e.makeXRCompatible(),B=t.getPixelRatio(),t.getSize(z),typeof XRWebGLBinding<"u"&&"createProjectionLayer"in XRWebGLBinding.prototype){let Et=null,Nt=null,Qt=null;w.depth&&(Qt=w.stencil?e.DEPTH24_STENCIL8:e.DEPTH_COMPONENT24,Et=w.stencil?lh:th,Nt=w.stencil?oh:Rl);const we={colorFormat:e.RGBA8,depthFormat:Qt,scaleFactor:o};_=new XRWebGLBinding(a,e),x=_.createProjectionLayer(we),a.updateRenderState({layers:[x]}),t.setPixelRatio(1),t.setSize(x.textureWidth,x.textureHeight,!1),C=new Is(x.textureWidth,x.textureHeight,{format:ea,type:jr,depthTexture:new gM(x.textureWidth,x.textureHeight,Nt,void 0,void 0,void 0,void 0,void 0,void 0,Et),stencilBuffer:w.stencil,colorSpace:t.outputColorSpace,samples:w.antialias?4:0,resolveDepthBuffer:x.ignoreDepthValues===!1,resolveStencilBuffer:x.ignoreDepthValues===!1})}else{const Et={antialias:w.antialias,alpha:!0,depth:w.depth,stencil:w.stencil,framebufferScaleFactor:o};b=new XRWebGLLayer(a,e,Et),a.updateRenderState({baseLayer:b}),t.setPixelRatio(1),t.setSize(b.framebufferWidth,b.framebufferHeight,!1),C=new Is(b.framebufferWidth,b.framebufferHeight,{format:ea,type:jr,colorSpace:t.outputColorSpace,stencilBuffer:w.stencil,resolveDepthBuffer:b.ignoreDepthValues===!1,resolveStencilBuffer:b.ignoreDepthValues===!1})}C.isXRRenderTarget=!0,this.setFoveation(d),p=null,u=await a.requestReferenceSpace(h),Ft.setContext(a),Ft.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(a!==null)return a.environmentBlendMode},this.getDepthTexture=function(){return R.getDepthTexture()};function ut(rt){for(let Lt=0;Lt<rt.removed.length;Lt++){const Et=rt.removed[Lt],Nt=D.indexOf(Et);Nt>=0&&(D[Nt]=null,U[Nt].disconnect(Et))}for(let Lt=0;Lt<rt.added.length;Lt++){const Et=rt.added[Lt];let Nt=D.indexOf(Et);if(Nt===-1){for(let we=0;we<U.length;we++)if(we>=D.length){D.push(Et),Nt=we;break}else if(D[we]===null){D[we]=Et,Nt=we;break}if(Nt===-1)break}const Qt=U[Nt];Qt&&Qt.connect(Et)}}const tt=new J,pt=new J;function ot(rt,Lt,Et){tt.setFromMatrixPosition(Lt.matrixWorld),pt.setFromMatrixPosition(Et.matrixWorld);const Nt=tt.distanceTo(pt),Qt=Lt.projectionMatrix.elements,we=Et.projectionMatrix.elements,re=Qt[14]/(Qt[10]-1),ke=Qt[14]/(Qt[10]+1),Jt=(Qt[9]+1)/Qt[5],Yt=(Qt[9]-1)/Qt[5],Q=(Qt[8]-1)/Qt[0],Me=(we[8]+1)/we[0],ee=re*Q,pe=re*Me,se=Nt/(-Q+Me),Be=se*-Q;if(Lt.matrixWorld.decompose(rt.position,rt.quaternion,rt.scale),rt.translateX(Be),rt.translateZ(se),rt.matrixWorld.compose(rt.position,rt.quaternion,rt.scale),rt.matrixWorldInverse.copy(rt.matrixWorld).invert(),Qt[10]===-1)rt.projectionMatrix.copy(Lt.projectionMatrix),rt.projectionMatrixInverse.copy(Lt.projectionMatrixInverse);else{const he=re+se,K=ke+se,k=ee-Be,xt=pe+(Nt-Be),Pt=Jt*ke/K*he,$t=Yt*ke/K*he;rt.projectionMatrix.makePerspective(k,xt,Pt,$t,he,K),rt.projectionMatrixInverse.copy(rt.projectionMatrix).invert()}}function Dt(rt,Lt){Lt===null?rt.matrixWorld.copy(rt.matrix):rt.matrixWorld.multiplyMatrices(Lt.matrixWorld,rt.matrix),rt.matrixWorldInverse.copy(rt.matrixWorld).invert()}this.updateCamera=function(rt){if(a===null)return;let Lt=rt.near,Et=rt.far;R.texture!==null&&(R.depthNear>0&&(Lt=R.depthNear),R.depthFar>0&&(Et=R.depthFar)),O.near=G.near=F.near=Lt,O.far=G.far=F.far=Et,(V!==O.near||et!==O.far)&&(a.updateRenderState({depthNear:O.near,depthFar:O.far}),V=O.near,et=O.far),F.layers.mask=rt.layers.mask|2,G.layers.mask=rt.layers.mask|4,O.layers.mask=F.layers.mask|G.layers.mask;const Nt=rt.parent,Qt=O.cameras;Dt(O,Nt);for(let we=0;we<Qt.length;we++)Dt(Qt[we],Nt);Qt.length===2?ot(O,F,G):O.projectionMatrix.copy(F.projectionMatrix),Z(rt,O,Nt)};function Z(rt,Lt,Et){Et===null?rt.matrix.copy(Lt.matrixWorld):(rt.matrix.copy(Et.matrixWorld),rt.matrix.invert(),rt.matrix.multiply(Lt.matrixWorld)),rt.matrix.decompose(rt.position,rt.quaternion,rt.scale),rt.updateMatrixWorld(!0),rt.projectionMatrix.copy(Lt.projectionMatrix),rt.projectionMatrixInverse.copy(Lt.projectionMatrixInverse),rt.isPerspectiveCamera&&(rt.fov=Wd*2*Math.atan(1/rt.projectionMatrix.elements[5]),rt.zoom=1)}this.getCamera=function(){return O},this.getFoveation=function(){if(!(x===null&&b===null))return d},this.setFoveation=function(rt){d=rt,x!==null&&(x.fixedFoveation=rt),b!==null&&b.fixedFoveation!==void 0&&(b.fixedFoveation=rt)},this.hasDepthSensing=function(){return R.texture!==null},this.getDepthSensingMesh=function(){return R.getMesh(O)};let ht=null;function Tt(rt,Lt){if(v=Lt.getViewerPose(p||u),E=Lt,v!==null){const Et=v.views;b!==null&&(t.setRenderTargetFramebuffer(C,b.framebuffer),t.setRenderTarget(C));let Nt=!1;Et.length!==O.cameras.length&&(O.cameras.length=0,Nt=!0);for(let re=0;re<Et.length;re++){const ke=Et[re];let Jt=null;if(b!==null)Jt=b.getViewport(ke);else{const Q=_.getViewSubImage(x,ke);Jt=Q.viewport,re===0&&(t.setRenderTargetTextures(C,Q.colorTexture,x.ignoreDepthValues?void 0:Q.depthStencilTexture),t.setRenderTarget(C))}let Yt=L[re];Yt===void 0&&(Yt=new ta,Yt.layers.enable(re),Yt.viewport=new Fn,L[re]=Yt),Yt.matrix.fromArray(ke.transform.matrix),Yt.matrix.decompose(Yt.position,Yt.quaternion,Yt.scale),Yt.projectionMatrix.fromArray(ke.projectionMatrix),Yt.projectionMatrixInverse.copy(Yt.projectionMatrix).invert(),Yt.viewport.set(Jt.x,Jt.y,Jt.width,Jt.height),re===0&&(O.matrix.copy(Yt.matrix),O.matrix.decompose(O.position,O.quaternion,O.scale)),Nt===!0&&O.cameras.push(Yt)}const Qt=a.enabledFeatures;if(Qt&&Qt.includes("depth-sensing")&&a.depthUsage=="gpu-optimized"&&_){const re=_.getDepthInformation(Et[0]);re&&re.isValid&&re.texture&&R.init(t,re,a.renderState)}}for(let Et=0;Et<U.length;Et++){const Nt=D[Et],Qt=U[Et];Nt!==null&&Qt!==void 0&&Qt.update(Nt,Lt,p||u)}ht&&ht(rt,Lt),Lt.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:Lt}),E=null}const Ft=new GC;Ft.setAnimationLoop(Tt),this.setAnimationLoop=function(rt){ht=rt},this.dispose=function(){}}}const Bf=new gs,TF=new $e;function AF(n,t){function e(w,M){w.matrixAutoUpdate===!0&&w.updateMatrix(),M.value.copy(w.matrix)}function i(w,M){M.color.getRGB(w.fogColor.value,VR(n)),M.isFog?(w.fogNear.value=M.near,w.fogFar.value=M.far):M.isFogExp2&&(w.fogDensity.value=M.density)}function a(w,M,C,U,D){M.isMeshBasicMaterial||M.isMeshLambertMaterial?o(w,M):M.isMeshToonMaterial?(o(w,M),_(w,M)):M.isMeshPhongMaterial?(o(w,M),v(w,M)):M.isMeshStandardMaterial?(o(w,M),x(w,M),M.isMeshPhysicalMaterial&&b(w,M,D)):M.isMeshMatcapMaterial?(o(w,M),E(w,M)):M.isMeshDepthMaterial?o(w,M):M.isMeshDistanceMaterial?(o(w,M),R(w,M)):M.isMeshNormalMaterial?o(w,M):M.isLineBasicMaterial?(u(w,M),M.isLineDashedMaterial&&h(w,M)):M.isPointsMaterial?d(w,M,C,U):M.isSpriteMaterial?p(w,M):M.isShadowMaterial?(w.color.value.copy(M.color),w.opacity.value=M.opacity):M.isShaderMaterial&&(M.uniformsNeedUpdate=!1)}function o(w,M){w.opacity.value=M.opacity,M.color&&w.diffuse.value.copy(M.color),M.emissive&&w.emissive.value.copy(M.emissive).multiplyScalar(M.emissiveIntensity),M.map&&(w.map.value=M.map,e(M.map,w.mapTransform)),M.alphaMap&&(w.alphaMap.value=M.alphaMap,e(M.alphaMap,w.alphaMapTransform)),M.bumpMap&&(w.bumpMap.value=M.bumpMap,e(M.bumpMap,w.bumpMapTransform),w.bumpScale.value=M.bumpScale,M.side===Er&&(w.bumpScale.value*=-1)),M.normalMap&&(w.normalMap.value=M.normalMap,e(M.normalMap,w.normalMapTransform),w.normalScale.value.copy(M.normalScale),M.side===Er&&w.normalScale.value.negate()),M.displacementMap&&(w.displacementMap.value=M.displacementMap,e(M.displacementMap,w.displacementMapTransform),w.displacementScale.value=M.displacementScale,w.displacementBias.value=M.displacementBias),M.emissiveMap&&(w.emissiveMap.value=M.emissiveMap,e(M.emissiveMap,w.emissiveMapTransform)),M.specularMap&&(w.specularMap.value=M.specularMap,e(M.specularMap,w.specularMapTransform)),M.alphaTest>0&&(w.alphaTest.value=M.alphaTest);const C=t.get(M),U=C.envMap,D=C.envMapRotation;U&&(w.envMap.value=U,Bf.copy(D),Bf.x*=-1,Bf.y*=-1,Bf.z*=-1,U.isCubeTexture&&U.isRenderTargetTexture===!1&&(Bf.y*=-1,Bf.z*=-1),w.envMapRotation.value.setFromMatrix4(TF.makeRotationFromEuler(Bf)),w.flipEnvMap.value=U.isCubeTexture&&U.isRenderTargetTexture===!1?-1:1,w.reflectivity.value=M.reflectivity,w.ior.value=M.ior,w.refractionRatio.value=M.refractionRatio),M.lightMap&&(w.lightMap.value=M.lightMap,w.lightMapIntensity.value=M.lightMapIntensity,e(M.lightMap,w.lightMapTransform)),M.aoMap&&(w.aoMap.value=M.aoMap,w.aoMapIntensity.value=M.aoMapIntensity,e(M.aoMap,w.aoMapTransform))}function u(w,M){w.diffuse.value.copy(M.color),w.opacity.value=M.opacity,M.map&&(w.map.value=M.map,e(M.map,w.mapTransform))}function h(w,M){w.dashSize.value=M.dashSize,w.totalSize.value=M.dashSize+M.gapSize,w.scale.value=M.scale}function d(w,M,C,U){w.diffuse.value.copy(M.color),w.opacity.value=M.opacity,w.size.value=M.size*C,w.scale.value=U*.5,M.map&&(w.map.value=M.map,e(M.map,w.uvTransform)),M.alphaMap&&(w.alphaMap.value=M.alphaMap,e(M.alphaMap,w.alphaMapTransform)),M.alphaTest>0&&(w.alphaTest.value=M.alphaTest)}function p(w,M){w.diffuse.value.copy(M.color),w.opacity.value=M.opacity,w.rotation.value=M.rotation,M.map&&(w.map.value=M.map,e(M.map,w.mapTransform)),M.alphaMap&&(w.alphaMap.value=M.alphaMap,e(M.alphaMap,w.alphaMapTransform)),M.alphaTest>0&&(w.alphaTest.value=M.alphaTest)}function v(w,M){w.specular.value.copy(M.specular),w.shininess.value=Math.max(M.shininess,1e-4)}function _(w,M){M.gradientMap&&(w.gradientMap.value=M.gradientMap)}function x(w,M){w.metalness.value=M.metalness,M.metalnessMap&&(w.metalnessMap.value=M.metalnessMap,e(M.metalnessMap,w.metalnessMapTransform)),w.roughness.value=M.roughness,M.roughnessMap&&(w.roughnessMap.value=M.roughnessMap,e(M.roughnessMap,w.roughnessMapTransform)),M.envMap&&(w.envMapIntensity.value=M.envMapIntensity)}function b(w,M,C){w.ior.value=M.ior,M.sheen>0&&(w.sheenColor.value.copy(M.sheenColor).multiplyScalar(M.sheen),w.sheenRoughness.value=M.sheenRoughness,M.sheenColorMap&&(w.sheenColorMap.value=M.sheenColorMap,e(M.sheenColorMap,w.sheenColorMapTransform)),M.sheenRoughnessMap&&(w.sheenRoughnessMap.value=M.sheenRoughnessMap,e(M.sheenRoughnessMap,w.sheenRoughnessMapTransform))),M.clearcoat>0&&(w.clearcoat.value=M.clearcoat,w.clearcoatRoughness.value=M.clearcoatRoughness,M.clearcoatMap&&(w.clearcoatMap.value=M.clearcoatMap,e(M.clearcoatMap,w.clearcoatMapTransform)),M.clearcoatRoughnessMap&&(w.clearcoatRoughnessMap.value=M.clearcoatRoughnessMap,e(M.clearcoatRoughnessMap,w.clearcoatRoughnessMapTransform)),M.clearcoatNormalMap&&(w.clearcoatNormalMap.value=M.clearcoatNormalMap,e(M.clearcoatNormalMap,w.clearcoatNormalMapTransform),w.clearcoatNormalScale.value.copy(M.clearcoatNormalScale),M.side===Er&&w.clearcoatNormalScale.value.negate())),M.dispersion>0&&(w.dispersion.value=M.dispersion),M.iridescence>0&&(w.iridescence.value=M.iridescence,w.iridescenceIOR.value=M.iridescenceIOR,w.iridescenceThicknessMinimum.value=M.iridescenceThicknessRange[0],w.iridescenceThicknessMaximum.value=M.iridescenceThicknessRange[1],M.iridescenceMap&&(w.iridescenceMap.value=M.iridescenceMap,e(M.iridescenceMap,w.iridescenceMapTransform)),M.iridescenceThicknessMap&&(w.iridescenceThicknessMap.value=M.iridescenceThicknessMap,e(M.iridescenceThicknessMap,w.iridescenceThicknessMapTransform))),M.transmission>0&&(w.transmission.value=M.transmission,w.transmissionSamplerMap.value=C.texture,w.transmissionSamplerSize.value.set(C.width,C.height),M.transmissionMap&&(w.transmissionMap.value=M.transmissionMap,e(M.transmissionMap,w.transmissionMapTransform)),w.thickness.value=M.thickness,M.thicknessMap&&(w.thicknessMap.value=M.thicknessMap,e(M.thicknessMap,w.thicknessMapTransform)),w.attenuationDistance.value=M.attenuationDistance,w.attenuationColor.value.copy(M.attenuationColor)),M.anisotropy>0&&(w.anisotropyVector.value.set(M.anisotropy*Math.cos(M.anisotropyRotation),M.anisotropy*Math.sin(M.anisotropyRotation)),M.anisotropyMap&&(w.anisotropyMap.value=M.anisotropyMap,e(M.anisotropyMap,w.anisotropyMapTransform))),w.specularIntensity.value=M.specularIntensity,w.specularColor.value.copy(M.specularColor),M.specularColorMap&&(w.specularColorMap.value=M.specularColorMap,e(M.specularColorMap,w.specularColorMapTransform)),M.specularIntensityMap&&(w.specularIntensityMap.value=M.specularIntensityMap,e(M.specularIntensityMap,w.specularIntensityMapTransform))}function E(w,M){M.matcap&&(w.matcap.value=M.matcap)}function R(w,M){const C=t.get(M).light;w.referencePosition.value.setFromMatrixPosition(C.matrixWorld),w.nearDistance.value=C.shadow.camera.near,w.farDistance.value=C.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:a}}function wF(n,t,e,i){let a={},o={},u=[];const h=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function d(C,U){const D=U.program;i.uniformBlockBinding(C,D)}function p(C,U){let D=a[C.id];D===void 0&&(E(C),D=v(C),a[C.id]=D,C.addEventListener("dispose",w));const z=U.program;i.updateUBOMapping(C,z);const B=t.render.frame;o[C.id]!==B&&(x(C),o[C.id]=B)}function v(C){const U=_();C.__bindingPointIndex=U;const D=n.createBuffer(),z=C.__size,B=C.usage;return n.bindBuffer(n.UNIFORM_BUFFER,D),n.bufferData(n.UNIFORM_BUFFER,z,B),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,U,D),D}function _(){for(let C=0;C<h;C++)if(u.indexOf(C)===-1)return u.push(C),C;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function x(C){const U=a[C.id],D=C.uniforms,z=C.__cache;n.bindBuffer(n.UNIFORM_BUFFER,U);for(let B=0,F=D.length;B<F;B++){const G=Array.isArray(D[B])?D[B]:[D[B]];for(let L=0,O=G.length;L<O;L++){const V=G[L];if(b(V,B,L,z)===!0){const et=V.__offset,W=Array.isArray(V.value)?V.value:[V.value];let j=0;for(let ut=0;ut<W.length;ut++){const tt=W[ut],pt=R(tt);typeof tt=="number"||typeof tt=="boolean"?(V.__data[0]=tt,n.bufferSubData(n.UNIFORM_BUFFER,et+j,V.__data)):tt.isMatrix3?(V.__data[0]=tt.elements[0],V.__data[1]=tt.elements[1],V.__data[2]=tt.elements[2],V.__data[3]=0,V.__data[4]=tt.elements[3],V.__data[5]=tt.elements[4],V.__data[6]=tt.elements[5],V.__data[7]=0,V.__data[8]=tt.elements[6],V.__data[9]=tt.elements[7],V.__data[10]=tt.elements[8],V.__data[11]=0):(tt.toArray(V.__data,j),j+=pt.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,et,V.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function b(C,U,D,z){const B=C.value,F=U+"_"+D;if(z[F]===void 0)return typeof B=="number"||typeof B=="boolean"?z[F]=B:z[F]=B.clone(),!0;{const G=z[F];if(typeof B=="number"||typeof B=="boolean"){if(G!==B)return z[F]=B,!0}else if(G.equals(B)===!1)return G.copy(B),!0}return!1}function E(C){const U=C.uniforms;let D=0;const z=16;for(let F=0,G=U.length;F<G;F++){const L=Array.isArray(U[F])?U[F]:[U[F]];for(let O=0,V=L.length;O<V;O++){const et=L[O],W=Array.isArray(et.value)?et.value:[et.value];for(let j=0,ut=W.length;j<ut;j++){const tt=W[j],pt=R(tt),ot=D%z,Dt=ot%pt.boundary,Z=ot+Dt;D+=Dt,Z!==0&&z-Z<pt.storage&&(D+=z-Z),et.__data=new Float32Array(pt.storage/Float32Array.BYTES_PER_ELEMENT),et.__offset=D,D+=pt.storage}}}const B=D%z;return B>0&&(D+=z-B),C.__size=D,C.__cache={},this}function R(C){const U={boundary:0,storage:0};return typeof C=="number"||typeof C=="boolean"?(U.boundary=4,U.storage=4):C.isVector2?(U.boundary=8,U.storage=8):C.isVector3||C.isColor?(U.boundary=16,U.storage=12):C.isVector4?(U.boundary=16,U.storage=16):C.isMatrix3?(U.boundary=48,U.storage=48):C.isMatrix4?(U.boundary=64,U.storage=64):C.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",C),U}function w(C){const U=C.target;U.removeEventListener("dispose",w);const D=u.indexOf(U.__bindingPointIndex);u.splice(D,1),n.deleteBuffer(a[U.id]),delete a[U.id],delete o[U.id]}function M(){for(const C in a)n.deleteBuffer(a[C]);u=[],a={},o={}}return{bind:d,update:p,dispose:M}}class HM{constructor(t={}){const{canvas:e=HR(),context:i=null,depth:a=!0,stencil:o=!1,alpha:u=!1,antialias:h=!1,premultipliedAlpha:d=!0,preserveDrawingBuffer:p=!1,powerPreference:v="default",failIfMajorPerformanceCaveat:_=!1,reverseDepthBuffer:x=!1}=t;this.isWebGLRenderer=!0;let b;if(i!==null){if(typeof WebGLRenderingContext<"u"&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");b=i.getContextAttributes().alpha}else b=u;const E=new Uint32Array(4),R=new Int32Array(4);let w=null,M=null;const C=[],U=[];this.domElement=e,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Va,this.toneMapping=Tl,this.toneMappingExposure=1;const D=this;let z=!1,B=0,F=0,G=null,L=-1,O=null;const V=new Fn,et=new Fn;let W=null;const j=new De(0);let ut=0,tt=e.width,pt=e.height,ot=1,Dt=null,Z=null;const ht=new Fn(0,0,tt,pt),Tt=new Fn(0,0,tt,pt);let Ft=!1;const rt=new ag;let Lt=!1,Et=!1;this.transmissionResolutionScale=1;const Nt=new $e,Qt=new $e,we=new J,re=new Fn,ke={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let Jt=!1;function Yt(){return G===null?ot:1}let Q=i;function Me(P,$){return e.getContext(P,$)}try{const P={alpha:!0,depth:a,stencil:o,antialias:h,premultipliedAlpha:d,preserveDrawingBuffer:p,powerPreference:v,failIfMajorPerformanceCaveat:_};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${K0}`),e.addEventListener("webglcontextlost",Gt,!1),e.addEventListener("webglcontextrestored",ge,!1),e.addEventListener("webglcontextcreationerror",ve,!1),Q===null){const $="webgl2";if(Q=Me($,P),Q===null)throw Me($)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(P){throw console.error("THREE.WebGLRenderer: "+P.message),P}let ee,pe,se,Be,he,K,k,xt,Pt,$t,Xt,Re,de,_e,an,ae,Ae,Ce,me,ye,lt,wt,le,ct;function St(){ee=new HH(Q),ee.init(),wt=new qC(Q,ee),pe=new UH(Q,ee,t,wt),se=new yF(Q,ee),pe.reverseDepthBuffer&&x&&se.buffers.depth.setReversed(!0),Be=new VH(Q),he=new sF,K=new xF(Q,ee,se,he,pe,wt,Be),k=new LH(D),xt=new PH(D),Pt=new W5(Q),le=new DH(Q,Pt),$t=new FH(Q,Pt,Be,le),Xt=new XH(Q,$t,Pt,Be),me=new kH(Q,pe,K),ae=new OH(he),Re=new rF(D,k,xt,ee,pe,le,ae),de=new AF(D,he),_e=new lF,an=new pF(ee),Ce=new CH(D,k,xt,se,Xt,b,d),Ae=new vF(D,Xt,pe),ct=new wF(Q,Be,pe,se),ye=new NH(Q,ee,Be),lt=new GH(Q,ee,Be),Be.programs=Re.programs,D.capabilities=pe,D.extensions=ee,D.properties=he,D.renderLists=_e,D.shadowMap=Ae,D.state=se,D.info=Be}St();const Rt=new EF(D,Q);this.xr=Rt,this.getContext=function(){return Q},this.getContextAttributes=function(){return Q.getContextAttributes()},this.forceContextLoss=function(){const P=ee.get("WEBGL_lose_context");P&&P.loseContext()},this.forceContextRestore=function(){const P=ee.get("WEBGL_lose_context");P&&P.restoreContext()},this.getPixelRatio=function(){return ot},this.setPixelRatio=function(P){P!==void 0&&(ot=P,this.setSize(tt,pt,!1))},this.getSize=function(P){return P.set(tt,pt)},this.setSize=function(P,$,at=!0){if(Rt.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}tt=P,pt=$,e.width=Math.floor(P*ot),e.height=Math.floor($*ot),at===!0&&(e.style.width=P+"px",e.style.height=$+"px"),this.setViewport(0,0,P,$)},this.getDrawingBufferSize=function(P){return P.set(tt*ot,pt*ot).floor()},this.setDrawingBufferSize=function(P,$,at){tt=P,pt=$,ot=at,e.width=Math.floor(P*at),e.height=Math.floor($*at),this.setViewport(0,0,P,$)},this.getCurrentViewport=function(P){return P.copy(V)},this.getViewport=function(P){return P.copy(ht)},this.setViewport=function(P,$,at,nt){P.isVector4?ht.set(P.x,P.y,P.z,P.w):ht.set(P,$,at,nt),se.viewport(V.copy(ht).multiplyScalar(ot).round())},this.getScissor=function(P){return P.copy(Tt)},this.setScissor=function(P,$,at,nt){P.isVector4?Tt.set(P.x,P.y,P.z,P.w):Tt.set(P,$,at,nt),se.scissor(et.copy(Tt).multiplyScalar(ot).round())},this.getScissorTest=function(){return Ft},this.setScissorTest=function(P){se.setScissorTest(Ft=P)},this.setOpaqueSort=function(P){Dt=P},this.setTransparentSort=function(P){Z=P},this.getClearColor=function(P){return P.copy(Ce.getClearColor())},this.setClearColor=function(){Ce.setClearColor(...arguments)},this.getClearAlpha=function(){return Ce.getClearAlpha()},this.setClearAlpha=function(){Ce.setClearAlpha(...arguments)},this.clear=function(P=!0,$=!0,at=!0){let nt=0;if(P){let dt=!1;if(G!==null){const bt=G.texture.format;dt=bt===ux||bt===cx||bt===tg}if(dt){const bt=G.texture.type,It=bt===jr||bt===Rl||bt===Zd||bt===oh||bt===ox||bt===lx,Wt=Ce.getClearColor(),Kt=Ce.getClearAlpha(),xe=Wt.r,be=Wt.g,Se=Wt.b;It?(E[0]=xe,E[1]=be,E[2]=Se,E[3]=Kt,Q.clearBufferuiv(Q.COLOR,0,E)):(R[0]=xe,R[1]=be,R[2]=Se,R[3]=Kt,Q.clearBufferiv(Q.COLOR,0,R))}else nt|=Q.COLOR_BUFFER_BIT}$&&(nt|=Q.DEPTH_BUFFER_BIT),at&&(nt|=Q.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),Q.clear(nt)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",Gt,!1),e.removeEventListener("webglcontextrestored",ge,!1),e.removeEventListener("webglcontextcreationerror",ve,!1),Ce.dispose(),_e.dispose(),an.dispose(),he.dispose(),k.dispose(),xt.dispose(),Xt.dispose(),le.dispose(),ct.dispose(),Re.dispose(),Rt.dispose(),Rt.removeEventListener("sessionstart",Nl),Rt.removeEventListener("sessionend",Ps),ca.stop()};function Gt(P){P.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),z=!0}function ge(){console.log("THREE.WebGLRenderer: Context Restored."),z=!1;const P=Be.autoReset,$=Ae.enabled,at=Ae.autoUpdate,nt=Ae.needsUpdate,dt=Ae.type;St(),Be.autoReset=P,Ae.enabled=$,Ae.autoUpdate=at,Ae.needsUpdate=nt,Ae.type=dt}function ve(P){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",P.statusMessage)}function Ie(P){const $=P.target;$.removeEventListener("dispose",Ie),mn($)}function mn(P){Bn(P),he.remove(P)}function Bn(P){const $=he.get(P).programs;$!==void 0&&($.forEach(function(at){Re.releaseProgram(at)}),P.isShaderMaterial&&Re.releaseShaderCache(P))}this.renderBufferDirect=function(P,$,at,nt,dt,bt){$===null&&($=ke);const It=dt.isMesh&&dt.matrixWorld.determinant()<0,Wt=ft(P,$,at,nt,dt);se.setMaterial(nt,It);let Kt=at.index,xe=1;if(nt.wireframe===!0){if(Kt=$t.getWireframeAttribute(at),Kt===void 0)return;xe=2}const be=at.drawRange,Se=at.attributes.position;let Ye=be.start*xe,Le=(be.start+be.count)*xe;bt!==null&&(Ye=Math.max(Ye,bt.start*xe),Le=Math.min(Le,(bt.start+bt.count)*xe)),Kt!==null?(Ye=Math.max(Ye,0),Le=Math.min(Le,Kt.count)):Se!=null&&(Ye=Math.max(Ye,0),Le=Math.min(Le,Se.count));const Mn=Le-Ye;if(Mn<0||Mn===1/0)return;le.setup(dt,nt,Wt,at,Kt);let Pe,Ne=ye;if(Kt!==null&&(Pe=Pt.get(Kt),Ne=lt,Ne.setIndex(Pe)),dt.isMesh)nt.wireframe===!0?(se.setLineWidth(nt.wireframeLinewidth*Yt()),Ne.setMode(Q.LINES)):Ne.setMode(Q.TRIANGLES);else if(dt.isLine){let Ue=nt.linewidth;Ue===void 0&&(Ue=1),se.setLineWidth(Ue*Yt()),dt.isLineSegments?Ne.setMode(Q.LINES):dt.isLineLoop?Ne.setMode(Q.LINE_LOOP):Ne.setMode(Q.LINE_STRIP)}else dt.isPoints?Ne.setMode(Q.POINTS):dt.isSprite&&Ne.setMode(Q.TRIANGLES);if(dt.isBatchedMesh)if(dt._multiDrawInstances!==null)Ff("THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),Ne.renderMultiDrawInstances(dt._multiDrawStarts,dt._multiDrawCounts,dt._multiDrawCount,dt._multiDrawInstances);else if(ee.get("WEBGL_multi_draw"))Ne.renderMultiDraw(dt._multiDrawStarts,dt._multiDrawCounts,dt._multiDrawCount);else{const Ue=dt._multiDrawStarts,ri=dt._multiDrawCounts,We=dt._multiDrawCount,sn=Kt?Pt.get(Kt).bytesPerElement:1,Vn=he.get(nt).currentProgram.getUniforms();for(let fn=0;fn<We;fn++)Vn.setValue(Q,"_gl_DrawID",fn),Ne.render(Ue[fn]/sn,ri[fn])}else if(dt.isInstancedMesh)Ne.renderInstances(Ye,Mn,dt.count);else if(at.isInstancedBufferGeometry){const Ue=at._maxInstanceCount!==void 0?at._maxInstanceCount:1/0,ri=Math.min(at.instanceCount,Ue);Ne.renderInstances(Ye,Mn,ri)}else Ne.render(Ye,Mn)};function rn(P,$,at){P.transparent===!0&&P.side===Eo&&P.forceSinglePass===!1?(P.side=Er,P.needsUpdate=!0,un(P,$,at),P.side=bc,P.needsUpdate=!0,un(P,$,at),P.side=Eo):un(P,$,at)}this.compile=function(P,$,at=null){at===null&&(at=P),M=an.get(at),M.init($),U.push(M),at.traverseVisible(function(dt){dt.isLight&&dt.layers.test($.layers)&&(M.pushLight(dt),dt.castShadow&&M.pushShadow(dt))}),P!==at&&P.traverseVisible(function(dt){dt.isLight&&dt.layers.test($.layers)&&(M.pushLight(dt),dt.castShadow&&M.pushShadow(dt))}),M.setupLights();const nt=new Set;return P.traverse(function(dt){if(!(dt.isMesh||dt.isPoints||dt.isLine||dt.isSprite))return;const bt=dt.material;if(bt)if(Array.isArray(bt))for(let It=0;It<bt.length;It++){const Wt=bt[It];rn(Wt,at,dt),nt.add(Wt)}else rn(bt,at,dt),nt.add(bt)}),M=U.pop(),nt},this.compileAsync=function(P,$,at=null){const nt=this.compile(P,$,at);return new Promise(dt=>{function bt(){if(nt.forEach(function(It){he.get(It).currentProgram.isReady()&&nt.delete(It)}),nt.size===0){dt(P);return}setTimeout(bt,10)}ee.get("KHR_parallel_shader_compile")!==null?bt():setTimeout(bt,10)})};let gi=null;function bi(P){gi&&gi(P)}function Nl(){ca.stop()}function Ps(){ca.start()}const ca=new GC;ca.setAnimationLoop(bi),typeof self<"u"&&ca.setContext(self),this.setAnimationLoop=function(P){gi=P,Rt.setAnimationLoop(P),P===null?ca.stop():ca.start()},Rt.addEventListener("sessionstart",Nl),Rt.addEventListener("sessionend",Ps),this.render=function(P,$){if($!==void 0&&$.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(z===!0)return;if(P.matrixWorldAutoUpdate===!0&&P.updateMatrixWorld(),$.parent===null&&$.matrixWorldAutoUpdate===!0&&$.updateMatrixWorld(),Rt.enabled===!0&&Rt.isPresenting===!0&&(Rt.cameraAutoUpdate===!0&&Rt.updateCamera($),$=Rt.getCamera()),P.isScene===!0&&P.onBeforeRender(D,P,$,G),M=an.get(P,U.length),M.init($),U.push(M),Qt.multiplyMatrices($.projectionMatrix,$.matrixWorldInverse),rt.setFromProjectionMatrix(Qt),Et=this.localClippingEnabled,Lt=ae.init(this.clippingPlanes,Et),w=_e.get(P,C.length),w.init(),C.push(w),Rt.enabled===!0&&Rt.isPresenting===!0){const bt=D.xr.getDepthSensingMesh();bt!==null&&Ca(bt,$,-1/0,D.sortObjects)}Ca(P,$,0,D.sortObjects),w.finish(),D.sortObjects===!0&&w.sort(Dt,Z),Jt=Rt.enabled===!1||Rt.isPresenting===!1||Rt.hasDepthSensing()===!1,Jt&&Ce.addToRenderList(w,P),this.info.render.frame++,Lt===!0&&ae.beginShadows();const at=M.state.shadowsArray;Ae.render(at,P,$),Lt===!0&&ae.endShadows(),this.info.autoReset===!0&&this.info.reset();const nt=w.opaque,dt=w.transmissive;if(M.setupLights(),$.isArrayCamera){const bt=$.cameras;if(dt.length>0)for(let It=0,Wt=bt.length;It<Wt;It++){const Kt=bt[It];ua(nt,dt,P,Kt)}Jt&&Ce.render(P);for(let It=0,Wt=bt.length;It<Wt;It++){const Kt=bt[It];Rr(w,P,Kt,Kt.viewport)}}else dt.length>0&&ua(nt,dt,P,$),Jt&&Ce.render(P),Rr(w,P,$);G!==null&&F===0&&(K.updateMultisampleRenderTarget(G),K.updateRenderTargetMipmap(G)),P.isScene===!0&&P.onAfterRender(D,P,$),le.resetDefaultState(),L=-1,O=null,U.pop(),U.length>0?(M=U[U.length-1],Lt===!0&&ae.setGlobalState(D.clippingPlanes,M.state.camera)):M=null,C.pop(),C.length>0?w=C[C.length-1]:w=null};function Ca(P,$,at,nt){if(P.visible===!1)return;if(P.layers.test($.layers)){if(P.isGroup)at=P.renderOrder;else if(P.isLOD)P.autoUpdate===!0&&P.update($);else if(P.isLight)M.pushLight(P),P.castShadow&&M.pushShadow(P);else if(P.isSprite){if(!P.frustumCulled||rt.intersectsSprite(P)){nt&&re.setFromMatrixPosition(P.matrixWorld).applyMatrix4(Qt);const It=Xt.update(P),Wt=P.material;Wt.visible&&w.push(P,It,Wt,at,re.z,null)}}else if((P.isMesh||P.isLine||P.isPoints)&&(!P.frustumCulled||rt.intersectsObject(P))){const It=Xt.update(P),Wt=P.material;if(nt&&(P.boundingSphere!==void 0?(P.boundingSphere===null&&P.computeBoundingSphere(),re.copy(P.boundingSphere.center)):(It.boundingSphere===null&&It.computeBoundingSphere(),re.copy(It.boundingSphere.center)),re.applyMatrix4(P.matrixWorld).applyMatrix4(Qt)),Array.isArray(Wt)){const Kt=It.groups;for(let xe=0,be=Kt.length;xe<be;xe++){const Se=Kt[xe],Ye=Wt[Se.materialIndex];Ye&&Ye.visible&&w.push(P,It,Ye,at,re.z,Se)}}else Wt.visible&&w.push(P,It,Wt,at,re.z,null)}}const bt=P.children;for(let It=0,Wt=bt.length;It<Wt;It++)Ca(bt[It],$,at,nt)}function Rr(P,$,at,nt){const dt=P.opaque,bt=P.transmissive,It=P.transparent;M.setupLightsView(at),Lt===!0&&ae.setGlobalState(D.clippingPlanes,at),nt&&se.viewport(V.copy(nt)),dt.length>0&&Fe(dt,$,at),bt.length>0&&Fe(bt,$,at),It.length>0&&Fe(It,$,at),se.buffers.depth.setTest(!0),se.buffers.depth.setMask(!0),se.buffers.color.setMask(!0),se.setPolygonOffset(!1)}function ua(P,$,at,nt){if((at.isScene===!0?at.overrideMaterial:null)!==null)return;M.state.transmissionRenderTarget[nt.id]===void 0&&(M.state.transmissionRenderTarget[nt.id]=new Is(1,1,{generateMipmaps:!0,type:ee.has("EXT_color_buffer_half_float")||ee.has("EXT_color_buffer_float")?Ra:jr,minFilter:xl,samples:4,stencilBuffer:o,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:On.workingColorSpace}));const bt=M.state.transmissionRenderTarget[nt.id],It=nt.viewport||V;bt.setSize(It.z*D.transmissionResolutionScale,It.w*D.transmissionResolutionScale);const Wt=D.getRenderTarget();D.setRenderTarget(bt),D.getClearColor(j),ut=D.getClearAlpha(),ut<1&&D.setClearColor(16777215,.5),D.clear(),Jt&&Ce.render(at);const Kt=D.toneMapping;D.toneMapping=Tl;const xe=nt.viewport;if(nt.viewport!==void 0&&(nt.viewport=void 0),M.setupLightsView(nt),Lt===!0&&ae.setGlobalState(D.clippingPlanes,nt),Fe(P,at,nt),K.updateMultisampleRenderTarget(bt),K.updateRenderTargetMipmap(bt),ee.has("WEBGL_multisampled_render_to_texture")===!1){let be=!1;for(let Se=0,Ye=$.length;Se<Ye;Se++){const Le=$[Se],Mn=Le.object,Pe=Le.geometry,Ne=Le.material,Ue=Le.group;if(Ne.side===Eo&&Mn.layers.test(nt.layers)){const ri=Ne.side;Ne.side=Er,Ne.needsUpdate=!0,fi(Mn,at,nt,Pe,Ne,Ue),Ne.side=ri,Ne.needsUpdate=!0,be=!0}}be===!0&&(K.updateMultisampleRenderTarget(bt),K.updateRenderTargetMipmap(bt))}D.setRenderTarget(Wt),D.setClearColor(j,ut),xe!==void 0&&(nt.viewport=xe),D.toneMapping=Kt}function Fe(P,$,at){const nt=$.isScene===!0?$.overrideMaterial:null;for(let dt=0,bt=P.length;dt<bt;dt++){const It=P[dt],Wt=It.object,Kt=It.geometry,xe=nt===null?It.material:nt,be=It.group;Wt.layers.test(at.layers)&&fi(Wt,$,at,Kt,xe,be)}}function fi(P,$,at,nt,dt,bt){P.onBeforeRender(D,$,at,nt,dt,bt),P.modelViewMatrix.multiplyMatrices(at.matrixWorldInverse,P.matrixWorld),P.normalMatrix.getNormalMatrix(P.modelViewMatrix),dt.onBeforeRender(D,$,at,nt,P,bt),dt.transparent===!0&&dt.side===Eo&&dt.forceSinglePass===!1?(dt.side=Er,dt.needsUpdate=!0,D.renderBufferDirect(at,$,nt,dt,P,bt),dt.side=bc,dt.needsUpdate=!0,D.renderBufferDirect(at,$,nt,dt,P,bt),dt.side=Eo):D.renderBufferDirect(at,$,nt,dt,P,bt),P.onAfterRender(D,$,at,nt,dt,bt)}function un(P,$,at){$.isScene!==!0&&($=ke);const nt=he.get(P),dt=M.state.lights,bt=M.state.shadowsArray,It=dt.state.version,Wt=Re.getParameters(P,dt.state,bt,$,at),Kt=Re.getProgramCacheKey(Wt);let xe=nt.programs;nt.environment=P.isMeshStandardMaterial?$.environment:null,nt.fog=$.fog,nt.envMap=(P.isMeshStandardMaterial?xt:k).get(P.envMap||nt.environment),nt.envMapRotation=nt.environment!==null&&P.envMap===null?$.environmentRotation:P.envMapRotation,xe===void 0&&(P.addEventListener("dispose",Ie),xe=new Map,nt.programs=xe);let be=xe.get(Kt);if(be!==void 0){if(nt.currentProgram===be&&nt.lightsStateVersion===It)return q(P,Wt),be}else Wt.uniforms=Re.getUniforms(P),P.onBeforeCompile(Wt,D),be=Re.acquireProgram(Wt,Kt),xe.set(Kt,be),nt.uniforms=Wt.uniforms;const Se=nt.uniforms;return(!P.isShaderMaterial&&!P.isRawShaderMaterial||P.clipping===!0)&&(Se.clippingPlanes=ae.uniform),q(P,Wt),nt.needsLights=Ht(P),nt.lightsStateVersion=It,nt.needsLights&&(Se.ambientLightColor.value=dt.state.ambient,Se.lightProbe.value=dt.state.probe,Se.directionalLights.value=dt.state.directional,Se.directionalLightShadows.value=dt.state.directionalShadow,Se.spotLights.value=dt.state.spot,Se.spotLightShadows.value=dt.state.spotShadow,Se.rectAreaLights.value=dt.state.rectArea,Se.ltc_1.value=dt.state.rectAreaLTC1,Se.ltc_2.value=dt.state.rectAreaLTC2,Se.pointLights.value=dt.state.point,Se.pointLightShadows.value=dt.state.pointShadow,Se.hemisphereLights.value=dt.state.hemi,Se.directionalShadowMap.value=dt.state.directionalShadowMap,Se.directionalShadowMatrix.value=dt.state.directionalShadowMatrix,Se.spotShadowMap.value=dt.state.spotShadowMap,Se.spotLightMatrix.value=dt.state.spotLightMatrix,Se.spotLightMap.value=dt.state.spotLightMap,Se.pointShadowMap.value=dt.state.pointShadowMap,Se.pointShadowMatrix.value=dt.state.pointShadowMatrix),nt.currentProgram=be,nt.uniformsList=null,be}function H(P){if(P.uniformsList===null){const $=P.currentProgram.getUniforms();P.uniformsList=J_.seqWithValue($.seq,P.uniforms)}return P.uniformsList}function q(P,$){const at=he.get(P);at.outputColorSpace=$.outputColorSpace,at.batching=$.batching,at.batchingColor=$.batchingColor,at.instancing=$.instancing,at.instancingColor=$.instancingColor,at.instancingMorph=$.instancingMorph,at.skinning=$.skinning,at.morphTargets=$.morphTargets,at.morphNormals=$.morphNormals,at.morphColors=$.morphColors,at.morphTargetsCount=$.morphTargetsCount,at.numClippingPlanes=$.numClippingPlanes,at.numIntersection=$.numClipIntersection,at.vertexAlphas=$.vertexAlphas,at.vertexTangents=$.vertexTangents,at.toneMapping=$.toneMapping}function ft(P,$,at,nt,dt){$.isScene!==!0&&($=ke),K.resetTextureUnits();const bt=$.fog,It=nt.isMeshStandardMaterial?$.environment:null,Wt=G===null?D.outputColorSpace:G.isXRRenderTarget===!0?G.texture.colorSpace:Ro,Kt=(nt.isMeshStandardMaterial?xt:k).get(nt.envMap||It),xe=nt.vertexColors===!0&&!!at.attributes.color&&at.attributes.color.itemSize===4,be=!!at.attributes.tangent&&(!!nt.normalMap||nt.anisotropy>0),Se=!!at.morphAttributes.position,Ye=!!at.morphAttributes.normal,Le=!!at.morphAttributes.color;let Mn=Tl;nt.toneMapped&&(G===null||G.isXRRenderTarget===!0)&&(Mn=D.toneMapping);const Pe=at.morphAttributes.position||at.morphAttributes.normal||at.morphAttributes.color,Ne=Pe!==void 0?Pe.length:0,Ue=he.get(nt),ri=M.state.lights;if(Lt===!0&&(Et===!0||P!==O)){const Pn=P===O&&nt.id===L;ae.setState(nt,P,Pn)}let We=!1;nt.version===Ue.__version?(Ue.needsLights&&Ue.lightsStateVersion!==ri.state.version||Ue.outputColorSpace!==Wt||dt.isBatchedMesh&&Ue.batching===!1||!dt.isBatchedMesh&&Ue.batching===!0||dt.isBatchedMesh&&Ue.batchingColor===!0&&dt.colorTexture===null||dt.isBatchedMesh&&Ue.batchingColor===!1&&dt.colorTexture!==null||dt.isInstancedMesh&&Ue.instancing===!1||!dt.isInstancedMesh&&Ue.instancing===!0||dt.isSkinnedMesh&&Ue.skinning===!1||!dt.isSkinnedMesh&&Ue.skinning===!0||dt.isInstancedMesh&&Ue.instancingColor===!0&&dt.instanceColor===null||dt.isInstancedMesh&&Ue.instancingColor===!1&&dt.instanceColor!==null||dt.isInstancedMesh&&Ue.instancingMorph===!0&&dt.morphTexture===null||dt.isInstancedMesh&&Ue.instancingMorph===!1&&dt.morphTexture!==null||Ue.envMap!==Kt||nt.fog===!0&&Ue.fog!==bt||Ue.numClippingPlanes!==void 0&&(Ue.numClippingPlanes!==ae.numPlanes||Ue.numIntersection!==ae.numIntersection)||Ue.vertexAlphas!==xe||Ue.vertexTangents!==be||Ue.morphTargets!==Se||Ue.morphNormals!==Ye||Ue.morphColors!==Le||Ue.toneMapping!==Mn||Ue.morphTargetsCount!==Ne)&&(We=!0):(We=!0,Ue.__version=nt.version);let sn=Ue.currentProgram;We===!0&&(sn=un(nt,$,dt));let Vn=!1,fn=!1,je=!1;const on=sn.getUniforms(),vi=Ue.uniforms;if(se.useProgram(sn.program)&&(Vn=!0,fn=!0,je=!0),nt.id!==L&&(L=nt.id,fn=!0),Vn||O!==P){se.buffers.depth.getReversed()?(Nt.copy(P.projectionMatrix),x4(Nt),S4(Nt),on.setValue(Q,"projectionMatrix",Nt)):on.setValue(Q,"projectionMatrix",P.projectionMatrix),on.setValue(Q,"viewMatrix",P.matrixWorldInverse);const na=on.map.cameraPosition;na!==void 0&&na.setValue(Q,we.setFromMatrixPosition(P.matrixWorld)),pe.logarithmicDepthBuffer&&on.setValue(Q,"logDepthBufFC",2/(Math.log(P.far+1)/Math.LN2)),(nt.isMeshPhongMaterial||nt.isMeshToonMaterial||nt.isMeshLambertMaterial||nt.isMeshBasicMaterial||nt.isMeshStandardMaterial||nt.isShaderMaterial)&&on.setValue(Q,"isOrthographic",P.isOrthographicCamera===!0),O!==P&&(O=P,fn=!0,je=!0)}if(dt.isSkinnedMesh){on.setOptional(Q,dt,"bindMatrix"),on.setOptional(Q,dt,"bindMatrixInverse");const Pn=dt.skeleton;Pn&&(Pn.boneTexture===null&&Pn.computeBoneTexture(),on.setValue(Q,"boneTexture",Pn.boneTexture,K))}dt.isBatchedMesh&&(on.setOptional(Q,dt,"batchingTexture"),on.setValue(Q,"batchingTexture",dt._matricesTexture,K),on.setOptional(Q,dt,"batchingIdTexture"),on.setValue(Q,"batchingIdTexture",dt._indirectTexture,K),on.setOptional(Q,dt,"batchingColorTexture"),dt._colorsTexture!==null&&on.setValue(Q,"batchingColorTexture",dt._colorsTexture,K));const In=at.morphAttributes;if((In.position!==void 0||In.normal!==void 0||In.color!==void 0)&&me.update(dt,at,sn),(fn||Ue.receiveShadow!==dt.receiveShadow)&&(Ue.receiveShadow=dt.receiveShadow,on.setValue(Q,"receiveShadow",dt.receiveShadow)),nt.isMeshGouraudMaterial&&nt.envMap!==null&&(vi.envMap.value=Kt,vi.flipEnvMap.value=Kt.isCubeTexture&&Kt.isRenderTargetTexture===!1?-1:1),nt.isMeshStandardMaterial&&nt.envMap===null&&$.environment!==null&&(vi.envMapIntensity.value=$.environmentIntensity),fn&&(on.setValue(Q,"toneMappingExposure",D.toneMappingExposure),Ue.needsLights&&Ct(vi,je),bt&&nt.fog===!0&&de.refreshFogUniforms(vi,bt),de.refreshMaterialUniforms(vi,nt,ot,pt,M.state.transmissionRenderTarget[P.id]),J_.upload(Q,H(Ue),vi,K)),nt.isShaderMaterial&&nt.uniformsNeedUpdate===!0&&(J_.upload(Q,H(Ue),vi,K),nt.uniformsNeedUpdate=!1),nt.isSpriteMaterial&&on.setValue(Q,"center",dt.center),on.setValue(Q,"modelViewMatrix",dt.modelViewMatrix),on.setValue(Q,"normalMatrix",dt.normalMatrix),on.setValue(Q,"modelMatrix",dt.matrixWorld),nt.isShaderMaterial||nt.isRawShaderMaterial){const Pn=nt.uniformsGroups;for(let na=0,Qr=Pn.length;na<Qr;na++){const Da=Pn[na];ct.update(Da,sn),ct.bind(Da,sn)}}return sn}function Ct(P,$){P.ambientLightColor.needsUpdate=$,P.lightProbe.needsUpdate=$,P.directionalLights.needsUpdate=$,P.directionalLightShadows.needsUpdate=$,P.pointLights.needsUpdate=$,P.pointLightShadows.needsUpdate=$,P.spotLights.needsUpdate=$,P.spotLightShadows.needsUpdate=$,P.rectAreaLights.needsUpdate=$,P.hemisphereLights.needsUpdate=$}function Ht(P){return P.isMeshLambertMaterial||P.isMeshToonMaterial||P.isMeshPhongMaterial||P.isMeshStandardMaterial||P.isShadowMaterial||P.isShaderMaterial&&P.lights===!0}this.getActiveCubeFace=function(){return B},this.getActiveMipmapLevel=function(){return F},this.getRenderTarget=function(){return G},this.setRenderTargetTextures=function(P,$,at){he.get(P.texture).__webglTexture=$,he.get(P.depthTexture).__webglTexture=at;const nt=he.get(P);nt.__hasExternalTextures=!0,nt.__autoAllocateDepthBuffer=at===void 0,nt.__autoAllocateDepthBuffer||ee.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),nt.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(P,$){const at=he.get(P);at.__webglFramebuffer=$,at.__useDefaultFramebuffer=$===void 0};const Bt=Q.createFramebuffer();this.setRenderTarget=function(P,$=0,at=0){G=P,B=$,F=at;let nt=!0,dt=null,bt=!1,It=!1;if(P){const Kt=he.get(P);if(Kt.__useDefaultFramebuffer!==void 0)se.bindFramebuffer(Q.FRAMEBUFFER,null),nt=!1;else if(Kt.__webglFramebuffer===void 0)K.setupRenderTarget(P);else if(Kt.__hasExternalTextures)K.rebindTextures(P,he.get(P.texture).__webglTexture,he.get(P.depthTexture).__webglTexture);else if(P.depthBuffer){const Se=P.depthTexture;if(Kt.__boundDepthTexture!==Se){if(Se!==null&&he.has(Se)&&(P.width!==Se.image.width||P.height!==Se.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");K.setupDepthRenderbuffer(P)}}const xe=P.texture;(xe.isData3DTexture||xe.isDataArrayTexture||xe.isCompressedArrayTexture)&&(It=!0);const be=he.get(P).__webglFramebuffer;P.isWebGLCubeRenderTarget?(Array.isArray(be[$])?dt=be[$][at]:dt=be[$],bt=!0):P.samples>0&&K.useMultisampledRTT(P)===!1?dt=he.get(P).__webglMultisampledFramebuffer:Array.isArray(be)?dt=be[at]:dt=be,V.copy(P.viewport),et.copy(P.scissor),W=P.scissorTest}else V.copy(ht).multiplyScalar(ot).floor(),et.copy(Tt).multiplyScalar(ot).floor(),W=Ft;if(at!==0&&(dt=Bt),se.bindFramebuffer(Q.FRAMEBUFFER,dt)&&nt&&se.drawBuffers(P,dt),se.viewport(V),se.scissor(et),se.setScissorTest(W),bt){const Kt=he.get(P.texture);Q.framebufferTexture2D(Q.FRAMEBUFFER,Q.COLOR_ATTACHMENT0,Q.TEXTURE_CUBE_MAP_POSITIVE_X+$,Kt.__webglTexture,at)}else if(It){const Kt=he.get(P.texture),xe=$;Q.framebufferTextureLayer(Q.FRAMEBUFFER,Q.COLOR_ATTACHMENT0,Kt.__webglTexture,at,xe)}else if(P!==null&&at!==0){const Kt=he.get(P.texture);Q.framebufferTexture2D(Q.FRAMEBUFFER,Q.COLOR_ATTACHMENT0,Q.TEXTURE_2D,Kt.__webglTexture,at)}L=-1},this.readRenderTargetPixels=function(P,$,at,nt,dt,bt,It){if(!(P&&P.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Wt=he.get(P).__webglFramebuffer;if(P.isWebGLCubeRenderTarget&&It!==void 0&&(Wt=Wt[It]),Wt){se.bindFramebuffer(Q.FRAMEBUFFER,Wt);try{const Kt=P.texture,xe=Kt.format,be=Kt.type;if(!pe.textureFormatReadable(xe)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!pe.textureTypeReadable(be)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}$>=0&&$<=P.width-nt&&at>=0&&at<=P.height-dt&&Q.readPixels($,at,nt,dt,wt.convert(xe),wt.convert(be),bt)}finally{const Kt=G!==null?he.get(G).__webglFramebuffer:null;se.bindFramebuffer(Q.FRAMEBUFFER,Kt)}}},this.readRenderTargetPixelsAsync=async function(P,$,at,nt,dt,bt,It){if(!(P&&P.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Wt=he.get(P).__webglFramebuffer;if(P.isWebGLCubeRenderTarget&&It!==void 0&&(Wt=Wt[It]),Wt){const Kt=P.texture,xe=Kt.format,be=Kt.type;if(!pe.textureFormatReadable(xe))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!pe.textureTypeReadable(be))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if($>=0&&$<=P.width-nt&&at>=0&&at<=P.height-dt){se.bindFramebuffer(Q.FRAMEBUFFER,Wt);const Se=Q.createBuffer();Q.bindBuffer(Q.PIXEL_PACK_BUFFER,Se),Q.bufferData(Q.PIXEL_PACK_BUFFER,bt.byteLength,Q.STREAM_READ),Q.readPixels($,at,nt,dt,wt.convert(xe),wt.convert(be),0);const Ye=G!==null?he.get(G).__webglFramebuffer:null;se.bindFramebuffer(Q.FRAMEBUFFER,Ye);const Le=Q.fenceSync(Q.SYNC_GPU_COMMANDS_COMPLETE,0);return Q.flush(),await y4(Q,Le,4),Q.bindBuffer(Q.PIXEL_PACK_BUFFER,Se),Q.getBufferSubData(Q.PIXEL_PACK_BUFFER,0,bt),Q.deleteBuffer(Se),Q.deleteSync(Le),bt}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}},this.copyFramebufferToTexture=function(P,$=null,at=0){P.isTexture!==!0&&(Ff("WebGLRenderer: copyFramebufferToTexture function signature has changed."),$=arguments[0]||null,P=arguments[1]);const nt=Math.pow(2,-at),dt=Math.floor(P.image.width*nt),bt=Math.floor(P.image.height*nt),It=$!==null?$.x:0,Wt=$!==null?$.y:0;K.setTexture2D(P,0),Q.copyTexSubImage2D(Q.TEXTURE_2D,at,0,0,It,Wt,dt,bt),se.unbindTexture()};const ue=Q.createFramebuffer(),ne=Q.createFramebuffer();this.copyTextureToTexture=function(P,$,at=null,nt=null,dt=0,bt=null){P.isTexture!==!0&&(Ff("WebGLRenderer: copyTextureToTexture function signature has changed."),nt=arguments[0]||null,P=arguments[1],$=arguments[2],bt=arguments[3]||0,at=null),bt===null&&(dt!==0?(Ff("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),bt=dt,dt=0):bt=0);let It,Wt,Kt,xe,be,Se,Ye,Le,Mn;const Pe=P.isCompressedTexture?P.mipmaps[bt]:P.image;if(at!==null)It=at.max.x-at.min.x,Wt=at.max.y-at.min.y,Kt=at.isBox3?at.max.z-at.min.z:1,xe=at.min.x,be=at.min.y,Se=at.isBox3?at.min.z:0;else{const In=Math.pow(2,-dt);It=Math.floor(Pe.width*In),Wt=Math.floor(Pe.height*In),P.isDataArrayTexture?Kt=Pe.depth:P.isData3DTexture?Kt=Math.floor(Pe.depth*In):Kt=1,xe=0,be=0,Se=0}nt!==null?(Ye=nt.x,Le=nt.y,Mn=nt.z):(Ye=0,Le=0,Mn=0);const Ne=wt.convert($.format),Ue=wt.convert($.type);let ri;$.isData3DTexture?(K.setTexture3D($,0),ri=Q.TEXTURE_3D):$.isDataArrayTexture||$.isCompressedArrayTexture?(K.setTexture2DArray($,0),ri=Q.TEXTURE_2D_ARRAY):(K.setTexture2D($,0),ri=Q.TEXTURE_2D),Q.pixelStorei(Q.UNPACK_FLIP_Y_WEBGL,$.flipY),Q.pixelStorei(Q.UNPACK_PREMULTIPLY_ALPHA_WEBGL,$.premultiplyAlpha),Q.pixelStorei(Q.UNPACK_ALIGNMENT,$.unpackAlignment);const We=Q.getParameter(Q.UNPACK_ROW_LENGTH),sn=Q.getParameter(Q.UNPACK_IMAGE_HEIGHT),Vn=Q.getParameter(Q.UNPACK_SKIP_PIXELS),fn=Q.getParameter(Q.UNPACK_SKIP_ROWS),je=Q.getParameter(Q.UNPACK_SKIP_IMAGES);Q.pixelStorei(Q.UNPACK_ROW_LENGTH,Pe.width),Q.pixelStorei(Q.UNPACK_IMAGE_HEIGHT,Pe.height),Q.pixelStorei(Q.UNPACK_SKIP_PIXELS,xe),Q.pixelStorei(Q.UNPACK_SKIP_ROWS,be),Q.pixelStorei(Q.UNPACK_SKIP_IMAGES,Se);const on=P.isDataArrayTexture||P.isData3DTexture,vi=$.isDataArrayTexture||$.isData3DTexture;if(P.isDepthTexture){const In=he.get(P),Pn=he.get($),na=he.get(In.__renderTarget),Qr=he.get(Pn.__renderTarget);se.bindFramebuffer(Q.READ_FRAMEBUFFER,na.__webglFramebuffer),se.bindFramebuffer(Q.DRAW_FRAMEBUFFER,Qr.__webglFramebuffer);for(let Da=0;Da<Kt;Da++)on&&(Q.framebufferTextureLayer(Q.READ_FRAMEBUFFER,Q.COLOR_ATTACHMENT0,he.get(P).__webglTexture,dt,Se+Da),Q.framebufferTextureLayer(Q.DRAW_FRAMEBUFFER,Q.COLOR_ATTACHMENT0,he.get($).__webglTexture,bt,Mn+Da)),Q.blitFramebuffer(xe,be,It,Wt,Ye,Le,It,Wt,Q.DEPTH_BUFFER_BIT,Q.NEAREST);se.bindFramebuffer(Q.READ_FRAMEBUFFER,null),se.bindFramebuffer(Q.DRAW_FRAMEBUFFER,null)}else if(dt!==0||P.isRenderTargetTexture||he.has(P)){const In=he.get(P),Pn=he.get($);se.bindFramebuffer(Q.READ_FRAMEBUFFER,ue),se.bindFramebuffer(Q.DRAW_FRAMEBUFFER,ne);for(let na=0;na<Kt;na++)on?Q.framebufferTextureLayer(Q.READ_FRAMEBUFFER,Q.COLOR_ATTACHMENT0,In.__webglTexture,dt,Se+na):Q.framebufferTexture2D(Q.READ_FRAMEBUFFER,Q.COLOR_ATTACHMENT0,Q.TEXTURE_2D,In.__webglTexture,dt),vi?Q.framebufferTextureLayer(Q.DRAW_FRAMEBUFFER,Q.COLOR_ATTACHMENT0,Pn.__webglTexture,bt,Mn+na):Q.framebufferTexture2D(Q.DRAW_FRAMEBUFFER,Q.COLOR_ATTACHMENT0,Q.TEXTURE_2D,Pn.__webglTexture,bt),dt!==0?Q.blitFramebuffer(xe,be,It,Wt,Ye,Le,It,Wt,Q.COLOR_BUFFER_BIT,Q.NEAREST):vi?Q.copyTexSubImage3D(ri,bt,Ye,Le,Mn+na,xe,be,It,Wt):Q.copyTexSubImage2D(ri,bt,Ye,Le,xe,be,It,Wt);se.bindFramebuffer(Q.READ_FRAMEBUFFER,null),se.bindFramebuffer(Q.DRAW_FRAMEBUFFER,null)}else vi?P.isDataTexture||P.isData3DTexture?Q.texSubImage3D(ri,bt,Ye,Le,Mn,It,Wt,Kt,Ne,Ue,Pe.data):$.isCompressedArrayTexture?Q.compressedTexSubImage3D(ri,bt,Ye,Le,Mn,It,Wt,Kt,Ne,Pe.data):Q.texSubImage3D(ri,bt,Ye,Le,Mn,It,Wt,Kt,Ne,Ue,Pe):P.isDataTexture?Q.texSubImage2D(Q.TEXTURE_2D,bt,Ye,Le,It,Wt,Ne,Ue,Pe.data):P.isCompressedTexture?Q.compressedTexSubImage2D(Q.TEXTURE_2D,bt,Ye,Le,Pe.width,Pe.height,Ne,Pe.data):Q.texSubImage2D(Q.TEXTURE_2D,bt,Ye,Le,It,Wt,Ne,Ue,Pe);Q.pixelStorei(Q.UNPACK_ROW_LENGTH,We),Q.pixelStorei(Q.UNPACK_IMAGE_HEIGHT,sn),Q.pixelStorei(Q.UNPACK_SKIP_PIXELS,Vn),Q.pixelStorei(Q.UNPACK_SKIP_ROWS,fn),Q.pixelStorei(Q.UNPACK_SKIP_IMAGES,je),bt===0&&$.generateMipmaps&&Q.generateMipmap(ri),se.unbindTexture()},this.copyTextureToTexture3D=function(P,$,at=null,nt=null,dt=0){return P.isTexture!==!0&&(Ff("WebGLRenderer: copyTextureToTexture3D function signature has changed."),at=arguments[0]||null,nt=arguments[1]||null,P=arguments[2],$=arguments[3],dt=arguments[4]||0),Ff('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(P,$,at,nt,dt)},this.initRenderTarget=function(P){he.get(P).__webglFramebuffer===void 0&&K.setupRenderTarget(P)},this.initTexture=function(P){P.isCubeTexture?K.setTextureCube(P,0):P.isData3DTexture?K.setTexture3D(P,0):P.isDataArrayTexture||P.isCompressedArrayTexture?K.setTexture2DArray(P,0):K.setTexture2D(P,0),se.unbindTexture()},this.resetState=function(){B=0,F=0,G=null,se.reset(),le.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Ao}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(t){this._outputColorSpace=t;const e=this.getContext();e.drawingBufferColorspace=On._getDrawingBufferColorSpace(t),e.unpackColorSpace=On._getUnpackColorSpace()}}const RF=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:Jb,AddEquation:xu,AddOperation:vR,AdditiveAnimationBlendMode:oM,AdditiveBlending:hb,AgXToneMapping:bR,AlphaFormat:eM,AlwaysCompare:IR,AlwaysDepth:uy,AlwaysStencilFunc:vb,AmbientLight:DC,AnimationAction:HC,AnimationClip:L0,AnimationLoader:XB,AnimationMixer:v5,AnimationObjectGroup:m5,AnimationUtils:FB,ArcCurve:tC,ArrayCamera:BC,ArrowHelper:H5,AttachedBindMode:mb,Audio:IC,AudioAnalyser:r5,AudioContext:NM,AudioListener:n5,AudioLoader:$B,AxesHelper:F5,BackSide:Er,BasicDepthPacking:RR,BasicShadowMap:Q2,BatchedMesh:KR,Bone:pM,BooleanKeyframeTrack:mh,Box2:T5,Box3:Tr,Box3Helper:I5,BoxGeometry:ph,BoxHelper:B5,BufferAttribute:ui,BufferGeometry:xn,BufferGeometryLoader:zC,ByteType:rx,Cache:_c,Camera:px,CameraHelper:z5,CanvasTexture:uB,CapsuleGeometry:Sx,CatmullRomCurve3:eC,CineonToneMapping:xR,CircleGeometry:bx,ClampToEdgeWrapping:la,Clock:UM,Color:De,ColorKeyframeTrack:RM,ColorManagement:On,CompressedArrayTexture:lB,CompressedCubeTexture:cB,CompressedTexture:yx,CompressedTextureLoader:YB,ConeGeometry:Mx,ConstantAlphaFactor:pR,ConstantColorFactor:hR,Controls:V5,CubeCamera:XR,CubeReflectionMapping:wl,CubeRefractionMapping:Cu,CubeTexture:ng,CubeTextureLoader:TC,CubeUVReflectionMapping:rp,CubicBezierCurve:_M,CubicBezierCurve3:nC,CubicInterpolant:SC,CullFaceBack:fb,CullFaceFront:K2,CullFaceFrontBack:Sz,CullFaceNone:j2,Curve:Do,CurvePath:aC,CustomBlending:J2,CustomToneMapping:SR,CylinderGeometry:sp,Cylindrical:E5,Data3DTexture:dx,DataArrayTexture:eg,DataTexture:wo,DataTextureLoader:CM,DataUtils:jf,DecrementStencilOp:Lz,DecrementWrapStencilOp:Bz,DefaultLoadingManager:EC,DepthFormat:th,DepthStencilFormat:lh,DepthTexture:gM,DetachedBindMode:ER,DirectionalLight:CC,DirectionalLightHelper:L5,DiscreteInterpolant:bC,DodecahedronGeometry:Ex,DoubleSide:Eo,DstAlphaFactor:oR,DstColorFactor:cR,DynamicCopyUsage:Qz,DynamicDrawUsage:Yz,DynamicReadUsage:Wz,EdgesGeometry:rC,EllipseCurve:xx,EqualCompare:OR,EqualDepth:hy,EqualStencilFunc:Fz,EquirectangularReflectionMapping:sh,EquirectangularRefractionMapping:y0,Euler:gs,EventDispatcher:Cl,ExtrudeGeometry:sg,FileLoader:ms,Float16BufferAttribute:V4,Float32BufferAttribute:He,FloatType:Fi,Fog:gx,FogExp2:mx,FramebufferTexture:oB,FrontSide:bc,Frustum:ag,GLBufferAttribute:M5,GLSL1:$z,GLSL3:_b,GreaterCompare:LR,GreaterDepth:py,GreaterEqualCompare:BR,GreaterEqualDepth:dy,GreaterEqualStencilFunc:Xz,GreaterStencilFunc:Vz,GridHelper:U5,Group:Bd,HalfFloatType:Ra,HemisphereLight:AC,HemisphereLightHelper:N5,IcosahedronGeometry:og,ImageBitmapLoader:JB,ImageLoader:z0,ImageUtils:FR,IncrementStencilOp:Oz,IncrementWrapStencilOp:zz,InstancedBufferAttribute:Qd,InstancedBufferGeometry:LC,InstancedInterleavedBuffer:b5,InstancedMesh:jR,Int16BufferAttribute:F4,Int32BufferAttribute:G4,Int8BufferAttribute:I4,IntType:J0,InterleavedBuffer:vx,InterleavedBufferAttribute:ch,Interpolant:ug,InterpolateDiscrete:b0,InterpolateLinear:Vy,InterpolateSmooth:K_,InvertStencilOp:Iz,KeepStencilOp:Hf,KeyframeTrack:No,LOD:ZR,LatheGeometry:rg,Layers:jd,LessCompare:UR,LessDepth:fy,LessEqualCompare:lM,LessEqualDepth:rh,LessEqualStencilFunc:Gz,LessStencilFunc:Hz,Light:Lu,LightProbe:OC,Line:Du,Line3:A5,LineBasicMaterial:Ar,LineCurve:yM,LineCurve3:iC,LineDashedMaterial:_C,LineLoop:QR,LineSegments:Dl,LinearFilter:ai,LinearInterpolant:wM,LinearMipMapLinearFilter:gb,LinearMipMapNearestFilter:Ez,LinearMipmapLinearFilter:xl,LinearMipmapNearestFilter:Km,LinearSRGBColorSpace:Ro,LinearToneMapping:_R,LinearTransfer:E0,Loader:wr,LoaderUtils:Mb,LoadingManager:Ux,LoopOnce:TR,LoopPingPong:wR,LoopRepeat:AR,LuminanceAlphaFormat:aM,LuminanceFormat:iM,MOUSE:If,Material:cr,MaterialLoader:Ox,MathUtils:v4,Matrix2:IM,Matrix3:hn,Matrix4:$e,MaxEquation:nR,Mesh:Gi,MeshBasicMaterial:Mc,MeshDepthMaterial:EM,MeshDistanceMaterial:TM,MeshLambertMaterial:gC,MeshMatcapMaterial:vC,MeshNormalMaterial:mC,MeshPhongMaterial:dC,MeshPhysicalMaterial:hC,MeshStandardMaterial:MM,MeshToonMaterial:pC,MinEquation:eR,MirroredRepeatWrapping:S0,MixOperation:gR,MultiplyBlending:pb,MultiplyOperation:Q0,NearestFilter:Xa,NearestMipMapLinearFilter:Mz,NearestMipMapNearestFilter:bz,NearestMipmapLinearFilter:Ld,NearestMipmapNearestFilter:$b,NeutralToneMapping:MR,NeverCompare:NR,NeverDepth:cy,NeverStencilFunc:Pz,NoBlending:El,NoColorSpace:gc,NoToneMapping:Tl,NormalAnimationBlendMode:fx,NormalBlending:$f,NotEqualCompare:zR,NotEqualDepth:my,NotEqualStencilFunc:kz,NumberKeyframeTrack:U0,Object3D:Gn,ObjectLoader:KB,ObjectSpaceNormalMap:DR,OctahedronGeometry:lg,OneFactor:aR,OneMinusConstantAlphaFactor:mR,OneMinusConstantColorFactor:dR,OneMinusDstAlphaFactor:lR,OneMinusDstColorFactor:uR,OneMinusSrcAlphaFactor:ly,OneMinusSrcColorFactor:sR,OrthographicCamera:xc,PCFShadowMap:ax,PCFSoftShadowMap:jm,PMREMGenerator:wb,Path:R0,PerspectiveCamera:ta,Plane:mc,PlaneGeometry:Ou,PlaneHelper:P5,PointLight:RC,PointLightHelper:C5,Points:JR,PointsMaterial:mM,PolarGridHelper:O5,PolyhedronGeometry:Uu,PositionalAudio:a5,PropertyBinding:Hn,PropertyMixer:PC,QuadraticBezierCurve:xM,QuadraticBezierCurve3:SM,Quaternion:sr,QuaternionKeyframeTrack:fg,QuaternionLinearInterpolant:MC,RED_GREEN_RGTC2_Format:Fy,RED_RGTC1_Format:sM,REVISION:K0,RGBADepthPacking:CR,RGBAFormat:ea,RGBAIntegerFormat:ux,RGBA_ASTC_10x10_Format:Ly,RGBA_ASTC_10x5_Format:Ny,RGBA_ASTC_10x6_Format:Uy,RGBA_ASTC_10x8_Format:Oy,RGBA_ASTC_12x10_Format:zy,RGBA_ASTC_12x12_Format:By,RGBA_ASTC_4x4_Format:My,RGBA_ASTC_5x4_Format:Ey,RGBA_ASTC_5x5_Format:Ty,RGBA_ASTC_6x5_Format:Ay,RGBA_ASTC_6x6_Format:wy,RGBA_ASTC_8x5_Format:Ry,RGBA_ASTC_8x6_Format:Cy,RGBA_ASTC_8x8_Format:Dy,RGBA_BPTC_Format:e0,RGBA_ETC2_EAC_Format:by,RGBA_PVRTC_2BPPV1_Format:yy,RGBA_PVRTC_4BPPV1_Format:_y,RGBA_S3TC_DXT1_Format:Jm,RGBA_S3TC_DXT3_Format:$m,RGBA_S3TC_DXT5_Format:t0,RGBDepthPacking:Cz,RGBFormat:nM,RGBIntegerFormat:Tz,RGB_BPTC_SIGNED_Format:Iy,RGB_BPTC_UNSIGNED_Format:Py,RGB_ETC1_Format:xy,RGB_ETC2_Format:Sy,RGB_PVRTC_2BPPV1_Format:vy,RGB_PVRTC_4BPPV1_Format:gy,RGB_S3TC_DXT1_Format:Qm,RGDepthPacking:Dz,RGFormat:rM,RGIntegerFormat:cx,RawShaderMaterial:fC,Ray:dh,Raycaster:BM,RectAreaLight:NC,RedFormat:$0,RedIntegerFormat:tg,ReinhardToneMapping:yR,RenderTarget:hx,RenderTarget3D:_5,RenderTargetArray:y5,RepeatWrapping:x0,ReplaceStencilOp:Uz,ReverseSubtractEquation:tR,RingGeometry:Ax,SIGNED_RED_GREEN_RGTC2_Format:Gy,SIGNED_RED_RGTC1_Format:Hy,SRGBColorSpace:Va,SRGBTransfer:ii,Scene:ig,ShaderChunk:yn,ShaderLib:Mo,ShaderMaterial:Kr,ShadowMaterial:uC,Shape:wu,ShapeGeometry:wx,ShapePath:G5,ShapeUtils:Al,ShortType:sx,Skeleton:_x,SkeletonHelper:R5,SkinnedMesh:WR,Source:bu,Sphere:or,SphereGeometry:cg,Spherical:Tb,SphericalHarmonics3:UC,SplineCurve:bM,SpotLight:wC,SpotLightHelper:w5,Sprite:qR,SpriteMaterial:dM,SrcAlphaFactor:oy,SrcAlphaSaturateFactor:fR,SrcColorFactor:rR,StaticCopyUsage:Kz,StaticDrawUsage:T0,StaticReadUsage:Zz,StereoCamera:t5,StreamCopyUsage:Jz,StreamDrawUsage:qz,StreamReadUsage:jz,StringKeyframeTrack:gh,SubtractEquation:$2,SubtractiveBlending:db,TOUCH:Pf,TangentSpaceNormalMap:Nu,TetrahedronGeometry:Rx,Texture:ci,TextureLoader:qB,TextureUtils:Z5,TimestampQuery:t4,TorusGeometry:Cx,TorusKnotGeometry:Dx,Triangle:qr,TriangleFanDrawMode:Rz,TriangleStripDrawMode:wz,TrianglesDrawMode:Az,TubeGeometry:Nx,UVMapping:Ru,Uint16BufferAttribute:uM,Uint32BufferAttribute:fM,Uint8BufferAttribute:P4,Uint8ClampedBufferAttribute:H4,Uniform:zM,UniformsGroup:S5,UniformsLib:Te,UniformsUtils:kR,UnsignedByteType:jr,UnsignedInt248Type:oh,UnsignedInt5999Type:tM,UnsignedIntType:Rl,UnsignedShort4444Type:ox,UnsignedShort5551Type:lx,UnsignedShortType:Zd,VSMShadowMap:bo,Vector2:jt,Vector3:J,Vector4:Fn,VectorKeyframeTrack:O0,VideoFrameTexture:sB,VideoTexture:$R,WebGL3DRenderTarget:A4,WebGLArrayRenderTarget:T4,WebGLCoordinateSystem:Ao,WebGLCubeRenderTarget:hM,WebGLRenderTarget:Is,WebGLRenderer:HM,WebGLUtils:qC,WebGPUCoordinateSystem:A0,WebXRController:Q_,WireframeGeometry:cC,WrapAroundEnding:M0,ZeroCurvatureEnding:Zf,ZeroFactor:iR,ZeroSlopeEnding:Wf,ZeroStencilOp:Nz,createCanvasElement:HR},Symbol.toStringTag,{value:"Module"}));var zS={exports:{}},hc={};/**
 * @license React
 * react-reconciler-constants.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tw;function CF(){return Tw||(Tw=1,hc.ConcurrentRoot=1,hc.ContinuousEventPriority=8,hc.DefaultEventPriority=32,hc.DiscreteEventPriority=2,hc.IdleEventPriority=268435456,hc.LegacyRoot=0,hc.NoEventPriority=0),hc}var Aw;function DF(){return Aw||(Aw=1,zS.exports=CF()),zS.exports}var $_=DF(),BS={exports:{}},IS={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ww;function NF(){if(ww)return IS;ww=1;var n=tp(),t=u2();function e(p,v){return p===v&&(p!==0||1/p===1/v)||p!==p&&v!==v}var i=typeof Object.is=="function"?Object.is:e,a=t.useSyncExternalStore,o=n.useRef,u=n.useEffect,h=n.useMemo,d=n.useDebugValue;return IS.useSyncExternalStoreWithSelector=function(p,v,_,x,b){var E=o(null);if(E.current===null){var R={hasValue:!1,value:null};E.current=R}else R=E.current;E=h(function(){function M(B){if(!C){if(C=!0,U=B,B=x(B),b!==void 0&&R.hasValue){var F=R.value;if(b(F,B))return D=F}return D=B}if(F=D,i(U,B))return F;var G=x(B);return b!==void 0&&b(F,G)?(U=B,F):(U=B,D=G)}var C=!1,U,D,z=_===void 0?null:_;return[function(){return M(v())},z===null?void 0:function(){return M(z())}]},[v,_,x,b]);var w=a(p,E[0],E[1]);return u(function(){R.hasValue=!0,R.value=w},[w]),d(w),w},IS}var Rw;function UF(){return Rw||(Rw=1,BS.exports=NF()),BS.exports}var OF=UF();const LF=Qy(OF),Cw=n=>{let t;const e=new Set,i=(p,v)=>{const _=typeof p=="function"?p(t):p;if(!Object.is(_,t)){const x=t;t=v??(typeof _!="object"||_===null)?_:Object.assign({},t,_),e.forEach(b=>b(t,x))}},a=()=>t,h={setState:i,getState:a,getInitialState:()=>d,subscribe:p=>(e.add(p),()=>e.delete(p))},d=t=n(i,a,h);return h},zF=n=>n?Cw(n):Cw,{useSyncExternalStoreWithSelector:BF}=LF,IF=n=>n;function PF(n,t=IF,e){const i=BF(n.subscribe,n.getState,n.getInitialState,t,e);return Xm.useDebugValue(i),i}const Dw=(n,t)=>{const e=zF(n),i=(a,o=t)=>PF(e,a,o);return Object.assign(i,e),i},ZC=(n,t)=>n?Dw(n,t):Dw;var PS={exports:{}},HS={exports:{}};/**
 * @license React
 * react-reconciler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nw;function HF(){return Nw||(Nw=1,function(n){n.exports=function(t){function e(l,c,g,S){return new Ig(l,c,g,S)}function i(){}function a(l){var c="https://react.dev/errors/"+l;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)c+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+l+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(l){return l===null||typeof l!="object"?null:(l=Yn&&l[Yn]||l["@@iterator"],typeof l=="function"?l:null)}function u(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===Xi?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case Zo:return"Fragment";case bs:return"Portal";case Wo:return"Profiler";case kl:return"StrictMode";case to:return"Suspense";case uf:return"SuspenseList"}if(typeof l=="object")switch(l.$$typeof){case jo:return(l.displayName||"Context")+".Provider";case Lp:return(l._context.displayName||"Context")+".Consumer";case Ph:var c=l.render;return l=l.displayName,l||(l=c.displayName||c.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case Gc:return c=l.displayName||null,c!==null?c:u(l.type)||"Memo";case eo:c=l._payload,l=l._init;try{return u(l(c))}catch{}}return null}function h(l){if(Ko===void 0)try{throw Error()}catch(g){var c=g.stack.trim().match(/\n( *(at )?)/);Ko=c&&c[1]||"",Qo=-1<g.stack.indexOf(`
    at`)?" (<anonymous>)":-1<g.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ko+l+Qo}function d(l,c){if(!l||Vc)return"";Vc=!0;var g=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var S={DetermineComponentFrameRoot:function(){try{if(c){var Ee=function(){throw Error()};if(Object.defineProperty(Ee.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ee,[])}catch(nn){var ce=nn}Reflect.construct(l,[],Ee)}else{try{Ee.call()}catch(nn){ce=nn}l.call(Ee.prototype)}}else{try{throw Error()}catch(nn){ce=nn}(Ee=l())&&typeof Ee.catch=="function"&&Ee.catch(function(){})}}catch(nn){if(nn&&ce&&typeof nn.stack=="string")return[nn.stack,ce.stack]}return[null,null]}};S.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var A=Object.getOwnPropertyDescriptor(S.DetermineComponentFrameRoot,"name");A&&A.configurable&&Object.defineProperty(S.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var N=S.DetermineComponentFrameRoot(),Y=N[0],st=N[1];if(Y&&st){var yt=Y.split(`
`),qt=st.split(`
`);for(A=S=0;S<yt.length&&!yt[S].includes("DetermineComponentFrameRoot");)S++;for(;A<qt.length&&!qt[A].includes("DetermineComponentFrameRoot");)A++;if(S===yt.length||A===qt.length)for(S=yt.length-1,A=qt.length-1;1<=S&&0<=A&&yt[S]!==qt[A];)A--;for(;1<=S&&0<=A;S--,A--)if(yt[S]!==qt[A]){if(S!==1||A!==1)do if(S--,A--,0>A||yt[S]!==qt[A]){var fe=`
`+yt[S].replace(" at new "," at ");return l.displayName&&fe.includes("<anonymous>")&&(fe=fe.replace("<anonymous>",l.displayName)),fe}while(1<=S&&0<=A);break}}}finally{Vc=!1,Error.prepareStackTrace=g}return(g=l?l.displayName||l.name:"")?h(g):""}function p(l){switch(l.tag){case 26:case 27:case 5:return h(l.type);case 16:return h("Lazy");case 13:return h("Suspense");case 19:return h("SuspenseList");case 0:case 15:return l=d(l.type,!1),l;case 11:return l=d(l.type.render,!1),l;case 1:return l=d(l.type,!0),l;default:return""}}function v(l){try{var c="";do c+=p(l),l=l.return;while(l);return c}catch(g){return`
Error generating stack: `+g.message+`
`+g.stack}}function _(l){var c=l,g=l;if(l.alternate)for(;c.return;)c=c.return;else{l=c;do c=l,c.flags&4098&&(g=c.return),l=c.return;while(l)}return c.tag===3?g:null}function x(l){if(_(l)!==l)throw Error(a(188))}function b(l){var c=l.alternate;if(!c){if(c=_(l),c===null)throw Error(a(188));return c!==l?null:l}for(var g=l,S=c;;){var A=g.return;if(A===null)break;var N=A.alternate;if(N===null){if(S=A.return,S!==null){g=S;continue}break}if(A.child===N.child){for(N=A.child;N;){if(N===g)return x(A),l;if(N===S)return x(A),c;N=N.sibling}throw Error(a(188))}if(g.return!==S.return)g=A,S=N;else{for(var Y=!1,st=A.child;st;){if(st===g){Y=!0,g=A,S=N;break}if(st===S){Y=!0,S=A,g=N;break}st=st.sibling}if(!Y){for(st=N.child;st;){if(st===g){Y=!0,g=N,S=A;break}if(st===S){Y=!0,S=N,g=A;break}st=st.sibling}if(!Y)throw Error(a(189))}}if(g.alternate!==S)throw Error(a(190))}if(g.tag!==3)throw Error(a(188));return g.stateNode.current===g?l:c}function E(l){var c=l.tag;if(c===5||c===26||c===27||c===6)return l;for(l=l.child;l!==null;){if(c=E(l),c!==null)return c;l=l.sibling}return null}function R(l){var c=l.tag;if(c===5||c===26||c===27||c===6)return l;for(l=l.child;l!==null;){if(l.tag!==4&&(c=R(l),c!==null))return c;l=l.sibling}return null}function w(l){return{current:l}}function M(l){0>el||(l.current=Qh[el],Qh[el]=null,el--)}function C(l,c){el++,Qh[el]=l.current,l.current=c}function U(l){return l>>>=0,l===0?32:31-(am(l)/Wx|0)|0}function D(l){var c=l&42;if(c!==0)return c;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function z(l,c){var g=l.pendingLanes;if(g===0)return 0;var S=0,A=l.suspendedLanes,N=l.pingedLanes,Y=l.warmLanes;l=l.finishedLanes!==0;var st=g&134217727;return st!==0?(g=st&~A,g!==0?S=D(g):(N&=st,N!==0?S=D(N):l||(Y=st&~Y,Y!==0&&(S=D(Y))))):(st=g&~A,st!==0?S=D(st):N!==0?S=D(N):l||(Y=g&~Y,Y!==0&&(S=D(Y)))),S===0?0:c!==0&&c!==S&&!(c&A)&&(A=S&-S,Y=c&-c,A>=Y||A===32&&(Y&4194176)!==0)?c:S}function B(l,c){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&c)===0}function F(l,c){switch(l){case 1:case 2:case 4:case 8:return c+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function G(){var l=pf;return pf<<=1,!(pf&4194176)&&(pf=128),l}function L(){var l=Zc;return Zc<<=1,!(Zc&62914560)&&(Zc=4194304),l}function O(l){for(var c=[],g=0;31>g;g++)c.push(l);return c}function V(l,c){l.pendingLanes|=c,c!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function et(l,c,g,S,A,N){var Y=l.pendingLanes;l.pendingLanes=g,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=g,l.entangledLanes&=g,l.errorRecoveryDisabledLanes&=g,l.shellSuspendCounter=0;var st=l.entanglements,yt=l.expirationTimes,qt=l.hiddenUpdates;for(g=Y&~g;0<g;){var fe=31-Ui(g),Ee=1<<fe;st[fe]=0,yt[fe]=-1;var ce=qt[fe];if(ce!==null)for(qt[fe]=null,fe=0;fe<ce.length;fe++){var nn=ce[fe];nn!==null&&(nn.lane&=-536870913)}g&=~Ee}S!==0&&W(l,S,0),N!==0&&A===0&&l.tag!==0&&(l.suspendedLanes|=N&~(Y&~c))}function W(l,c,g){l.pendingLanes|=c,l.suspendedLanes&=~c;var S=31-Ui(c);l.entangledLanes|=c,l.entanglements[S]=l.entanglements[S]|1073741824|g&4194218}function j(l,c){var g=l.entangledLanes|=c;for(l=l.entanglements;g;){var S=31-Ui(g),A=1<<S;A&c|l[S]&c&&(l[S]|=c),g&=~A}}function ut(l){return l&=-l,2<l?8<l?l&134217727?32:268435456:8:2}function tt(l){if(Yi&&typeof Yi.onCommitFiberRoot=="function")try{Yi.onCommitFiberRoot(jc,l,void 0,(l.current.flags&128)===128)}catch{}}function pt(l){if(typeof ya=="function"&&$h(l),Yi&&typeof Yi.setStrictMode=="function")try{Yi.setStrictMode(jc,l)}catch{}}function ot(l,c){return l===c&&(l!==0||1/l===1/c)||l!==l&&c!==c}function Dt(l,c){if(typeof l=="object"&&l!==null){var g=td.get(l);return g!==void 0?g:(c={value:l,source:c,stack:v(c)},td.set(l,c),c)}return{value:l,source:c,stack:v(c)}}function Z(l,c){pr[mr++]=Kc,pr[mr++]=il,il=l,Kc=c}function ht(l,c,g){Ja[xa++]=As,Ja[xa++]=ws,Ja[xa++]=ns,ns=l;var S=As;l=ws;var A=32-Ui(S)-1;S&=~(1<<A),g+=1;var N=32-Ui(c)+A;if(30<N){var Y=A-A%5;N=(S&(1<<Y)-1).toString(32),S>>=Y,A-=Y,As=1<<32-Ui(c)+A|g<<A|S,ws=N+l}else As=1<<N|g<<A|S,ws=l}function Tt(l){l.return!==null&&(Z(l,1),ht(l,1,0))}function Ft(l){for(;l===il;)il=pr[--mr],pr[mr]=null,Kc=pr[--mr],pr[mr]=null;for(;l===ns;)ns=Ja[--xa],Ja[xa]=null,ws=Ja[--xa],Ja[xa]=null,As=Ja[--xa],Ja[xa]=null}function rt(l,c){C(so,c),C(Or,l),C(Oi,null),l=zp(c),M(Oi),C(Oi,l)}function Lt(){M(Oi),M(Or),M(so)}function Et(l){l.memoizedState!==null&&C(gf,l);var c=Oi.current,g=Pg(c,l.type);c!==g&&(C(Or,l),C(Oi,g))}function Nt(l){Or.current===l&&(M(Oi),M(Or)),gf.current===l&&(M(gf),$r?io._currentValue=Yl:io._currentValue2=Yl)}function Qt(l){var c=Error(a(418,""));throw Yt(Dt(c,l)),vf}function we(l,c){if(!Qa)throw Error(a(175));Wl(l.stateNode,l.type,l.memoizedProps,c,l)||Qt(l)}function re(l){for(Li=l.return;Li;)switch(Li.tag){case 3:case 27:is=!0;return;case 5:case 13:is=!1;return;default:Li=Li.return}}function ke(l){if(!Qa||l!==Li)return!1;if(!Dn)return re(l),Dn=!0,!1;var c=!1;if(aa?l.tag!==3&&l.tag!==27&&(l.tag!==5||Wp(l.type)&&!pa(l.type,l.memoizedProps))&&(c=!0):l.tag!==3&&(l.tag!==5||Wp(l.type)&&!pa(l.type,l.memoizedProps))&&(c=!0),c&&Kn&&Qt(l),re(l),l.tag===13){if(!Qa)throw Error(a(316));if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(a(317));Kn=gv(l)}else Kn=Li?tl(l.stateNode):null;return!0}function Jt(){Qa&&(Kn=Li=null,Dn=!1)}function Yt(l){Lr===null?Lr=[l]:Lr.push(l)}function Q(){for(var l=oo,c=as=oo=0;c<l;){var g=$a[c];$a[c++]=null;var S=$a[c];$a[c++]=null;var A=$a[c];$a[c++]=null;var N=$a[c];if($a[c++]=null,S!==null&&A!==null){var Y=S.pending;Y===null?A.next=A:(A.next=Y.next,Y.next=A),S.pending=A}N!==0&&se(g,A,N)}}function Me(l,c,g,S){$a[oo++]=l,$a[oo++]=c,$a[oo++]=g,$a[oo++]=S,as|=S,l.lanes|=S,l=l.alternate,l!==null&&(l.lanes|=S)}function ee(l,c,g,S){return Me(l,c,g,S),Be(l)}function pe(l,c){return Me(l,null,null,c),Be(l)}function se(l,c,g){l.lanes|=g;var S=l.alternate;S!==null&&(S.lanes|=g);for(var A=!1,N=l.return;N!==null;)N.childLanes|=g,S=N.alternate,S!==null&&(S.childLanes|=g),N.tag===22&&(l=N.stateNode,l===null||l._visibility&1||(A=!0)),l=N,N=N.return;A&&c!==null&&l.tag===3&&(N=l.stateNode,A=31-Ui(g),N=N.hiddenUpdates,l=N[A],l===null?N[A]=[c]:l.push(c),c.lane=g|536870912)}function Be(l){if(50<nc)throw nc=0,cm=null,Error(a(185));for(var c=l.return;c!==null;)l=c,c=l.return;return l.tag===3?l.stateNode:null}function he(l){l!==al&&l.next===null&&(al===null?hi=al=l:al=al.next=l),zi=!0,ed||(ed=!0,Xt(k))}function K(l,c){if(!nd&&zi){nd=!0;do for(var g=!1,S=hi;S!==null;){if(l!==0){var A=S.pendingLanes;if(A===0)var N=0;else{var Y=S.suspendedLanes,st=S.pingedLanes;N=(1<<31-Ui(42|l)+1)-1,N&=A&~(Y&~st),N=N&201326677?N&201326677|1:N?N|2:0}N!==0&&(g=!0,$t(S,N))}else N=An,N=z(S,S===Jn?N:0),!(N&3)||B(S,N)||(g=!0,$t(S,N));S=S.next}while(g);nd=!1}}function k(){zi=ed=!1;var l=0;Qc!==0&&(Vg()&&(l=Qc),Qc=0);for(var c=dr(),g=null,S=hi;S!==null;){var A=S.next,N=xt(S,c);N===0?(S.next=null,g===null?hi=A:g.next=A,A===null&&(al=g)):(g=S,(l!==0||N&3)&&(zi=!0)),S=A}K(l)}function xt(l,c){for(var g=l.suspendedLanes,S=l.pingedLanes,A=l.expirationTimes,N=l.pendingLanes&-62914561;0<N;){var Y=31-Ui(N),st=1<<Y,yt=A[Y];yt===-1?(!(st&g)||st&S)&&(A[Y]=F(st,c)):yt<=c&&(l.expiredLanes|=st),N&=~st}if(c=Jn,g=An,g=z(l,l===c?g:0),S=l.callbackNode,g===0||l===c&&qn===2||l.cancelPendingCommit!==null)return S!==null&&S!==null&&es(S),l.callbackNode=null,l.callbackPriority=0;if(!(g&3)||B(l,g)){if(c=g&-g,c===l.callbackPriority)return c;switch(S!==null&&es(S),ut(g)){case 2:case 8:g=mf;break;case 32:g=Wc;break;case 268435456:g=Kl;break;default:g=Wc}return S=Pt.bind(null,l),g=Ts(g,S),l.callbackPriority=c,l.callbackNode=g,c}return S!==null&&S!==null&&es(S),l.callbackPriority=2,l.callbackNode=null,2}function Pt(l,c){var g=l.callbackNode;if(ko()&&l.callbackNode!==g)return null;var S=An;return S=z(l,l===Jn?S:0),S===0?null:(ur(l,S,c),xt(l,dr()),l.callbackNode!=null&&l.callbackNode===g?Pt.bind(null,l):null)}function $t(l,c){if(ko())return null;ur(l,c,!0)}function Xt(l){qg?Zg(function(){Tn&6?Ts(Jh,l):l()}):Ts(Jh,l)}function Re(){return Qc===0&&(Qc=G()),Qc}function de(l,c){if(Jc===null){var g=Jc=[];id=0,di=Re(),ra={status:"pending",value:void 0,then:function(S){g.push(S)}}}return id++,c.then(_e,_e),c}function _e(){if(--id===0&&Jc!==null){ra!==null&&(ra.status="fulfilled");var l=Jc;Jc=null,di=0,ra=null;for(var c=0;c<l.length;c++)(0,l[c])()}}function an(l,c){var g=[],S={status:"pending",value:null,reason:null,then:function(A){g.push(A)}};return l.then(function(){S.status="fulfilled",S.value=c;for(var A=0;A<g.length;A++)(0,g[A])(c)},function(A){for(S.status="rejected",S.reason=A,A=0;A<g.length;A++)(0,g[A])(void 0)}),S}function ae(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ae(l,c){l=l.updateQueue,c.updateQueue===l&&(c.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function Ce(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function me(l,c,g){var S=l.updateQueue;if(S===null)return null;if(S=S.shared,Tn&2){var A=S.pending;return A===null?c.next=c:(c.next=A.next,A.next=c),S.pending=c,c=Be(l),se(l,null,g),c}return Me(l,S,c,g),Be(l)}function ye(l,c,g){if(c=c.updateQueue,c!==null&&(c=c.shared,(g&4194176)!==0)){var S=c.lanes;S&=l.pendingLanes,g|=S,c.lanes=g,j(l,g)}}function lt(l,c){var g=l.updateQueue,S=l.alternate;if(S!==null&&(S=S.updateQueue,g===S)){var A=null,N=null;if(g=g.firstBaseUpdate,g!==null){do{var Y={lane:g.lane,tag:g.tag,payload:g.payload,callback:null,next:null};N===null?A=N=Y:N=N.next=Y,g=g.next}while(g!==null);N===null?A=N=c:N=N.next=c}else A=N=c;g={baseState:S.baseState,firstBaseUpdate:A,lastBaseUpdate:N,shared:S.shared,callbacks:S.callbacks},l.updateQueue=g;return}l=g.lastBaseUpdate,l===null?g.firstBaseUpdate=c:l.next=c,g.lastBaseUpdate=c}function wt(){if(ad){var l=ra;if(l!==null)throw l}}function le(l,c,g,S){ad=!1;var A=l.updateQueue;Sa=!1;var N=A.firstBaseUpdate,Y=A.lastBaseUpdate,st=A.shared.pending;if(st!==null){A.shared.pending=null;var yt=st,qt=yt.next;yt.next=null,Y===null?N=qt:Y.next=qt,Y=yt;var fe=l.alternate;fe!==null&&(fe=fe.updateQueue,st=fe.lastBaseUpdate,st!==Y&&(st===null?fe.firstBaseUpdate=qt:st.next=qt,fe.lastBaseUpdate=yt))}if(N!==null){var Ee=A.baseState;Y=0,fe=qt=yt=null,st=N;do{var ce=st.lane&-536870913,nn=ce!==st.lane;if(nn?(An&ce)===ce:(S&ce)===ce){ce!==0&&ce===di&&(ad=!0),fe!==null&&(fe=fe.next={lane:0,tag:st.tag,payload:st.payload,callback:null,next:null});t:{var Vr=l,au=st;ce=c;var ic=g;switch(au.tag){case 1:if(Vr=au.payload,typeof Vr=="function"){Ee=Vr.call(ic,Ee,ce);break t}Ee=Vr;break t;case 3:Vr.flags=Vr.flags&-65537|128;case 0:if(Vr=au.payload,ce=typeof Vr=="function"?Vr.call(ic,Ee,ce):Vr,ce==null)break t;Ee=Di({},Ee,ce);break t;case 2:Sa=!0}}ce=st.callback,ce!==null&&(l.flags|=64,nn&&(l.flags|=8192),nn=A.callbacks,nn===null?A.callbacks=[ce]:nn.push(ce))}else nn={lane:ce,tag:st.tag,payload:st.payload,callback:st.callback,next:null},fe===null?(qt=fe=nn,yt=Ee):fe=fe.next=nn,Y|=ce;if(st=st.next,st===null){if(st=A.shared.pending,st===null)break;nn=st,st=nn.next,nn.next=null,A.lastBaseUpdate=nn,A.shared.pending=null}}while(!0);fe===null&&(yt=Ee),A.baseState=yt,A.firstBaseUpdate=qt,A.lastBaseUpdate=fe,N===null&&(A.shared.lanes=0),Fr|=Y,l.lanes=Y,l.memoizedState=Ee}}function ct(l,c){if(typeof l!="function")throw Error(a(191,l));l.call(c)}function St(l,c){var g=l.callbacks;if(g!==null)for(l.callbacks=null,l=0;l<g.length;l++)ct(g[l],c)}function Rt(l,c){if(La(l,c))return!0;if(typeof l!="object"||l===null||typeof c!="object"||c===null)return!1;var g=Object.keys(l),S=Object.keys(c);if(g.length!==S.length)return!1;for(S=0;S<g.length;S++){var A=g[S];if(!Ev.call(c,A)||!La(l[A],c[A]))return!1}return!0}function Gt(l){return l=l.status,l==="fulfilled"||l==="rejected"}function ge(){}function ve(l,c,g){switch(g=l[g],g===void 0?l.push(c):g!==c&&(c.then(ge,ge),c=g),c.status){case"fulfilled":return c.value;case"rejected":throw l=c.reason,l===_f?Error(a(483)):l;default:if(typeof c.status=="string")c.then(ge,ge);else{if(l=Jn,l!==null&&100<l.shellSuspendCounter)throw Error(a(482));l=c,l.status="pending",l.then(function(S){if(c.status==="pending"){var A=c;A.status="fulfilled",A.value=S}},function(S){if(c.status==="pending"){var A=c;A.status="rejected",A.reason=S}})}switch(c.status){case"fulfilled":return c.value;case"rejected":throw l=c.reason,l===_f?Error(a(483)):l}throw ba=c,_f}}function Ie(){if(ba===null)throw Error(a(459));var l=ba;return ba=null,l}function mn(l){var c=Ma;return Ma+=1,Ql===null&&(Ql=[]),ve(Ql,l,c)}function Bn(l,c){c=c.props.ref,l.ref=c!==void 0?c:null}function rn(l,c){throw c.$$typeof===Op?Error(a(525)):(l=Object.prototype.toString.call(c),Error(a(31,l==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":l)))}function gi(l){var c=l._init;return c(l._payload)}function bi(l){function c(At,vt){if(l){var Ot=At.deletions;Ot===null?(At.deletions=[vt],At.flags|=16):Ot.push(vt)}}function g(At,vt){if(!l)return null;for(;vt!==null;)c(At,vt),vt=vt.sibling;return null}function S(At){for(var vt=new Map;At!==null;)At.key!==null?vt.set(At.key,At):vt.set(At.index,At),At=At.sibling;return vt}function A(At,vt){return At=Qs(At,vt),At.index=0,At.sibling=null,At}function N(At,vt,Ot){return At.index=Ot,l?(Ot=At.alternate,Ot!==null?(Ot=Ot.index,Ot<vt?(At.flags|=33554434,vt):Ot):(At.flags|=33554434,vt)):(At.flags|=1048576,vt)}function Y(At){return l&&At.alternate===null&&(At.flags|=33554434),At}function st(At,vt,Ot,oe){return vt===null||vt.tag!==6?(vt=cf(Ot,At.mode,oe),vt.return=At,vt):(vt=A(vt,Ot),vt.return=At,vt)}function yt(At,vt,Ot,oe){var Ge=Ot.type;return Ge===Zo?fe(At,vt,Ot.props.children,oe,Ot.key):vt!==null&&(vt.elementType===Ge||typeof Ge=="object"&&Ge!==null&&Ge.$$typeof===eo&&gi(Ge)===vt.type)?(vt=A(vt,Ot.props),Bn(vt,Ot),vt.return=At,vt):(vt=Vl(Ot.type,Ot.key,Ot.props,null,At.mode,oe),Bn(vt,Ot),vt.return=At,vt)}function qt(At,vt,Ot,oe){return vt===null||vt.tag!==4||vt.stateNode.containerInfo!==Ot.containerInfo||vt.stateNode.implementation!==Ot.implementation?(vt=Ka(Ot,At.mode,oe),vt.return=At,vt):(vt=A(vt,Ot.children||[]),vt.return=At,vt)}function fe(At,vt,Ot,oe,Ge){return vt===null||vt.tag!==7?(vt=Yo(Ot,At.mode,oe,Ge),vt.return=At,vt):(vt=A(vt,Ot),vt.return=At,vt)}function Ee(At,vt,Ot){if(typeof vt=="string"&&vt!==""||typeof vt=="number"||typeof vt=="bigint")return vt=cf(""+vt,At.mode,Ot),vt.return=At,vt;if(typeof vt=="object"&&vt!==null){switch(vt.$$typeof){case qo:return Ot=Vl(vt.type,vt.key,vt.props,null,At.mode,Ot),Bn(Ot,vt),Ot.return=At,Ot;case bs:return vt=Ka(vt,At.mode,Ot),vt.return=At,vt;case eo:var oe=vt._init;return vt=oe(vt._payload),Ee(At,vt,Ot)}if(Jo(vt)||o(vt))return vt=Yo(vt,At.mode,Ot,null),vt.return=At,vt;if(typeof vt.then=="function")return Ee(At,mn(vt),Ot);if(vt.$$typeof===jo)return Ee(At,qu(At,vt),Ot);rn(At,vt)}return null}function ce(At,vt,Ot,oe){var Ge=vt!==null?vt.key:null;if(typeof Ot=="string"&&Ot!==""||typeof Ot=="number"||typeof Ot=="bigint")return Ge!==null?null:st(At,vt,""+Ot,oe);if(typeof Ot=="object"&&Ot!==null){switch(Ot.$$typeof){case qo:return Ot.key===Ge?yt(At,vt,Ot,oe):null;case bs:return Ot.key===Ge?qt(At,vt,Ot,oe):null;case eo:return Ge=Ot._init,Ot=Ge(Ot._payload),ce(At,vt,Ot,oe)}if(Jo(Ot)||o(Ot))return Ge!==null?null:fe(At,vt,Ot,oe,null);if(typeof Ot.then=="function")return ce(At,vt,mn(Ot),oe);if(Ot.$$typeof===jo)return ce(At,vt,qu(At,Ot),oe);rn(At,Ot)}return null}function nn(At,vt,Ot,oe,Ge){if(typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint")return At=At.get(Ot)||null,st(vt,At,""+oe,Ge);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case qo:return At=At.get(oe.key===null?Ot:oe.key)||null,yt(vt,At,oe,Ge);case bs:return At=At.get(oe.key===null?Ot:oe.key)||null,qt(vt,At,oe,Ge);case eo:var $n=oe._init;return oe=$n(oe._payload),nn(At,vt,Ot,oe,Ge)}if(Jo(oe)||o(oe))return At=At.get(Ot)||null,fe(vt,At,oe,Ge,null);if(typeof oe.then=="function")return nn(At,vt,Ot,mn(oe),Ge);if(oe.$$typeof===jo)return nn(At,vt,Ot,qu(vt,oe),Ge);rn(vt,oe)}return null}function Vr(At,vt,Ot,oe){for(var Ge=null,$n=null,Ke=vt,bn=vt=0,ni=null;Ke!==null&&bn<Ot.length;bn++){Ke.index>bn?(ni=Ke,Ke=null):ni=Ke.sibling;var wn=ce(At,Ke,Ot[bn],oe);if(wn===null){Ke===null&&(Ke=ni);break}l&&Ke&&wn.alternate===null&&c(At,Ke),vt=N(wn,vt,bn),$n===null?Ge=wn:$n.sibling=wn,$n=wn,Ke=ni}if(bn===Ot.length)return g(At,Ke),Dn&&Z(At,bn),Ge;if(Ke===null){for(;bn<Ot.length;bn++)Ke=Ee(At,Ot[bn],oe),Ke!==null&&(vt=N(Ke,vt,bn),$n===null?Ge=Ke:$n.sibling=Ke,$n=Ke);return Dn&&Z(At,bn),Ge}for(Ke=S(Ke);bn<Ot.length;bn++)ni=nn(Ke,At,bn,Ot[bn],oe),ni!==null&&(l&&ni.alternate!==null&&Ke.delete(ni.key===null?bn:ni.key),vt=N(ni,vt,bn),$n===null?Ge=ni:$n.sibling=ni,$n=ni);return l&&Ke.forEach(function(dl){return c(At,dl)}),Dn&&Z(At,bn),Ge}function au(At,vt,Ot,oe){if(Ot==null)throw Error(a(151));for(var Ge=null,$n=null,Ke=vt,bn=vt=0,ni=null,wn=Ot.next();Ke!==null&&!wn.done;bn++,wn=Ot.next()){Ke.index>bn?(ni=Ke,Ke=null):ni=Ke.sibling;var dl=ce(At,Ke,wn.value,oe);if(dl===null){Ke===null&&(Ke=ni);break}l&&Ke&&dl.alternate===null&&c(At,Ke),vt=N(dl,vt,bn),$n===null?Ge=dl:$n.sibling=dl,$n=dl,Ke=ni}if(wn.done)return g(At,Ke),Dn&&Z(At,bn),Ge;if(Ke===null){for(;!wn.done;bn++,wn=Ot.next())wn=Ee(At,wn.value,oe),wn!==null&&(vt=N(wn,vt,bn),$n===null?Ge=wn:$n.sibling=wn,$n=wn);return Dn&&Z(At,bn),Ge}for(Ke=S(Ke);!wn.done;bn++,wn=Ot.next())wn=nn(Ke,At,bn,wn.value,oe),wn!==null&&(l&&wn.alternate!==null&&Ke.delete(wn.key===null?bn:wn.key),vt=N(wn,vt,bn),$n===null?Ge=wn:$n.sibling=wn,$n=wn);return l&&Ke.forEach(function(Av){return c(At,Av)}),Dn&&Z(At,bn),Ge}function ic(At,vt,Ot,oe){if(typeof Ot=="object"&&Ot!==null&&Ot.type===Zo&&Ot.key===null&&(Ot=Ot.props.children),typeof Ot=="object"&&Ot!==null){switch(Ot.$$typeof){case qo:t:{for(var Ge=Ot.key;vt!==null;){if(vt.key===Ge){if(Ge=Ot.type,Ge===Zo){if(vt.tag===7){g(At,vt.sibling),oe=A(vt,Ot.props.children),oe.return=At,At=oe;break t}}else if(vt.elementType===Ge||typeof Ge=="object"&&Ge!==null&&Ge.$$typeof===eo&&gi(Ge)===vt.type){g(At,vt.sibling),oe=A(vt,Ot.props),Bn(oe,Ot),oe.return=At,At=oe;break t}g(At,vt);break}else c(At,vt);vt=vt.sibling}Ot.type===Zo?(oe=Yo(Ot.props.children,At.mode,oe,Ot.key),oe.return=At,At=oe):(oe=Vl(Ot.type,Ot.key,Ot.props,null,At.mode,oe),Bn(oe,Ot),oe.return=At,At=oe)}return Y(At);case bs:t:{for(Ge=Ot.key;vt!==null;){if(vt.key===Ge)if(vt.tag===4&&vt.stateNode.containerInfo===Ot.containerInfo&&vt.stateNode.implementation===Ot.implementation){g(At,vt.sibling),oe=A(vt,Ot.children||[]),oe.return=At,At=oe;break t}else{g(At,vt);break}else c(At,vt);vt=vt.sibling}oe=Ka(Ot,At.mode,oe),oe.return=At,At=oe}return Y(At);case eo:return Ge=Ot._init,Ot=Ge(Ot._payload),ic(At,vt,Ot,oe)}if(Jo(Ot))return Vr(At,vt,Ot,oe);if(o(Ot)){if(Ge=o(Ot),typeof Ge!="function")throw Error(a(150));return Ot=Ge.call(Ot),au(At,vt,Ot,oe)}if(typeof Ot.then=="function")return ic(At,vt,mn(Ot),oe);if(Ot.$$typeof===jo)return ic(At,vt,qu(At,Ot),oe);rn(At,Ot)}return typeof Ot=="string"&&Ot!==""||typeof Ot=="number"||typeof Ot=="bigint"?(Ot=""+Ot,vt!==null&&vt.tag===6?(g(At,vt.sibling),oe=A(vt,Ot),oe.return=At,At=oe):(g(At,vt),oe=cf(Ot,At.mode,oe),oe.return=At,At=oe),Y(At)):g(At,vt)}return function(At,vt,Ot,oe){try{Ma=0;var Ge=ic(At,vt,Ot,oe);return Ql=null,Ge}catch(Ke){if(Ke===_f)throw Ke;var $n=e(29,Ke,null,At.mode);return $n.lanes=oe,$n.return=At,$n}finally{}}}function Nl(l,c){l=ls,C(ss,l),C(rs,c),ls=l|c.baseLanes}function Ps(){C(ss,ls),C(rs,rs.current)}function ca(){ls=ss.current,M(rs),M(ss)}function Ca(l){var c=l.alternate;C(oi,oi.current&1),C(tr,l),zr===null&&(c===null||rs.current!==null||c.memoizedState!==null)&&(zr=l)}function Rr(l){if(l.tag===22){if(C(oi,oi.current),C(tr,l),zr===null){var c=l.alternate;c!==null&&c.memoizedState!==null&&(zr=l)}}else ua()}function ua(){C(oi,oi.current),C(tr,tr.current)}function Fe(l){M(tr),zr===l&&(zr=null),M(oi)}function fi(l){for(var c=l;c!==null;){if(c.tag===13){var g=c.memoizedState;if(g!==null&&(g=g.dehydrated,g===null||ql(g)||df(g)))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if(c.flags&128)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===l)break;for(;c.sibling===null;){if(c.return===null||c.return===l)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}function un(){throw Error(a(321))}function H(l,c){if(c===null)return!1;for(var g=0;g<c.length&&g<l.length;g++)if(!La(l[g],c[g]))return!1;return!0}function q(l,c,g,S,A,N){return lo=N,tn=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,Qe.H=l===null||l.memoizedState===null?fo:Ba,sl=!1,N=g(S,A),sl=!1,Jl&&(N=Ct(c,g,S,A)),ft(l),N}function ft(l){Qe.H=Bi;var c=Ln!==null&&Ln.next!==null;if(lo=0,xi=Ln=tn=null,co=!1,$c=0,uo=null,c)throw Error(a(300));l===null||qi||(l=l.dependencies,l!==null&&Yu(l)&&(qi=!0))}function Ct(l,c,g,S){tn=l;var A=0;do{if(Jl&&(uo=null),$c=0,Jl=!1,25<=A)throw Error(a(301));if(A+=1,xi=Ln=null,l.updateQueue!=null){var N=l.updateQueue;N.lastEffect=null,N.events=null,N.stores=null,N.memoCache!=null&&(N.memoCache.index=0)}Qe.H=ll,N=c(g,S)}while(Jl);return N}function Ht(){var l=Qe.H,c=l.useState()[0];return c=typeof c.then=="function"?at(c):c,l=l.useState()[0],(Ln!==null?Ln.memoizedState:null)!==l&&(tn.flags|=1024),c}function Bt(){var l=ol!==0;return ol=0,l}function ue(l,c,g){c.updateQueue=l.updateQueue,c.flags&=-2053,l.lanes&=~g}function ne(l){if(co){for(l=l.memoizedState;l!==null;){var c=l.queue;c!==null&&(c.pending=null),l=l.next}co=!1}lo=0,xi=Ln=tn=null,Jl=!1,$c=ol=0,uo=null}function P(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xi===null?tn.memoizedState=xi=l:xi=xi.next=l,xi}function $(){if(Ln===null){var l=tn.alternate;l=l!==null?l.memoizedState:null}else l=Ln.next;var c=xi===null?tn.memoizedState:xi.next;if(c!==null)xi=c,Ln=l;else{if(l===null)throw tn.alternate===null?Error(a(467)):Error(a(310));Ln=l,l={memoizedState:Ln.memoizedState,baseState:Ln.baseState,baseQueue:Ln.baseQueue,queue:Ln.queue,next:null},xi===null?tn.memoizedState=xi=l:xi=xi.next=l}return xi}function at(l){var c=$c;return $c+=1,uo===null&&(uo=[]),l=ve(uo,l,c),c=tn,(xi===null?c.memoizedState:xi.next)===null&&(c=c.alternate,Qe.H=c===null||c.memoizedState===null?fo:Ba),l}function nt(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return at(l);if(l.$$typeof===jo)return ha(l)}throw Error(a(438,String(l)))}function dt(l){var c=null,g=tn.updateQueue;if(g!==null&&(c=g.memoCache),c==null){var S=tn.alternate;S!==null&&(S=S.updateQueue,S!==null&&(S=S.memoCache,S!=null&&(c={data:S.data.map(function(A){return A.slice()}),index:0})))}if(c==null&&(c={data:[],index:0}),g===null&&(g=rm(),tn.updateQueue=g),g.memoCache=c,g=c.data[c.index],g===void 0)for(g=c.data[c.index]=Array(l),S=0;S<l;S++)g[S]=gn;return c.index++,g}function bt(l,c){return typeof c=="function"?c(l):c}function It(l){var c=$();return Wt(c,Ln,l)}function Wt(l,c,g){var S=l.queue;if(S===null)throw Error(a(311));S.lastRenderedReducer=g;var A=l.baseQueue,N=S.pending;if(N!==null){if(A!==null){var Y=A.next;A.next=N.next,N.next=Y}c.baseQueue=A=N,S.pending=null}if(N=l.baseState,A===null)l.memoizedState=N;else{c=A.next;var st=Y=null,yt=null,qt=c,fe=!1;do{var Ee=qt.lane&-536870913;if(Ee!==qt.lane?(An&Ee)===Ee:(lo&Ee)===Ee){var ce=qt.revertLane;if(ce===0)yt!==null&&(yt=yt.next={lane:0,revertLane:0,action:qt.action,hasEagerState:qt.hasEagerState,eagerState:qt.eagerState,next:null}),Ee===di&&(fe=!0);else if((lo&ce)===ce){qt=qt.next,ce===di&&(fe=!0);continue}else Ee={lane:0,revertLane:qt.revertLane,action:qt.action,hasEagerState:qt.hasEagerState,eagerState:qt.eagerState,next:null},yt===null?(st=yt=Ee,Y=N):yt=yt.next=Ee,tn.lanes|=ce,Fr|=ce;Ee=qt.action,sl&&g(N,Ee),N=qt.hasEagerState?qt.eagerState:g(N,Ee)}else ce={lane:Ee,revertLane:qt.revertLane,action:qt.action,hasEagerState:qt.hasEagerState,eagerState:qt.eagerState,next:null},yt===null?(st=yt=ce,Y=N):yt=yt.next=ce,tn.lanes|=Ee,Fr|=Ee;qt=qt.next}while(qt!==null&&qt!==c);if(yt===null?Y=N:yt.next=st,!La(N,l.memoizedState)&&(qi=!0,fe&&(g=ra,g!==null)))throw g;l.memoizedState=N,l.baseState=Y,l.baseQueue=yt,S.lastRenderedState=N}return A===null&&(S.lanes=0),[l.memoizedState,S.dispatch]}function Kt(l){var c=$(),g=c.queue;if(g===null)throw Error(a(311));g.lastRenderedReducer=l;var S=g.dispatch,A=g.pending,N=c.memoizedState;if(A!==null){g.pending=null;var Y=A=A.next;do N=l(N,Y.action),Y=Y.next;while(Y!==A);La(N,c.memoizedState)||(qi=!0),c.memoizedState=N,c.baseQueue===null&&(c.baseState=N),g.lastRenderedState=N}return[N,S]}function xe(l,c,g){var S=tn,A=$(),N=Dn;if(N){if(g===void 0)throw Error(a(407));g=g()}else g=c();var Y=!La((Ln||A).memoizedState,g);if(Y&&(A.memoizedState=g,qi=!0),A=A.queue,Bu(Ye.bind(null,S,A,l),[l]),A.getSnapshot!==c||Y||xi!==null&&xi.memoizedState.tag&1){if(S.flags|=2048,Qr(9,Se.bind(null,S,A,g,c),{destroy:void 0},null),Jn===null)throw Error(a(349));N||lo&60||be(S,c,g)}return g}function be(l,c,g){l.flags|=16384,l={getSnapshot:c,value:g},c=tn.updateQueue,c===null?(c=rm(),tn.updateQueue=c,c.stores=[l]):(g=c.stores,g===null?c.stores=[l]:g.push(l))}function Se(l,c,g,S){c.value=g,c.getSnapshot=S,Le(c)&&Mn(l)}function Ye(l,c,g){return g(function(){Le(c)&&Mn(l)})}function Le(l){var c=l.getSnapshot;l=l.value;try{var g=c();return!La(l,g)}catch{return!0}}function Mn(l){var c=pe(l,2);c!==null&&si(c,l,2)}function Pe(l){var c=P();if(typeof l=="function"){var g=l;if(l=g(),sl){pt(!0);try{g()}finally{pt(!1)}}}return c.memoizedState=c.baseState=l,c.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:bt,lastRenderedState:l},c}function Ne(l,c,g,S){return l.baseState=g,Wt(l,Ln,typeof S=="function"?S:bt)}function Ue(l,c,g,S,A){if(Fu(l))throw Error(a(485));if(l=c.action,l!==null){var N={payload:A,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(Y){N.listeners.push(Y)}};Qe.T!==null?g(!0):N.isTransition=!1,S(N),g=c.pending,g===null?(N.next=c.pending=N,ri(c,N)):(N.next=g.next,c.pending=g.next=N)}}function ri(l,c){var g=c.action,S=c.payload,A=l.state;if(c.isTransition){var N=Qe.T,Y={};Qe.T=Y;try{var st=g(A,S),yt=Qe.S;yt!==null&&yt(Y,st),We(l,c,st)}catch(qt){Vn(l,c,qt)}finally{Qe.T=N}}else try{N=g(A,S),We(l,c,N)}catch(qt){Vn(l,c,qt)}}function We(l,c,g){g!==null&&typeof g=="object"&&typeof g.then=="function"?g.then(function(S){sn(l,c,S)},function(S){return Vn(l,c,S)}):sn(l,c,g)}function sn(l,c,g){c.status="fulfilled",c.value=g,fn(c),l.state=g,c=l.pending,c!==null&&(g=c.next,g===c?l.pending=null:(g=g.next,c.next=g,ri(l,g)))}function Vn(l,c,g){var S=l.pending;if(l.pending=null,S!==null){S=S.next;do c.status="rejected",c.reason=g,fn(c),c=c.next;while(c!==S)}l.action=null}function fn(l){l=l.listeners;for(var c=0;c<l.length;c++)(0,l[c])()}function je(l,c){return c}function on(l,c){if(Dn){var g=Jn.formState;if(g!==null){t:{var S=tn;if(Dn){if(Kn){var A=hv(Kn,is);if(A){Kn=tl(A),S=Es(A);break t}}Qt(S)}S=!1}S&&(c=g[0])}}g=P(),g.memoizedState=g.baseState=c,S={pending:null,lanes:0,dispatch:null,lastRenderedReducer:je,lastRenderedState:c},g.queue=S,g=hp.bind(null,tn,S),S.dispatch=g,S=Pe(!1);var N=Ac.bind(null,tn,!1,S.queue);return S=P(),A={state:c,dispatch:null,action:l,pending:null},S.queue=A,g=Ue.bind(null,tn,A,N,g),A.dispatch=g,S.memoizedState=l,[c,g,!1]}function vi(l){var c=$();return In(c,Ln,l)}function In(l,c,g){c=Wt(l,c,je)[0],l=It(bt)[0],c=typeof c=="object"&&c!==null&&typeof c.then=="function"?at(c):c;var S=$(),A=S.queue,N=A.dispatch;return g!==S.memoizedState&&(tn.flags|=2048,Qr(9,Pn.bind(null,A,g),{destroy:void 0},null)),[c,N,l]}function Pn(l,c){l.action=c}function na(l){var c=$(),g=Ln;if(g!==null)return In(c,g,l);$(),c=c.memoizedState,g=$();var S=g.queue.dispatch;return g.memoizedState=l,[c,S,!1]}function Qr(l,c,g,S){return l={tag:l,create:c,inst:g,deps:S,next:null},c=tn.updateQueue,c===null&&(c=rm(),tn.updateQueue=c),g=c.lastEffect,g===null?c.lastEffect=l.next=l:(S=g.next,g.next=l,l.next=S,c.lastEffect=l),l}function Da(){return $().memoizedState}function vh(l,c,g,S){var A=P();tn.flags|=l,A.memoizedState=Qr(1|c,g,{destroy:void 0},S===void 0?null:S)}function zu(l,c,g,S){var A=$();S=S===void 0?null:S;var N=A.memoizedState.inst;Ln!==null&&S!==null&&H(S,Ln.memoizedState.deps)?A.memoizedState=Qr(c,g,N,S):(tn.flags|=l,A.memoizedState=Qr(1|c,g,N,S))}function cp(l,c){vh(8390656,8,l,c)}function Bu(l,c){zu(2048,8,l,c)}function pg(l,c){return zu(4,2,l,c)}function mg(l,c){return zu(4,4,l,c)}function Iu(l,c){if(typeof c=="function"){l=l();var g=c(l);return function(){typeof g=="function"?g():c(null)}}if(c!=null)return l=l(),c.current=l,function(){c.current=null}}function _h(l,c,g){g=g!=null?g.concat([l]):null,zu(4,4,Iu.bind(null,c,l),g)}function Pu(){}function Ul(l,c){var g=$();c=c===void 0?null:c;var S=g.memoizedState;return c!==null&&H(c,S[1])?S[0]:(g.memoizedState=[l,c],l)}function Ol(l,c){var g=$();c=c===void 0?null:c;var S=g.memoizedState;if(c!==null&&H(c,S[1]))return S[0];if(S=l(),sl){pt(!0);try{l()}finally{pt(!1)}}return g.memoizedState=[S,c],S}function yh(l,c,g){return g===void 0||lo&1073741824?l.memoizedState=c:(l.memoizedState=g,l=ef(),tn.lanes|=l,Fr|=l,g)}function xh(l,c,g,S){return La(g,c)?g:rs.current!==null?(l=yh(l,g,S),La(l,c)||(qi=!0),l):lo&42?(l=ef(),tn.lanes|=l,Fr|=l,c):(qi=!0,l.memoizedState=g)}function up(l,c,g,S,A){var N=$o();Oa(N!==0&&8>N?N:8);var Y=Qe.T,st={};Qe.T=st,Ac(l,!1,c,g);try{var yt=A(),qt=Qe.S;if(qt!==null&&qt(st,yt),yt!==null&&typeof yt=="object"&&typeof yt.then=="function"){var fe=an(yt,S);Uo(l,c,fe,va(l))}else Uo(l,c,S,va(l))}catch(Ee){Uo(l,c,{then:function(){},status:"rejected",reason:Ee},va())}finally{Oa(N),Qe.T=Y}}function Ec(l){var c=l.memoizedState;if(c!==null)return c;c={memoizedState:Yl,baseState:Yl,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:bt,lastRenderedState:Yl},next:null};var g={};return c.next={memoizedState:g,baseState:g,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:bt,lastRenderedState:g},next:null},l.memoizedState=c,l=l.alternate,l!==null&&(l.memoizedState=c),c}function Hu(){return ha(io)}function Tc(){return $().memoizedState}function Hs(){return $().memoizedState}function fp(l){for(var c=l.return;c!==null;){switch(c.tag){case 24:case 3:var g=va();l=Ce(g);var S=me(c,l,g);S!==null&&(si(S,c,g),ye(S,c,g)),c={cache:Bo()},l.payload=c;return}c=c.return}}function Sh(l,c,g){var S=va();g={lane:S,revertLane:0,action:g,hasEagerState:!1,eagerState:null,next:null},Fu(l)?Na(c,g):(g=ee(l,c,g,S),g!==null&&(si(g,l,S),Oo(g,c,S)))}function hp(l,c,g){var S=va();Uo(l,c,g,S)}function Uo(l,c,g,S){var A={lane:S,revertLane:0,action:g,hasEagerState:!1,eagerState:null,next:null};if(Fu(l))Na(c,A);else{var N=l.alternate;if(l.lanes===0&&(N===null||N.lanes===0)&&(N=c.lastRenderedReducer,N!==null))try{var Y=c.lastRenderedState,st=N(Y,g);if(A.hasEagerState=!0,A.eagerState=st,La(st,Y))return Me(l,c,A,0),Jn===null&&Q(),!1}catch{}finally{}if(g=ee(l,c,A,S),g!==null)return si(g,l,S),Oo(g,c,S),!0}return!1}function Ac(l,c,g,S){if(S={lane:2,revertLane:Re(),action:S,hasEagerState:!1,eagerState:null,next:null},Fu(l)){if(c)throw Error(a(479))}else c=ee(l,g,S,2),c!==null&&si(c,l,2)}function Fu(l){var c=l.alternate;return l===tn||c!==null&&c===tn}function Na(l,c){Jl=co=!0;var g=l.pending;g===null?c.next=c:(c.next=g.next,g.next=c),l.pending=c}function Oo(l,c,g){if(g&4194176){var S=c.lanes;S&=l.pendingLanes,g|=S,c.lanes=g,j(l,g)}}function wc(l,c,g,S){c=l.memoizedState,g=g(S,c),g=g==null?c:Di({},c,g),l.memoizedState=g,l.lanes===0&&(l.updateQueue.baseState=g)}function Rc(l,c,g,S,A,N,Y){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(S,N,Y):c.prototype&&c.prototype.isPureReactComponent?!Rt(g,S)||!Rt(A,N):!0}function gg(l,c,g,S){l=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(g,S),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(g,S),c.state!==l&&tu.enqueueReplaceState(c,c.state,null)}function Fs(l,c){var g=c;if("ref"in c){g={};for(var S in c)S!=="ref"&&(g[S]=c[S])}if(l=l.defaultProps){g===c&&(g=Di({},g));for(var A in l)g[A]===void 0&&(g[A]=l[A])}return g}function Cc(l,c){try{var g=l.onUncaughtError;g(c.value,{componentStack:c.stack})}catch(S){setTimeout(function(){throw S})}}function Dc(l,c,g){try{var S=l.onCaughtError;S(g.value,{componentStack:g.stack,errorBoundary:c.tag===1?c.stateNode:null})}catch(A){setTimeout(function(){throw A})}}function Nc(l,c,g){return g=Ce(g),g.tag=3,g.payload={element:null},g.callback=function(){Cc(l,c)},g}function dp(l){return l=Ce(l),l.tag=3,l}function vg(l,c,g,S){var A=g.type.getDerivedStateFromError;if(typeof A=="function"){var N=S.value;l.payload=function(){return A(N)},l.callback=function(){Dc(c,g,S)}}var Y=g.stateNode;Y!==null&&typeof Y.componentDidCatch=="function"&&(l.callback=function(){Dc(c,g,S),typeof A!="function"&&(Ns===null?Ns=new Set([this]):Ns.add(this));var st=S.stack;this.componentDidCatch(S.value,{componentStack:st!==null?st:""})})}function Ix(l,c,g,S,A){if(g.flags|=32768,S!==null&&typeof S=="object"&&typeof S.then=="function"){if(c=g.alternate,c!==null&&Xu(c,g,A,!0),g=tr.current,g!==null){switch(g.tag){case 13:return zr===null?Ur():g.alternate===null&&Si===0&&(Si=3),g.flags&=-257,g.flags|=65536,g.lanes=A,S===za?g.flags|=16384:(c=g.updateQueue,c===null?g.updateQueue=new Set([S]):c.add(S),Xo(l,S,A)),!1;case 22:return g.flags|=65536,S===za?g.flags|=16384:(c=g.updateQueue,c===null?(c={transitions:null,markerInstances:null,retryQueue:new Set([S])},g.updateQueue=c):(g=c.retryQueue,g===null?c.retryQueue=new Set([S]):g.add(S)),Xo(l,S,A)),!1}throw Error(a(435,g.tag))}return Xo(l,S,A),Ur(),!1}if(Dn)return c=tr.current,c!==null?(!(c.flags&65536)&&(c.flags|=256),c.flags|=65536,c.lanes=A,S!==vf&&(l=Error(a(422),{cause:S}),Yt(Dt(l,g)))):(S!==vf&&(c=Error(a(423),{cause:S}),Yt(Dt(c,g))),l=l.current.alternate,l.flags|=65536,A&=-A,l.lanes|=A,S=Dt(S,g),A=Nc(l.stateNode,S,A),lt(l,A),Si!==4&&(Si=2)),!1;var N=Error(a(520),{cause:S});if(N=Dt(N,g),nu===null?nu=[N]:nu.push(N),Si!==4&&(Si=2),c===null)return!0;S=Dt(S,g),g=c;do{switch(g.tag){case 3:return g.flags|=65536,l=A&-A,g.lanes|=l,l=Nc(g.stateNode,S,l),lt(g,l),!1;case 1:if(c=g.type,N=g.stateNode,(g.flags&128)===0&&(typeof c.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(Ns===null||!Ns.has(N))))return g.flags|=65536,A&=-A,g.lanes|=A,A=dp(A),vg(A,l,g,S),lt(g,A),!1}g=g.return}while(g!==null);return!1}function fa(l,c,g,S){c.child=l===null?Rs(c,null,g,S):rl(c,l.child,g,S)}function bh(l,c,g,S,A){g=g.render;var N=c.ref;if("ref"in S){var Y={};for(var st in S)st!=="ref"&&(Y[st]=S[st])}else Y=S;return zo(c),S=q(l,c,g,Y,N,A),st=Bt(),l!==null&&!qi?(ue(l,c,A),Gs(l,c,A)):(Dn&&st&&Tt(c),c.flags|=1,fa(l,c,S,A),c.child)}function _g(l,c,g,S,A){if(l===null){var N=g.type;return typeof N=="function"&&!Ks(N)&&N.defaultProps===void 0&&g.compare===null?(c.tag=15,c.type=N,yg(l,c,N,S,A)):(l=Vl(g.type,null,S,c,c.mode,A),l.ref=c.ref,l.return=c,c.child=l)}if(N=l.child,!_p(l,A)){var Y=N.memoizedProps;if(g=g.compare,g=g!==null?g:Rt,g(Y,S)&&l.ref===c.ref)return Gs(l,c,A)}return c.flags|=1,l=Qs(N,S),l.ref=c.ref,l.return=c,c.child=l}function yg(l,c,g,S,A){if(l!==null){var N=l.memoizedProps;if(Rt(N,S)&&l.ref===c.ref)if(qi=!1,c.pendingProps=S=N,_p(l,A))l.flags&131072&&(qi=!0);else return c.lanes=l.lanes,Gs(l,c,A)}return Mh(l,c,g,S,A)}function xg(l,c,g){var S=c.pendingProps,A=S.children,N=(c.stateNode._pendingVisibility&2)!==0,Y=l!==null?l.memoizedState:null;if(Gu(l,c),S.mode==="hidden"||N){if(c.flags&128){if(S=Y!==null?Y.baseLanes|g:g,l!==null){for(A=c.child=l.child,N=0;A!==null;)N=N|A.lanes|A.childLanes,A=A.sibling;c.childLanes=N&~S}else c.childLanes=0,c.child=null;return Sg(l,c,S,g)}if(g&536870912)c.memoizedState={baseLanes:0,cachePool:null},l!==null&&Th(c,Y!==null?Y.cachePool:null),Y!==null?Nl(c,Y):Ps(),Rr(c);else return c.lanes=c.childLanes=536870912,Sg(l,c,Y!==null?Y.baseLanes|g:g,g)}else Y!==null?(Th(c,Y.cachePool),Nl(c,Y),ua(),c.memoizedState=null):(l!==null&&Th(c,null),Ps(),ua());return fa(l,c,A,g),c.child}function Sg(l,c,g,S){var A=xp();return A=A===null?null:{parent:$r?Ai._currentValue:Ai._currentValue2,pool:A},c.memoizedState={baseLanes:g,cachePool:A},l!==null&&Th(c,null),Ps(),Rr(c),l!==null&&Xu(l,c,S,!0),null}function Gu(l,c){var g=c.ref;if(g===null)l!==null&&l.ref!==null&&(c.flags|=2097664);else{if(typeof g!="function"&&typeof g!="object")throw Error(a(284));(l===null||l.ref!==g)&&(c.flags|=2097664)}}function Mh(l,c,g,S,A){return zo(c),g=q(l,c,g,S,void 0,A),S=Bt(),l!==null&&!qi?(ue(l,c,A),Gs(l,c,A)):(Dn&&S&&Tt(c),c.flags|=1,fa(l,c,g,A),c.child)}function bg(l,c,g,S,A,N){return zo(c),c.updateQueue=null,g=Ct(c,S,g,A),ft(l),S=Bt(),l!==null&&!qi?(ue(l,c,N),Gs(l,c,N)):(Dn&&S&&Tt(c),c.flags|=1,fa(l,c,g,N),c.child)}function Mg(l,c,g,S,A){if(zo(c),c.stateNode===null){var N=jl,Y=g.contextType;typeof Y=="object"&&Y!==null&&(N=ha(Y)),N=new g(S,N),c.memoizedState=N.state!==null&&N.state!==void 0?N.state:null,N.updater=tu,c.stateNode=N,N._reactInternals=c,N=c.stateNode,N.props=S,N.state=c.memoizedState,N.refs={},ae(c),Y=g.contextType,N.context=typeof Y=="object"&&Y!==null?ha(Y):jl,N.state=c.memoizedState,Y=g.getDerivedStateFromProps,typeof Y=="function"&&(wc(c,g,Y,S),N.state=c.memoizedState),typeof g.getDerivedStateFromProps=="function"||typeof N.getSnapshotBeforeUpdate=="function"||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(Y=N.state,typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount(),Y!==N.state&&tu.enqueueReplaceState(N,N.state,null),le(c,S,N,A),wt(),N.state=c.memoizedState),typeof N.componentDidMount=="function"&&(c.flags|=4194308),S=!0}else if(l===null){N=c.stateNode;var st=c.memoizedProps,yt=Fs(g,st);N.props=yt;var qt=N.context,fe=g.contextType;Y=jl,typeof fe=="object"&&fe!==null&&(Y=ha(fe));var Ee=g.getDerivedStateFromProps;fe=typeof Ee=="function"||typeof N.getSnapshotBeforeUpdate=="function",st=c.pendingProps!==st,fe||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(st||qt!==Y)&&gg(c,N,S,Y),Sa=!1;var ce=c.memoizedState;N.state=ce,le(c,S,N,A),wt(),qt=c.memoizedState,st||ce!==qt||Sa?(typeof Ee=="function"&&(wc(c,g,Ee,S),qt=c.memoizedState),(yt=Sa||Rc(c,g,yt,S,ce,qt,Y))?(fe||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount()),typeof N.componentDidMount=="function"&&(c.flags|=4194308)):(typeof N.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=S,c.memoizedState=qt),N.props=S,N.state=qt,N.context=Y,S=yt):(typeof N.componentDidMount=="function"&&(c.flags|=4194308),S=!1)}else{N=c.stateNode,Ae(l,c),Y=c.memoizedProps,fe=Fs(g,Y),N.props=fe,Ee=c.pendingProps,ce=N.context,qt=g.contextType,yt=jl,typeof qt=="object"&&qt!==null&&(yt=ha(qt)),st=g.getDerivedStateFromProps,(qt=typeof st=="function"||typeof N.getSnapshotBeforeUpdate=="function")||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(Y!==Ee||ce!==yt)&&gg(c,N,S,yt),Sa=!1,ce=c.memoizedState,N.state=ce,le(c,S,N,A),wt();var nn=c.memoizedState;Y!==Ee||ce!==nn||Sa||l!==null&&l.dependencies!==null&&Yu(l.dependencies)?(typeof st=="function"&&(wc(c,g,st,S),nn=c.memoizedState),(fe=Sa||Rc(c,g,fe,S,ce,nn,yt)||l!==null&&l.dependencies!==null&&Yu(l.dependencies))?(qt||typeof N.UNSAFE_componentWillUpdate!="function"&&typeof N.componentWillUpdate!="function"||(typeof N.componentWillUpdate=="function"&&N.componentWillUpdate(S,nn,yt),typeof N.UNSAFE_componentWillUpdate=="function"&&N.UNSAFE_componentWillUpdate(S,nn,yt)),typeof N.componentDidUpdate=="function"&&(c.flags|=4),typeof N.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof N.componentDidUpdate!="function"||Y===l.memoizedProps&&ce===l.memoizedState||(c.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||Y===l.memoizedProps&&ce===l.memoizedState||(c.flags|=1024),c.memoizedProps=S,c.memoizedState=nn),N.props=S,N.state=nn,N.context=yt,S=fe):(typeof N.componentDidUpdate!="function"||Y===l.memoizedProps&&ce===l.memoizedState||(c.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||Y===l.memoizedProps&&ce===l.memoizedState||(c.flags|=1024),S=!1)}return N=S,Gu(l,c),S=(c.flags&128)!==0,N||S?(N=c.stateNode,g=S&&typeof g.getDerivedStateFromError!="function"?null:N.render(),c.flags|=1,l!==null&&S?(c.child=rl(c,l.child,null,A),c.child=rl(c,null,g,A)):fa(l,c,g,A),c.memoizedState=N.state,l=c.child):l=Gs(l,c,A),l}function Eg(l,c,g,S){return Jt(),c.flags|=256,fa(l,c,g,S),c.child}function pp(l){return{baseLanes:l,cachePool:Sp()}}function Vu(l,c,g){return l=l!==null?l.childLanes&~g:0,c&&(l|=gr),l}function Tg(l,c,g){var S=c.pendingProps,A=!1,N=(c.flags&128)!==0,Y;if((Y=N)||(Y=l!==null&&l.memoizedState===null?!1:(oi.current&2)!==0),Y&&(A=!0,c.flags&=-129),Y=(c.flags&32)!==0,c.flags&=-33,l===null){if(Dn){if(A?Ca(c):ua(),Dn){var st=Kn,yt;(yt=st)&&(st=pv(st,is),st!==null?(c.memoizedState={dehydrated:st,treeContext:ns!==null?{id:As,overflow:ws}:null,retryLane:536870912},yt=e(18,null,null,0),yt.stateNode=st,yt.return=c,c.child=yt,Li=c,Kn=null,yt=!0):yt=!1),yt||Qt(c)}if(st=c.memoizedState,st!==null&&(st=st.dehydrated,st!==null))return df(st)?c.lanes=16:c.lanes=536870912,null;Fe(c)}return st=S.children,S=S.fallback,A?(ua(),A=c.mode,st=gp({mode:"hidden",children:st},A),S=Yo(S,A,g,null),st.return=c,S.return=c,st.sibling=S,c.child=st,A=c.child,A.memoizedState=pp(g),A.childLanes=Vu(l,Y,g),c.memoizedState=xf,S):(Ca(c),mp(c,st))}if(yt=l.memoizedState,yt!==null&&(st=yt.dehydrated,st!==null)){if(N)c.flags&256?(Ca(c),c.flags&=-257,c=Eh(l,c,g)):c.memoizedState!==null?(ua(),c.child=l.child,c.flags|=128,c=null):(ua(),A=S.fallback,st=c.mode,S=gp({mode:"visible",children:S.children},st),A=Yo(A,st,g,null),A.flags|=2,S.return=c,A.return=c,S.sibling=A,c.child=S,rl(c,l.child,null,g),S=c.child,S.memoizedState=pp(g),S.childLanes=Vu(l,Y,g),c.memoizedState=xf,c=A);else if(Ca(c),df(st))Y=qh(st).digest,S=Error(a(419)),S.stack="",S.digest=Y,Yt({value:S,source:null,stack:null}),c=Eh(l,c,g);else if(qi||Xu(l,c,g,!1),Y=(g&l.childLanes)!==0,qi||Y){if(Y=Jn,Y!==null){if(S=g&-g,S&42)S=1;else switch(S){case 2:S=1;break;case 8:S=4;break;case 32:S=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:S=64;break;case 268435456:S=134217728;break;default:S=0}if(S=S&(Y.suspendedLanes|g)?0:S,S!==0&&S!==yt.retryLane)throw yt.retryLane=S,pe(l,S),si(Y,l,S),sm}ql(st)||Ur(),c=Eh(l,c,g)}else ql(st)?(c.flags|=128,c.child=l.child,c=lf.bind(null,l),fv(st,c),c=null):(l=yt.treeContext,Qa&&(Kn=Yp(st),Li=c,Dn=!0,Lr=null,is=!1,l!==null&&(Ja[xa++]=As,Ja[xa++]=ws,Ja[xa++]=ns,As=l.id,ws=l.overflow,ns=c)),c=mp(c,S.children),c.flags|=4096);return c}return A?(ua(),A=S.fallback,st=c.mode,yt=l.child,N=yt.sibling,S=Qs(yt,{mode:"hidden",children:S.children}),S.subtreeFlags=yt.subtreeFlags&31457280,N!==null?A=Qs(N,A):(A=Yo(A,st,g,null),A.flags|=2),A.return=c,S.return=c,S.sibling=A,c.child=S,S=A,A=c.child,st=l.child.memoizedState,st===null?st=pp(g):(yt=st.cachePool,yt!==null?(N=$r?Ai._currentValue:Ai._currentValue2,yt=yt.parent!==N?{parent:N,pool:N}:yt):yt=Sp(),st={baseLanes:st.baseLanes|g,cachePool:yt}),A.memoizedState=st,A.childLanes=Vu(l,Y,g),c.memoizedState=xf,S):(Ca(c),g=l.child,l=g.sibling,g=Qs(g,{mode:"visible",children:S.children}),g.return=c,g.sibling=null,l!==null&&(Y=c.deletions,Y===null?(c.deletions=[l],c.flags|=16):Y.push(l)),c.child=g,c.memoizedState=null,g)}function mp(l,c){return c=gp({mode:"visible",children:c},l.mode),c.return=l,l.child=c}function gp(l,c){return Ih(l,c,0,null)}function Eh(l,c,g){return rl(c,l.child,null,g),l=mp(c,c.pendingProps.children),l.flags|=2,c.memoizedState=null,l}function Ag(l,c,g){l.lanes|=c;var S=l.alternate;S!==null&&(S.lanes|=c),ku(l.return,c,g)}function vp(l,c,g,S,A){var N=l.memoizedState;N===null?l.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:S,tail:g,tailMode:A}:(N.isBackwards=c,N.rendering=null,N.renderingStartTime=0,N.last=S,N.tail=g,N.tailMode=A)}function wg(l,c,g){var S=c.pendingProps,A=S.revealOrder,N=S.tail;if(fa(l,c,S.children,g),S=oi.current,S&2)S=S&1|2,c.flags|=128;else{if(l!==null&&l.flags&128)t:for(l=c.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&Ag(l,g,c);else if(l.tag===19)Ag(l,g,c);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===c)break t;for(;l.sibling===null;){if(l.return===null||l.return===c)break t;l=l.return}l.sibling.return=l.return,l=l.sibling}S&=1}switch(C(oi,S),A){case"forwards":for(g=c.child,A=null;g!==null;)l=g.alternate,l!==null&&fi(l)===null&&(A=g),g=g.sibling;g=A,g===null?(A=c.child,c.child=null):(A=g.sibling,g.sibling=null),vp(c,!1,A,g,N);break;case"backwards":for(g=null,A=c.child,c.child=null;A!==null;){if(l=A.alternate,l!==null&&fi(l)===null){c.child=A;break}l=A.sibling,A.sibling=g,g=A,A=l}vp(c,!0,g,null,N);break;case"together":vp(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function Gs(l,c,g){if(l!==null&&(c.dependencies=l.dependencies),Fr|=c.lanes,!(g&c.childLanes))if(l!==null){if(Xu(l,c,g,!1),(g&c.childLanes)===0)return null}else return null;if(l!==null&&c.child!==l.child)throw Error(a(153));if(c.child!==null){for(l=c.child,g=Qs(l,l.pendingProps),c.child=g,g.return=c;l.sibling!==null;)l=l.sibling,g=g.sibling=Qs(l,l.pendingProps),g.return=c;g.sibling=null}return c.child}function _p(l,c){return l.lanes&c?!0:(l=l.dependencies,!!(l!==null&&Yu(l)))}function Px(l,c,g){switch(c.tag){case 3:rt(c,c.stateNode.containerInfo),Lo(c,Ai,l.memoizedState.cache),Jt();break;case 27:case 5:Et(c);break;case 4:rt(c,c.stateNode.containerInfo);break;case 10:Lo(c,c.type,c.memoizedProps.value);break;case 13:var S=c.memoizedState;if(S!==null)return S.dehydrated!==null?(Ca(c),c.flags|=128,null):g&c.child.childLanes?Tg(l,c,g):(Ca(c),l=Gs(l,c,g),l!==null?l.sibling:null);Ca(c);break;case 19:var A=(l.flags&128)!==0;if(S=(g&c.childLanes)!==0,S||(Xu(l,c,g,!1),S=(g&c.childLanes)!==0),A){if(S)return wg(l,c,g);c.flags|=128}if(A=c.memoizedState,A!==null&&(A.rendering=null,A.tail=null,A.lastEffect=null),C(oi,oi.current),S)break;return null;case 22:case 23:return c.lanes=0,xg(l,c,g);case 24:Lo(c,Ai,l.memoizedState.cache)}return Gs(l,c,g)}function Rg(l,c,g){if(l!==null)if(l.memoizedProps!==c.pendingProps)qi=!0;else{if(!_p(l,g)&&!(c.flags&128))return qi=!1,Px(l,c,g);qi=!!(l.flags&131072)}else qi=!1,Dn&&c.flags&1048576&&ht(c,Kc,c.index);switch(c.lanes=0,c.tag){case 16:t:{l=c.pendingProps;var S=c.elementType,A=S._init;if(S=A(S._payload),c.type=S,typeof S=="function")Ks(S)?(l=Fs(S,l),c.tag=1,c=Mg(null,c,S,l,g)):(c.tag=0,c=Mh(null,c,S,l,g));else{if(S!=null){if(A=S.$$typeof,A===Ph){c.tag=11,c=bh(null,c,S,l,g);break t}else if(A===Gc){c.tag=14,c=_g(null,c,S,l,g);break t}}throw c=u(S)||S,Error(a(306,c,""))}}return c;case 0:return Mh(l,c,c.type,c.pendingProps,g);case 1:return S=c.type,A=Fs(S,c.pendingProps),Mg(l,c,S,A,g);case 3:t:{if(rt(c,c.stateNode.containerInfo),l===null)throw Error(a(387));var N=c.pendingProps;A=c.memoizedState,S=A.element,Ae(l,c),le(c,N,null,g);var Y=c.memoizedState;if(N=Y.cache,Lo(c,Ai,N),N!==A.cache&&Ll(c,[Ai],g,!0),wt(),N=Y.element,Qa&&A.isDehydrated)if(A={element:N,isDehydrated:!1,cache:Y.cache},c.updateQueue.baseState=A,c.memoizedState=A,c.flags&256){c=Eg(l,c,N,g);break t}else if(N!==S){S=Dt(Error(a(424)),c),Yt(S),c=Eg(l,c,N,g);break t}else for(Qa&&(Kn=Zl(c.stateNode.containerInfo),Li=c,Dn=!0,Lr=null,is=!0),g=Rs(c,null,N,g),c.child=g;g;)g.flags=g.flags&-3|4096,g=g.sibling;else{if(Jt(),N===S){c=Gs(l,c,g);break t}fa(l,c,N,g)}c=c.child}return c;case 26:if(hr)return Gu(l,c),l===null?(g=jp(c.type,null,c.pendingProps,null))?c.memoizedState=g:Dn||(c.stateNode=$p(c.type,c.pendingProps,so.current,c)):c.memoizedState=jp(c.type,l.memoizedProps,c.pendingProps,l.memoizedState),null;case 27:if(aa)return Et(c),l===null&&aa&&Dn&&(S=c.stateNode=jh(c.type,c.pendingProps,so.current,Oi.current,!1),Li=c,is=!0,Kn=ao(S)),S=c.pendingProps.children,l!==null||Dn?fa(l,c,S,g):c.child=rl(c,null,S,g),Gu(l,c),c.child;case 5:return l===null&&Dn&&(yv(c.type,c.pendingProps,Oi.current),(A=S=Kn)&&(S=qp(S,c.type,c.pendingProps,is),S!==null?(c.stateNode=S,Li=c,Kn=ao(S),is=!1,A=!0):A=!1),A||Qt(c)),Et(c),A=c.type,N=c.pendingProps,Y=l!==null?l.memoizedProps:null,S=N.children,pa(A,N)?S=null:Y!==null&&pa(A,Y)&&(c.flags|=32),c.memoizedState!==null&&(A=q(l,c,Ht,null,null,g),$r?io._currentValue=A:io._currentValue2=A),Gu(l,c),fa(l,c,S,g),c.child;case 6:return l===null&&Dn&&(Zx(c.pendingProps,Oi.current),(l=g=Kn)&&(g=dv(g,c.pendingProps,is),g!==null?(c.stateNode=g,Li=c,Kn=null,l=!0):l=!1),l||Qt(c)),null;case 13:return Tg(l,c,g);case 4:return rt(c,c.stateNode.containerInfo),S=c.pendingProps,l===null?c.child=rl(c,null,S,g):fa(l,c,S,g),c.child;case 11:return bh(l,c,c.type,c.pendingProps,g);case 7:return fa(l,c,c.pendingProps,g),c.child;case 8:return fa(l,c,c.pendingProps.children,g),c.child;case 12:return fa(l,c,c.pendingProps.children,g),c.child;case 10:return S=c.pendingProps,Lo(c,c.type,S.value),fa(l,c,S.children,g),c.child;case 9:return A=c.type._context,S=c.pendingProps.children,zo(c),A=ha(A),S=S(A),c.flags|=1,fa(l,c,S,g),c.child;case 14:return _g(l,c,c.type,c.pendingProps,g);case 15:return yg(l,c,c.type,c.pendingProps,g);case 19:return wg(l,c,g);case 22:return xg(l,c,g);case 24:return zo(c),S=ha(Ai),l===null?(A=xp(),A===null&&(A=Jn,N=Bo(),A.pooledCache=N,N.refCount++,N!==null&&(A.pooledCacheLanes|=g),A=N),c.memoizedState={parent:S,cache:A},ae(c),Lo(c,Ai,A)):(l.lanes&g&&(Ae(l,c),le(c,null,null,g),wt()),A=l.memoizedState,N=c.memoizedState,A.parent!==S?(A={parent:S,cache:S},c.memoizedState=A,c.lanes===0&&(c.memoizedState=c.updateQueue.baseState=A),Lo(c,Ai,S)):(S=N.cache,Lo(c,Ai,S),S!==A.cache&&Ll(c,[Ai],g,!0))),fa(l,c,c.pendingProps.children,g),c.child;case 29:throw c.pendingProps}throw Error(a(156,c.tag))}function Lo(l,c,g){$r?(C(Br,c._currentValue),c._currentValue=g):(C(Br,c._currentValue2),c._currentValue2=g)}function Vs(l){var c=Br.current;$r?l._currentValue=c:l._currentValue2=c,M(Br)}function ku(l,c,g){for(;l!==null;){var S=l.alternate;if((l.childLanes&c)!==c?(l.childLanes|=c,S!==null&&(S.childLanes|=c)):S!==null&&(S.childLanes&c)!==c&&(S.childLanes|=c),l===g)break;l=l.return}}function Ll(l,c,g,S){var A=l.child;for(A!==null&&(A.return=l);A!==null;){var N=A.dependencies;if(N!==null){var Y=A.child;N=N.firstContext;t:for(;N!==null;){var st=N;N=A;for(var yt=0;yt<c.length;yt++)if(st.context===c[yt]){N.lanes|=g,st=N.alternate,st!==null&&(st.lanes|=g),ku(N.return,g,l),S||(Y=null);break t}N=st.next}}else if(A.tag===18){if(Y=A.return,Y===null)throw Error(a(341));Y.lanes|=g,N=Y.alternate,N!==null&&(N.lanes|=g),ku(Y,g,l),Y=null}else Y=A.child;if(Y!==null)Y.return=A;else for(Y=A;Y!==null;){if(Y===l){Y=null;break}if(A=Y.sibling,A!==null){A.return=Y.return,Y=A;break}Y=Y.return}A=Y}}function Xu(l,c,g,S){l=null;for(var A=c,N=!1;A!==null;){if(!N){if(A.flags&524288)N=!0;else if(A.flags&262144)break}if(A.tag===10){var Y=A.alternate;if(Y===null)throw Error(a(387));if(Y=Y.memoizedProps,Y!==null){var st=A.type;La(A.pendingProps.value,Y.value)||(l!==null?l.push(st):l=[st])}}else if(A===gf.current){if(Y=A.alternate,Y===null)throw Error(a(387));Y.memoizedState.memoizedState!==A.memoizedState.memoizedState&&(l!==null?l.push(io):l=[io])}A=A.return}l!==null&&Ll(c,l,g,S),c.flags|=262144}function Yu(l){for(l=l.firstContext;l!==null;){var c=l.context;if(!La($r?c._currentValue:c._currentValue2,l.memoizedValue))return!0;l=l.next}return!1}function zo(l){ul=l,Ir=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function ha(l){return yp(ul,l)}function qu(l,c){return ul===null&&zo(l),yp(l,c)}function yp(l,c){var g=$r?c._currentValue:c._currentValue2;if(c={context:c,memoizedValue:g,next:null},Ir===null){if(l===null)throw Error(a(308));Ir=c,l.dependencies={lanes:0,firstContext:c},l.flags|=524288}else Ir=Ir.next=c;return g}function Bo(){return{controller:new Sf,data:new Map,refCount:0}}function Zu(l){l.refCount--,l.refCount===0&&Mi(jx,function(){l.controller.abort()})}function xp(){var l=$l.current;return l!==null?l:Jn.pooledCache}function Th(l,c){c===null?C($l,$l.current):C($l,c.pool)}function Sp(){var l=xp();return l===null?null:{parent:$r?Ai._currentValue:Ai._currentValue2,pool:l}}function Ya(l){l.flags|=4}function Uc(l,c){if(l!==null&&l.child===c.child)return!1;if(c.flags&16)return!0;for(l=c.child;l!==null;){if(l.flags&13878||l.subtreeFlags&13878)return!0;l=l.sibling}return!1}function zl(l,c,g,S){if(yi)for(g=c.child;g!==null;){if(g.tag===5||g.tag===6)ff(l,g.stateNode);else if(!(g.tag===4||aa&&g.tag===27)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===c)break;for(;g.sibling===null;){if(g.return===null||g.return===c)return;g=g.return}g.sibling.return=g.return,g=g.sibling}else if(ts)for(var A=c.child;A!==null;){if(A.tag===5){var N=A.stateNode;g&&S&&(N=uv(N,A.type,A.memoizedProps)),ff(l,N)}else if(A.tag===6)N=A.stateNode,g&&S&&(N=Xp(N,A.memoizedProps)),ff(l,N);else if(A.tag!==4){if(A.tag===22&&A.memoizedState!==null)N=A.child,N!==null&&(N.return=A),zl(l,A,!0,!0);else if(A.child!==null){A.child.return=A,A=A.child;continue}}if(A===c)break;for(;A.sibling===null;){if(A.return===null||A.return===c)return;A=A.return}A.sibling.return=A.return,A=A.sibling}}function Cg(l,c,g,S){if(ts)for(var A=c.child;A!==null;){if(A.tag===5){var N=A.stateNode;g&&S&&(N=uv(N,A.type,A.memoizedProps)),kp(l,N)}else if(A.tag===6)N=A.stateNode,g&&S&&(N=Xp(N,A.memoizedProps)),kp(l,N);else if(A.tag!==4){if(A.tag===22&&A.memoizedState!==null)N=A.child,N!==null&&(N.return=A),Cg(l,A,!(A.memoizedProps!==null&&A.memoizedProps.mode==="manual"),!0);else if(A.child!==null){A.child.return=A,A=A.child;continue}}if(A===c)break;for(;A.sibling===null;){if(A.return===null||A.return===c)return;A=A.return}A.sibling.return=A.return,A=A.sibling}}function Wu(l,c){if(ts&&Uc(l,c)){l=c.stateNode;var g=l.containerInfo,S=Yh();Cg(S,c,!1,!1),l.pendingChildren=S,Ya(c),lv(g,S)}}function Ah(l,c,g,S){if(yi)l.memoizedProps!==S&&Ya(c);else if(ts){var A=l.stateNode,N=l.memoizedProps;if((l=Uc(l,c))||N!==S){var Y=Oi.current;N=ov(A,g,N,S,!l,null),N===A?c.stateNode=A:(Hh(N,g,S,Y)&&Ya(c),c.stateNode=N,l?zl(N,c,!1,!1):Ya(c))}else c.stateNode=A}}function wh(l,c,g){if(Ip(c,g)){if(l.flags|=16777216,!Pp(c,g))if(ia())l.flags|=8192;else throw ba=za,yf}else l.flags&=-16777217}function Rh(l,c){if(bv(c)){if(l.flags|=16777216,!tm(c))if(ia())l.flags|=8192;else throw ba=za,yf}else l.flags&=-16777217}function Oc(l,c){c!==null&&(l.flags|=4),l.flags&16384&&(c=l.tag!==22?L():536870912,l.lanes|=c,Wi|=c)}function Lc(l,c){if(!Dn)switch(l.tailMode){case"hidden":c=l.tail;for(var g=null;c!==null;)c.alternate!==null&&(g=c),c=c.sibling;g===null?l.tail=null:g.sibling=null;break;case"collapsed":g=l.tail;for(var S=null;g!==null;)g.alternate!==null&&(S=g),g=g.sibling;S===null?c||l.tail===null?l.tail=null:l.tail.sibling=null:S.sibling=null}}function _i(l){var c=l.alternate!==null&&l.alternate.child===l.child,g=0,S=0;if(c)for(var A=l.child;A!==null;)g|=A.lanes|A.childLanes,S|=A.subtreeFlags&31457280,S|=A.flags&31457280,A.return=l,A=A.sibling;else for(A=l.child;A!==null;)g|=A.lanes|A.childLanes,S|=A.subtreeFlags,S|=A.flags,A.return=l,A=A.sibling;return l.subtreeFlags|=S,l.childLanes=g,c}function Dg(l,c,g){var S=c.pendingProps;switch(Ft(c),c.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _i(c),null;case 1:return _i(c),null;case 3:return g=c.stateNode,S=null,l!==null&&(S=l.memoizedState.cache),c.memoizedState.cache!==S&&(c.flags|=2048),Vs(Ai),Lt(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(l===null||l.child===null)&&(ke(c)?Ya(c):l===null||l.memoizedState.isDehydrated&&!(c.flags&256)||(c.flags|=1024,Lr!==null&&(Ws(Lr),Lr=null))),Wu(l,c),_i(c),null;case 26:if(hr){g=c.type;var A=c.memoizedState;return l===null?(Ya(c),A!==null?(_i(c),Rh(c,A)):(_i(c),wh(c,g,S))):A?A!==l.memoizedState?(Ya(c),_i(c),Rh(c,A)):(_i(c),c.flags&=-16777217):(yi?l.memoizedProps!==S&&Ya(c):Ah(l,c,g,S),_i(c),wh(c,g,S)),null}case 27:if(aa){if(Nt(c),g=so.current,A=c.type,l!==null&&c.stateNode!=null)yi?l.memoizedProps!==S&&Ya(c):Ah(l,c,A,S);else{if(!S){if(c.stateNode===null)throw Error(a(166));return _i(c),null}l=Oi.current,ke(c)?we(c,l):(l=jh(A,S,g,l,!0),c.stateNode=l,Ya(c))}return _i(c),null}case 5:if(Nt(c),g=c.type,l!==null&&c.stateNode!=null)Ah(l,c,g,S);else{if(!S){if(c.stateNode===null)throw Error(a(166));return _i(c),null}l=Oi.current,ke(c)?we(c,l):(A=Bp(g,S,so.current,l,c),zl(A,c,!1,!1),c.stateNode=A,Hh(A,g,S,l)&&Ya(c))}return _i(c),wh(c,c.type,c.pendingProps),null;case 6:if(l&&c.stateNode!=null)g=l.memoizedProps,yi?g!==S&&Ya(c):ts&&(g!==S?(c.stateNode=Ni(S,so.current,Oi.current,c),Ya(c)):c.stateNode=l.stateNode);else{if(typeof S!="string"&&c.stateNode===null)throw Error(a(166));if(l=so.current,g=Oi.current,ke(c)){if(!Qa)throw Error(a(176));if(l=c.stateNode,g=c.memoizedProps,S=null,A=Li,A!==null)switch(A.tag){case 27:case 5:S=A.memoizedProps}Zh(l,g,c,S)||Qt(c)}else c.stateNode=Ni(S,l,g,c)}return _i(c),null;case 13:if(S=c.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(A=ke(c),S!==null&&S.dehydrated!==null){if(l===null){if(!A)throw Error(a(318));if(!Qa)throw Error(a(344));if(A=c.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(a(317));mv(A,c)}else Jt(),!(c.flags&128)&&(c.memoizedState=null),c.flags|=4;_i(c),A=!1}else Lr!==null&&(Ws(Lr),Lr=null),A=!0;if(!A)return c.flags&256?(Fe(c),c):(Fe(c),null)}if(Fe(c),c.flags&128)return c.lanes=g,c;if(g=S!==null,l=l!==null&&l.memoizedState!==null,g){S=c.child,A=null,S.alternate!==null&&S.alternate.memoizedState!==null&&S.alternate.memoizedState.cachePool!==null&&(A=S.alternate.memoizedState.cachePool.pool);var N=null;S.memoizedState!==null&&S.memoizedState.cachePool!==null&&(N=S.memoizedState.cachePool.pool),N!==A&&(S.flags|=2048)}return g!==l&&g&&(c.child.flags|=8192),Oc(c,c.updateQueue),_i(c),null;case 4:return Lt(),Wu(l,c),l===null&&Fg(c.stateNode.containerInfo),_i(c),null;case 10:return Vs(c.type),_i(c),null;case 19:if(M(oi),A=c.memoizedState,A===null)return _i(c),null;if(S=(c.flags&128)!==0,N=A.rendering,N===null)if(S)Lc(A,!1);else{if(Si!==0||l!==null&&l.flags&128)for(l=c.child;l!==null;){if(N=fi(l),N!==null){for(c.flags|=128,Lc(A,!1),l=N.updateQueue,c.updateQueue=l,Oc(c,l),c.subtreeFlags=0,l=g,g=c.child;g!==null;)Gl(g,l),g=g.sibling;return C(oi,oi.current&1|2),c.child}l=l.sibling}A.tail!==null&&dr()>vr&&(c.flags|=128,S=!0,Lc(A,!1),c.lanes=4194304)}else{if(!S)if(l=fi(N),l!==null){if(c.flags|=128,S=!0,l=l.updateQueue,c.updateQueue=l,Oc(c,l),Lc(A,!0),A.tail===null&&A.tailMode==="hidden"&&!N.alternate&&!Dn)return _i(c),null}else 2*dr()-A.renderingStartTime>vr&&g!==536870912&&(c.flags|=128,S=!0,Lc(A,!1),c.lanes=4194304);A.isBackwards?(N.sibling=c.child,c.child=N):(l=A.last,l!==null?l.sibling=N:c.child=N,A.last=N)}return A.tail!==null?(c=A.tail,A.rendering=c,A.tail=c.sibling,A.renderingStartTime=dr(),c.sibling=null,l=oi.current,C(oi,S?l&1|2:l&1),c):(_i(c),null);case 22:case 23:return Fe(c),ca(),S=c.memoizedState!==null,l!==null?l.memoizedState!==null!==S&&(c.flags|=8192):S&&(c.flags|=8192),S?g&536870912&&!(c.flags&128)&&(_i(c),c.subtreeFlags&6&&(c.flags|=8192)):_i(c),g=c.updateQueue,g!==null&&Oc(c,g.retryQueue),g=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(g=l.memoizedState.cachePool.pool),S=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(S=c.memoizedState.cachePool.pool),S!==g&&(c.flags|=2048),l!==null&&M($l),null;case 24:return g=null,l!==null&&(g=l.memoizedState.cache),c.memoizedState.cache!==g&&(c.flags|=2048),Vs(Ai),_i(c),null;case 25:return null}throw Error(a(156,c.tag))}function Hx(l,c){switch(Ft(c),c.tag){case 1:return l=c.flags,l&65536?(c.flags=l&-65537|128,c):null;case 3:return Vs(Ai),Lt(),l=c.flags,l&65536&&!(l&128)?(c.flags=l&-65537|128,c):null;case 26:case 27:case 5:return Nt(c),null;case 13:if(Fe(c),l=c.memoizedState,l!==null&&l.dehydrated!==null){if(c.alternate===null)throw Error(a(340));Jt()}return l=c.flags,l&65536?(c.flags=l&-65537|128,c):null;case 19:return M(oi),null;case 4:return Lt(),null;case 10:return Vs(c.type),null;case 22:case 23:return Fe(c),ca(),l!==null&&M($l),l=c.flags,l&65536?(c.flags=l&-65537|128,c):null;case 24:return Vs(Ai),null;case 25:return null;default:return null}}function Ng(l,c){switch(Ft(c),c.tag){case 3:Vs(Ai),Lt();break;case 26:case 27:case 5:Nt(c);break;case 4:Lt();break;case 13:Fe(c);break;case 19:M(oi);break;case 10:Vs(c.type);break;case 22:case 23:Fe(c),ca(),l!==null&&M($l);break;case 24:Vs(Ai)}}function ju(l,c){try{var g=c.updateQueue,S=g!==null?g.lastEffect:null;if(S!==null){var A=S.next;g=A;do{if((g.tag&l)===l){S=void 0;var N=g.create,Y=g.inst;S=N(),Y.destroy=S}g=g.next}while(g!==A)}}catch(st){kn(c,c.return,st)}}function Io(l,c,g){try{var S=c.updateQueue,A=S!==null?S.lastEffect:null;if(A!==null){var N=A.next;S=N;do{if((S.tag&l)===l){var Y=S.inst,st=Y.destroy;if(st!==void 0){Y.destroy=void 0,A=c;var yt=g;try{st()}catch(qt){kn(A,yt,qt)}}}S=S.next}while(S!==N)}}catch(qt){kn(c,c.return,qt)}}function Ug(l){var c=l.updateQueue;if(c!==null){var g=l.stateNode;try{St(c,g)}catch(S){kn(l,l.return,S)}}}function qa(l,c,g){g.props=Fs(l.type,l.memoizedProps),g.state=l.memoizedState;try{g.componentWillUnmount()}catch(S){kn(l,c,S)}}function Jr(l,c){try{var g=l.ref;if(g!==null){var S=l.stateNode;switch(l.tag){case 26:case 27:case 5:var A=Xl(S);break;default:A=S}typeof g=="function"?l.refCleanup=g(A):g.current=A}}catch(N){kn(l,c,N)}}function Za(l,c){var g=l.ref,S=l.refCleanup;if(g!==null)if(typeof S=="function")try{S()}catch(A){kn(l,c,A)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof g=="function")try{g(null)}catch(A){kn(l,c,A)}else g.current=null}function bp(l){var c=l.type,g=l.memoizedProps,S=l.stateNode;try{$g(S,c,g,l)}catch(A){kn(l,l.return,A)}}function Mp(l,c,g){try{tv(l.stateNode,l.type,g,c,l)}catch(S){kn(l,l.return,S)}}function Ep(l){return l.tag===5||l.tag===3||(hr?l.tag===26:!1)||(aa?l.tag===27:!1)||l.tag===4}function Ku(l){t:for(;;){for(;l.sibling===null;){if(l.return===null||Ep(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&(!aa||l.tag!==27)&&l.tag!==18;){if(l.flags&2||l.child===null||l.tag===4)continue t;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function Tp(l,c,g){var S=l.tag;if(S===5||S===6)l=l.stateNode,c?Gp(g,l,c):Fp(g,l);else if(!(S===4||aa&&S===27)&&(l=l.child,l!==null))for(Tp(l,c,g),l=l.sibling;l!==null;)Tp(l,c,g),l=l.sibling}function Ch(l,c,g){var S=l.tag;if(S===5||S===6)l=l.stateNode,c?ev(g,l,c):Qg(g,l);else if(!(S===4||aa&&S===27)&&(l=l.child,l!==null))for(Ch(l,c,g),l=l.sibling;l!==null;)Ch(l,c,g),l=l.sibling}function Bl(l,c,g){l=l.containerInfo;try{cv(l,g)}catch(S){kn(c,c.return,S)}}function Ap(l,c){for(Hg(l.containerInfo),qe=c;qe!==null;)if(l=qe,c=l.child,(l.subtreeFlags&1028)!==0&&c!==null)c.return=l,qe=c;else for(;qe!==null;){l=qe;var g=l.alternate;switch(c=l.flags,l.tag){case 0:break;case 11:case 15:break;case 1:if(c&1024&&g!==null){c=void 0;var S=l,A=g.memoizedProps;g=g.memoizedState;var N=S.stateNode;try{var Y=Fs(S.type,A,S.elementType===S.type);c=N.getSnapshotBeforeUpdate(Y,g),N.__reactInternalSnapshotBeforeUpdate=c}catch(st){kn(S,S.return,st)}}break;case 3:c&1024&&yi&&sv(l.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(c&1024)throw Error(a(163))}if(c=l.sibling,c!==null){c.return=l.return,qe=c;break}qe=l.return}return Y=ei,ei=!1,Y}function zc(l,c,g){var S=g.flags;switch(g.tag){case 0:case 11:case 15:Xs(l,g),S&4&&ju(5,g);break;case 1:if(Xs(l,g),S&4)if(l=g.stateNode,c===null)try{l.componentDidMount()}catch(st){kn(g,g.return,st)}else{var A=Fs(g.type,c.memoizedProps);c=c.memoizedState;try{l.componentDidUpdate(A,c,l.__reactInternalSnapshotBeforeUpdate)}catch(st){kn(g,g.return,st)}}S&64&&Ug(g),S&512&&Jr(g,g.return);break;case 3:if(Xs(l,g),S&64&&(S=g.updateQueue,S!==null)){if(l=null,g.child!==null)switch(g.child.tag){case 27:case 5:l=Xl(g.child.stateNode);break;case 1:l=g.child.stateNode}try{St(S,l)}catch(st){kn(g,g.return,st)}}break;case 26:if(hr){Xs(l,g),S&512&&Jr(g,g.return);break}case 27:case 5:Xs(l,g),c===null&&S&4&&bp(g),S&512&&Jr(g,g.return);break;case 12:Xs(l,g);break;case 13:Xs(l,g),S&4&&Il(l,g);break;case 22:if(A=g.memoizedState!==null||ho,!A){c=c!==null&&c.memoizedState!==null||en;var N=ho,Y=en;ho=A,(en=c)&&!Y?Po(l,g,(g.subtreeFlags&8772)!==0):Xs(l,g),ho=N,en=Y}S&512&&(g.memoizedProps.mode==="manual"?Jr(g,g.return):Za(g,g.return));break;default:Xs(l,g)}}function Dh(l){var c=l.alternate;c!==null&&(l.alternate=null,Dh(c)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(c=l.stateNode,c!==null&&kg(c)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}function Cr(l,c,g){for(g=g.child;g!==null;)ks(l,c,g),g=g.sibling}function ks(l,c,g){if(Yi&&typeof Yi.onCommitFiberUnmount=="function")try{Yi.onCommitFiberUnmount(jc,g)}catch{}switch(g.tag){case 26:if(hr){en||Za(g,c),Cr(l,c,g),g.memoizedState?Qp(g.memoizedState):g.stateNode&&qc(g.stateNode);break}case 27:if(aa){en||Za(g,c);var S=zn,A=Ii;zn=g.stateNode,Cr(l,c,g),im(g.stateNode),zn=S,Ii=A;break}case 5:en||Za(g,c);case 6:if(yi){if(S=zn,A=Ii,zn=null,Cr(l,c,g),zn=S,Ii=A,zn!==null)if(Ii)try{iv(zn,g.stateNode)}catch(N){kn(g,c,N)}else try{nv(zn,g.stateNode)}catch(N){kn(g,c,N)}}else Cr(l,c,g);break;case 18:yi&&zn!==null&&(Ii?Zp(zn,g.stateNode):_v(zn,g.stateNode));break;case 4:yi?(S=zn,A=Ii,zn=g.stateNode.containerInfo,Ii=!0,Cr(l,c,g),zn=S,Ii=A):(ts&&Bl(g.stateNode,g,Yh()),Cr(l,c,g));break;case 0:case 11:case 14:case 15:en||Io(2,g,c),en||Io(4,g,c),Cr(l,c,g);break;case 1:en||(Za(g,c),S=g.stateNode,typeof S.componentWillUnmount=="function"&&qa(g,c,S)),Cr(l,c,g);break;case 21:Cr(l,c,g);break;case 22:en||Za(g,c),en=(S=en)||g.memoizedState!==null,Cr(l,c,g),en=S;break;default:Cr(l,c,g)}}function Il(l,c){if(Qa&&c.memoizedState===null&&(l=c.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{Wh(l)}catch(g){kn(c,c.return,g)}}function wp(l){switch(l.tag){case 13:case 19:var c=l.stateNode;return c===null&&(c=l.stateNode=new Sn),c;case 22:return l=l.stateNode,c=l._retryCache,c===null&&(c=l._retryCache=new Sn),c;default:throw Error(a(435,l.tag))}}function Nh(l,c){var g=wp(l);c.forEach(function(S){var A=Bh.bind(null,l,S);g.has(S)||(g.add(S),S.then(A,A))})}function Vi(l,c){var g=c.deletions;if(g!==null)for(var S=0;S<g.length;S++){var A=g[S],N=l,Y=c;if(yi){var st=Y;t:for(;st!==null;){switch(st.tag){case 27:case 5:zn=st.stateNode,Ii=!1;break t;case 3:zn=st.stateNode.containerInfo,Ii=!0;break t;case 4:zn=st.stateNode.containerInfo,Ii=!0;break t}st=st.return}if(zn===null)throw Error(a(160));ks(N,Y,A),zn=null,Ii=!1}else ks(N,Y,A);N=A.alternate,N!==null&&(N.return=null),A.return=null}if(c.subtreeFlags&13878)for(c=c.child;c!==null;)Rp(c,l),c=c.sibling}function Rp(l,c){var g=l.alternate,S=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:Vi(c,l),Wa(l),S&4&&(Io(3,l,l.return),ju(3,l),Io(5,l,l.return));break;case 1:Vi(c,l),Wa(l),S&512&&(en||g===null||Za(g,g.return)),S&64&&ho&&(l=l.updateQueue,l!==null&&(S=l.callbacks,S!==null&&(g=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=g===null?S:g.concat(S))));break;case 26:if(hr){var A=Ea;Vi(c,l),Wa(l),S&512&&(en||g===null||Za(g,g.return)),S&4&&(S=g!==null?g.memoizedState:null,c=l.memoizedState,g===null?c===null?l.stateNode===null?l.stateNode=xv(A,l.type,l.memoizedProps,l):Jp(A,l.type,l.stateNode):l.stateNode=Kp(A,c,l.memoizedProps):S!==c?(S===null?g.stateNode!==null&&qc(g.stateNode):Qp(S),c===null?Jp(A,l.type,l.stateNode):Kp(A,c,l.memoizedProps)):c===null&&l.stateNode!==null&&Mp(l,l.memoizedProps,g.memoizedProps));break}case 27:if(aa&&S&4&&l.alternate===null){A=l.stateNode;var N=l.memoizedProps;try{Mv(A),nm(l.type,N,A,l)}catch(fe){kn(l,l.return,fe)}}case 5:if(Vi(c,l),Wa(l),S&512&&(en||g===null||Za(g,g.return)),yi){if(l.flags&32){c=l.stateNode;try{Xh(c)}catch(fe){kn(l,l.return,fe)}}S&4&&l.stateNode!=null&&(c=l.memoizedProps,Mp(l,c,g!==null?g.memoizedProps:c)),S&1024&&(Qn=!0)}break;case 6:if(Vi(c,l),Wa(l),S&4&&yi){if(l.stateNode===null)throw Error(a(162));S=l.memoizedProps,g=g!==null?g.memoizedProps:S,c=l.stateNode;try{Jg(c,g,S)}catch(fe){kn(l,l.return,fe)}}break;case 3:if(hr?(Sv(),A=Ea,Ea=Ji(c.containerInfo),Vi(c,l),Ea=A):Vi(c,l),Wa(l),S&4){if(yi&&Qa&&g!==null&&g.memoizedState.isDehydrated)try{vv(c.containerInfo)}catch(fe){kn(l,l.return,fe)}if(ts){S=c.containerInfo,g=c.pendingChildren;try{cv(S,g)}catch(fe){kn(l,l.return,fe)}}}Qn&&(Qn=!1,Cp(l));break;case 4:hr?(g=Ea,Ea=Ji(l.stateNode.containerInfo),Vi(c,l),Wa(l),Ea=g):(Vi(c,l),Wa(l)),S&4&&ts&&Bl(l.stateNode,l,l.stateNode.pendingChildren);break;case 12:Vi(c,l),Wa(l);break;case 13:Vi(c,l),Wa(l),l.child.flags&8192&&l.memoizedState!==null!=(g!==null&&g.memoizedState!==null)&&(lm=dr()),S&4&&(S=l.updateQueue,S!==null&&(l.updateQueue=null,Nh(l,S)));break;case 22:S&512&&(en||g===null||Za(g,g.return)),A=l.memoizedState!==null;var Y=g!==null&&g.memoizedState!==null,st=ho,yt=en;if(ho=st||A,en=yt||Y,Vi(c,l),en=yt,ho=st,Wa(l),c=l.stateNode,c._current=l,c._visibility&=-3,c._visibility|=c._pendingVisibility&2,S&8192&&(c._visibility=A?c._visibility&-2:c._visibility|1,A&&(c=ho||en,g===null||Y||c||Bc(l)),yi&&(l.memoizedProps===null||l.memoizedProps.mode!=="manual"))){t:if(g=null,yi)for(c=l;;){if(c.tag===5||hr&&c.tag===26||aa&&c.tag===27){if(g===null){Y=g=c;try{N=Y.stateNode,A?av(N):qx(Y.stateNode,Y.memoizedProps)}catch(fe){kn(Y,Y.return,fe)}}}else if(c.tag===6){if(g===null){Y=c;try{var qt=Y.stateNode;A?rv(qt):Vp(qt,Y.memoizedProps)}catch(fe){kn(Y,Y.return,fe)}}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===l)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===l)break t;for(;c.sibling===null;){if(c.return===null||c.return===l)break t;g===c&&(g=null),c=c.return}g===c&&(g=null),c.sibling.return=c.return,c=c.sibling}}S&4&&(S=l.updateQueue,S!==null&&(g=S.retryQueue,g!==null&&(S.retryQueue=null,Nh(l,g))));break;case 19:Vi(c,l),Wa(l),S&4&&(S=l.updateQueue,S!==null&&(l.updateQueue=null,Nh(l,S)));break;case 21:break;default:Vi(c,l),Wa(l)}}function Wa(l){var c=l.flags;if(c&2){try{if(yi&&(!aa||l.tag!==27)){t:{for(var g=l.return;g!==null;){if(Ep(g)){var S=g;break t}g=g.return}throw Error(a(160))}switch(S.tag){case 27:if(aa){var A=S.stateNode,N=Ku(l);Ch(l,N,A);break}case 5:var Y=S.stateNode;S.flags&32&&(Xh(Y),S.flags&=-33);var st=Ku(l);Ch(l,st,Y);break;case 3:case 4:var yt=S.stateNode.containerInfo,qt=Ku(l);Tp(l,qt,yt);break;default:throw Error(a(161))}}}catch(fe){kn(l,l.return,fe)}l.flags&=-3}c&4096&&(l.flags&=-4097)}function Cp(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var c=l;Cp(c),c.tag===5&&c.flags&1024&&Yg(c.stateNode),l=l.sibling}}function Xs(l,c){if(c.subtreeFlags&8772)for(c=c.child;c!==null;)zc(l,c.alternate,c),c=c.sibling}function Bc(l){for(l=l.child;l!==null;){var c=l;switch(c.tag){case 0:case 11:case 14:case 15:Io(4,c,c.return),Bc(c);break;case 1:Za(c,c.return);var g=c.stateNode;typeof g.componentWillUnmount=="function"&&qa(c,c.return,g),Bc(c);break;case 26:case 27:case 5:Za(c,c.return),Bc(c);break;case 22:Za(c,c.return),c.memoizedState===null&&Bc(c);break;default:Bc(c)}l=l.sibling}}function Po(l,c,g){for(g=g&&(c.subtreeFlags&8772)!==0,c=c.child;c!==null;){var S=c.alternate,A=l,N=c,Y=N.flags;switch(N.tag){case 0:case 11:case 15:Po(A,N,g),ju(4,N);break;case 1:if(Po(A,N,g),S=N,A=S.stateNode,typeof A.componentDidMount=="function")try{A.componentDidMount()}catch(qt){kn(S,S.return,qt)}if(S=N,A=S.updateQueue,A!==null){var st=S.stateNode;try{var yt=A.shared.hiddenCallbacks;if(yt!==null)for(A.shared.hiddenCallbacks=null,A=0;A<yt.length;A++)ct(yt[A],st)}catch(qt){kn(S,S.return,qt)}}g&&Y&64&&Ug(N),Jr(N,N.return);break;case 26:case 27:case 5:Po(A,N,g),g&&S===null&&Y&4&&bp(N),Jr(N,N.return);break;case 12:Po(A,N,g);break;case 13:Po(A,N,g),g&&Y&4&&Il(A,N);break;case 22:N.memoizedState===null&&Po(A,N,g),Jr(N,N.return);break;default:Po(A,N,g)}c=c.sibling}}function Uh(l,c){var g=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(g=l.memoizedState.cachePool.pool),l=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(l=c.memoizedState.cachePool.pool),l!==g&&(l!=null&&l.refCount++,g!=null&&Zu(g))}function Oh(l,c){l=null,c.alternate!==null&&(l=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==l&&(c.refCount++,l!=null&&Zu(l))}function Ys(l,c,g,S){if(c.subtreeFlags&10256)for(c=c.child;c!==null;)Dr(l,c,g,S),c=c.sibling}function Dr(l,c,g,S){var A=c.flags;switch(c.tag){case 0:case 11:case 15:Ys(l,c,g,S),A&2048&&ju(9,c);break;case 3:Ys(l,c,g,S),A&2048&&(l=null,c.alternate!==null&&(l=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==l&&(c.refCount++,l!=null&&Zu(l)));break;case 12:if(A&2048){Ys(l,c,g,S),l=c.stateNode;try{var N=c.memoizedProps,Y=N.id,st=N.onPostCommit;typeof st=="function"&&st(Y,c.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch(yt){kn(c,c.return,yt)}}else Ys(l,c,g,S);break;case 23:break;case 22:N=c.stateNode,c.memoizedState!==null?N._visibility&4?Ys(l,c,g,S):vs(l,c):N._visibility&4?Ys(l,c,g,S):(N._visibility|=4,da(l,c,g,S,(c.subtreeFlags&10256)!==0)),A&2048&&Uh(c.alternate,c);break;case 24:Ys(l,c,g,S),A&2048&&Oh(c.alternate,c);break;default:Ys(l,c,g,S)}}function da(l,c,g,S,A){for(A=A&&(c.subtreeFlags&10256)!==0,c=c.child;c!==null;){var N=l,Y=c,st=g,yt=S,qt=Y.flags;switch(Y.tag){case 0:case 11:case 15:da(N,Y,st,yt,A),ju(8,Y);break;case 23:break;case 22:var fe=Y.stateNode;Y.memoizedState!==null?fe._visibility&4?da(N,Y,st,yt,A):vs(N,Y):(fe._visibility|=4,da(N,Y,st,yt,A)),A&&qt&2048&&Uh(Y.alternate,Y);break;case 24:da(N,Y,st,yt,A),A&&qt&2048&&Oh(Y.alternate,Y);break;default:da(N,Y,st,yt,A)}c=c.sibling}}function vs(l,c){if(c.subtreeFlags&10256)for(c=c.child;c!==null;){var g=l,S=c,A=S.flags;switch(S.tag){case 22:vs(g,S),A&2048&&Uh(S.alternate,S);break;case 24:vs(g,S),A&2048&&Oh(S.alternate,S);break;default:vs(g,S)}c=c.sibling}}function qs(l){if(l.subtreeFlags&fl)for(l=l.child;l!==null;)Qu(l),l=l.sibling}function Qu(l){switch(l.tag){case 26:qs(l),l.flags&fl&&(l.memoizedState!==null?em(Ea,l.memoizedState,l.memoizedProps):Hp(l.type,l.memoizedProps));break;case 5:qs(l),l.flags&fl&&Hp(l.type,l.memoizedProps);break;case 3:case 4:if(hr){var c=Ea;Ea=Ji(l.stateNode.containerInfo),qs(l),Ea=c}else qs(l);break;case 22:l.memoizedState===null&&(c=l.alternate,c!==null&&c.memoizedState!==null?(c=fl,fl=16777216,qs(l),fl=c):qs(l));break;default:qs(l)}}function Ju(l){var c=l.alternate;if(c!==null&&(l=c.child,l!==null)){c.child=null;do c=l.sibling,l.sibling=null,l=c;while(l!==null)}}function Pl(l){var c=l.deletions;if(l.flags&16){if(c!==null)for(var g=0;g<c.length;g++){var S=c[g];qe=S,tf(S,l)}Ju(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)Zs(l),l=l.sibling}function Zs(l){switch(l.tag){case 0:case 11:case 15:Pl(l),l.flags&2048&&Io(9,l,l.return);break;case 3:Pl(l);break;case 12:Pl(l);break;case 22:var c=l.stateNode;l.memoizedState!==null&&c._visibility&4&&(l.return===null||l.return.tag!==13)?(c._visibility&=-5,$u(l)):Pl(l);break;default:Pl(l)}}function $u(l){var c=l.deletions;if(l.flags&16){if(c!==null)for(var g=0;g<c.length;g++){var S=c[g];qe=S,tf(S,l)}Ju(l)}for(l=l.child;l!==null;){switch(c=l,c.tag){case 0:case 11:case 15:Io(8,c,c.return),$u(c);break;case 22:g=c.stateNode,g._visibility&4&&(g._visibility&=-5,$u(c));break;default:$u(c)}l=l.sibling}}function tf(l,c){for(;qe!==null;){var g=qe;switch(g.tag){case 0:case 11:case 15:Io(8,g,c);break;case 23:case 22:if(g.memoizedState!==null&&g.memoizedState.cachePool!==null){var S=g.memoizedState.cachePool.pool;S!=null&&S.refCount++}break;case 24:Zu(g.memoizedState.cache)}if(S=g.child,S!==null)S.return=g,qe=S;else t:for(g=l;qe!==null;){S=qe;var A=S.sibling,N=S.return;if(Dh(S),S===g){qe=null;break t}if(A!==null){A.return=N,qe=A;break t}qe=N}}}function Ho(l){var c=Gh(l);if(c!=null){if(typeof c.memoizedProps["data-testname"]!="string")throw Error(a(364));return c}if(l=Wg(l),l===null)throw Error(a(362));return l.stateNode.current}function Lh(l,c){var g=l.tag;switch(c.$$typeof){case pi:if(l.type===c.value)return!0;break;case os:t:{for(c=c.value,l=[l,0],g=0;g<l.length;){var S=l[g++],A=S.tag,N=l[g++],Y=c[N];if(A!==5&&A!==26&&A!==27||!Ms(S)){for(;Y!=null&&Lh(S,Y);)N++,Y=c[N];if(N===c.length){c=!0;break t}else for(S=S.child;S!==null;)l.push(S,N),S=S.sibling}}c=!1}return c;case Cs:if((g===5||g===26||g===27)&&Kg(l.stateNode,c.value))return!0;break;case Ia:if((g===5||g===6||g===26||g===27)&&(l=jg(l),l!==null&&0<=l.indexOf(c.value)))return!0;break;case eu:if((g===5||g===26||g===27)&&(l=l.memoizedProps["data-testname"],typeof l=="string"&&l.toLowerCase()===c.value.toLowerCase()))return!0;break;default:throw Error(a(365))}return!1}function ja(l){switch(l.$$typeof){case pi:return"<"+(u(l.value)||"Unknown")+">";case os:return":has("+(ja(l)||"")+")";case Cs:return'[role="'+l.value+'"]';case Ia:return'"'+l.value+'"';case eu:return'[data-testname="'+l.value+'"]';default:throw Error(a(365))}}function Hl(l,c){var g=[];l=[l,0];for(var S=0;S<l.length;){var A=l[S++],N=A.tag,Y=l[S++],st=c[Y];if(N!==5&&N!==26&&N!==27||!Ms(A)){for(;st!=null&&Lh(A,st);)Y++,st=c[Y];if(Y===c.length)g.push(A);else for(A=A.child;A!==null;)l.push(A,Y),A=A.sibling}}return g}function Fo(l,c){if(!Yc)throw Error(a(363));l=Ho(l),l=Hl(l,c),c=[],l=Array.from(l);for(var g=0;g<l.length;){var S=l[g++],A=S.tag;if(A===5||A===26||A===27)Ms(S)||c.push(S.stateNode);else for(S=S.child;S!==null;)l.push(S),S=S.sibling}return c}function va(){if(Tn&2&&An!==0)return An&-An;if(Qe.T!==null){var l=di;return l!==0?l:Re()}return Gg()}function ef(){gr===0&&(gr=!(An&536870912)||Dn?G():536870912);var l=tr.current;return l!==null&&(l.flags|=32),gr}function si(l,c,g){(l===Jn&&qn===2||l.cancelPendingCommit!==null)&&(Go(l,0),Ua(l,An,gr,!1)),V(l,g),(!(Tn&2)||l!==Jn)&&(l===Jn&&(!(Tn&2)&&(mo|=g),Si===4&&Ua(l,An,gr,!1)),he(l))}function ur(l,c,g){if(Tn&6)throw Error(a(327));var S=!g&&(c&60)===0&&(c&l.expiredLanes)===0||B(l,c),A=S?Og(l,c):af(l,c,!0),N=S;do{if(A===0){Hr&&!S&&Ua(l,c,0,!1);break}else if(A===6)Ua(l,c,0,!Pr);else{if(g=l.current.alternate,N&&!js(g)){A=af(l,c,!1),N=!1;continue}if(A===2){if(N=c,l.errorRecoveryDisabledLanes&N)var Y=0;else Y=l.pendingLanes&-536870913,Y=Y!==0?Y:Y&536870912?536870912:0;if(Y!==0){c=Y;t:{var st=l;A=nu;var yt=Qa&&st.current.memoizedState.isDehydrated;if(yt&&(Go(st,Y).flags|=256),Y=af(st,Y,!1),Y!==2){if(tc&&!yt){st.errorRecoveryDisabledLanes|=N,mo|=N,A=4;break t}N=Gr,Gr=A,N!==null&&Ws(N)}A=Y}if(N=!1,A!==2)continue}}if(A===1){Go(l,0),Ua(l,c,0,!0);break}t:{switch(S=l,A){case 0:case 1:throw Error(a(345));case 4:if((c&4194176)===c){Ua(S,c,gr,!Pr);break t}break;case 2:Gr=null;break;case 3:case 5:break;default:throw Error(a(329))}if(S.finishedWork=g,S.finishedLanes=c,(c&62914560)===c&&(N=lm+300-dr(),10<N)){if(Ua(S,c,gr,!Pr),z(S,0)!==0)break t;S.timeoutHandle=Fh(_s.bind(null,S,g,Gr,ec,rd,c,gr,mo,Wi,Pr,2,-0,0),N);break t}_s(S,g,Gr,ec,rd,c,gr,mo,Wi,Pr,0,-0,0)}}break}while(!0);he(l)}function Ws(l){Gr===null?Gr=l:Gr.push.apply(Gr,l)}function _s(l,c,g,S,A,N,Y,st,yt,qt,fe,Ee,ce){var nn=c.subtreeFlags;if((nn&8192||(nn&16785408)===16785408)&&(Xx(),Qu(c),c=Xg(),c!==null)){l.cancelPendingCommit=c(zh.bind(null,l,g,S,A,Y,st,yt,1,Ee,ce)),Ua(l,N,Y,!qt);return}zh(l,g,S,A,Y,st,yt,fe,Ee,ce)}function js(l){for(var c=l;;){var g=c.tag;if((g===0||g===11||g===15)&&c.flags&16384&&(g=c.updateQueue,g!==null&&(g=g.stores,g!==null)))for(var S=0;S<g.length;S++){var A=g[S],N=A.getSnapshot;A=A.value;try{if(!La(N(),A))return!1}catch{return!1}}if(g=c.child,c.subtreeFlags&16384&&g!==null)g.return=c,c=g;else{if(c===l)break;for(;c.sibling===null;){if(c.return===null||c.return===l)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function Ua(l,c,g,S){c&=~Pa,c&=~mo,l.suspendedLanes|=c,l.pingedLanes&=~c,S&&(l.warmLanes|=c),S=l.expirationTimes;for(var A=c;0<A;){var N=31-Ui(A),Y=1<<N;S[N]=-1,A&=~Y}g!==0&&W(l,g,c)}function Dp(){return Tn&6?!0:(K(0),!1)}function nf(){if(vn!==null){if(qn===0)var l=vn.return;else l=vn,Ir=ul=null,ne(l),Ql=null,Ma=0,l=vn;for(;l!==null;)Ng(l.alternate,l),l=l.return;vn=null}}function Go(l,c){l.finishedWork=null,l.finishedLanes=0;var g=l.timeoutHandle;g!==Xc&&(l.timeoutHandle=Xc,hf(g)),g=l.cancelPendingCommit,g!==null&&(l.cancelPendingCommit=null,g()),nf(),Jn=l,vn=g=Qs(l.current,null),An=c,qn=0,Zi=null,Pr=!1,Hr=B(l,c),tc=!1,Wi=gr=Pa=mo=Fr=Si=0,Gr=nu=null,rd=!1,c&8&&(c|=c&32);var S=l.entangledLanes;if(S!==0)for(l=l.entanglements,S&=c;0<S;){var A=31-Ui(S),N=1<<A;c|=l[A],S&=~N}return ls=c,Q(),g}function _a(l,c){tn=null,Qe.H=Bi,c===_f?(c=Ie(),qn=3):c===yf?(c=Ie(),qn=4):qn=c===sm?8:c!==null&&typeof c=="object"&&typeof c.then=="function"?6:1,Zi=c,vn===null&&(Si=1,Cc(l,Dt(c,l.current)))}function ia(){var l=tr.current;return l===null?!0:(An&4194176)===An?zr===null:(An&62914560)===An||An&536870912?l===zr:!1}function Cn(){var l=Qe.H;return Qe.H=Bi,l===null?Bi:l}function Nr(){var l=Qe.A;return Qe.A=po,l}function Ur(){Si=4,Pr||(An&4194176)!==An&&tr.current!==null||(Hr=!0),!(Fr&134217727)&&!(mo&134217727)||Jn===null||Ua(Jn,An,gr,!1)}function af(l,c,g){var S=Tn;Tn|=2;var A=Cn(),N=Nr();(Jn!==l||An!==c)&&(ec=null,Go(l,c)),c=!1;var Y=Si;t:do try{if(qn!==0&&vn!==null){var st=vn,yt=Zi;switch(qn){case 8:nf(),Y=6;break t;case 3:case 2:case 6:tr.current===null&&(c=!0);var qt=qn;if(qn=0,Zi=null,ys(l,st,yt,qt),g&&Hr){Y=0;break t}break;default:qt=qn,qn=0,Zi=null,ys(l,st,yt,qt)}}Fl(),Y=Si;break}catch(fe){_a(l,fe)}while(!0);return c&&l.shellSuspendCounter++,Ir=ul=null,Tn=S,Qe.H=A,Qe.A=N,vn===null&&(Jn=null,An=0,Q()),Y}function Fl(){for(;vn!==null;)Ic(vn)}function Og(l,c){var g=Tn;Tn|=2;var S=Cn(),A=Nr();Jn!==l||An!==c?(ec=null,vr=dr()+500,Go(l,c)):Hr=B(l,c);t:do try{if(qn!==0&&vn!==null){c=vn;var N=Zi;e:switch(qn){case 1:qn=0,Zi=null,ys(l,c,N,1);break;case 2:if(Gt(N)){qn=0,Zi=null,Pc(c);break}c=function(){qn===2&&Jn===l&&(qn=7),he(l)},N.then(c,c);break t;case 3:qn=7;break t;case 4:qn=5;break t;case 7:Gt(N)?(qn=0,Zi=null,Pc(c)):(qn=0,Zi=null,ys(l,c,N,7));break;case 5:var Y=null;switch(vn.tag){case 26:Y=vn.memoizedState;case 5:case 27:var st=vn,yt=st.type,qt=st.pendingProps;if(Y?tm(Y):Pp(yt,qt)){qn=0,Zi=null;var fe=st.sibling;if(fe!==null)vn=fe;else{var Ee=st.return;Ee!==null?(vn=Ee,Vo(Ee)):vn=null}break e}}qn=0,Zi=null,ys(l,c,N,5);break;case 6:qn=0,Zi=null,ys(l,c,N,6);break;case 8:nf(),Si=6;break t;default:throw Error(a(462))}}Lg();break}catch(ce){_a(l,ce)}while(!0);return Ir=ul=null,Qe.H=S,Qe.A=A,Tn=g,vn!==null?0:(Jn=null,An=0,Q(),Si)}function Lg(){for(;vn!==null&&!nl();)Ic(vn)}function Ic(l){var c=Rg(l.alternate,l,ls);l.memoizedProps=l.pendingProps,c===null?Vo(l):vn=c}function Pc(l){var c=l,g=c.alternate;switch(c.tag){case 15:case 0:c=bg(g,c,c.pendingProps,c.type,void 0,An);break;case 11:c=bg(g,c,c.pendingProps,c.type.render,c.ref,An);break;case 5:ne(c);default:Ng(g,c),c=vn=Gl(c,ls),c=Rg(g,c,ls)}l.memoizedProps=l.pendingProps,c===null?Vo(l):vn=c}function ys(l,c,g,S){Ir=ul=null,ne(c),Ql=null,Ma=0;var A=c.return;try{if(Ix(l,A,c,g,An)){Si=1,Cc(l,Dt(g,l.current)),vn=null;return}}catch(N){if(A!==null)throw vn=A,N;Si=1,Cc(l,Dt(g,l.current)),vn=null;return}c.flags&32768?(Dn||S===1?l=!0:Hr||An&536870912?l=!1:(Pr=l=!0,(S===2||S===3||S===6)&&(S=tr.current,S!==null&&S.tag===13&&(S.flags|=16384))),Np(c,l)):Vo(c)}function Vo(l){var c=l;do{if(c.flags&32768){Np(c,Pr);return}l=c.return;var g=Dg(c.alternate,c,ls);if(g!==null){vn=g;return}if(c=c.sibling,c!==null){vn=c;return}vn=c=l}while(c!==null);Si===0&&(Si=5)}function Np(l,c){do{var g=Hx(l.alternate,l);if(g!==null){g.flags&=32767,vn=g;return}if(g=l.return,g!==null&&(g.flags|=32768,g.subtreeFlags=0,g.deletions=null),!c&&(l=l.sibling,l!==null)){vn=l;return}vn=l=g}while(l!==null);Si=6,vn=null}function zh(l,c,g,S,A,N,Y,st,yt,qt){var fe=Qe.T,Ee=$o();try{Oa(2),Qe.T=null,zg(l,c,g,S,Ee,A,N,Y,st,yt,qt)}finally{Qe.T=fe,Oa(Ee)}}function zg(l,c,g,S,A,N,Y,st){do ko();while(hl!==null);if(Tn&6)throw Error(a(327));var yt=l.finishedWork;if(S=l.finishedLanes,yt===null)return null;if(l.finishedWork=null,l.finishedLanes=0,yt===l.current)throw Error(a(177));l.callbackNode=null,l.callbackPriority=0,l.cancelPendingCommit=null;var qt=yt.lanes|yt.childLanes;if(qt|=as,et(l,S,qt,N,Y,st),l===Jn&&(vn=Jn=null,An=0),!(yt.subtreeFlags&10256)&&!(yt.flags&10256)||go||(go=!0,sd=qt,Mf=g,Bg(Wc,function(){return ko(),null})),g=(yt.flags&15990)!==0,yt.subtreeFlags&15990||g?(g=Qe.T,Qe.T=null,N=$o(),Oa(2),Y=Tn,Tn|=4,Ap(l,yt),Rp(yt,l),kx(l.containerInfo),l.current=yt,zc(l,yt.alternate,yt),ro(),Tn=Y,Oa(N),Qe.T=g):l.current=yt,go?(go=!1,hl=l,iu=S):rf(l,qt),qt=l.pendingLanes,qt===0&&(Ns=null),tt(yt.stateNode),he(l),c!==null)for(A=l.onRecoverableError,yt=0;yt<c.length;yt++)qt=c[yt],A(qt.value,{componentStack:qt.stack});return iu&3&&ko(),qt=l.pendingLanes,S&4194218&&qt&42?l===cm?nc++:(nc=0,cm=l):nc=0,K(0),null}function rf(l,c){(l.pooledCacheLanes&=c)===0&&(c=l.pooledCache,c!=null&&(l.pooledCache=null,Zu(c)))}function ko(){if(hl!==null){var l=hl,c=sd;sd=0;var g=ut(iu),S=32>g?32:g;g=Qe.T;var A=$o();try{if(Oa(S),Qe.T=null,hl===null)var N=!1;else{S=Mf,Mf=null;var Y=hl,st=iu;if(hl=null,iu=0,Tn&6)throw Error(a(331));var yt=Tn;if(Tn|=4,Zs(Y.current),Dr(Y,Y.current,st,S),Tn=yt,K(0,!1),Yi&&typeof Yi.onPostCommitFiberRoot=="function")try{Yi.onPostCommitFiberRoot(jc,Y)}catch{}N=!0}return N}finally{Oa(A),Qe.T=g,rf(l,c)}}return!1}function Hc(l,c,g){c=Dt(g,c),c=Nc(l.stateNode,c,2),l=me(l,c,2),l!==null&&(V(l,2),he(l))}function kn(l,c,g){if(l.tag===3)Hc(l,l,g);else for(;c!==null;){if(c.tag===3){Hc(c,l,g);break}else if(c.tag===1){var S=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof S.componentDidCatch=="function"&&(Ns===null||!Ns.has(S))){l=Dt(g,l),g=dp(2),S=me(c,g,2),S!==null&&(vg(g,S,c,l),V(S,2),he(S));break}}c=c.return}}function Xo(l,c,g){var S=l.pingCache;if(S===null){S=l.pingCache=new bf;var A=new Set;S.set(c,A)}else A=S.get(c),A===void 0&&(A=new Set,S.set(c,A));A.has(g)||(tc=!0,A.add(g),l=sf.bind(null,l,c,g),c.then(l,l))}function sf(l,c,g){var S=l.pingCache;S!==null&&S.delete(c),l.pingedLanes|=l.suspendedLanes&g,l.warmLanes&=~g,Jn===l&&(An&g)===g&&(Si===4||Si===3&&(An&62914560)===An&&300>dr()-lm?!(Tn&2)&&Go(l,0):Pa|=g,Wi===An&&(Wi=0)),he(l)}function of(l,c){c===0&&(c=L()),l=pe(l,c),l!==null&&(V(l,c),he(l))}function lf(l){var c=l.memoizedState,g=0;c!==null&&(g=c.retryLane),of(l,g)}function Bh(l,c){var g=0;switch(l.tag){case 13:var S=l.stateNode,A=l.memoizedState;A!==null&&(g=A.retryLane);break;case 19:S=l.stateNode;break;case 22:S=l.stateNode._retryCache;break;default:throw Error(a(314))}S!==null&&S.delete(c),of(l,g)}function Bg(l,c){return Ts(l,c)}function Ig(l,c,g,S){this.tag=l,this.key=g,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=S,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ks(l){return l=l.prototype,!(!l||!l.isReactComponent)}function Qs(l,c){var g=l.alternate;return g===null?(g=e(l.tag,c,l.key,l.mode),g.elementType=l.elementType,g.type=l.type,g.stateNode=l.stateNode,g.alternate=l,l.alternate=g):(g.pendingProps=c,g.type=l.type,g.flags=0,g.subtreeFlags=0,g.deletions=null),g.flags=l.flags&31457280,g.childLanes=l.childLanes,g.lanes=l.lanes,g.child=l.child,g.memoizedProps=l.memoizedProps,g.memoizedState=l.memoizedState,g.updateQueue=l.updateQueue,c=l.dependencies,g.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},g.sibling=l.sibling,g.index=l.index,g.ref=l.ref,g.refCleanup=l.refCleanup,g}function Gl(l,c){l.flags&=31457282;var g=l.alternate;return g===null?(l.childLanes=0,l.lanes=c,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=g.childLanes,l.lanes=g.lanes,l.child=g.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=g.memoizedProps,l.memoizedState=g.memoizedState,l.updateQueue=g.updateQueue,l.type=g.type,c=g.dependencies,l.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),l}function Vl(l,c,g,S,A,N){var Y=0;if(S=l,typeof l=="function")Ks(l)&&(Y=1);else if(typeof l=="string")Y=hr&&aa?Qi(l,g,Oi.current)?26:Kh(l)?27:5:hr?Qi(l,g,Oi.current)?26:5:aa&&Kh(l)?27:5;else t:switch(l){case Zo:return Yo(g.children,A,N,c);case kl:Y=8,A|=24;break;case Wo:return l=e(12,g,c,A|2),l.elementType=Wo,l.lanes=N,l;case to:return l=e(13,g,c,A),l.elementType=to,l.lanes=N,l;case uf:return l=e(19,g,c,A),l.elementType=uf,l.lanes=N,l;case no:return Ih(g,A,N,c);default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case Gx:case jo:Y=10;break t;case Lp:Y=9;break t;case Ph:Y=11;break t;case Gc:Y=14;break t;case eo:Y=16,S=null;break t}Y=29,g=Error(a(130,l===null?"null":typeof l,"")),S=null}return c=e(Y,g,c,A),c.elementType=l,c.type=S,c.lanes=N,c}function Yo(l,c,g,S){return l=e(7,l,S,c),l.lanes=g,l}function Ih(l,c,g,S){l=e(22,l,S,c),l.elementType=no,l.lanes=g;var A={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var N=A._current;if(N===null)throw Error(a(456));if(!(A._pendingVisibility&2)){var Y=pe(N,2);Y!==null&&(A._pendingVisibility|=2,si(Y,N,2))}},attach:function(){var N=A._current;if(N===null)throw Error(a(456));if(A._pendingVisibility&2){var Y=pe(N,2);Y!==null&&(A._pendingVisibility&=-3,si(Y,N,2))}}};return l.stateNode=A,l}function cf(l,c,g){return l=e(6,l,null,c),l.lanes=g,l}function Ka(l,c,g){return c=e(4,l.children!==null?l.children:[],l.key,c),c.lanes=g,c.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},c}function xs(l,c,g,S,A,N,Y,st){this.tag=1,this.containerInfo=l,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Xc,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=O(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=O(0),this.hiddenUpdates=O(null),this.identifierPrefix=S,this.onUncaughtError=A,this.onCaughtError=N,this.onRecoverableError=Y,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=st,this.incompleteTransitions=new Map}function Js(l,c,g,S,A,N,Y,st,yt,qt,fe,Ee){return l=new xs(l,c,g,Y,st,yt,qt,Ee),c=1,N===!0&&(c|=24),N=e(3,null,null,c),l.current=N,N.stateNode=l,c=Bo(),c.refCount++,l.pooledCache=c,c.refCount++,N.memoizedState={element:S,isDehydrated:g,cache:c},ae(N),l}function Up(l){return l?(l=jl,l):jl}function $s(l){var c=l._reactInternals;if(c===void 0)throw typeof l.render=="function"?Error(a(188)):(l=Object.keys(l).join(","),Error(a(268,l)));return l=b(c),l=l!==null?E(l):null,l===null?null:Xl(l.stateNode)}function Ss(l,c,g,S,A,N){A=Up(A),S.context===null?S.context=A:S.pendingContext=A,S=Ce(c),S.payload={element:g},N=N===void 0?null:N,N!==null&&(S.callback=N),g=me(l,S,c),g!==null&&(si(g,l,c),ye(g,l,c))}function ki(l,c){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var g=l.retryLane;l.retryLane=g!==0&&g<c?g:c}}function Fc(l,c){ki(l,c),(l=l.alternate)&&ki(l,c)}var En={},Fx=tp(),fr=Bb(),Di=Object.assign,Op=Symbol.for("react.element"),qo=Symbol.for("react.transitional.element"),bs=Symbol.for("react.portal"),Zo=Symbol.for("react.fragment"),kl=Symbol.for("react.strict_mode"),Wo=Symbol.for("react.profiler"),Gx=Symbol.for("react.provider"),Lp=Symbol.for("react.consumer"),jo=Symbol.for("react.context"),Ph=Symbol.for("react.forward_ref"),to=Symbol.for("react.suspense"),uf=Symbol.for("react.suspense_list"),Gc=Symbol.for("react.memo"),eo=Symbol.for("react.lazy"),no=Symbol.for("react.offscreen"),gn=Symbol.for("react.memo_cache_sentinel"),Yn=Symbol.iterator,Xi=Symbol.for("react.client.reference"),Qe=Fx.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ko,Qo,Vc=!1,Jo=Array.isArray,kc=t.rendererVersion,Vx=t.rendererPackageName,Ti=t.extraDevToolsConfig,Xl=t.getPublicInstance,zp=t.getRootHostContext,Pg=t.getChildHostContext,Hg=t.prepareForCommit,kx=t.resetAfterCommit,Bp=t.createInstance,ff=t.appendInitialChild,Hh=t.finalizeInitialChildren,pa=t.shouldSetTextContent,Ni=t.createTextInstance,Fh=t.scheduleTimeout,hf=t.cancelTimeout,Xc=t.noTimeout,$r=t.isPrimaryRenderer;t.warnsIfNotActing;var yi=t.supportsMutation,ts=t.supportsPersistence,Qa=t.supportsHydration,Gh=t.getInstanceFromNode;t.beforeActiveInstanceBlur,t.afterActiveInstanceBlur;var Fg=t.preparePortalMount;t.prepareScopeUpdate,t.getInstanceFromScope;var Oa=t.setCurrentUpdatePriority,$o=t.getCurrentUpdatePriority,Gg=t.resolveUpdatePriority;t.resolveEventType,t.resolveEventTimeStamp;var Vg=t.shouldAttemptEagerTransition,kg=t.detachDeletedInstance;t.requestPostPaintCallback;var Ip=t.maySuspendCommit,Pp=t.preloadInstance,Xx=t.startSuspendingCommit,Hp=t.suspendInstance,Xg=t.waitForCommitToBeReady,Yl=t.NotPendingTransition,io=t.HostTransitionContext,Yg=t.resetFormInstance;t.bindToConsole;var qg=t.supportsMicrotasks,Zg=t.scheduleMicrotask,Yc=t.supportsTestSelectors,Wg=t.findFiberRoot,Yx=t.getBoundingRect,jg=t.getTextContent,Ms=t.isHiddenSubtree,Kg=t.matchAccessibilityRole,Vh=t.setFocusIfFocusable,kh=t.setupIntersectionObserver,Qg=t.appendChild,Fp=t.appendChildToContainer,Jg=t.commitTextUpdate,$g=t.commitMount,tv=t.commitUpdate,ev=t.insertBefore,Gp=t.insertInContainerBefore,nv=t.removeChild,iv=t.removeChildFromContainer,Xh=t.resetTextContent,av=t.hideInstance,rv=t.hideTextInstance,qx=t.unhideInstance,Vp=t.unhideTextInstance,sv=t.clearContainer,ov=t.cloneInstance,Yh=t.createContainerChildSet,kp=t.appendChildToContainerChildSet,lv=t.finalizeContainerChildren,cv=t.replaceContainerChildren,uv=t.cloneHiddenInstance,Xp=t.cloneHiddenTextInstance,ql=t.isSuspenseInstancePending,df=t.isSuspenseInstanceFallback,qh=t.getSuspenseInstanceFallbackErrorDetails,fv=t.registerSuspenseInstanceRetry,hv=t.canHydrateFormStateMarker,Es=t.isFormStateMarkerMatching,tl=t.getNextHydratableSibling,ao=t.getFirstHydratableChild,Zl=t.getFirstHydratableChildWithinContainer,Yp=t.getFirstHydratableChildWithinSuspenseInstance,qp=t.canHydrateInstance,dv=t.canHydrateTextInstance,pv=t.canHydrateSuspenseInstance,Wl=t.hydrateInstance,Zh=t.hydrateTextInstance,mv=t.hydrateSuspenseInstance,gv=t.getNextHydratableInstanceAfterSuspenseInstance,vv=t.commitHydratedContainer,Wh=t.commitHydratedSuspenseInstance,_v=t.clearSuspenseBoundary,Zp=t.clearSuspenseBoundaryFromContainer,Wp=t.shouldDeleteUnhydratedTailInstances;t.diffHydratedPropsForDevWarnings,t.diffHydratedTextForDevWarnings,t.describeHydratableInstanceForDevWarnings;var yv=t.validateHydratableInstance,Zx=t.validateHydratableTextInstance,hr=t.supportsResources,Qi=t.isHostHoistableType,Ji=t.getHoistableRoot,jp=t.getResource,Kp=t.acquireResource,Qp=t.releaseResource,xv=t.hydrateHoistable,Jp=t.mountHoistable,qc=t.unmountHoistable,$p=t.createHoistableInstance,Sv=t.prepareToCommitHoistables,bv=t.mayResourceSuspendCommit,tm=t.preloadResource,em=t.suspendResource,aa=t.supportsSingletons,jh=t.resolveSingletonInstance,Mv=t.clearSingleton,nm=t.acquireSingletonInstance,im=t.releaseSingletonInstance,Kh=t.isHostSingletonType,Qh=[],el=-1,jl={},Ui=Math.clz32?Math.clz32:U,am=Math.log,Wx=Math.LN2,pf=128,Zc=4194304,Ts=fr.unstable_scheduleCallback,es=fr.unstable_cancelCallback,nl=fr.unstable_shouldYield,ro=fr.unstable_requestPaint,dr=fr.unstable_now,Jh=fr.unstable_ImmediatePriority,mf=fr.unstable_UserBlockingPriority,Wc=fr.unstable_NormalPriority,Kl=fr.unstable_IdlePriority,ya=fr.log,$h=fr.unstable_setDisableYieldValue,jc=null,Yi=null,La=typeof Object.is=="function"?Object.is:ot,td=new WeakMap,pr=[],mr=0,il=null,Kc=0,Ja=[],xa=0,ns=null,As=1,ws="",Oi=w(null),Or=w(null),so=w(null),gf=w(null),Li=null,Kn=null,Dn=!1,Lr=null,is=!1,vf=Error(a(519)),$a=[],oo=0,as=0,hi=null,al=null,ed=!1,zi=!1,nd=!1,Qc=0,Jc=null,id=0,di=0,ra=null,Sa=!1,ad=!1,Ev=Object.prototype.hasOwnProperty,_f=Error(a(460)),yf=Error(a(474)),za={then:function(){}},ba=null,Ql=null,Ma=0,rl=bi(!0),Rs=bi(!1),rs=w(null),ss=w(0),tr=w(null),zr=null,oi=w(0),lo=0,tn=null,Ln=null,xi=null,co=!1,Jl=!1,sl=!1,ol=0,$c=0,uo=null,Tv=0,rm=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}},Bi={readContext:ha,use:nt,useCallback:un,useContext:un,useEffect:un,useImperativeHandle:un,useLayoutEffect:un,useInsertionEffect:un,useMemo:un,useReducer:un,useRef:un,useState:un,useDebugValue:un,useDeferredValue:un,useTransition:un,useSyncExternalStore:un,useId:un};Bi.useCacheRefresh=un,Bi.useMemoCache=un,Bi.useHostTransitionStatus=un,Bi.useFormState=un,Bi.useActionState=un,Bi.useOptimistic=un;var fo={readContext:ha,use:nt,useCallback:function(l,c){return P().memoizedState=[l,c===void 0?null:c],l},useContext:ha,useEffect:cp,useImperativeHandle:function(l,c,g){g=g!=null?g.concat([l]):null,vh(4194308,4,Iu.bind(null,c,l),g)},useLayoutEffect:function(l,c){return vh(4194308,4,l,c)},useInsertionEffect:function(l,c){vh(4,2,l,c)},useMemo:function(l,c){var g=P();c=c===void 0?null:c;var S=l();if(sl){pt(!0);try{l()}finally{pt(!1)}}return g.memoizedState=[S,c],S},useReducer:function(l,c,g){var S=P();if(g!==void 0){var A=g(c);if(sl){pt(!0);try{g(c)}finally{pt(!1)}}}else A=c;return S.memoizedState=S.baseState=A,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:A},S.queue=l,l=l.dispatch=Sh.bind(null,tn,l),[S.memoizedState,l]},useRef:function(l){var c=P();return l={current:l},c.memoizedState=l},useState:function(l){l=Pe(l);var c=l.queue,g=hp.bind(null,tn,c);return c.dispatch=g,[l.memoizedState,g]},useDebugValue:Pu,useDeferredValue:function(l,c){var g=P();return yh(g,l,c)},useTransition:function(){var l=Pe(!1);return l=up.bind(null,tn,l.queue,!0,!1),P().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,c,g){var S=tn,A=P();if(Dn){if(g===void 0)throw Error(a(407));g=g()}else{if(g=c(),Jn===null)throw Error(a(349));An&60||be(S,c,g)}A.memoizedState=g;var N={value:g,getSnapshot:c};return A.queue=N,cp(Ye.bind(null,S,N,l),[l]),S.flags|=2048,Qr(9,Se.bind(null,S,N,g,c),{destroy:void 0},null),g},useId:function(){var l=P(),c=Jn.identifierPrefix;if(Dn){var g=ws,S=As;g=(S&~(1<<32-Ui(S)-1)).toString(32)+g,c=":"+c+"R"+g,g=ol++,0<g&&(c+="H"+g.toString(32)),c+=":"}else g=Tv++,c=":"+c+"r"+g.toString(32)+":";return l.memoizedState=c},useCacheRefresh:function(){return P().memoizedState=fp.bind(null,tn)}};fo.useMemoCache=dt,fo.useHostTransitionStatus=Hu,fo.useFormState=on,fo.useActionState=on,fo.useOptimistic=function(l){var c=P();c.memoizedState=c.baseState=l;var g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return c.queue=g,c=Ac.bind(null,tn,!0,g),g.dispatch=c,[l,c]};var Ba={readContext:ha,use:nt,useCallback:Ul,useContext:ha,useEffect:Bu,useImperativeHandle:_h,useInsertionEffect:pg,useLayoutEffect:mg,useMemo:Ol,useReducer:It,useRef:Da,useState:function(){return It(bt)},useDebugValue:Pu,useDeferredValue:function(l,c){var g=$();return xh(g,Ln.memoizedState,l,c)},useTransition:function(){var l=It(bt)[0],c=$().memoizedState;return[typeof l=="boolean"?l:at(l),c]},useSyncExternalStore:xe,useId:Tc};Ba.useCacheRefresh=Hs,Ba.useMemoCache=dt,Ba.useHostTransitionStatus=Hu,Ba.useFormState=vi,Ba.useActionState=vi,Ba.useOptimistic=function(l,c){var g=$();return Ne(g,Ln,l,c)};var ll={readContext:ha,use:nt,useCallback:Ul,useContext:ha,useEffect:Bu,useImperativeHandle:_h,useInsertionEffect:pg,useLayoutEffect:mg,useMemo:Ol,useReducer:Kt,useRef:Da,useState:function(){return Kt(bt)},useDebugValue:Pu,useDeferredValue:function(l,c){var g=$();return Ln===null?yh(g,l,c):xh(g,Ln.memoizedState,l,c)},useTransition:function(){var l=Kt(bt)[0],c=$().memoizedState;return[typeof l=="boolean"?l:at(l),c]},useSyncExternalStore:xe,useId:Tc};ll.useCacheRefresh=Hs,ll.useMemoCache=dt,ll.useHostTransitionStatus=Hu,ll.useFormState=na,ll.useActionState=na,ll.useOptimistic=function(l,c){var g=$();return Ln!==null?Ne(g,Ln,l,c):(g.baseState=l,[l,g.queue.dispatch])};var tu={isMounted:function(l){return(l=l._reactInternals)?_(l)===l:!1},enqueueSetState:function(l,c,g){l=l._reactInternals;var S=va(),A=Ce(S);A.payload=c,g!=null&&(A.callback=g),c=me(l,A,S),c!==null&&(si(c,l,S),ye(c,l,S))},enqueueReplaceState:function(l,c,g){l=l._reactInternals;var S=va(),A=Ce(S);A.tag=1,A.payload=c,g!=null&&(A.callback=g),c=me(l,A,S),c!==null&&(si(c,l,S),ye(c,l,S))},enqueueForceUpdate:function(l,c){l=l._reactInternals;var g=va(),S=Ce(g);S.tag=2,c!=null&&(S.callback=c),c=me(l,S,g),c!==null&&(si(c,l,g),ye(c,l,g))}},cl=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var c=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(c))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",l);return}console.error(l)},sm=Error(a(461)),qi=!1,xf={dehydrated:null,treeContext:null,retryLane:0},Br=w(null),ul=null,Ir=null,Sf=typeof AbortController<"u"?AbortController:function(){var l=[],c=this.signal={aborted:!1,addEventListener:function(g,S){l.push(S)}};this.abort=function(){c.aborted=!0,l.forEach(function(g){return g()})}},Mi=fr.unstable_scheduleCallback,jx=fr.unstable_NormalPriority,Ai={$$typeof:jo,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},om=Qe.S;Qe.S=function(l,c){typeof c=="object"&&c!==null&&typeof c.then=="function"&&de(l,c),om!==null&&om(l,c)};var $l=w(null),ho=!1,en=!1,Qn=!1,Sn=typeof WeakSet=="function"?WeakSet:Set,qe=null,ei=!1,zn=null,Ii=!1,Ea=null,fl=8192,po={getCacheForType:function(l){var c=ha(Ai),g=c.data.get(l);return g===void 0&&(g=l(),c.data.set(l,g)),g}},pi=0,os=1,Cs=2,eu=3,Ia=4;if(typeof Symbol=="function"&&Symbol.for){var Ds=Symbol.for;pi=Ds("selector.component"),os=Ds("selector.has_pseudo_class"),Cs=Ds("selector.role"),eu=Ds("selector.test_id"),Ia=Ds("selector.text")}var bf=typeof WeakMap=="function"?WeakMap:Map,Tn=0,Jn=null,vn=null,An=0,qn=0,Zi=null,Pr=!1,Hr=!1,tc=!1,ls=0,Si=0,Fr=0,mo=0,Pa=0,gr=0,Wi=0,nu=null,Gr=null,rd=!1,lm=0,vr=1/0,ec=null,Ns=null,go=!1,hl=null,iu=0,sd=0,Mf=null,nc=0,cm=null;return En.attemptContinuousHydration=function(l){if(l.tag===13){var c=pe(l,67108864);c!==null&&si(c,l,67108864),Fc(l,67108864)}},En.attemptHydrationAtCurrentPriority=function(l){if(l.tag===13){var c=va(),g=pe(l,c);g!==null&&si(g,l,c),Fc(l,c)}},En.attemptSynchronousHydration=function(l){switch(l.tag){case 3:if(l=l.stateNode,l.current.memoizedState.isDehydrated){var c=D(l.pendingLanes);if(c!==0){for(l.pendingLanes|=2,l.entangledLanes|=2;c;){var g=1<<31-Ui(c);l.entanglements[1]|=g,c&=~g}he(l),!(Tn&6)&&(vr=dr()+500,K(0))}}break;case 13:c=pe(l,2),c!==null&&si(c,l,2),Dp(),Fc(l,2)}},En.batchedUpdates=function(l,c){return l(c)},En.createComponentSelector=function(l){return{$$typeof:pi,value:l}},En.createContainer=function(l,c,g,S,A,N,Y,st,yt,qt){return Js(l,c,!1,null,g,S,N,Y,st,yt,qt,null)},En.createHasPseudoClassSelector=function(l){return{$$typeof:os,value:l}},En.createHydrationContainer=function(l,c,g,S,A,N,Y,st,yt,qt,fe,Ee,ce){return l=Js(g,S,!0,l,A,N,st,yt,qt,fe,Ee,ce),l.context=Up(null),g=l.current,S=va(),A=Ce(S),A.callback=c??null,me(g,A,S),l.current.lanes=S,V(l,S),he(l),l},En.createPortal=function(l,c,g){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:bs,key:S==null?null:""+S,children:l,containerInfo:c,implementation:g}},En.createRoleSelector=function(l){return{$$typeof:Cs,value:l}},En.createTestNameSelector=function(l){return{$$typeof:eu,value:l}},En.createTextSelector=function(l){return{$$typeof:Ia,value:l}},En.defaultOnCaughtError=function(l){console.error(l)},En.defaultOnRecoverableError=function(l){cl(l)},En.defaultOnUncaughtError=function(l){cl(l)},En.deferredUpdates=function(l){var c=Qe.T,g=$o();try{return Oa(32),Qe.T=null,l()}finally{Oa(g),Qe.T=c}},En.discreteUpdates=function(l,c,g,S,A){var N=Qe.T,Y=$o();try{return Oa(2),Qe.T=null,l(c,g,S,A)}finally{Oa(Y),Qe.T=N,Tn===0&&(vr=dr()+500)}},En.findAllNodes=Fo,En.findBoundingRects=function(l,c){if(!Yc)throw Error(a(363));c=Fo(l,c),l=[];for(var g=0;g<c.length;g++)l.push(Yx(c[g]));for(c=l.length-1;0<c;c--){g=l[c];for(var S=g.x,A=S+g.width,N=g.y,Y=N+g.height,st=c-1;0<=st;st--)if(c!==st){var yt=l[st],qt=yt.x,fe=qt+yt.width,Ee=yt.y,ce=Ee+yt.height;if(S>=qt&&N>=Ee&&A<=fe&&Y<=ce){l.splice(c,1);break}else if(S!==qt||g.width!==yt.width||ce<N||Ee>Y){if(!(N!==Ee||g.height!==yt.height||fe<S||qt>A)){qt>S&&(yt.width+=qt-S,yt.x=S),fe<A&&(yt.width=A-qt),l.splice(c,1);break}}else{Ee>N&&(yt.height+=Ee-N,yt.y=N),ce<Y&&(yt.height=Y-Ee),l.splice(c,1);break}}}return l},En.findHostInstance=$s,En.findHostInstanceWithNoPortals=function(l){return l=b(l),l=l!==null?R(l):null,l===null?null:Xl(l.stateNode)},En.findHostInstanceWithWarning=function(l){return $s(l)},En.flushPassiveEffects=ko,En.flushSyncFromReconciler=function(l){var c=Tn;Tn|=1;var g=Qe.T,S=$o();try{if(Oa(2),Qe.T=null,l)return l()}finally{Oa(S),Qe.T=g,Tn=c,!(Tn&6)&&K(0)}},En.flushSyncWork=Dp,En.focusWithin=function(l,c){if(!Yc)throw Error(a(363));for(l=Ho(l),c=Hl(l,c),c=Array.from(c),l=0;l<c.length;){var g=c[l++],S=g.tag;if(!Ms(g)){if((S===5||S===26||S===27)&&Vh(g.stateNode))return!0;for(g=g.child;g!==null;)c.push(g),g=g.sibling}}return!1},En.getFindAllNodesFailureDescription=function(l,c){if(!Yc)throw Error(a(363));var g=0,S=[];l=[Ho(l),0];for(var A=0;A<l.length;){var N=l[A++],Y=N.tag,st=l[A++],yt=c[st];if((Y!==5&&Y!==26&&Y!==27||!Ms(N))&&(Lh(N,yt)&&(S.push(ja(yt)),st++,st>g&&(g=st)),st<c.length))for(N=N.child;N!==null;)l.push(N,st),N=N.sibling}if(g<c.length){for(l=[];g<c.length;g++)l.push(ja(c[g]));return`findAllNodes was able to match part of the selector:
  `+(S.join(" > ")+`

No matching component was found for:
  `)+l.join(" > ")}return null},En.getPublicRootInstance=function(l){if(l=l.current,!l.child)return null;switch(l.child.tag){case 27:case 5:return Xl(l.child.stateNode);default:return l.child.stateNode}},En.injectIntoDevTools=function(){var l={bundleType:0,version:kc,rendererPackageName:Vx,currentDispatcherRef:Qe,findFiberByHostInstance:Gh,reconcilerVersion:"19.0.0"};if(Ti!==null&&(l.rendererConfig=Ti),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")l=!1;else{var c=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(c.isDisabled||!c.supportsFiber)l=!0;else{try{jc=c.inject(l),Yi=c}catch{}l=!!c.checkDCE}}return l},En.isAlreadyRendering=function(){return!1},En.observeVisibleRects=function(l,c,g,S){if(!Yc)throw Error(a(363));l=Fo(l,c);var A=kh(l,g,S).disconnect;return{disconnect:function(){A()}}},En.shouldError=function(){return null},En.shouldSuspend=function(){return!1},En.startHostTransition=function(l,c,g,S){if(l.tag!==5)throw Error(a(476));var A=Ec(l).queue;up(l,A,c,Yl,g===null?i:function(){var N=Ec(l).next.queue;return Uo(l,N,{},va()),g(S)})},En.updateContainer=function(l,c,g,S){var A=c.current,N=va();return Ss(A,N,l,c,g,S),N},En.updateContainerSync=function(l,c,g,S){return c.tag===0&&ko(),Ss(c.current,2,l,c,g,S),2},En},n.exports.default=n.exports,Object.defineProperty(n.exports,"__esModule",{value:!0})}(HS)),HS.exports}var Uw;function FF(){return Uw||(Uw=1,PS.exports=HF()),PS.exports}var GF=FF();const VF=Qy(GF);var Ow=Bb();const kF=n=>typeof n=="object"&&typeof n.then=="function",Qf=[];function WC(n,t,e=(i,a)=>i===a){if(n===t)return!0;if(!n||!t)return!1;const i=n.length;if(t.length!==i)return!1;for(let a=0;a<i;a++)if(!e(n[a],t[a]))return!1;return!0}function jC(n,t=null,e=!1,i={}){t===null&&(t=[n]);for(const o of Qf)if(WC(t,o.keys,o.equal)){if(e)return;if(Object.prototype.hasOwnProperty.call(o,"error"))throw o.error;if(Object.prototype.hasOwnProperty.call(o,"response"))return i.lifespan&&i.lifespan>0&&(o.timeout&&clearTimeout(o.timeout),o.timeout=setTimeout(o.remove,i.lifespan)),o.response;if(!e)throw o.promise}const a={keys:t,equal:i.equal,remove:()=>{const o=Qf.indexOf(a);o!==-1&&Qf.splice(o,1)},promise:(kF(n)?n:n(...t)).then(o=>{a.response=o,i.lifespan&&i.lifespan>0&&(a.timeout=setTimeout(a.remove,i.lifespan))}).catch(o=>a.error=o)};if(Qf.push(a),!e)throw a.promise}const XF=(n,t,e)=>jC(n,t,!1,e),YF=(n,t,e)=>void jC(n,t,!0,e),qF=n=>{if(n===void 0||n.length===0)Qf.splice(0,Qf.length);else{const t=Qf.find(e=>WC(n,e.keys,e.equal));t&&t.remove()}};function FM(n,t,e){if(!n)return;if(e(n)===!0)return n;let i=t?n.return:n.child;for(;i;){const a=FM(i,t,e);if(a)return a;i=t?null:i.sibling}}function KC(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const GM=KC(kt.createContext(null));class QC extends kt.Component{render(){return kt.createElement(GM.Provider,{value:this._reactInternals},this.props.children)}}function JC(){const n=kt.useContext(GM);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const t=kt.useId();return kt.useMemo(()=>{for(const e of[n,n==null?void 0:n.alternate]){if(!e)continue;const i=FM(e,!1,a=>{let o=a.memoizedState;for(;o;){if(o.memoizedState===t)return!0;o=o.next}});if(i)return i}},[n,t])}const ZF=Symbol.for("react.context"),WF=n=>n!==null&&typeof n=="object"&&"$$typeof"in n&&n.$$typeof===ZF;function jF(){const n=JC(),[t]=kt.useState(()=>new Map);t.clear();let e=n;for(;e;){const i=e.type;WF(i)&&i!==GM&&!t.has(i)&&t.set(i,kt.use(KC(i))),e=e.return}return t}function KF(){const n=jF();return kt.useMemo(()=>Array.from(n.keys()).reduce((t,e)=>i=>kt.createElement(t,null,kt.createElement(e.Provider,{...i,value:n.get(e)})),t=>kt.createElement(QC,{...t})),[n])}function $C(n){let t=n.root;for(;t.getState().previousRoot;)t=t.getState().previousRoot;return t}const t3=n=>n&&n.isOrthographicCamera,QF=n=>n&&n.hasOwnProperty("current"),JF=n=>n!=null&&(typeof n=="string"||typeof n=="number"||n.isColor),hg=((n,t)=>typeof window<"u"&&(((n=window.document)==null?void 0:n.createElement)||((t=window.navigator)==null?void 0:t.product)==="ReactNative"))()?kt.useLayoutEffect:kt.useEffect;function VM(n){const t=kt.useRef(n);return hg(()=>void(t.current=n),[n]),t}function $F(){const n=JC(),t=KF();return kt.useMemo(()=>({children:e})=>{const a=!!FM(n,!0,o=>o.type===kt.StrictMode)?kt.StrictMode:kt.Fragment;return Oe.jsx(a,{children:Oe.jsx(t,{children:e})})},[n,t])}function t8({set:n}){return hg(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}const e8=(n=>(n=class extends kt.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}},n.getDerivedStateFromError=()=>({error:!0}),n))();function e3(n){var t;const e=typeof window<"u"?(t=window.devicePixelRatio)!=null?t:2:1;return Array.isArray(n)?Math.min(Math.max(n[0],e),n[1]):n}function Nd(n){var t;return(t=n.__r3f)==null?void 0:t.root.getState()}const Ri={obj:n=>n===Object(n)&&!Ri.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,nul:n=>n===null,arr:n=>Array.isArray(n),equ(n,t,{arrays:e="shallow",objects:i="reference",strict:a=!0}={}){if(typeof n!=typeof t||!!n!=!!t)return!1;if(Ri.str(n)||Ri.num(n)||Ri.boo(n))return n===t;const o=Ri.obj(n);if(o&&i==="reference")return n===t;const u=Ri.arr(n);if(u&&e==="reference")return n===t;if((u||o)&&n===t)return!0;let h;for(h in n)if(!(h in t))return!1;if(o&&e==="shallow"&&i==="shallow"){for(h in a?t:n)if(!Ri.equ(n[h],t[h],{strict:a,objects:"reference"}))return!1}else for(h in a?t:n)if(n[h]!==t[h])return!1;if(Ri.und(h)){if(u&&n.length===0&&t.length===0||o&&Object.keys(n).length===0&&Object.keys(t).length===0)return!0;if(n!==t)return!1}return!0}};function n8(n){const t={nodes:{},materials:{}};return n&&n.traverse(e=>{e.name&&(t.nodes[e.name]=e),e.material&&!t.materials[e.material.name]&&(t.materials[e.material.name]=e.material)}),t}function i8(n){n.type!=="Scene"&&(n.dispose==null||n.dispose());for(const t in n){const e=n[t];(e==null?void 0:e.type)!=="Scene"&&(e==null||e.dispose==null||e.dispose())}}const n3=["children","key","ref"];function a8(n){const t={};for(const e in n)n3.includes(e)||(t[e]=n[e]);return t}function qy(n,t,e,i){const a=n;let o=a==null?void 0:a.__r3f;return o||(o={root:t,type:e,parent:null,children:[],props:a8(i),object:a,eventCount:0,handlers:{},isHidden:!1},a&&(a.__r3f=o)),o}function B0(n,t){var e;let i=n[t];if(!t.includes("-"))return{root:n,key:t,target:i};const a=t.split("-");return i=a.reduce((o,u)=>o[u],n),t=a.pop(),(e=i)!=null&&e.set||(n=a.reduce((o,u)=>o[u],n)),{root:n,key:t,target:i}}const Lw=/-\d+$/;function Zy(n,t){if(Ri.str(t.props.attach)){if(Lw.test(t.props.attach)){const a=t.props.attach.replace(Lw,""),{root:o,key:u}=B0(n.object,a);Array.isArray(o[u])||(o[u]=[])}const{root:e,key:i}=B0(n.object,t.props.attach);t.previousAttach=e[i],e[i]=t.object}else Ri.fun(t.props.attach)&&(t.previousAttach=t.props.attach(n.object,t.object))}function Wy(n,t){if(Ri.str(t.props.attach)){const{root:e,key:i}=B0(n.object,t.props.attach),a=t.previousAttach;a===void 0?delete e[i]:e[i]=a}else t.previousAttach==null||t.previousAttach(n.object,t.object);delete t.previousAttach}const Cb=[...n3,"args","dispose","attach","object","onUpdate","dispose"],zw=new Map;function r8(n){let t=zw.get(n.constructor);try{t||(t=new n.constructor,zw.set(n.constructor,t))}catch{}return t}function s8(n,t){const e={};for(const i in t)if(!Cb.includes(i)&&!Ri.equ(t[i],n.props[i])){e[i]=t[i];for(const a in t)a.startsWith(`${i}-`)&&(e[a]=t[a])}for(const i in n.props){if(Cb.includes(i)||t.hasOwnProperty(i))continue;const{root:a,key:o}=B0(n.object,i);if(a.constructor&&a.constructor.length===0){const u=r8(a);Ri.und(u)||(e[o]=u[o])}else e[o]=0}return e}const o8=["map","emissiveMap","sheenColorMap","specularColorMap","envMap"],l8=/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/;function yl(n,t){var e;const i=n.__r3f,a=i&&$C(i).getState(),o=i==null?void 0:i.eventCount;for(const h in t){let d=t[h];if(Cb.includes(h))continue;if(i&&l8.test(h)){typeof d=="function"?i.handlers[h]=d:delete i.handlers[h],i.eventCount=Object.keys(i.handlers).length;continue}if(d===void 0)continue;let{root:p,key:v,target:_}=B0(n,h);if(_ instanceof jd&&d instanceof jd)_.mask=d.mask;else if(_ instanceof De&&JF(d))_.set(d);else if(_!==null&&typeof _=="object"&&typeof _.set=="function"&&typeof _.copy=="function"&&d!=null&&d.constructor&&_.constructor===d.constructor)_.copy(d);else if(_!==null&&typeof _=="object"&&typeof _.set=="function"&&Array.isArray(d))typeof _.fromArray=="function"?_.fromArray(d):_.set(...d);else if(_!==null&&typeof _=="object"&&typeof _.set=="function"&&typeof d=="number")typeof _.setScalar=="function"?_.setScalar(d):_.set(d);else{var u;p[v]=d,a&&!a.linear&&o8.includes(v)&&(u=p[v])!=null&&u.isTexture&&p[v].format===ea&&p[v].type===jr&&(p[v].colorSpace=Va)}}if(i!=null&&i.parent&&a!=null&&a.internal&&(e=i.object)!=null&&e.isObject3D&&o!==i.eventCount){const h=i.object,d=a.internal.interaction.indexOf(h);d>-1&&a.internal.interaction.splice(d,1),i.eventCount&&h.raycast!==null&&a.internal.interaction.push(h)}return i&&i.props.attach===void 0&&(i.object.isBufferGeometry?i.props.attach="geometry":i.object.isMaterial&&(i.props.attach="material")),i&&lp(i),n}function lp(n){var t;if(!n.parent)return;n.props.onUpdate==null||n.props.onUpdate(n.object);const e=(t=n.root)==null||t.getState==null?void 0:t.getState();e&&e.internal.frames===0&&e.invalidate()}function i3(n,t){n.manual||(t3(n)?(n.left=t.width/-2,n.right=t.width/2,n.top=t.height/2,n.bottom=t.height/-2):n.aspect=t.width/t.height,n.updateProjectionMatrix())}const Sr=n=>n==null?void 0:n.isObject3D;function G_(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function a3(n,t,e,i){const a=e.get(t);a&&(e.delete(t),e.size===0&&(n.delete(i),a.target.releasePointerCapture(i)))}function c8(n,t){const{internal:e}=n.getState();e.interaction=e.interaction.filter(i=>i!==t),e.initialHits=e.initialHits.filter(i=>i!==t),e.hovered.forEach((i,a)=>{(i.eventObject===t||i.object===t)&&e.hovered.delete(a)}),e.capturedMap.forEach((i,a)=>{a3(e.capturedMap,t,i,a)})}function u8(n){function t(d){const{internal:p}=n.getState(),v=d.offsetX-p.initialClick[0],_=d.offsetY-p.initialClick[1];return Math.round(Math.sqrt(v*v+_*_))}function e(d){return d.filter(p=>["Move","Over","Enter","Out","Leave"].some(v=>{var _;return(_=p.__r3f)==null?void 0:_.handlers["onPointer"+v]}))}function i(d,p){const v=n.getState(),_=new Set,x=[],b=p?p(v.internal.interaction):v.internal.interaction;for(let M=0;M<b.length;M++){const C=Nd(b[M]);C&&(C.raycaster.camera=void 0)}v.previousRoot||v.events.compute==null||v.events.compute(d,v);function E(M){const C=Nd(M);if(!C||!C.events.enabled||C.raycaster.camera===null)return[];if(C.raycaster.camera===void 0){var U;C.events.compute==null||C.events.compute(d,C,(U=C.previousRoot)==null?void 0:U.getState()),C.raycaster.camera===void 0&&(C.raycaster.camera=null)}return C.raycaster.camera?C.raycaster.intersectObject(M,!0):[]}let R=b.flatMap(E).sort((M,C)=>{const U=Nd(M.object),D=Nd(C.object);return!U||!D?M.distance-C.distance:D.events.priority-U.events.priority||M.distance-C.distance}).filter(M=>{const C=G_(M);return _.has(C)?!1:(_.add(C),!0)});v.events.filter&&(R=v.events.filter(R,v));for(const M of R){let C=M.object;for(;C;){var w;(w=C.__r3f)!=null&&w.eventCount&&x.push({...M,eventObject:C}),C=C.parent}}if("pointerId"in d&&v.internal.capturedMap.has(d.pointerId))for(let M of v.internal.capturedMap.get(d.pointerId).values())_.has(G_(M.intersection))||x.push(M.intersection);return x}function a(d,p,v,_){if(d.length){const x={stopped:!1};for(const b of d){let E=Nd(b.object);if(E||b.object.traverseAncestors(R=>{const w=Nd(R);if(w)return E=w,!1}),E){const{raycaster:R,pointer:w,camera:M,internal:C}=E,U=new J(w.x,w.y,0).unproject(M),D=L=>{var O,V;return(O=(V=C.capturedMap.get(L))==null?void 0:V.has(b.eventObject))!=null?O:!1},z=L=>{const O={intersection:b,target:p.target};C.capturedMap.has(L)?C.capturedMap.get(L).set(b.eventObject,O):C.capturedMap.set(L,new Map([[b.eventObject,O]])),p.target.setPointerCapture(L)},B=L=>{const O=C.capturedMap.get(L);O&&a3(C.capturedMap,b.eventObject,O,L)};let F={};for(let L in p){let O=p[L];typeof O!="function"&&(F[L]=O)}let G={...b,...F,pointer:w,intersections:d,stopped:x.stopped,delta:v,unprojectedPoint:U,ray:R.ray,camera:M,stopPropagation(){const L="pointerId"in p&&C.capturedMap.get(p.pointerId);if((!L||L.has(b.eventObject))&&(G.stopped=x.stopped=!0,C.hovered.size&&Array.from(C.hovered.values()).find(O=>O.eventObject===b.eventObject))){const O=d.slice(0,d.indexOf(b));o([...O,b])}},target:{hasPointerCapture:D,setPointerCapture:z,releasePointerCapture:B},currentTarget:{hasPointerCapture:D,setPointerCapture:z,releasePointerCapture:B},nativeEvent:p};if(_(G),x.stopped===!0)break}}}return d}function o(d){const{internal:p}=n.getState();for(const v of p.hovered.values())if(!d.length||!d.find(_=>_.object===v.object&&_.index===v.index&&_.instanceId===v.instanceId)){const x=v.eventObject.__r3f;if(p.hovered.delete(G_(v)),x!=null&&x.eventCount){const b=x.handlers,E={...v,intersections:d};b.onPointerOut==null||b.onPointerOut(E),b.onPointerLeave==null||b.onPointerLeave(E)}}}function u(d,p){for(let v=0;v<p.length;v++){const _=p[v].__r3f;_==null||_.handlers.onPointerMissed==null||_.handlers.onPointerMissed(d)}}function h(d){switch(d){case"onPointerLeave":case"onPointerCancel":return()=>o([]);case"onLostPointerCapture":return p=>{const{internal:v}=n.getState();"pointerId"in p&&v.capturedMap.has(p.pointerId)&&requestAnimationFrame(()=>{v.capturedMap.has(p.pointerId)&&(v.capturedMap.delete(p.pointerId),o([]))})}}return function(v){const{onPointerMissed:_,internal:x}=n.getState();x.lastEvent.current=v;const b=d==="onPointerMove",E=d==="onClick"||d==="onContextMenu"||d==="onDoubleClick",w=i(v,b?e:void 0),M=E?t(v):0;d==="onPointerDown"&&(x.initialClick=[v.offsetX,v.offsetY],x.initialHits=w.map(U=>U.eventObject)),E&&!w.length&&M<=2&&(u(v,x.interaction),_&&_(v)),b&&o(w);function C(U){const D=U.eventObject,z=D.__r3f;if(!(z!=null&&z.eventCount))return;const B=z.handlers;if(b){if(B.onPointerOver||B.onPointerEnter||B.onPointerOut||B.onPointerLeave){const F=G_(U),G=x.hovered.get(F);G?G.stopped&&U.stopPropagation():(x.hovered.set(F,U),B.onPointerOver==null||B.onPointerOver(U),B.onPointerEnter==null||B.onPointerEnter(U))}B.onPointerMove==null||B.onPointerMove(U)}else{const F=B[d];F?(!E||x.initialHits.includes(D))&&(u(v,x.interaction.filter(G=>!x.initialHits.includes(G))),F(U)):E&&x.initialHits.includes(D)&&u(v,x.interaction.filter(G=>!x.initialHits.includes(G)))}}a(w,v,M,C)}}return{handlePointer:h}}const Bw=n=>!!(n!=null&&n.render),kM=kt.createContext(null),f8=(n,t)=>{const e=ZC((h,d)=>{const p=new J,v=new J,_=new J;function x(M=d().camera,C=v,U=d().size){const{width:D,height:z,top:B,left:F}=U,G=D/z;C.isVector3?_.copy(C):_.set(...C);const L=M.getWorldPosition(p).distanceTo(_);if(t3(M))return{width:D/M.zoom,height:z/M.zoom,top:B,left:F,factor:1,distance:L,aspect:G};{const O=M.fov*Math.PI/180,V=2*Math.tan(O/2)*L,et=V*(D/z);return{width:et,height:V,top:B,left:F,factor:D/et,distance:L,aspect:G}}}let b;const E=M=>h(C=>({performance:{...C.performance,current:M}})),R=new jt;return{set:h,get:d,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},scene:null,xr:null,invalidate:(M=1)=>n(d(),M),advance:(M,C)=>t(M,C,d()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new UM,pointer:R,mouse:R,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const M=d();b&&clearTimeout(b),M.performance.current!==M.performance.min&&E(M.performance.min),b=setTimeout(()=>E(d().performance.max),M.performance.debounce)}},size:{width:0,height:0,top:0,left:0},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:x},setEvents:M=>h(C=>({...C,events:{...C.events,...M}})),setSize:(M,C,U=0,D=0)=>{const z=d().camera,B={width:M,height:C,top:U,left:D};h(F=>({size:B,viewport:{...F.viewport,...x(z,v,B)}}))},setDpr:M=>h(C=>{const U=e3(M);return{viewport:{...C.viewport,dpr:U,initialDpr:C.viewport.initialDpr||U}}}),setFrameloop:(M="always")=>{const C=d().clock;C.stop(),C.elapsedTime=0,M!=="never"&&(C.start(),C.elapsedTime=0),h(()=>({frameloop:M}))},previousRoot:void 0,internal:{interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,lastEvent:kt.createRef(),active:!1,frames:0,priority:0,subscribe:(M,C,U)=>{const D=d().internal;return D.priority=D.priority+(C>0?1:0),D.subscribers.push({ref:M,priority:C,store:U}),D.subscribers=D.subscribers.sort((z,B)=>z.priority-B.priority),()=>{const z=d().internal;z!=null&&z.subscribers&&(z.priority=z.priority-(C>0?1:0),z.subscribers=z.subscribers.filter(B=>B.ref!==M))}}}}}),i=e.getState();let a=i.size,o=i.viewport.dpr,u=i.camera;return e.subscribe(()=>{const{camera:h,size:d,viewport:p,gl:v,set:_}=e.getState();if(d.width!==a.width||d.height!==a.height||p.dpr!==o){a=d,o=p.dpr,i3(h,d),p.dpr>0&&v.setPixelRatio(p.dpr);const x=typeof HTMLCanvasElement<"u"&&v.domElement instanceof HTMLCanvasElement;v.setSize(d.width,d.height,x)}h!==u&&(u=h,_(x=>({viewport:{...x.viewport,...x.viewport.getCurrentViewport(h)}})))}),e.subscribe(h=>n(h)),e};function XM(){const n=kt.useContext(kM);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function Yr(n=e=>e,t){return XM()(n,t)}function r3(n,t=0){const e=XM(),i=e.getState().internal.subscribe,a=VM(n);return hg(()=>i(a,t,e),[t,i,e]),null}const Iw=new WeakMap,h8=n=>{var t;return typeof n=="function"&&(n==null||(t=n.prototype)==null?void 0:t.constructor)===n};function s3(n,t){return function(e,...i){let a;return h8(e)?(a=Iw.get(e),a||(a=new e,Iw.set(e,a))):a=e,n&&n(a),Promise.all(i.map(o=>new Promise((u,h)=>a.load(o,d=>{Sr(d==null?void 0:d.scene)&&Object.assign(d,n8(d.scene)),u(d)},t,d=>h(new Error(`Could not load ${o}: ${d==null?void 0:d.message}`))))))}}function Jd(n,t,e,i){const a=Array.isArray(t)?t:[t],o=XF(s3(e,i),[n,...a],{equal:Ri.equ});return Array.isArray(t)?o:o[0]}Jd.preload=function(n,t,e){const i=Array.isArray(t)?t:[t];return YF(s3(e),[n,...i])};Jd.clear=function(n,t){const e=Array.isArray(t)?t:[t];return qF([n,...e])};function d8(n){const t=VF(n);return t.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:kt.version}),t}const o3=0,$d={},p8=/^three(?=[A-Z])/,zx=n=>`${n[0].toUpperCase()}${n.slice(1)}`;let m8=0;const g8=n=>typeof n=="function";function l3(n){if(g8(n)){const t=`${m8++}`;return $d[t]=n,t}else Object.assign($d,n)}function c3(n,t){const e=zx(n),i=$d[e];if(n!=="primitive"&&!i)throw new Error(`R3F: ${e} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(n==="primitive"&&!t.object)throw new Error("R3F: Primitives without 'object' are invalid!");if(t.args!==void 0&&!Array.isArray(t.args))throw new Error("R3F: The args prop must be an array!")}function v8(n,t,e){var i;return n=zx(n)in $d?n:n.replace(p8,""),c3(n,t),n==="primitive"&&(i=t.object)!=null&&i.__r3f&&delete t.object.__r3f,qy(t.object,e,n,t)}function _8(n){if(!n.isHidden){var t;n.props.attach&&(t=n.parent)!=null&&t.object?Wy(n.parent,n):Sr(n.object)&&(n.object.visible=!1),n.isHidden=!0,lp(n)}}function u3(n){if(n.isHidden){var t;n.props.attach&&(t=n.parent)!=null&&t.object?Zy(n.parent,n):Sr(n.object)&&n.props.visible!==!1&&(n.object.visible=!0),n.isHidden=!1,lp(n)}}function YM(n,t,e){const i=t.root.getState();if(!(!n.parent&&n.object!==i.scene)){if(!t.object){var a,o;const u=$d[zx(t.type)];t.object=(a=t.props.object)!=null?a:new u(...(o=t.props.args)!=null?o:[]),t.object.__r3f=t}if(yl(t.object,t.props),t.props.attach)Zy(n,t);else if(Sr(t.object)&&Sr(n.object)){const u=n.object.children.indexOf(e==null?void 0:e.object);e&&u!==-1?(t.object.parent=n.object,n.object.children.splice(u,0,t.object),t.object.dispatchEvent({type:"added"}),n.object.dispatchEvent({type:"childadded",child:t.object})):n.object.add(t.object)}for(const u of t.children)YM(t,u);lp(t)}}function FS(n,t){t&&(t.parent=n,n.children.push(t),YM(n,t))}function Pw(n,t,e){if(!t||!e)return;t.parent=n;const i=n.children.indexOf(e);i!==-1?n.children.splice(i,0,t):n.children.push(t),YM(n,t,e)}function f3(n){if(typeof n.dispose=="function"){const t=()=>{try{n.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT<"u"?t():Ow.unstable_scheduleCallback(Ow.unstable_IdlePriority,t)}}function Db(n,t,e){if(!t)return;t.parent=null;const i=n.children.indexOf(t);i!==-1&&n.children.splice(i,1),t.props.attach?Wy(n,t):Sr(t.object)&&Sr(n.object)&&(n.object.remove(t.object),c8($C(t),t.object));const a=t.props.dispose!==null&&e!==!1;for(let o=t.children.length-1;o>=0;o--){const u=t.children[o];Db(t,u,a)}t.children.length=0,delete t.object.__r3f,a&&t.type!=="primitive"&&t.object.type!=="Scene"&&f3(t.object),e===void 0&&lp(t)}function y8(n,t){for(const e of[n,n.alternate])if(e!==null)if(typeof e.ref=="function"){e.refCleanup==null||e.refCleanup();const i=e.ref(t);typeof i=="function"&&(e.refCleanup=i)}else e.ref&&(e.ref.current=t)}const ty=[];function x8(){for(const[e]of ty){const i=e.parent;if(i){e.props.attach?Wy(i,e):Sr(e.object)&&Sr(i.object)&&i.object.remove(e.object);for(const a of e.children)a.props.attach?Wy(e,a):Sr(a.object)&&Sr(e.object)&&e.object.remove(a.object)}e.isHidden&&u3(e),e.object.__r3f&&delete e.object.__r3f,e.type!=="primitive"&&f3(e.object)}for(const[e,i,a]of ty){e.props=i;const o=e.parent;if(o){var n,t;const u=$d[zx(e.type)];e.object=(n=e.props.object)!=null?n:new u(...(t=e.props.args)!=null?t:[]),e.object.__r3f=e,y8(a,e.object),yl(e.object,e.props),e.props.attach?Zy(o,e):Sr(e.object)&&Sr(o.object)&&o.object.add(e.object);for(const h of e.children)h.props.attach?Zy(e,h):Sr(h.object)&&Sr(e.object)&&e.object.add(h.object);lp(e)}}ty.length=0}const GS=()=>{},Hw={};let V_=o3;const S8=0,b8=4,jy=d8({isPrimaryRenderer:!1,warnsIfNotActing:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,createInstance:v8,removeChild:Db,appendChild:FS,appendInitialChild:FS,insertBefore:Pw,appendChildToContainer(n,t){const e=n.getState().scene.__r3f;!t||!e||FS(e,t)},removeChildFromContainer(n,t){const e=n.getState().scene.__r3f;!t||!e||Db(e,t)},insertInContainerBefore(n,t,e){const i=n.getState().scene.__r3f;!t||!e||!i||Pw(i,t,e)},getRootHostContext:()=>Hw,getChildHostContext:()=>Hw,commitUpdate(n,t,e,i,a){var o,u,h;c3(t,i);let d=!1;if((n.type==="primitive"&&e.object!==i.object||((o=i.args)==null?void 0:o.length)!==((u=e.args)==null?void 0:u.length)||(h=i.args)!=null&&h.some((v,_)=>{var x;return v!==((x=e.args)==null?void 0:x[_])}))&&(d=!0),d)ty.push([n,{...i},a]);else{const v=s8(n,i);Object.keys(v).length&&(Object.assign(n.props,v),yl(n.object,v))}(a.sibling===null||(a.flags&b8)===S8)&&x8()},finalizeInitialChildren:()=>!1,commitMount(){},getPublicInstance:n=>n==null?void 0:n.object,prepareForCommit:()=>null,preparePortalMount:n=>qy(n.getState().scene,n,"",{}),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance:_8,unhideInstance:u3,createTextInstance:GS,hideTextInstance:GS,unhideTextInstance:GS,scheduleTimeout:typeof setTimeout=="function"?setTimeout:void 0,cancelTimeout:typeof clearTimeout=="function"?clearTimeout:void 0,noTimeout:-1,getInstanceFromNode:()=>null,beforeActiveInstanceBlur(){},afterActiveInstanceBlur(){},detachDeletedInstance(){},prepareScopeUpdate(){},getInstanceFromScope:()=>null,shouldAttemptEagerTransition:()=>!1,trackSchedulerEvent:()=>{},resolveEventType:()=>null,resolveEventTimeStamp:()=>-1.1,requestPostPaintCallback(){},maySuspendCommit:()=>!1,preloadInstance:()=>!0,startSuspendingCommit(){},suspendInstance(){},waitForCommitToBeReady:()=>null,NotPendingTransition:null,HostTransitionContext:kt.createContext(null),setCurrentUpdatePriority(n){V_=n},getCurrentUpdatePriority(){return V_},resolveUpdatePriority(){var n;if(V_!==o3)return V_;switch(typeof window<"u"&&((n=window.event)==null?void 0:n.type)){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return $_.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return $_.ContinuousEventPriority;default:return $_.DefaultEventPriority}},resetFormInstance(){}}),fh=new Map,Ud={objects:"shallow",strict:!1};function M8(n,t){if(!t&&typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:e,height:i,top:a,left:o}=n.parentElement.getBoundingClientRect();return{width:e,height:i,top:a,left:o}}else if(!t&&typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0};return{width:0,height:0,top:0,left:0,...t}}function E8(n){const t=fh.get(n),e=t==null?void 0:t.fiber,i=t==null?void 0:t.store;t&&console.warn("R3F.createRoot should only be called once!");const a=typeof reportError=="function"?reportError:console.error,o=i||f8(Ob,Gw),u=e||jy.createContainer(o,$_.ConcurrentRoot,null,!1,null,"",a,a,a,null);t||fh.set(n,{fiber:u,store:o});let h,d,p=!1,v=null;return{async configure(_={}){let x;v=new Promise(ht=>x=ht);let{gl:b,size:E,scene:R,events:w,onCreated:M,shadows:C=!1,linear:U=!1,flat:D=!1,legacy:z=!1,orthographic:B=!1,frameloop:F="always",dpr:G=[1,2],performance:L,raycaster:O,camera:V,onPointerMissed:et}=_,W=o.getState(),j=W.gl;if(!W.gl){const ht={canvas:n,powerPreference:"high-performance",antialias:!0,alpha:!0},Tt=typeof b=="function"?await b(ht):b;Bw(Tt)?j=Tt:j=new HM({...ht,...b}),W.set({gl:j})}let ut=W.raycaster;ut||W.set({raycaster:ut=new BM});const{params:tt,...pt}=O||{};if(Ri.equ(pt,ut,Ud)||yl(ut,{...pt}),Ri.equ(tt,ut.params,Ud)||yl(ut,{params:{...ut.params,...tt}}),!W.camera||W.camera===d&&!Ri.equ(d,V,Ud)){d=V;const ht=V==null?void 0:V.isCamera,Tt=ht?V:B?new xc(0,0,0,0,.1,1e3):new ta(75,0,.1,1e3);ht||(Tt.position.z=5,V&&(yl(Tt,V),Tt.manual||("aspect"in V||"left"in V||"right"in V||"bottom"in V||"top"in V)&&(Tt.manual=!0,Tt.updateProjectionMatrix())),!W.camera&&!(V!=null&&V.rotation)&&Tt.lookAt(0,0,0)),W.set({camera:Tt}),ut.camera=Tt}if(!W.scene){let ht;R!=null&&R.isScene?(ht=R,qy(ht,o,"",{})):(ht=new ig,qy(ht,o,"",{}),R&&yl(ht,R)),W.set({scene:ht})}w&&!W.events.handlers&&W.set({events:w(o)});const ot=M8(n,E);if(Ri.equ(ot,W.size,Ud)||W.setSize(ot.width,ot.height,ot.top,ot.left),G&&W.viewport.dpr!==e3(G)&&W.setDpr(G),W.frameloop!==F&&W.setFrameloop(F),W.onPointerMissed||W.set({onPointerMissed:et}),L&&!Ri.equ(L,W.performance,Ud)&&W.set(ht=>({performance:{...ht.performance,...L}})),!W.xr){var Dt;const ht=(rt,Lt)=>{const Et=o.getState();Et.frameloop!=="never"&&Gw(rt,!0,Et,Lt)},Tt=()=>{const rt=o.getState();rt.gl.xr.enabled=rt.gl.xr.isPresenting,rt.gl.xr.setAnimationLoop(rt.gl.xr.isPresenting?ht:null),rt.gl.xr.isPresenting||Ob(rt)},Ft={connect(){const rt=o.getState().gl;rt.xr.addEventListener("sessionstart",Tt),rt.xr.addEventListener("sessionend",Tt)},disconnect(){const rt=o.getState().gl;rt.xr.removeEventListener("sessionstart",Tt),rt.xr.removeEventListener("sessionend",Tt)}};typeof((Dt=j.xr)==null?void 0:Dt.addEventListener)=="function"&&Ft.connect(),W.set({xr:Ft})}if(j.shadowMap){const ht=j.shadowMap.enabled,Tt=j.shadowMap.type;if(j.shadowMap.enabled=!!C,Ri.boo(C))j.shadowMap.type=jm;else if(Ri.str(C)){var Z;const Ft={basic:Q2,percentage:ax,soft:jm,variance:bo};j.shadowMap.type=(Z=Ft[C])!=null?Z:jm}else Ri.obj(C)&&Object.assign(j.shadowMap,C);(ht!==j.shadowMap.enabled||Tt!==j.shadowMap.type)&&(j.shadowMap.needsUpdate=!0)}return On.enabled=!z,p||(j.outputColorSpace=U?Ro:Va,j.toneMapping=D?Tl:Jb),W.legacy!==z&&W.set(()=>({legacy:z})),W.linear!==U&&W.set(()=>({linear:U})),W.flat!==D&&W.set(()=>({flat:D})),b&&!Ri.fun(b)&&!Bw(b)&&!Ri.equ(b,j,Ud)&&yl(j,b),h=M,p=!0,x(),this},render(_){return!p&&!v&&this.configure(),v.then(()=>{jy.updateContainer(Oe.jsx(T8,{store:o,children:_,onCreated:h,rootElement:n}),u,null,()=>{})}),o},unmount(){h3(n)}}}function T8({store:n,children:t,onCreated:e,rootElement:i}){return hg(()=>{const a=n.getState();a.set(o=>({internal:{...o.internal,active:!0}})),e&&e(a),n.getState().events.connected||a.events.connect==null||a.events.connect(i)},[]),Oe.jsx(kM.Provider,{value:n,children:t})}function h3(n,t){const e=fh.get(n),i=e==null?void 0:e.fiber;if(i){const a=e==null?void 0:e.store.getState();a&&(a.internal.active=!1),jy.updateContainer(null,i,null,()=>{a&&setTimeout(()=>{try{var o,u,h,d;a.events.disconnect==null||a.events.disconnect(),(o=a.gl)==null||(u=o.renderLists)==null||u.dispose==null||u.dispose(),(h=a.gl)==null||h.forceContextLoss==null||h.forceContextLoss(),(d=a.gl)!=null&&d.xr&&a.xr.disconnect(),i8(a.scene),fh.delete(n)}catch{}},500)})}}function A8(n,t,e){return Oe.jsx(w8,{children:n,container:t,state:e})}function w8({state:n={},children:t,container:e}){const{events:i,size:a,...o}=n,u=XM(),[h]=kt.useState(()=>new BM),[d]=kt.useState(()=>new jt),p=VM((_,x)=>{let b;if(x.camera&&a){const E=x.camera;b=_.viewport.getCurrentViewport(E,new J,a),E!==_.camera&&i3(E,a)}return{..._,...x,scene:e,raycaster:h,pointer:d,mouse:d,previousRoot:u,events:{..._.events,...x.events,...i},size:{..._.size,...a},viewport:{..._.viewport,...b},setEvents:E=>x.set(R=>({...R,events:{...R.events,...E}}))}}),v=kt.useMemo(()=>{const _=ZC((b,E)=>({...o,set:b,get:E})),x=b=>_.setState(E=>p.current(b,E));return x(u.getState()),u.subscribe(x),_},[u,e]);return Oe.jsx(Oe.Fragment,{children:jy.createPortal(Oe.jsx(kM.Provider,{value:v,children:t}),v,null)})}const R8=new Set,C8=new Set,D8=new Set;function VS(n,t){if(n.size)for(const{callback:e}of n.values())e(t)}function r0(n,t){switch(n){case"before":return VS(R8,t);case"after":return VS(C8,t);case"tail":return VS(D8,t)}}let kS,XS;function Nb(n,t,e){let i=t.clock.getDelta();t.frameloop==="never"&&typeof n=="number"&&(i=n-t.clock.elapsedTime,t.clock.oldTime=t.clock.elapsedTime,t.clock.elapsedTime=n),kS=t.internal.subscribers;for(let a=0;a<kS.length;a++)XS=kS[a],XS.ref.current(XS.store.getState(),i,e);return!t.internal.priority&&t.gl.render&&t.gl.render(t.scene,t.camera),t.internal.frames=Math.max(0,t.internal.frames-1),t.frameloop==="always"?1:t.internal.frames}let Ky=!1,Ub=!1,YS,Fw,Od;function d3(n){Fw=requestAnimationFrame(d3),Ky=!0,YS=0,r0("before",n),Ub=!0;for(const e of fh.values()){var t;Od=e.store.getState(),Od.internal.active&&(Od.frameloop==="always"||Od.internal.frames>0)&&!((t=Od.gl.xr)!=null&&t.isPresenting)&&(YS+=Nb(n,Od))}if(Ub=!1,r0("after",n),YS===0)return r0("tail",n),Ky=!1,cancelAnimationFrame(Fw)}function Ob(n,t=1){var e;if(!n)return fh.forEach(i=>Ob(i.store.getState(),t));(e=n.gl.xr)!=null&&e.isPresenting||!n.internal.active||n.frameloop==="never"||(t>1?n.internal.frames=Math.min(60,n.internal.frames+t):Ub?n.internal.frames=2:n.internal.frames=1,Ky||(Ky=!0,requestAnimationFrame(d3)))}function Gw(n,t=!0,e,i){if(t&&r0("before",n),e)Nb(n,e,i);else for(const a of fh.values())Nb(n,a.store.getState());t&&r0("after",n)}const qS={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function N8(n){const{handlePointer:t}=u8(n);return{priority:1,enabled:!0,compute(e,i,a){i.pointer.set(e.offsetX/i.size.width*2-1,-(e.offsetY/i.size.height)*2+1),i.raycaster.setFromCamera(i.pointer,i.camera)},connected:void 0,handlers:Object.keys(qS).reduce((e,i)=>({...e,[i]:t(i)}),{}),update:()=>{var e;const{events:i,internal:a}=n.getState();(e=a.lastEvent)!=null&&e.current&&i.handlers&&i.handlers.onPointerMove(a.lastEvent.current)},connect:e=>{const{set:i,events:a}=n.getState();if(a.disconnect==null||a.disconnect(),i(o=>({events:{...o.events,connected:e}})),a.handlers)for(const o in a.handlers){const u=a.handlers[o],[h,d]=qS[o];e.addEventListener(h,u,{passive:d})}},disconnect:()=>{const{set:e,events:i}=n.getState();if(i.connected){if(i.handlers)for(const a in i.handlers){const o=i.handlers[a],[u]=qS[a];i.connected.removeEventListener(u,o)}e(a=>({events:{...a.events,connected:void 0}}))}}}}function Vw(n,t){let e;return(...i)=>{window.clearTimeout(e),e=window.setTimeout(()=>n(...i),t)}}function U8({debounce:n,scroll:t,polyfill:e,offsetSize:i}={debounce:0,scroll:!1,offsetSize:!1}){const a=e||(typeof window>"u"?class{}:window.ResizeObserver);if(!a)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[o,u]=kt.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),h=kt.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:o,orientationHandler:null}),d=n?typeof n=="number"?n:n.scroll:null,p=n?typeof n=="number"?n:n.resize:null,v=kt.useRef(!1);kt.useEffect(()=>(v.current=!0,()=>void(v.current=!1)));const[_,x,b]=kt.useMemo(()=>{const M=()=>{if(!h.current.element)return;const{left:C,top:U,width:D,height:z,bottom:B,right:F,x:G,y:L}=h.current.element.getBoundingClientRect(),O={left:C,top:U,width:D,height:z,bottom:B,right:F,x:G,y:L};h.current.element instanceof HTMLElement&&i&&(O.height=h.current.element.offsetHeight,O.width=h.current.element.offsetWidth),Object.freeze(O),v.current&&!B8(h.current.lastBounds,O)&&u(h.current.lastBounds=O)};return[M,p?Vw(M,p):M,d?Vw(M,d):M]},[u,i,d,p]);function E(){h.current.scrollContainers&&(h.current.scrollContainers.forEach(M=>M.removeEventListener("scroll",b,!0)),h.current.scrollContainers=null),h.current.resizeObserver&&(h.current.resizeObserver.disconnect(),h.current.resizeObserver=null),h.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",h.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",h.current.orientationHandler))}function R(){h.current.element&&(h.current.resizeObserver=new a(b),h.current.resizeObserver.observe(h.current.element),t&&h.current.scrollContainers&&h.current.scrollContainers.forEach(M=>M.addEventListener("scroll",b,{capture:!0,passive:!0})),h.current.orientationHandler=()=>{b()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",h.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",h.current.orientationHandler))}const w=M=>{!M||M===h.current.element||(E(),h.current.element=M,h.current.scrollContainers=p3(M),R())};return L8(b,!!t),O8(x),kt.useEffect(()=>{E(),R()},[t,b,x]),kt.useEffect(()=>E,[]),[w,o,_]}function O8(n){kt.useEffect(()=>{const t=n;return window.addEventListener("resize",t),()=>void window.removeEventListener("resize",t)},[n])}function L8(n,t){kt.useEffect(()=>{if(t){const e=n;return window.addEventListener("scroll",e,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",e,!0)}},[n,t])}function p3(n){const t=[];if(!n||n===document.body)return t;const{overflow:e,overflowX:i,overflowY:a}=window.getComputedStyle(n);return[e,i,a].some(o=>o==="auto"||o==="scroll")&&t.push(n),[...t,...p3(n.parentElement)]}const z8=["x","y","top","bottom","left","right","width","height"],B8=(n,t)=>z8.every(e=>n[e]===t[e]);function I8({ref:n,children:t,fallback:e,resize:i,style:a,gl:o,events:u=N8,eventSource:h,eventPrefix:d,shadows:p,linear:v,flat:_,legacy:x,orthographic:b,frameloop:E,dpr:R,performance:w,raycaster:M,camera:C,scene:U,onPointerMissed:D,onCreated:z,...B}){kt.useMemo(()=>l3(RF),[]);const F=$F(),[G,L]=U8({scroll:!0,debounce:{scroll:50,resize:0},...i}),O=kt.useRef(null),V=kt.useRef(null);kt.useImperativeHandle(n,()=>O.current);const et=VM(D),[W,j]=kt.useState(!1),[ut,tt]=kt.useState(!1);if(W)throw W;if(ut)throw ut;const pt=kt.useRef(null);hg(()=>{const Dt=O.current;if(L.width>0&&L.height>0&&Dt){pt.current||(pt.current=E8(Dt));async function Z(){await pt.current.configure({gl:o,scene:U,events:u,shadows:p,linear:v,flat:_,legacy:x,orthographic:b,frameloop:E,dpr:R,performance:w,raycaster:M,camera:C,size:L,onPointerMissed:(...ht)=>et.current==null?void 0:et.current(...ht),onCreated:ht=>{ht.events.connect==null||ht.events.connect(h?QF(h)?h.current:h:V.current),d&&ht.setEvents({compute:(Tt,Ft)=>{const rt=Tt[d+"X"],Lt=Tt[d+"Y"];Ft.pointer.set(rt/Ft.size.width*2-1,-(Lt/Ft.size.height)*2+1),Ft.raycaster.setFromCamera(Ft.pointer,Ft.camera)}}),z==null||z(ht)}}),pt.current.render(Oe.jsx(F,{children:Oe.jsx(e8,{set:tt,children:Oe.jsx(kt.Suspense,{fallback:Oe.jsx(t8,{set:j}),children:t??null})})}))}Z()}}),kt.useEffect(()=>{const Dt=O.current;if(Dt)return()=>h3(Dt)},[]);const ot=h?"none":"auto";return Oe.jsx("div",{ref:V,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:ot,...a},...B,children:Oe.jsx("div",{ref:G,style:{width:"100%",height:"100%"},children:Oe.jsx("canvas",{ref:O,style:{display:"block"},children:e})})})}function P8(n){return Oe.jsx(QC,{children:Oe.jsx(I8,{...n})})}const H8=({children:n})=>{const t=kt.useRef(),[e,i]=kt.useState({width:500,height:500});return kt.useEffect(()=>{const a=new ResizeObserver(()=>{t.current&&i({width:t.current.clientWidth,height:t.current.clientHeight})});return a.observe(t.current),()=>a.disconnect()},[]),Oe.jsx("div",{ref:t,style:{width:"100%",height:"100%"},children:Oe.jsx(P8,{style:{background:"transparent"},camera:{position:[0,200,300],fov:50,near:.1,far:8e3},gl:{preserveDrawingBuffer:!1},onContextLost:a=>{console.warn("WebGL context lost",a),a.preventDefault()},children:n})})},m3=parseInt(K0.replace(/\D+/g,""));var zs=Uint8Array,Mu=Uint16Array,Lb=Uint32Array,g3=new zs([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),v3=new zs([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),F8=new zs([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),_3=function(n,t){for(var e=new Mu(31),i=0;i<31;++i)e[i]=t+=1<<n[i-1];for(var a=new Lb(e[30]),i=1;i<30;++i)for(var o=e[i];o<e[i+1];++o)a[o]=o-e[i]<<5|i;return[e,a]},y3=_3(g3,2),x3=y3[0],G8=y3[1];x3[28]=258,G8[258]=28;var V8=_3(v3,0),k8=V8[0],zb=new Mu(32768);for(var Ei=0;Ei<32768;++Ei){var _u=(Ei&43690)>>>1|(Ei&21845)<<1;_u=(_u&52428)>>>2|(_u&13107)<<2,_u=(_u&61680)>>>4|(_u&3855)<<4,zb[Ei]=((_u&65280)>>>8|(_u&255)<<8)>>>1}var s0=function(n,t,e){for(var i=n.length,a=0,o=new Mu(t);a<i;++a)++o[n[a]-1];var u=new Mu(t);for(a=0;a<t;++a)u[a]=u[a-1]+o[a-1]<<1;var h;if(e){h=new Mu(1<<t);var d=15-t;for(a=0;a<i;++a)if(n[a])for(var p=a<<4|n[a],v=t-n[a],_=u[n[a]-1]++<<v,x=_|(1<<v)-1;_<=x;++_)h[zb[_]>>>d]=p}else for(h=new Mu(i),a=0;a<i;++a)n[a]&&(h[a]=zb[u[n[a]-1]++]>>>15-n[a]);return h},dg=new zs(288);for(var Ei=0;Ei<144;++Ei)dg[Ei]=8;for(var Ei=144;Ei<256;++Ei)dg[Ei]=9;for(var Ei=256;Ei<280;++Ei)dg[Ei]=7;for(var Ei=280;Ei<288;++Ei)dg[Ei]=8;var S3=new zs(32);for(var Ei=0;Ei<32;++Ei)S3[Ei]=5;var X8=s0(dg,9,1),Y8=s0(S3,5,1),ZS=function(n){for(var t=n[0],e=1;e<n.length;++e)n[e]>t&&(t=n[e]);return t},So=function(n,t,e){var i=t/8|0;return(n[i]|n[i+1]<<8)>>(t&7)&e},WS=function(n,t){var e=t/8|0;return(n[e]|n[e+1]<<8|n[e+2]<<16)>>(t&7)},q8=function(n){return(n/8|0)+(n&7&&1)},Z8=function(n,t,e){(e==null||e>n.length)&&(e=n.length);var i=new(n instanceof Mu?Mu:n instanceof Lb?Lb:zs)(e-t);return i.set(n.subarray(t,e)),i},W8=function(n,t,e){var i=n.length;if(!i||e&&!e.l&&i<5)return t||new zs(0);var a=!t||e,o=!e||e.i;e||(e={}),t||(t=new zs(i*3));var u=function(Et){var Nt=t.length;if(Et>Nt){var Qt=new zs(Math.max(Nt*2,Et));Qt.set(t),t=Qt}},h=e.f||0,d=e.p||0,p=e.b||0,v=e.l,_=e.d,x=e.m,b=e.n,E=i*8;do{if(!v){e.f=h=So(n,d,1);var R=So(n,d+1,3);if(d+=3,R)if(R==1)v=X8,_=Y8,x=9,b=5;else if(R==2){var U=So(n,d,31)+257,D=So(n,d+10,15)+4,z=U+So(n,d+5,31)+1;d+=14;for(var B=new zs(z),F=new zs(19),G=0;G<D;++G)F[F8[G]]=So(n,d+G*3,7);d+=D*3;for(var L=ZS(F),O=(1<<L)-1,V=s0(F,L,1),G=0;G<z;){var et=V[So(n,d,O)];d+=et&15;var w=et>>>4;if(w<16)B[G++]=w;else{var W=0,j=0;for(w==16?(j=3+So(n,d,3),d+=2,W=B[G-1]):w==17?(j=3+So(n,d,7),d+=3):w==18&&(j=11+So(n,d,127),d+=7);j--;)B[G++]=W}}var ut=B.subarray(0,U),tt=B.subarray(U);x=ZS(ut),b=ZS(tt),v=s0(ut,x,1),_=s0(tt,b,1)}else throw"invalid block type";else{var w=q8(d)+4,M=n[w-4]|n[w-3]<<8,C=w+M;if(C>i){if(o)throw"unexpected EOF";break}a&&u(p+M),t.set(n.subarray(w,C),p),e.b=p+=M,e.p=d=C*8;continue}if(d>E){if(o)throw"unexpected EOF";break}}a&&u(p+131072);for(var pt=(1<<x)-1,ot=(1<<b)-1,Dt=d;;Dt=d){var W=v[WS(n,d)&pt],Z=W>>>4;if(d+=W&15,d>E){if(o)throw"unexpected EOF";break}if(!W)throw"invalid length/literal";if(Z<256)t[p++]=Z;else if(Z==256){Dt=d,v=null;break}else{var ht=Z-254;if(Z>264){var G=Z-257,Tt=g3[G];ht=So(n,d,(1<<Tt)-1)+x3[G],d+=Tt}var Ft=_[WS(n,d)&ot],rt=Ft>>>4;if(!Ft)throw"invalid distance";d+=Ft&15;var tt=k8[rt];if(rt>3){var Tt=v3[rt];tt+=WS(n,d)&(1<<Tt)-1,d+=Tt}if(d>E){if(o)throw"unexpected EOF";break}a&&u(p+131072);for(var Lt=p+ht;p<Lt;p+=4)t[p]=t[p-tt],t[p+1]=t[p+1-tt],t[p+2]=t[p+2-tt],t[p+3]=t[p+3-tt];p=Lt}}e.l=v,e.p=Dt,e.b=p,v&&(h=1,e.m=x,e.d=_,e.n=b)}while(!h);return p==t.length?t:Z8(t,0,p)},j8=new zs(0),K8=function(n){if((n[0]&15)!=8||n[0]>>>4>7||(n[0]<<8|n[1])%31)throw"invalid zlib data";if(n[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function k_(n,t){return W8((K8(n),n.subarray(2,-4)),t)}var Q8=typeof TextDecoder<"u"&&new TextDecoder,J8=0;try{Q8.decode(j8,{stream:!0}),J8=1}catch{}const $8=n=>n&&n.isCubeTexture;class tG extends Gi{constructor(t,e){var i,a;const o=$8(t),h=((a=o?(i=t.image[0])==null?void 0:i.width:t.image.width)!=null?a:1024)/4,d=Math.floor(Math.log2(h)),p=Math.pow(2,d),v=3*Math.max(p,16*7),_=4*p,x=[o?"#define ENVMAP_TYPE_CUBE":"",`#define CUBEUV_TEXEL_WIDTH ${1/v}`,`#define CUBEUV_TEXEL_HEIGHT ${1/_}`,`#define CUBEUV_MAX_MIP ${d}.0`],b=`
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,E=x.join(`
`)+`
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <${m3>=154?"colorspace_fragment":"encodings_fragment"}>
        }
        `,R={map:{value:t},height:{value:(e==null?void 0:e.height)||15},radius:{value:(e==null?void 0:e.radius)||100}},w=new og(1,16),M=new Kr({uniforms:R,fragmentShader:E,vertexShader:b,side:Eo});super(w,M)}set radius(t){this.material.uniforms.radius.value=t}get radius(){return this.material.uniforms.radius.value}set height(t){this.material.uniforms.height.value=t}get height(){return this.material.uniforms.height.value}}var eG=Object.defineProperty,nG=(n,t,e)=>t in n?eG(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,iG=(n,t,e)=>(nG(n,t+"",e),e);class aG{constructor(){iG(this,"_listeners")}addEventListener(t,e){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[t]===void 0&&(i[t]=[]),i[t].indexOf(e)===-1&&i[t].push(e)}hasEventListener(t,e){if(this._listeners===void 0)return!1;const i=this._listeners;return i[t]!==void 0&&i[t].indexOf(e)!==-1}removeEventListener(t,e){if(this._listeners===void 0)return;const a=this._listeners[t];if(a!==void 0){const o=a.indexOf(e);o!==-1&&a.splice(o,1)}}dispatchEvent(t){if(this._listeners===void 0)return;const i=this._listeners[t.type];if(i!==void 0){t.target=this;const a=i.slice(0);for(let o=0,u=a.length;o<u;o++)a[o].call(this,t);t.target=null}}}var rG=Object.defineProperty,sG=(n,t,e)=>t in n?rG(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,Ze=(n,t,e)=>(sG(n,typeof t!="symbol"?t+"":t,e),e);const X_=new dh,kw=new mc,oG=Math.cos(70*(Math.PI/180)),Xw=(n,t)=>(n%t+t)%t;let lG=class extends aG{constructor(t,e){super(),Ze(this,"object"),Ze(this,"domElement"),Ze(this,"enabled",!0),Ze(this,"target",new J),Ze(this,"minDistance",0),Ze(this,"maxDistance",1/0),Ze(this,"minZoom",0),Ze(this,"maxZoom",1/0),Ze(this,"minPolarAngle",0),Ze(this,"maxPolarAngle",Math.PI),Ze(this,"minAzimuthAngle",-1/0),Ze(this,"maxAzimuthAngle",1/0),Ze(this,"enableDamping",!1),Ze(this,"dampingFactor",.05),Ze(this,"enableZoom",!0),Ze(this,"zoomSpeed",1),Ze(this,"enableRotate",!0),Ze(this,"rotateSpeed",1),Ze(this,"enablePan",!0),Ze(this,"panSpeed",1),Ze(this,"screenSpacePanning",!0),Ze(this,"keyPanSpeed",7),Ze(this,"zoomToCursor",!1),Ze(this,"autoRotate",!1),Ze(this,"autoRotateSpeed",2),Ze(this,"reverseOrbit",!1),Ze(this,"reverseHorizontalOrbit",!1),Ze(this,"reverseVerticalOrbit",!1),Ze(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),Ze(this,"mouseButtons",{LEFT:If.ROTATE,MIDDLE:If.DOLLY,RIGHT:If.PAN}),Ze(this,"touches",{ONE:Pf.ROTATE,TWO:Pf.DOLLY_PAN}),Ze(this,"target0"),Ze(this,"position0"),Ze(this,"zoom0"),Ze(this,"_domElementKeyEvents",null),Ze(this,"getPolarAngle"),Ze(this,"getAzimuthalAngle"),Ze(this,"setPolarAngle"),Ze(this,"setAzimuthalAngle"),Ze(this,"getDistance"),Ze(this,"getZoomScale"),Ze(this,"listenToKeyEvents"),Ze(this,"stopListenToKeyEvents"),Ze(this,"saveState"),Ze(this,"reset"),Ze(this,"update"),Ze(this,"connect"),Ze(this,"dispose"),Ze(this,"dollyIn"),Ze(this,"dollyOut"),Ze(this,"getScale"),Ze(this,"setScale"),this.object=t,this.domElement=e,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>v.phi,this.getAzimuthalAngle=()=>v.theta,this.setPolarAngle=lt=>{let wt=Xw(lt,2*Math.PI),le=v.phi;le<0&&(le+=2*Math.PI),wt<0&&(wt+=2*Math.PI);let ct=Math.abs(wt-le);2*Math.PI-ct<ct&&(wt<le?wt+=2*Math.PI:le+=2*Math.PI),_.phi=wt-le,i.update()},this.setAzimuthalAngle=lt=>{let wt=Xw(lt,2*Math.PI),le=v.theta;le<0&&(le+=2*Math.PI),wt<0&&(wt+=2*Math.PI);let ct=Math.abs(wt-le);2*Math.PI-ct<ct&&(wt<le?wt+=2*Math.PI:le+=2*Math.PI),_.theta=wt-le,i.update()},this.getDistance=()=>i.object.position.distanceTo(i.target),this.listenToKeyEvents=lt=>{lt.addEventListener("keydown",de),this._domElementKeyEvents=lt},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",de),this._domElementKeyEvents=null},this.saveState=()=>{i.target0.copy(i.target),i.position0.copy(i.object.position),i.zoom0=i.object.zoom},this.reset=()=>{i.target.copy(i.target0),i.object.position.copy(i.position0),i.object.zoom=i.zoom0,i.object.updateProjectionMatrix(),i.dispatchEvent(a),i.update(),d=h.NONE},this.update=(()=>{const lt=new J,wt=new J(0,1,0),le=new sr().setFromUnitVectors(t.up,wt),ct=le.clone().invert(),St=new J,Rt=new sr,Gt=2*Math.PI;return function(){const ve=i.object.position;le.setFromUnitVectors(t.up,wt),ct.copy(le).invert(),lt.copy(ve).sub(i.target),lt.applyQuaternion(le),v.setFromVector3(lt),i.autoRotate&&d===h.NONE&&j(et()),i.enableDamping?(v.theta+=_.theta*i.dampingFactor,v.phi+=_.phi*i.dampingFactor):(v.theta+=_.theta,v.phi+=_.phi);let Ie=i.minAzimuthAngle,mn=i.maxAzimuthAngle;isFinite(Ie)&&isFinite(mn)&&(Ie<-Math.PI?Ie+=Gt:Ie>Math.PI&&(Ie-=Gt),mn<-Math.PI?mn+=Gt:mn>Math.PI&&(mn-=Gt),Ie<=mn?v.theta=Math.max(Ie,Math.min(mn,v.theta)):v.theta=v.theta>(Ie+mn)/2?Math.max(Ie,v.theta):Math.min(mn,v.theta)),v.phi=Math.max(i.minPolarAngle,Math.min(i.maxPolarAngle,v.phi)),v.makeSafe(),i.enableDamping===!0?i.target.addScaledVector(b,i.dampingFactor):i.target.add(b),i.zoomToCursor&&L||i.object.isOrthographicCamera?v.radius=Ft(v.radius):v.radius=Ft(v.radius*x),lt.setFromSpherical(v),lt.applyQuaternion(ct),ve.copy(i.target).add(lt),i.object.matrixAutoUpdate||i.object.updateMatrix(),i.object.lookAt(i.target),i.enableDamping===!0?(_.theta*=1-i.dampingFactor,_.phi*=1-i.dampingFactor,b.multiplyScalar(1-i.dampingFactor)):(_.set(0,0,0),b.set(0,0,0));let Bn=!1;if(i.zoomToCursor&&L){let rn=null;if(i.object instanceof ta&&i.object.isPerspectiveCamera){const gi=lt.length();rn=Ft(gi*x);const bi=gi-rn;i.object.position.addScaledVector(F,bi),i.object.updateMatrixWorld()}else if(i.object.isOrthographicCamera){const gi=new J(G.x,G.y,0);gi.unproject(i.object),i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/x)),i.object.updateProjectionMatrix(),Bn=!0;const bi=new J(G.x,G.y,0);bi.unproject(i.object),i.object.position.sub(bi).add(gi),i.object.updateMatrixWorld(),rn=lt.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),i.zoomToCursor=!1;rn!==null&&(i.screenSpacePanning?i.target.set(0,0,-1).transformDirection(i.object.matrix).multiplyScalar(rn).add(i.object.position):(X_.origin.copy(i.object.position),X_.direction.set(0,0,-1).transformDirection(i.object.matrix),Math.abs(i.object.up.dot(X_.direction))<oG?t.lookAt(i.target):(kw.setFromNormalAndCoplanarPoint(i.object.up,i.target),X_.intersectPlane(kw,i.target))))}else i.object instanceof xc&&i.object.isOrthographicCamera&&(Bn=x!==1,Bn&&(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/x)),i.object.updateProjectionMatrix()));return x=1,L=!1,Bn||St.distanceToSquared(i.object.position)>p||8*(1-Rt.dot(i.object.quaternion))>p?(i.dispatchEvent(a),St.copy(i.object.position),Rt.copy(i.object.quaternion),Bn=!1,!0):!1}})(),this.connect=lt=>{i.domElement=lt,i.domElement.style.touchAction="none",i.domElement.addEventListener("contextmenu",ae),i.domElement.addEventListener("pointerdown",k),i.domElement.addEventListener("pointercancel",Pt),i.domElement.addEventListener("wheel",Re)},this.dispose=()=>{var lt,wt,le,ct,St,Rt;i.domElement&&(i.domElement.style.touchAction="auto"),(lt=i.domElement)==null||lt.removeEventListener("contextmenu",ae),(wt=i.domElement)==null||wt.removeEventListener("pointerdown",k),(le=i.domElement)==null||le.removeEventListener("pointercancel",Pt),(ct=i.domElement)==null||ct.removeEventListener("wheel",Re),(St=i.domElement)==null||St.ownerDocument.removeEventListener("pointermove",xt),(Rt=i.domElement)==null||Rt.ownerDocument.removeEventListener("pointerup",Pt),i._domElementKeyEvents!==null&&i._domElementKeyEvents.removeEventListener("keydown",de)};const i=this,a={type:"change"},o={type:"start"},u={type:"end"},h={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let d=h.NONE;const p=1e-6,v=new Tb,_=new Tb;let x=1;const b=new J,E=new jt,R=new jt,w=new jt,M=new jt,C=new jt,U=new jt,D=new jt,z=new jt,B=new jt,F=new J,G=new jt;let L=!1;const O=[],V={};function et(){return 2*Math.PI/60/60*i.autoRotateSpeed}function W(){return Math.pow(.95,i.zoomSpeed)}function j(lt){i.reverseOrbit||i.reverseHorizontalOrbit?_.theta+=lt:_.theta-=lt}function ut(lt){i.reverseOrbit||i.reverseVerticalOrbit?_.phi+=lt:_.phi-=lt}const tt=(()=>{const lt=new J;return function(le,ct){lt.setFromMatrixColumn(ct,0),lt.multiplyScalar(-le),b.add(lt)}})(),pt=(()=>{const lt=new J;return function(le,ct){i.screenSpacePanning===!0?lt.setFromMatrixColumn(ct,1):(lt.setFromMatrixColumn(ct,0),lt.crossVectors(i.object.up,lt)),lt.multiplyScalar(le),b.add(lt)}})(),ot=(()=>{const lt=new J;return function(le,ct){const St=i.domElement;if(St&&i.object instanceof ta&&i.object.isPerspectiveCamera){const Rt=i.object.position;lt.copy(Rt).sub(i.target);let Gt=lt.length();Gt*=Math.tan(i.object.fov/2*Math.PI/180),tt(2*le*Gt/St.clientHeight,i.object.matrix),pt(2*ct*Gt/St.clientHeight,i.object.matrix)}else St&&i.object instanceof xc&&i.object.isOrthographicCamera?(tt(le*(i.object.right-i.object.left)/i.object.zoom/St.clientWidth,i.object.matrix),pt(ct*(i.object.top-i.object.bottom)/i.object.zoom/St.clientHeight,i.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),i.enablePan=!1)}})();function Dt(lt){i.object instanceof ta&&i.object.isPerspectiveCamera||i.object instanceof xc&&i.object.isOrthographicCamera?x=lt:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function Z(lt){Dt(x/lt)}function ht(lt){Dt(x*lt)}function Tt(lt){if(!i.zoomToCursor||!i.domElement)return;L=!0;const wt=i.domElement.getBoundingClientRect(),le=lt.clientX-wt.left,ct=lt.clientY-wt.top,St=wt.width,Rt=wt.height;G.x=le/St*2-1,G.y=-(ct/Rt)*2+1,F.set(G.x,G.y,1).unproject(i.object).sub(i.object.position).normalize()}function Ft(lt){return Math.max(i.minDistance,Math.min(i.maxDistance,lt))}function rt(lt){E.set(lt.clientX,lt.clientY)}function Lt(lt){Tt(lt),D.set(lt.clientX,lt.clientY)}function Et(lt){M.set(lt.clientX,lt.clientY)}function Nt(lt){R.set(lt.clientX,lt.clientY),w.subVectors(R,E).multiplyScalar(i.rotateSpeed);const wt=i.domElement;wt&&(j(2*Math.PI*w.x/wt.clientHeight),ut(2*Math.PI*w.y/wt.clientHeight)),E.copy(R),i.update()}function Qt(lt){z.set(lt.clientX,lt.clientY),B.subVectors(z,D),B.y>0?Z(W()):B.y<0&&ht(W()),D.copy(z),i.update()}function we(lt){C.set(lt.clientX,lt.clientY),U.subVectors(C,M).multiplyScalar(i.panSpeed),ot(U.x,U.y),M.copy(C),i.update()}function re(lt){Tt(lt),lt.deltaY<0?ht(W()):lt.deltaY>0&&Z(W()),i.update()}function ke(lt){let wt=!1;switch(lt.code){case i.keys.UP:ot(0,i.keyPanSpeed),wt=!0;break;case i.keys.BOTTOM:ot(0,-i.keyPanSpeed),wt=!0;break;case i.keys.LEFT:ot(i.keyPanSpeed,0),wt=!0;break;case i.keys.RIGHT:ot(-i.keyPanSpeed,0),wt=!0;break}wt&&(lt.preventDefault(),i.update())}function Jt(){if(O.length==1)E.set(O[0].pageX,O[0].pageY);else{const lt=.5*(O[0].pageX+O[1].pageX),wt=.5*(O[0].pageY+O[1].pageY);E.set(lt,wt)}}function Yt(){if(O.length==1)M.set(O[0].pageX,O[0].pageY);else{const lt=.5*(O[0].pageX+O[1].pageX),wt=.5*(O[0].pageY+O[1].pageY);M.set(lt,wt)}}function Q(){const lt=O[0].pageX-O[1].pageX,wt=O[0].pageY-O[1].pageY,le=Math.sqrt(lt*lt+wt*wt);D.set(0,le)}function Me(){i.enableZoom&&Q(),i.enablePan&&Yt()}function ee(){i.enableZoom&&Q(),i.enableRotate&&Jt()}function pe(lt){if(O.length==1)R.set(lt.pageX,lt.pageY);else{const le=ye(lt),ct=.5*(lt.pageX+le.x),St=.5*(lt.pageY+le.y);R.set(ct,St)}w.subVectors(R,E).multiplyScalar(i.rotateSpeed);const wt=i.domElement;wt&&(j(2*Math.PI*w.x/wt.clientHeight),ut(2*Math.PI*w.y/wt.clientHeight)),E.copy(R)}function se(lt){if(O.length==1)C.set(lt.pageX,lt.pageY);else{const wt=ye(lt),le=.5*(lt.pageX+wt.x),ct=.5*(lt.pageY+wt.y);C.set(le,ct)}U.subVectors(C,M).multiplyScalar(i.panSpeed),ot(U.x,U.y),M.copy(C)}function Be(lt){const wt=ye(lt),le=lt.pageX-wt.x,ct=lt.pageY-wt.y,St=Math.sqrt(le*le+ct*ct);z.set(0,St),B.set(0,Math.pow(z.y/D.y,i.zoomSpeed)),Z(B.y),D.copy(z)}function he(lt){i.enableZoom&&Be(lt),i.enablePan&&se(lt)}function K(lt){i.enableZoom&&Be(lt),i.enableRotate&&pe(lt)}function k(lt){var wt,le;i.enabled!==!1&&(O.length===0&&((wt=i.domElement)==null||wt.ownerDocument.addEventListener("pointermove",xt),(le=i.domElement)==null||le.ownerDocument.addEventListener("pointerup",Pt)),Ae(lt),lt.pointerType==="touch"?_e(lt):$t(lt))}function xt(lt){i.enabled!==!1&&(lt.pointerType==="touch"?an(lt):Xt(lt))}function Pt(lt){var wt,le,ct;Ce(lt),O.length===0&&((wt=i.domElement)==null||wt.releasePointerCapture(lt.pointerId),(le=i.domElement)==null||le.ownerDocument.removeEventListener("pointermove",xt),(ct=i.domElement)==null||ct.ownerDocument.removeEventListener("pointerup",Pt)),i.dispatchEvent(u),d=h.NONE}function $t(lt){let wt;switch(lt.button){case 0:wt=i.mouseButtons.LEFT;break;case 1:wt=i.mouseButtons.MIDDLE;break;case 2:wt=i.mouseButtons.RIGHT;break;default:wt=-1}switch(wt){case If.DOLLY:if(i.enableZoom===!1)return;Lt(lt),d=h.DOLLY;break;case If.ROTATE:if(lt.ctrlKey||lt.metaKey||lt.shiftKey){if(i.enablePan===!1)return;Et(lt),d=h.PAN}else{if(i.enableRotate===!1)return;rt(lt),d=h.ROTATE}break;case If.PAN:if(lt.ctrlKey||lt.metaKey||lt.shiftKey){if(i.enableRotate===!1)return;rt(lt),d=h.ROTATE}else{if(i.enablePan===!1)return;Et(lt),d=h.PAN}break;default:d=h.NONE}d!==h.NONE&&i.dispatchEvent(o)}function Xt(lt){if(i.enabled!==!1)switch(d){case h.ROTATE:if(i.enableRotate===!1)return;Nt(lt);break;case h.DOLLY:if(i.enableZoom===!1)return;Qt(lt);break;case h.PAN:if(i.enablePan===!1)return;we(lt);break}}function Re(lt){i.enabled===!1||i.enableZoom===!1||d!==h.NONE&&d!==h.ROTATE||(lt.preventDefault(),i.dispatchEvent(o),re(lt),i.dispatchEvent(u))}function de(lt){i.enabled===!1||i.enablePan===!1||ke(lt)}function _e(lt){switch(me(lt),O.length){case 1:switch(i.touches.ONE){case Pf.ROTATE:if(i.enableRotate===!1)return;Jt(),d=h.TOUCH_ROTATE;break;case Pf.PAN:if(i.enablePan===!1)return;Yt(),d=h.TOUCH_PAN;break;default:d=h.NONE}break;case 2:switch(i.touches.TWO){case Pf.DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;Me(),d=h.TOUCH_DOLLY_PAN;break;case Pf.DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;ee(),d=h.TOUCH_DOLLY_ROTATE;break;default:d=h.NONE}break;default:d=h.NONE}d!==h.NONE&&i.dispatchEvent(o)}function an(lt){switch(me(lt),d){case h.TOUCH_ROTATE:if(i.enableRotate===!1)return;pe(lt),i.update();break;case h.TOUCH_PAN:if(i.enablePan===!1)return;se(lt),i.update();break;case h.TOUCH_DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;he(lt),i.update();break;case h.TOUCH_DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;K(lt),i.update();break;default:d=h.NONE}}function ae(lt){i.enabled!==!1&&lt.preventDefault()}function Ae(lt){O.push(lt)}function Ce(lt){delete V[lt.pointerId];for(let wt=0;wt<O.length;wt++)if(O[wt].pointerId==lt.pointerId){O.splice(wt,1);return}}function me(lt){let wt=V[lt.pointerId];wt===void 0&&(wt=new jt,V[lt.pointerId]=wt),wt.set(lt.pageX,lt.pageY)}function ye(lt){const wt=lt.pointerId===O[0].pointerId?O[1]:O[0];return V[wt.pointerId]}this.dollyIn=(lt=W())=>{ht(lt),i.update()},this.dollyOut=(lt=W())=>{Z(lt),i.update()},this.getScale=()=>x,this.setScale=lt=>{Dt(lt),i.update()},this.getZoomScale=()=>W(),e!==void 0&&this.connect(e),this.update()}};class b3 extends CM{constructor(t){super(t),this.type=Ra}parse(t){const u=function(G,L){switch(G){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(L||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(L||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(L||""));default:case 4:throw new Error("THREE.RGBELoader: Memory Error: "+(L||""))}},v=`
`,_=function(G,L,O){L=L||1024;let et=G.pos,W=-1,j=0,ut="",tt=String.fromCharCode.apply(null,new Uint16Array(G.subarray(et,et+128)));for(;0>(W=tt.indexOf(v))&&j<L&&et<G.byteLength;)ut+=tt,j+=tt.length,et+=128,tt+=String.fromCharCode.apply(null,new Uint16Array(G.subarray(et,et+128)));return-1<W?(G.pos+=j+W+1,ut+tt.slice(0,W)):!1},x=function(G){const L=/^#\?(\S+)/,O=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,V=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,et=/^\s*FORMAT=(\S+)\s*$/,W=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,j={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let ut,tt;for((G.pos>=G.byteLength||!(ut=_(G)))&&u(1,"no header found"),(tt=ut.match(L))||u(3,"bad initial token"),j.valid|=1,j.programtype=tt[1],j.string+=ut+`
`;ut=_(G),ut!==!1;){if(j.string+=ut+`
`,ut.charAt(0)==="#"){j.comments+=ut+`
`;continue}if((tt=ut.match(O))&&(j.gamma=parseFloat(tt[1])),(tt=ut.match(V))&&(j.exposure=parseFloat(tt[1])),(tt=ut.match(et))&&(j.valid|=2,j.format=tt[1]),(tt=ut.match(W))&&(j.valid|=4,j.height=parseInt(tt[1],10),j.width=parseInt(tt[2],10)),j.valid&2&&j.valid&4)break}return j.valid&2||u(3,"missing format specifier"),j.valid&4||u(3,"missing image size specifier"),j},b=function(G,L,O){const V=L;if(V<8||V>32767||G[0]!==2||G[1]!==2||G[2]&128)return new Uint8Array(G);V!==(G[2]<<8|G[3])&&u(3,"wrong scanline width");const et=new Uint8Array(4*L*O);et.length||u(4,"unable to allocate buffer space");let W=0,j=0;const ut=4*V,tt=new Uint8Array(4),pt=new Uint8Array(ut);let ot=O;for(;ot>0&&j<G.byteLength;){j+4>G.byteLength&&u(1),tt[0]=G[j++],tt[1]=G[j++],tt[2]=G[j++],tt[3]=G[j++],(tt[0]!=2||tt[1]!=2||(tt[2]<<8|tt[3])!=V)&&u(3,"bad rgbe scanline format");let Dt=0,Z;for(;Dt<ut&&j<G.byteLength;){Z=G[j++];const Tt=Z>128;if(Tt&&(Z-=128),(Z===0||Dt+Z>ut)&&u(3,"bad scanline data"),Tt){const Ft=G[j++];for(let rt=0;rt<Z;rt++)pt[Dt++]=Ft}else pt.set(G.subarray(j,j+Z),Dt),Dt+=Z,j+=Z}const ht=V;for(let Tt=0;Tt<ht;Tt++){let Ft=0;et[W]=pt[Tt+Ft],Ft+=V,et[W+1]=pt[Tt+Ft],Ft+=V,et[W+2]=pt[Tt+Ft],Ft+=V,et[W+3]=pt[Tt+Ft],W+=4}ot--}return et},E=function(G,L,O,V){const et=G[L+3],W=Math.pow(2,et-128)/255;O[V+0]=G[L+0]*W,O[V+1]=G[L+1]*W,O[V+2]=G[L+2]*W,O[V+3]=1},R=function(G,L,O,V){const et=G[L+3],W=Math.pow(2,et-128)/255;O[V+0]=jf.toHalfFloat(Math.min(G[L+0]*W,65504)),O[V+1]=jf.toHalfFloat(Math.min(G[L+1]*W,65504)),O[V+2]=jf.toHalfFloat(Math.min(G[L+2]*W,65504)),O[V+3]=jf.toHalfFloat(1)},w=new Uint8Array(t);w.pos=0;const M=x(w),C=M.width,U=M.height,D=b(w.subarray(w.pos),C,U);let z,B,F;switch(this.type){case Fi:F=D.length/4;const G=new Float32Array(F*4);for(let O=0;O<F;O++)E(D,O*4,G,O*4);z=G,B=Fi;break;case Ra:F=D.length/4;const L=new Uint16Array(F*4);for(let O=0;O<F;O++)R(D,O*4,L,O*4);z=L,B=Ra;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:C,height:U,data:z,header:M.string,gamma:M.gamma,exposure:M.exposure,type:B}}setDataType(t){return this.type=t,this}load(t,e,i,a){function o(u,h){switch(u.type){case Fi:case Ra:"colorSpace"in u?u.colorSpace="srgb-linear":u.encoding=3e3,u.minFilter=ai,u.magFilter=ai,u.generateMipmaps=!1,u.flipY=!0;break}e&&e(u,h)}return super.load(t,o,i,a)}}const Pm=m3>=152;class cG extends CM{constructor(t){super(t),this.type=Ra}parse(t){const L=Math.pow(2.7182818,2.2);function O(H,q){for(var ft=0,Ct=0;Ct<65536;++Ct)(Ct==0||H[Ct>>3]&1<<(Ct&7))&&(q[ft++]=Ct);for(var Ht=ft-1;ft<65536;)q[ft++]=0;return Ht}function V(H){for(var q=0;q<16384;q++)H[q]={},H[q].len=0,H[q].lit=0,H[q].p=null}const et={l:0,c:0,lc:0};function W(H,q,ft,Ct,Ht){for(;ft<H;)q=q<<8|ye(Ct,Ht),ft+=8;ft-=H,et.l=q>>ft&(1<<H)-1,et.c=q,et.lc=ft}const j=new Array(59);function ut(H){for(var q=0;q<=58;++q)j[q]=0;for(var q=0;q<65537;++q)j[H[q]]+=1;for(var ft=0,q=58;q>0;--q){var Ct=ft+j[q]>>1;j[q]=ft,ft=Ct}for(var q=0;q<65537;++q){var Ht=H[q];Ht>0&&(H[q]=Ht|j[Ht]++<<6)}}function tt(H,q,ft,Ct,Ht,Bt,ue){for(var ne=ft,P=0,$=0;Ht<=Bt;Ht++){if(ne.value-ft.value>Ct)return!1;W(6,P,$,H,ne);var at=et.l;if(P=et.c,$=et.lc,ue[Ht]=at,at==63){if(ne.value-ft.value>Ct)throw"Something wrong with hufUnpackEncTable";W(8,P,$,H,ne);var nt=et.l+6;if(P=et.c,$=et.lc,Ht+nt>Bt+1)throw"Something wrong with hufUnpackEncTable";for(;nt--;)ue[Ht++]=0;Ht--}else if(at>=59){var nt=at-59+2;if(Ht+nt>Bt+1)throw"Something wrong with hufUnpackEncTable";for(;nt--;)ue[Ht++]=0;Ht--}}ut(ue)}function pt(H){return H&63}function ot(H){return H>>6}function Dt(H,q,ft,Ct){for(;q<=ft;q++){var Ht=ot(H[q]),Bt=pt(H[q]);if(Ht>>Bt)throw"Invalid table entry";if(Bt>14){var ue=Ct[Ht>>Bt-14];if(ue.len)throw"Invalid table entry";if(ue.lit++,ue.p){var ne=ue.p;ue.p=new Array(ue.lit);for(var P=0;P<ue.lit-1;++P)ue.p[P]=ne[P]}else ue.p=new Array(1);ue.p[ue.lit-1]=q}else if(Bt)for(var $=0,P=1<<14-Bt;P>0;P--){var ue=Ct[(Ht<<14-Bt)+$];if(ue.len||ue.p)throw"Invalid table entry";ue.len=Bt,ue.lit=q,$++}}return!0}const Z={c:0,lc:0};function ht(H,q,ft,Ct){H=H<<8|ye(ft,Ct),q+=8,Z.c=H,Z.lc=q}const Tt={c:0,lc:0};function Ft(H,q,ft,Ct,Ht,Bt,ue,ne,P,$){if(H==q){Ct<8&&(ht(ft,Ct,Ht,ue),ft=Z.c,Ct=Z.lc),Ct-=8;var at=ft>>Ct,at=new Uint8Array([at])[0];if(P.value+at>$)return!1;for(var nt=ne[P.value-1];at-- >0;)ne[P.value++]=nt}else if(P.value<$)ne[P.value++]=H;else return!1;Tt.c=ft,Tt.lc=Ct}function rt(H){return H&65535}function Lt(H){var q=rt(H);return q>32767?q-65536:q}const Et={a:0,b:0};function Nt(H,q){var ft=Lt(H),Ct=Lt(q),Ht=Ct,Bt=ft+(Ht&1)+(Ht>>1),ue=Bt,ne=Bt-Ht;Et.a=ue,Et.b=ne}function Qt(H,q){var ft=rt(H),Ct=rt(q),Ht=ft-(Ct>>1)&65535,Bt=Ct+Ht-32768&65535;Et.a=Bt,Et.b=Ht}function we(H,q,ft,Ct,Ht,Bt,ue){for(var ne=ue<16384,P=ft>Ht?Ht:ft,$=1,at;$<=P;)$<<=1;for($>>=1,at=$,$>>=1;$>=1;){for(var nt=0,dt=nt+Bt*(Ht-at),bt=Bt*$,It=Bt*at,Wt=Ct*$,Kt=Ct*at,xe,be,Se,Ye;nt<=dt;nt+=It){for(var Le=nt,Mn=nt+Ct*(ft-at);Le<=Mn;Le+=Kt){var Pe=Le+Wt,Ne=Le+bt,Ue=Ne+Wt;ne?(Nt(H[Le+q],H[Ne+q]),xe=Et.a,Se=Et.b,Nt(H[Pe+q],H[Ue+q]),be=Et.a,Ye=Et.b,Nt(xe,be),H[Le+q]=Et.a,H[Pe+q]=Et.b,Nt(Se,Ye),H[Ne+q]=Et.a,H[Ue+q]=Et.b):(Qt(H[Le+q],H[Ne+q]),xe=Et.a,Se=Et.b,Qt(H[Pe+q],H[Ue+q]),be=Et.a,Ye=Et.b,Qt(xe,be),H[Le+q]=Et.a,H[Pe+q]=Et.b,Qt(Se,Ye),H[Ne+q]=Et.a,H[Ue+q]=Et.b)}if(ft&$){var Ne=Le+bt;ne?Nt(H[Le+q],H[Ne+q]):Qt(H[Le+q],H[Ne+q]),xe=Et.a,H[Ne+q]=Et.b,H[Le+q]=xe}}if(Ht&$)for(var Le=nt,Mn=nt+Ct*(ft-at);Le<=Mn;Le+=Kt){var Pe=Le+Wt;ne?Nt(H[Le+q],H[Pe+q]):Qt(H[Le+q],H[Pe+q]),xe=Et.a,H[Pe+q]=Et.b,H[Le+q]=xe}at=$,$>>=1}return nt}function re(H,q,ft,Ct,Ht,Bt,ue,ne,P,$){for(var at=0,nt=0,dt=ne,bt=Math.trunc(Ht.value+(Bt+7)/8);Ht.value<bt;)for(ht(at,nt,ft,Ht),at=Z.c,nt=Z.lc;nt>=14;){var It=at>>nt-14&16383,Wt=q[It];if(Wt.len)nt-=Wt.len,Ft(Wt.lit,ue,at,nt,ft,Ct,Ht,P,$,dt),at=Tt.c,nt=Tt.lc;else{if(!Wt.p)throw"hufDecode issues";var Kt;for(Kt=0;Kt<Wt.lit;Kt++){for(var xe=pt(H[Wt.p[Kt]]);nt<xe&&Ht.value<bt;)ht(at,nt,ft,Ht),at=Z.c,nt=Z.lc;if(nt>=xe&&ot(H[Wt.p[Kt]])==(at>>nt-xe&(1<<xe)-1)){nt-=xe,Ft(Wt.p[Kt],ue,at,nt,ft,Ct,Ht,P,$,dt),at=Tt.c,nt=Tt.lc;break}}if(Kt==Wt.lit)throw"hufDecode issues"}}var be=8-Bt&7;for(at>>=be,nt-=be;nt>0;){var Wt=q[at<<14-nt&16383];if(Wt.len)nt-=Wt.len,Ft(Wt.lit,ue,at,nt,ft,Ct,Ht,P,$,dt),at=Tt.c,nt=Tt.lc;else throw"hufDecode issues"}return!0}function ke(H,q,ft,Ct,Ht,Bt){var ue={value:0},ne=ft.value,P=me(q,ft),$=me(q,ft);ft.value+=4;var at=me(q,ft);if(ft.value+=4,P<0||P>=65537||$<0||$>=65537)throw"Something wrong with HUF_ENCSIZE";var nt=new Array(65537),dt=new Array(16384);V(dt);var bt=Ct-(ft.value-ne);if(tt(H,q,ft,bt,P,$,nt),at>8*(Ct-(ft.value-ne)))throw"Something wrong with hufUncompress";Dt(nt,P,$,dt),re(nt,dt,H,q,ft,at,$,Bt,Ht,ue)}function Jt(H,q,ft){for(var Ct=0;Ct<ft;++Ct)q[Ct]=H[q[Ct]]}function Yt(H){for(var q=1;q<H.length;q++){var ft=H[q-1]+H[q]-128;H[q]=ft}}function Q(H,q){for(var ft=0,Ct=Math.floor((H.length+1)/2),Ht=0,Bt=H.length-1;!(Ht>Bt||(q[Ht++]=H[ft++],Ht>Bt));)q[Ht++]=H[Ct++]}function Me(H){for(var q=H.byteLength,ft=new Array,Ct=0,Ht=new DataView(H);q>0;){var Bt=Ht.getInt8(Ct++);if(Bt<0){var ue=-Bt;q-=ue+1;for(var ne=0;ne<ue;ne++)ft.push(Ht.getUint8(Ct++))}else{var ue=Bt;q-=2;for(var P=Ht.getUint8(Ct++),ne=0;ne<ue+1;ne++)ft.push(P)}}return ft}function ee(H,q,ft,Ct,Ht,Bt){var Pe=new DataView(Bt.buffer),ue=ft[H.idx[0]].width,ne=ft[H.idx[0]].height,P=3,$=Math.floor(ue/8),at=Math.ceil(ue/8),nt=Math.ceil(ne/8),dt=ue-(at-1)*8,bt=ne-(nt-1)*8,It={value:0},Wt=new Array(P),Kt=new Array(P),xe=new Array(P),be=new Array(P),Se=new Array(P);for(let sn=0;sn<P;++sn)Se[sn]=q[H.idx[sn]],Wt[sn]=sn<1?0:Wt[sn-1]+at*nt,Kt[sn]=new Float32Array(64),xe[sn]=new Uint16Array(64),be[sn]=new Uint16Array(at*64);for(let sn=0;sn<nt;++sn){var Ye=8;sn==nt-1&&(Ye=bt);var Le=8;for(let fn=0;fn<at;++fn){fn==at-1&&(Le=dt);for(let je=0;je<P;++je)xe[je].fill(0),xe[je][0]=Ht[Wt[je]++],pe(It,Ct,xe[je]),se(xe[je],Kt[je]),Be(Kt[je]);he(Kt);for(let je=0;je<P;++je)K(Kt[je],be[je],fn*64)}let Vn=0;for(let fn=0;fn<P;++fn){const je=ft[H.idx[fn]].type;for(let on=8*sn;on<8*sn+Ye;++on){Vn=Se[fn][on];for(let vi=0;vi<$;++vi){const In=vi*64+(on&7)*8;Pe.setUint16(Vn+0*2*je,be[fn][In+0],!0),Pe.setUint16(Vn+1*2*je,be[fn][In+1],!0),Pe.setUint16(Vn+2*2*je,be[fn][In+2],!0),Pe.setUint16(Vn+3*2*je,be[fn][In+3],!0),Pe.setUint16(Vn+4*2*je,be[fn][In+4],!0),Pe.setUint16(Vn+5*2*je,be[fn][In+5],!0),Pe.setUint16(Vn+6*2*je,be[fn][In+6],!0),Pe.setUint16(Vn+7*2*je,be[fn][In+7],!0),Vn+=8*2*je}}if($!=at)for(let on=8*sn;on<8*sn+Ye;++on){const vi=Se[fn][on]+8*$*2*je,In=$*64+(on&7)*8;for(let Pn=0;Pn<Le;++Pn)Pe.setUint16(vi+Pn*2*je,be[fn][In+Pn],!0)}}}for(var Mn=new Uint16Array(ue),Pe=new DataView(Bt.buffer),Ne=0;Ne<P;++Ne){ft[H.idx[Ne]].decoded=!0;var Ue=ft[H.idx[Ne]].type;if(ft[Ne].type==2)for(var ri=0;ri<ne;++ri){const sn=Se[Ne][ri];for(var We=0;We<ue;++We)Mn[We]=Pe.getUint16(sn+We*2*Ue,!0);for(var We=0;We<ue;++We)Pe.setFloat32(sn+We*2*Ue,St(Mn[We]),!0)}}}function pe(H,q,ft){for(var Ct,Ht=1;Ht<64;)Ct=q[H.value],Ct==65280?Ht=64:Ct>>8==255?Ht+=Ct&255:(ft[Ht]=Ct,Ht++),H.value++}function se(H,q){q[0]=St(H[0]),q[1]=St(H[1]),q[2]=St(H[5]),q[3]=St(H[6]),q[4]=St(H[14]),q[5]=St(H[15]),q[6]=St(H[27]),q[7]=St(H[28]),q[8]=St(H[2]),q[9]=St(H[4]),q[10]=St(H[7]),q[11]=St(H[13]),q[12]=St(H[16]),q[13]=St(H[26]),q[14]=St(H[29]),q[15]=St(H[42]),q[16]=St(H[3]),q[17]=St(H[8]),q[18]=St(H[12]),q[19]=St(H[17]),q[20]=St(H[25]),q[21]=St(H[30]),q[22]=St(H[41]),q[23]=St(H[43]),q[24]=St(H[9]),q[25]=St(H[11]),q[26]=St(H[18]),q[27]=St(H[24]),q[28]=St(H[31]),q[29]=St(H[40]),q[30]=St(H[44]),q[31]=St(H[53]),q[32]=St(H[10]),q[33]=St(H[19]),q[34]=St(H[23]),q[35]=St(H[32]),q[36]=St(H[39]),q[37]=St(H[45]),q[38]=St(H[52]),q[39]=St(H[54]),q[40]=St(H[20]),q[41]=St(H[22]),q[42]=St(H[33]),q[43]=St(H[38]),q[44]=St(H[46]),q[45]=St(H[51]),q[46]=St(H[55]),q[47]=St(H[60]),q[48]=St(H[21]),q[49]=St(H[34]),q[50]=St(H[37]),q[51]=St(H[47]),q[52]=St(H[50]),q[53]=St(H[56]),q[54]=St(H[59]),q[55]=St(H[61]),q[56]=St(H[35]),q[57]=St(H[36]),q[58]=St(H[48]),q[59]=St(H[49]),q[60]=St(H[57]),q[61]=St(H[58]),q[62]=St(H[62]),q[63]=St(H[63])}function Be(H){const q=.5*Math.cos(.7853975),ft=.5*Math.cos(3.14159/16),Ct=.5*Math.cos(3.14159/8),Ht=.5*Math.cos(3*3.14159/16),Bt=.5*Math.cos(5*3.14159/16),ue=.5*Math.cos(3*3.14159/8),ne=.5*Math.cos(7*3.14159/16);for(var P=new Array(4),$=new Array(4),at=new Array(4),nt=new Array(4),dt=0;dt<8;++dt){var bt=dt*8;P[0]=Ct*H[bt+2],P[1]=ue*H[bt+2],P[2]=Ct*H[bt+6],P[3]=ue*H[bt+6],$[0]=ft*H[bt+1]+Ht*H[bt+3]+Bt*H[bt+5]+ne*H[bt+7],$[1]=Ht*H[bt+1]-ne*H[bt+3]-ft*H[bt+5]-Bt*H[bt+7],$[2]=Bt*H[bt+1]-ft*H[bt+3]+ne*H[bt+5]+Ht*H[bt+7],$[3]=ne*H[bt+1]-Bt*H[bt+3]+Ht*H[bt+5]-ft*H[bt+7],at[0]=q*(H[bt+0]+H[bt+4]),at[3]=q*(H[bt+0]-H[bt+4]),at[1]=P[0]+P[3],at[2]=P[1]-P[2],nt[0]=at[0]+at[1],nt[1]=at[3]+at[2],nt[2]=at[3]-at[2],nt[3]=at[0]-at[1],H[bt+0]=nt[0]+$[0],H[bt+1]=nt[1]+$[1],H[bt+2]=nt[2]+$[2],H[bt+3]=nt[3]+$[3],H[bt+4]=nt[3]-$[3],H[bt+5]=nt[2]-$[2],H[bt+6]=nt[1]-$[1],H[bt+7]=nt[0]-$[0]}for(var It=0;It<8;++It)P[0]=Ct*H[16+It],P[1]=ue*H[16+It],P[2]=Ct*H[48+It],P[3]=ue*H[48+It],$[0]=ft*H[8+It]+Ht*H[24+It]+Bt*H[40+It]+ne*H[56+It],$[1]=Ht*H[8+It]-ne*H[24+It]-ft*H[40+It]-Bt*H[56+It],$[2]=Bt*H[8+It]-ft*H[24+It]+ne*H[40+It]+Ht*H[56+It],$[3]=ne*H[8+It]-Bt*H[24+It]+Ht*H[40+It]-ft*H[56+It],at[0]=q*(H[It]+H[32+It]),at[3]=q*(H[It]-H[32+It]),at[1]=P[0]+P[3],at[2]=P[1]-P[2],nt[0]=at[0]+at[1],nt[1]=at[3]+at[2],nt[2]=at[3]-at[2],nt[3]=at[0]-at[1],H[0+It]=nt[0]+$[0],H[8+It]=nt[1]+$[1],H[16+It]=nt[2]+$[2],H[24+It]=nt[3]+$[3],H[32+It]=nt[3]-$[3],H[40+It]=nt[2]-$[2],H[48+It]=nt[1]-$[1],H[56+It]=nt[0]-$[0]}function he(H){for(var q=0;q<64;++q){var ft=H[0][q],Ct=H[1][q],Ht=H[2][q];H[0][q]=ft+1.5747*Ht,H[1][q]=ft-.1873*Ct-.4682*Ht,H[2][q]=ft+1.8556*Ct}}function K(H,q,ft){for(var Ct=0;Ct<64;++Ct)q[ft+Ct]=jf.toHalfFloat(k(H[Ct]))}function k(H){return H<=1?Math.sign(H)*Math.pow(Math.abs(H),2.2):Math.sign(H)*Math.pow(L,Math.abs(H)-1)}function xt(H){return new DataView(H.array.buffer,H.offset.value,H.size)}function Pt(H){var q=H.viewer.buffer.slice(H.offset.value,H.offset.value+H.size),ft=new Uint8Array(Me(q)),Ct=new Uint8Array(ft.length);return Yt(ft),Q(ft,Ct),new DataView(Ct.buffer)}function $t(H){var q=H.array.slice(H.offset.value,H.offset.value+H.size),ft=k_(q),Ct=new Uint8Array(ft.length);return Yt(ft),Q(ft,Ct),new DataView(Ct.buffer)}function Xt(H){for(var q=H.viewer,ft={value:H.offset.value},Ct=new Uint16Array(H.width*H.scanlineBlockSize*(H.channels*H.type)),Ht=new Uint8Array(8192),Bt=0,ue=new Array(H.channels),ne=0;ne<H.channels;ne++)ue[ne]={},ue[ne].start=Bt,ue[ne].end=ue[ne].start,ue[ne].nx=H.width,ue[ne].ny=H.lines,ue[ne].size=H.type,Bt+=ue[ne].nx*ue[ne].ny*ue[ne].size;var P=Rt(q,ft),$=Rt(q,ft);if($>=8192)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(P<=$)for(var ne=0;ne<$-P+1;ne++)Ht[ne+P]=lt(q,ft);var at=new Uint16Array(65536),nt=O(Ht,at),dt=me(q,ft);ke(H.array,q,ft,dt,Ct,Bt);for(var ne=0;ne<H.channels;++ne)for(var bt=ue[ne],It=0;It<ue[ne].size;++It)we(Ct,bt.start+It,bt.nx,bt.size,bt.ny,bt.nx*bt.size,nt);Jt(at,Ct,Bt);for(var Wt=0,Kt=new Uint8Array(Ct.buffer.byteLength),xe=0;xe<H.lines;xe++)for(var be=0;be<H.channels;be++){var bt=ue[be],Se=bt.nx*bt.size,Ye=new Uint8Array(Ct.buffer,bt.end*2,Se*2);Kt.set(Ye,Wt),Wt+=Se*2,bt.end+=Se}return new DataView(Kt.buffer)}function Re(H){var q=H.array.slice(H.offset.value,H.offset.value+H.size),ft=k_(q);const Ct=H.lines*H.channels*H.width,Ht=H.type==1?new Uint16Array(Ct):new Uint32Array(Ct);let Bt=0,ue=0;const ne=new Array(4);for(let P=0;P<H.lines;P++)for(let $=0;$<H.channels;$++){let at=0;switch(H.type){case 1:ne[0]=Bt,ne[1]=ne[0]+H.width,Bt=ne[1]+H.width;for(let nt=0;nt<H.width;++nt){const dt=ft[ne[0]++]<<8|ft[ne[1]++];at+=dt,Ht[ue]=at,ue++}break;case 2:ne[0]=Bt,ne[1]=ne[0]+H.width,ne[2]=ne[1]+H.width,Bt=ne[2]+H.width;for(let nt=0;nt<H.width;++nt){const dt=ft[ne[0]++]<<24|ft[ne[1]++]<<16|ft[ne[2]++]<<8;at+=dt,Ht[ue]=at,ue++}break}}return new DataView(Ht.buffer)}function de(H){var q=H.viewer,ft={value:H.offset.value},Ct=new Uint8Array(H.width*H.lines*(H.channels*H.type*2)),Ht={version:wt(q,ft),unknownUncompressedSize:wt(q,ft),unknownCompressedSize:wt(q,ft),acCompressedSize:wt(q,ft),dcCompressedSize:wt(q,ft),rleCompressedSize:wt(q,ft),rleUncompressedSize:wt(q,ft),rleRawSize:wt(q,ft),totalAcUncompressedCount:wt(q,ft),totalDcUncompressedCount:wt(q,ft),acCompression:wt(q,ft)};if(Ht.version<2)throw"EXRLoader.parse: "+ua.compression+" version "+Ht.version+" is unsupported";for(var Bt=new Array,ue=Rt(q,ft)-2;ue>0;){var ne=_e(q.buffer,ft),P=lt(q,ft),$=P>>2&3,at=(P>>4)-1,nt=new Int8Array([at])[0],dt=lt(q,ft);Bt.push({name:ne,index:nt,type:dt,compression:$}),ue-=ne.length+3}for(var bt=ua.channels,It=new Array(H.channels),Wt=0;Wt<H.channels;++Wt){var Kt=It[Wt]={},xe=bt[Wt];Kt.name=xe.name,Kt.compression=0,Kt.decoded=!1,Kt.type=xe.pixelType,Kt.pLinear=xe.pLinear,Kt.width=H.width,Kt.height=H.lines}for(var be={idx:new Array(3)},Se=0;Se<H.channels;++Se)for(var Kt=It[Se],Wt=0;Wt<Bt.length;++Wt){var Ye=Bt[Wt];Kt.name==Ye.name&&(Kt.compression=Ye.compression,Ye.index>=0&&(be.idx[Ye.index]=Se),Kt.offset=Se)}if(Ht.acCompressedSize>0)switch(Ht.acCompression){case 0:var Pe=new Uint16Array(Ht.totalAcUncompressedCount);ke(H.array,q,ft,Ht.acCompressedSize,Pe,Ht.totalAcUncompressedCount);break;case 1:var Le=H.array.slice(ft.value,ft.value+Ht.totalAcUncompressedCount),Mn=k_(Le),Pe=new Uint16Array(Mn.buffer);ft.value+=Ht.totalAcUncompressedCount;break}if(Ht.dcCompressedSize>0){var Ne={array:H.array,offset:ft,size:Ht.dcCompressedSize},Ue=new Uint16Array($t(Ne).buffer);ft.value+=Ht.dcCompressedSize}if(Ht.rleRawSize>0){var Le=H.array.slice(ft.value,ft.value+Ht.rleCompressedSize),Mn=k_(Le),ri=Me(Mn.buffer);ft.value+=Ht.rleCompressedSize}for(var We=0,sn=new Array(It.length),Wt=0;Wt<sn.length;++Wt)sn[Wt]=new Array;for(var Vn=0;Vn<H.lines;++Vn)for(var fn=0;fn<It.length;++fn)sn[fn].push(We),We+=It[fn].width*H.type*2;ee(be,sn,It,Pe,Ue,Ct);for(var Wt=0;Wt<It.length;++Wt){var Kt=It[Wt];if(!Kt.decoded)switch(Kt.compression){case 2:for(var je=0,on=0,Vn=0;Vn<H.lines;++Vn){for(var vi=sn[Wt][je],In=0;In<Kt.width;++In){for(var Pn=0;Pn<2*Kt.type;++Pn)Ct[vi++]=ri[on+Pn*Kt.width*Kt.height];on++}je++}break;case 1:default:throw"EXRLoader.parse: unsupported channel compression"}}return new DataView(Ct.buffer)}function _e(H,q){for(var ft=new Uint8Array(H),Ct=0;ft[q.value+Ct]!=0;)Ct+=1;var Ht=new TextDecoder().decode(ft.slice(q.value,q.value+Ct));return q.value=q.value+Ct+1,Ht}function an(H,q,ft){var Ct=new TextDecoder().decode(new Uint8Array(H).slice(q.value,q.value+ft));return q.value=q.value+ft,Ct}function ae(H,q){var ft=Ce(H,q),Ct=me(H,q);return[ft,Ct]}function Ae(H,q){var ft=me(H,q),Ct=me(H,q);return[ft,Ct]}function Ce(H,q){var ft=H.getInt32(q.value,!0);return q.value=q.value+4,ft}function me(H,q){var ft=H.getUint32(q.value,!0);return q.value=q.value+4,ft}function ye(H,q){var ft=H[q.value];return q.value=q.value+1,ft}function lt(H,q){var ft=H.getUint8(q.value);return q.value=q.value+1,ft}const wt=function(H,q){let ft;return"getBigInt64"in DataView.prototype?ft=Number(H.getBigInt64(q.value,!0)):ft=H.getUint32(q.value+4,!0)+Number(H.getUint32(q.value,!0)<<32),q.value+=8,ft};function le(H,q){var ft=H.getFloat32(q.value,!0);return q.value+=4,ft}function ct(H,q){return jf.toHalfFloat(le(H,q))}function St(H){var q=(H&31744)>>10,ft=H&1023;return(H>>15?-1:1)*(q?q===31?ft?NaN:1/0:Math.pow(2,q-15)*(1+ft/1024):6103515625e-14*(ft/1024))}function Rt(H,q){var ft=H.getUint16(q.value,!0);return q.value+=2,ft}function Gt(H,q){return St(Rt(H,q))}function ge(H,q,ft,Ct){for(var Ht=ft.value,Bt=[];ft.value<Ht+Ct-1;){var ue=_e(q,ft),ne=Ce(H,ft),P=lt(H,ft);ft.value+=3;var $=Ce(H,ft),at=Ce(H,ft);Bt.push({name:ue,pixelType:ne,pLinear:P,xSampling:$,ySampling:at})}return ft.value+=1,Bt}function ve(H,q){var ft=le(H,q),Ct=le(H,q),Ht=le(H,q),Bt=le(H,q),ue=le(H,q),ne=le(H,q),P=le(H,q),$=le(H,q);return{redX:ft,redY:Ct,greenX:Ht,greenY:Bt,blueX:ue,blueY:ne,whiteX:P,whiteY:$}}function Ie(H,q){var ft=["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"],Ct=lt(H,q);return ft[Ct]}function mn(H,q){var ft=me(H,q),Ct=me(H,q),Ht=me(H,q),Bt=me(H,q);return{xMin:ft,yMin:Ct,xMax:Ht,yMax:Bt}}function Bn(H,q){var ft=["INCREASING_Y"],Ct=lt(H,q);return ft[Ct]}function rn(H,q){var ft=le(H,q),Ct=le(H,q);return[ft,Ct]}function gi(H,q){var ft=le(H,q),Ct=le(H,q),Ht=le(H,q);return[ft,Ct,Ht]}function bi(H,q,ft,Ct,Ht){if(Ct==="string"||Ct==="stringvector"||Ct==="iccProfile")return an(q,ft,Ht);if(Ct==="chlist")return ge(H,q,ft,Ht);if(Ct==="chromaticities")return ve(H,ft);if(Ct==="compression")return Ie(H,ft);if(Ct==="box2i")return mn(H,ft);if(Ct==="lineOrder")return Bn(H,ft);if(Ct==="float")return le(H,ft);if(Ct==="v2f")return rn(H,ft);if(Ct==="v3f")return gi(H,ft);if(Ct==="int")return Ce(H,ft);if(Ct==="rational")return ae(H,ft);if(Ct==="timecode")return Ae(H,ft);if(Ct==="preview")return ft.value+=Ht,"skipped";ft.value+=Ht}function Nl(H,q,ft){const Ct={};if(H.getUint32(0,!0)!=20000630)throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";Ct.version=H.getUint8(4);const Ht=H.getUint8(5);Ct.spec={singleTile:!!(Ht&2),longName:!!(Ht&4),deepFormat:!!(Ht&8),multiPart:!!(Ht&16)},ft.value=8;for(var Bt=!0;Bt;){var ue=_e(q,ft);if(ue==0)Bt=!1;else{var ne=_e(q,ft),P=me(H,ft),$=bi(H,q,ft,ne,P);$===void 0?console.warn(`EXRLoader.parse: skipped unknown header attribute type '${ne}'.`):Ct[ue]=$}}if(Ht&-5)throw console.error("EXRHeader:",Ct),"THREE.EXRLoader: provided file is currently unsupported.";return Ct}function Ps(H,q,ft,Ct,Ht){const Bt={size:0,viewer:q,array:ft,offset:Ct,width:H.dataWindow.xMax-H.dataWindow.xMin+1,height:H.dataWindow.yMax-H.dataWindow.yMin+1,channels:H.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:H.channels[0].pixelType,uncompress:null,getter:null,format:null,[Pm?"colorSpace":"encoding"]:null};switch(H.compression){case"NO_COMPRESSION":Bt.lines=1,Bt.uncompress=xt;break;case"RLE_COMPRESSION":Bt.lines=1,Bt.uncompress=Pt;break;case"ZIPS_COMPRESSION":Bt.lines=1,Bt.uncompress=$t;break;case"ZIP_COMPRESSION":Bt.lines=16,Bt.uncompress=$t;break;case"PIZ_COMPRESSION":Bt.lines=32,Bt.uncompress=Xt;break;case"PXR24_COMPRESSION":Bt.lines=16,Bt.uncompress=Re;break;case"DWAA_COMPRESSION":Bt.lines=32,Bt.uncompress=de;break;case"DWAB_COMPRESSION":Bt.lines=256,Bt.uncompress=de;break;default:throw"EXRLoader.parse: "+H.compression+" is unsupported"}if(Bt.scanlineBlockSize=Bt.lines,Bt.type==1)switch(Ht){case Fi:Bt.getter=Gt,Bt.inputSize=2;break;case Ra:Bt.getter=Rt,Bt.inputSize=2;break}else if(Bt.type==2)switch(Ht){case Fi:Bt.getter=le,Bt.inputSize=4;break;case Ra:Bt.getter=ct,Bt.inputSize=4}else throw"EXRLoader.parse: unsupported pixelType "+Bt.type+" for "+H.compression+".";Bt.blockCount=(H.dataWindow.yMax+1)/Bt.scanlineBlockSize;for(var ue=0;ue<Bt.blockCount;ue++)wt(q,Ct);Bt.outputChannels=Bt.channels==3?4:Bt.channels;const ne=Bt.width*Bt.height*Bt.outputChannels;switch(Ht){case Fi:Bt.byteArray=new Float32Array(ne),Bt.channels<Bt.outputChannels&&Bt.byteArray.fill(1,0,ne);break;case Ra:Bt.byteArray=new Uint16Array(ne),Bt.channels<Bt.outputChannels&&Bt.byteArray.fill(15360,0,ne);break;default:console.error("THREE.EXRLoader: unsupported type: ",Ht);break}return Bt.bytesPerLine=Bt.width*Bt.inputSize*Bt.channels,Bt.outputChannels==4?Bt.format=ea:Bt.format=$0,Pm?Bt.colorSpace="srgb-linear":Bt.encoding=3e3,Bt}const ca=new DataView(t),Ca=new Uint8Array(t),Rr={value:0},ua=Nl(ca,t,Rr),Fe=Ps(ua,ca,Ca,Rr,this.type),fi={value:0},un={R:0,G:1,B:2,A:3,Y:0};for(let H=0;H<Fe.height/Fe.scanlineBlockSize;H++){const q=me(ca,Rr);Fe.size=me(ca,Rr),Fe.lines=q+Fe.scanlineBlockSize>Fe.height?Fe.height-q:Fe.scanlineBlockSize;const Ct=Fe.size<Fe.lines*Fe.bytesPerLine?Fe.uncompress(Fe):xt(Fe);Rr.value+=Fe.size;for(let Ht=0;Ht<Fe.scanlineBlockSize;Ht++){const Bt=Ht+H*Fe.scanlineBlockSize;if(Bt>=Fe.height)break;for(let ue=0;ue<Fe.channels;ue++){const ne=un[ua.channels[ue].name];for(let P=0;P<Fe.width;P++){fi.value=(Ht*(Fe.channels*Fe.width)+ue*Fe.width+P)*Fe.inputSize;const $=(Fe.height-1-Bt)*(Fe.width*Fe.outputChannels)+P*Fe.outputChannels+ne;Fe.byteArray[$]=Fe.getter(Ct,fi)}}}}return{header:ua,width:Fe.width,height:Fe.height,data:Fe.byteArray,format:Fe.format,[Pm?"colorSpace":"encoding"]:Fe[Pm?"colorSpace":"encoding"],type:this.type}}setDataType(t){return this.type=t,this}load(t,e,i,a){function o(u,h){Pm?u.colorSpace=h.colorSpace:u.encoding=h.encoding,u.minFilter=ai,u.magFilter=ai,u.generateMipmaps=!1,u.flipY=!1,e&&e(u,h)}return super.load(t,o,i,a)}}const uG=kt.forwardRef(({makeDefault:n,camera:t,regress:e,domElement:i,enableDamping:a=!0,keyEvents:o=!1,onChange:u,onStart:h,onEnd:d,...p},v)=>{const _=Yr(B=>B.invalidate),x=Yr(B=>B.camera),b=Yr(B=>B.gl),E=Yr(B=>B.events),R=Yr(B=>B.setEvents),w=Yr(B=>B.set),M=Yr(B=>B.get),C=Yr(B=>B.performance),U=t||x,D=i||E.connected||b.domElement,z=kt.useMemo(()=>new lG(U),[U]);return r3(()=>{z.enabled&&z.update()},-1),kt.useEffect(()=>(o&&z.connect(o===!0?D:o),z.connect(D),()=>void z.dispose()),[o,D,e,z,_]),kt.useEffect(()=>{const B=L=>{_(),e&&C.regress(),u&&u(L)},F=L=>{h&&h(L)},G=L=>{d&&d(L)};return z.addEventListener("change",B),z.addEventListener("start",F),z.addEventListener("end",G),()=>{z.removeEventListener("start",F),z.removeEventListener("end",G),z.removeEventListener("change",B)}},[u,h,d,z,_,R]),kt.useEffect(()=>{if(n){const B=M().controls;return w({controls:z}),()=>w({controls:B})}},[n,z]),kt.createElement("primitive",ny({ref:v,object:z,enableDamping:a},p))}),M3=(n,t,e)=>{let i;switch(n){case jr:i=new Uint8ClampedArray(t*e*4);break;case Ra:i=new Uint16Array(t*e*4);break;case Rl:i=new Uint32Array(t*e*4);break;case rx:i=new Int8Array(t*e*4);break;case sx:i=new Int16Array(t*e*4);break;case J0:i=new Int32Array(t*e*4);break;case Fi:i=new Float32Array(t*e*4);break;default:throw new Error("Unsupported data type")}return i};let Y_;const fG=(n,t,e,i)=>{if(Y_!==void 0)return Y_;const a=new Is(1,1,i);t.setRenderTarget(a);const o=new Gi(new Ou,new Mc({color:16777215}));t.render(o,e),t.setRenderTarget(null);const u=M3(n,a.width,a.height);return t.readRenderTargetPixels(a,0,0,a.width,a.height,u),a.dispose(),o.geometry.dispose(),o.material.dispose(),Y_=u[0]!==0,Y_};class qM{constructor(t){var e,i,a,o,u,h,d,p,v,_,x,b,E,R,w,M;this._rendererIsDisposable=!1,this._supportsReadPixels=!0,this.render=()=>{this._renderer.setRenderTarget(this._renderTarget);try{this._renderer.render(this._scene,this._camera)}catch(U){throw this._renderer.setRenderTarget(null),U}this._renderer.setRenderTarget(null)},this._width=t.width,this._height=t.height,this._type=t.type,this._colorSpace=t.colorSpace;const C={format:ea,depthBuffer:!1,stencilBuffer:!1,type:this._type,colorSpace:this._colorSpace,anisotropy:((e=t.renderTargetOptions)===null||e===void 0?void 0:e.anisotropy)!==void 0?(i=t.renderTargetOptions)===null||i===void 0?void 0:i.anisotropy:1,generateMipmaps:((a=t.renderTargetOptions)===null||a===void 0?void 0:a.generateMipmaps)!==void 0?(o=t.renderTargetOptions)===null||o===void 0?void 0:o.generateMipmaps:!1,magFilter:((u=t.renderTargetOptions)===null||u===void 0?void 0:u.magFilter)!==void 0?(h=t.renderTargetOptions)===null||h===void 0?void 0:h.magFilter:ai,minFilter:((d=t.renderTargetOptions)===null||d===void 0?void 0:d.minFilter)!==void 0?(p=t.renderTargetOptions)===null||p===void 0?void 0:p.minFilter:ai,samples:((v=t.renderTargetOptions)===null||v===void 0?void 0:v.samples)!==void 0?(_=t.renderTargetOptions)===null||_===void 0?void 0:_.samples:void 0,wrapS:((x=t.renderTargetOptions)===null||x===void 0?void 0:x.wrapS)!==void 0?(b=t.renderTargetOptions)===null||b===void 0?void 0:b.wrapS:la,wrapT:((E=t.renderTargetOptions)===null||E===void 0?void 0:E.wrapT)!==void 0?(R=t.renderTargetOptions)===null||R===void 0?void 0:R.wrapT:la};if(this._material=t.material,t.renderer?this._renderer=t.renderer:(this._renderer=qM.instantiateRenderer(),this._rendererIsDisposable=!0),this._scene=new ig,this._camera=new xc,this._camera.position.set(0,0,10),this._camera.left=-.5,this._camera.right=.5,this._camera.top=.5,this._camera.bottom=-.5,this._camera.updateProjectionMatrix(),!fG(this._type,this._renderer,this._camera,C)){let U;switch(this._type){case Ra:U=this._renderer.extensions.has("EXT_color_buffer_float")?Fi:void 0;break}U!==void 0?(console.warn(`This browser does not support reading pixels from ${this._type} RenderTargets, switching to ${Fi}`),this._type=U):(this._supportsReadPixels=!1,console.warn("This browser dos not support toArray or toDataTexture, calls to those methods will result in an error thrown"))}this._quad=new Gi(new Ou,this._material),this._quad.geometry.computeBoundingBox(),this._scene.add(this._quad),this._renderTarget=new Is(this.width,this.height,C),this._renderTarget.texture.mapping=((w=t.renderTargetOptions)===null||w===void 0?void 0:w.mapping)!==void 0?(M=t.renderTargetOptions)===null||M===void 0?void 0:M.mapping:Ru}static instantiateRenderer(){const t=new HM;return t.setSize(128,128),t}toArray(){if(!this._supportsReadPixels)throw new Error("Can't read pixels in this browser");const t=M3(this._type,this._width,this._height);return this._renderer.readRenderTargetPixels(this._renderTarget,0,0,this._width,this._height,t),t}toDataTexture(t){const e=new wo(this.toArray(),this.width,this.height,ea,this._type,(t==null?void 0:t.mapping)||Ru,(t==null?void 0:t.wrapS)||la,(t==null?void 0:t.wrapT)||la,(t==null?void 0:t.magFilter)||ai,(t==null?void 0:t.minFilter)||ai,(t==null?void 0:t.anisotropy)||1,Ro);return e.generateMipmaps=(t==null?void 0:t.generateMipmaps)!==void 0?t==null?void 0:t.generateMipmaps:!1,e}disposeOnDemandRenderer(){this._renderer.setRenderTarget(null),this._rendererIsDisposable&&(this._renderer.dispose(),this._renderer.forceContextLoss())}dispose(t){this.disposeOnDemandRenderer(),t&&this.renderTarget.dispose(),this.material instanceof Kr&&Object.values(this.material.uniforms).forEach(e=>{e.value instanceof ci&&e.value.dispose()}),Object.values(this.material).forEach(e=>{e instanceof ci&&e.dispose()}),this.material.dispose(),this._quad.geometry.dispose()}get width(){return this._width}set width(t){this._width=t,this._renderTarget.setSize(this._width,this._height)}get height(){return this._height}set height(t){this._height=t,this._renderTarget.setSize(this._width,this._height)}get renderer(){return this._renderer}get renderTarget(){return this._renderTarget}set renderTarget(t){this._renderTarget=t,this._width=t.width,this._height=t.height}get material(){return this._material}get type(){return this._type}get colorSpace(){return this._colorSpace}}const hG=`
varying vec2 vUv;

void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,dG=`
// min half float value
#define HALF_FLOAT_MIN vec3( -65504, -65504, -65504 )
// max half float value
#define HALF_FLOAT_MAX vec3( 65504, 65504, 65504 )

uniform sampler2D sdr;
uniform sampler2D gainMap;
uniform vec3 gamma;
uniform vec3 offsetHdr;
uniform vec3 offsetSdr;
uniform vec3 gainMapMin;
uniform vec3 gainMapMax;
uniform float weightFactor;

varying vec2 vUv;

void main() {
  vec3 rgb = texture2D( sdr, vUv ).rgb;
  vec3 recovery = texture2D( gainMap, vUv ).rgb;
  vec3 logRecovery = pow( recovery, gamma );
  vec3 logBoost = gainMapMin * ( 1.0 - logRecovery ) + gainMapMax * logRecovery;
  vec3 hdrColor = (rgb + offsetSdr) * exp2( logBoost * weightFactor ) - offsetHdr;
  vec3 clampedHdrColor = max( HALF_FLOAT_MIN, min( HALF_FLOAT_MAX, hdrColor ));
  gl_FragColor = vec4( clampedHdrColor , 1.0 );
}
`;class pG extends Kr{constructor({gamma:t,offsetHdr:e,offsetSdr:i,gainMapMin:a,gainMapMax:o,maxDisplayBoost:u,hdrCapacityMin:h,hdrCapacityMax:d,sdr:p,gainMap:v}){super({name:"GainMapDecoderMaterial",vertexShader:hG,fragmentShader:dG,uniforms:{sdr:{value:p},gainMap:{value:v},gamma:{value:new J(1/t[0],1/t[1],1/t[2])},offsetHdr:{value:new J().fromArray(e)},offsetSdr:{value:new J().fromArray(i)},gainMapMin:{value:new J().fromArray(a)},gainMapMax:{value:new J().fromArray(o)},weightFactor:{value:(Math.log2(u)-h)/(d-h)}},blending:El,depthTest:!1,depthWrite:!1}),this._maxDisplayBoost=u,this._hdrCapacityMin=h,this._hdrCapacityMax=d,this.needsUpdate=!0,this.uniformsNeedUpdate=!0}get sdr(){return this.uniforms.sdr.value}set sdr(t){this.uniforms.sdr.value=t}get gainMap(){return this.uniforms.gainMap.value}set gainMap(t){this.uniforms.gainMap.value=t}get offsetHdr(){return this.uniforms.offsetHdr.value.toArray()}set offsetHdr(t){this.uniforms.offsetHdr.value.fromArray(t)}get offsetSdr(){return this.uniforms.offsetSdr.value.toArray()}set offsetSdr(t){this.uniforms.offsetSdr.value.fromArray(t)}get gainMapMin(){return this.uniforms.gainMapMin.value.toArray()}set gainMapMin(t){this.uniforms.gainMapMin.value.fromArray(t)}get gainMapMax(){return this.uniforms.gainMapMax.value.toArray()}set gainMapMax(t){this.uniforms.gainMapMax.value.fromArray(t)}get gamma(){const t=this.uniforms.gamma.value;return[1/t.x,1/t.y,1/t.z]}set gamma(t){const e=this.uniforms.gamma.value;e.x=1/t[0],e.y=1/t[1],e.z=1/t[2]}get hdrCapacityMin(){return this._hdrCapacityMin}set hdrCapacityMin(t){this._hdrCapacityMin=t,this.calculateWeight()}get hdrCapacityMax(){return this._hdrCapacityMax}set hdrCapacityMax(t){this._hdrCapacityMax=t,this.calculateWeight()}get maxDisplayBoost(){return this._maxDisplayBoost}set maxDisplayBoost(t){this._maxDisplayBoost=Math.max(1,Math.min(65504,t)),this.calculateWeight()}calculateWeight(){const t=(Math.log2(this._maxDisplayBoost)-this._hdrCapacityMin)/(this._hdrCapacityMax-this._hdrCapacityMin);this.uniforms.weightFactor.value=Math.max(0,Math.min(1,t))}}class E3 extends Error{}class T3 extends Error{}const Hm=(n,t,e)=>{const i=new RegExp(`${t}="([^"]*)"`,"i").exec(n);if(i)return i[1];const a=new RegExp(`<${t}[^>]*>([\\s\\S]*?)</${t}>`,"i").exec(n);if(a){const o=a[1].match(/<rdf:li>([^<]*)<\/rdf:li>/g);return o&&o.length===3?o.map(u=>u.replace(/<\/?rdf:li>/g,"")):a[1].trim()}if(e!==void 0)return e;throw new Error(`Can't find ${t} in gainmap metadata`)},mG=n=>{let t;typeof TextDecoder<"u"?t=new TextDecoder().decode(n):t=n.toString();let e=t.indexOf("<x:xmpmeta");for(;e!==-1;){const i=t.indexOf("x:xmpmeta>",e),a=t.slice(e,i+10);try{const o=Hm(a,"hdrgm:GainMapMin","0"),u=Hm(a,"hdrgm:GainMapMax"),h=Hm(a,"hdrgm:Gamma","1"),d=Hm(a,"hdrgm:OffsetSDR","0.015625"),p=Hm(a,"hdrgm:OffsetHDR","0.015625"),v=/hdrgm:HDRCapacityMin="([^"]*)"/.exec(a),_=v?v[1]:"0",x=/hdrgm:HDRCapacityMax="([^"]*)"/.exec(a);if(!x)throw new Error("Incomplete gainmap metadata");const b=x[1];return{gainMapMin:Array.isArray(o)?o.map(E=>parseFloat(E)):[parseFloat(o),parseFloat(o),parseFloat(o)],gainMapMax:Array.isArray(u)?u.map(E=>parseFloat(E)):[parseFloat(u),parseFloat(u),parseFloat(u)],gamma:Array.isArray(h)?h.map(E=>parseFloat(E)):[parseFloat(h),parseFloat(h),parseFloat(h)],offsetSdr:Array.isArray(d)?d.map(E=>parseFloat(E)):[parseFloat(d),parseFloat(d),parseFloat(d)],offsetHdr:Array.isArray(p)?p.map(E=>parseFloat(E)):[parseFloat(p),parseFloat(p),parseFloat(p)],hdrCapacityMin:parseFloat(_),hdrCapacityMax:parseFloat(b)}}catch{}e=t.indexOf("<x:xmpmeta",i)}};class gG{constructor(t){this.options={debug:t&&t.debug!==void 0?t.debug:!1,extractFII:t&&t.extractFII!==void 0?t.extractFII:!0,extractNonFII:t&&t.extractNonFII!==void 0?t.extractNonFII:!0}}extract(t){return new Promise((e,i)=>{const a=this.options.debug,o=new DataView(t.buffer);if(o.getUint16(0)!==65496){i(new Error("Not a valid jpeg"));return}const u=o.byteLength;let h=2,d=0,p;for(;h<u;){if(++d>250){i(new Error(`Found no marker after ${d} loops 😵`));return}if(o.getUint8(h)!==255){i(new Error(`Not a valid marker at offset 0x${h.toString(16)}, found: 0x${o.getUint8(h).toString(16)}`));return}if(p=o.getUint8(h+1),a&&console.log(`Marker: ${p.toString(16)}`),p===226){a&&console.log("Found APP2 marker (0xffe2)");const v=h+4;if(o.getUint32(v)===1297106432){const _=v+4;let x;if(o.getUint16(_)===18761)x=!1;else if(o.getUint16(_)===19789)x=!0;else{i(new Error("No valid endianness marker found in TIFF header"));return}if(o.getUint16(_+2,!x)!==42){i(new Error("Not valid TIFF data! (no 0x002A marker)"));return}const b=o.getUint32(_+4,!x);if(b<8){i(new Error("Not valid TIFF data! (First offset less than 8)"));return}const E=_+b,R=o.getUint16(E,!x),w=E+2;let M=0;for(let z=w;z<w+12*R;z+=12)o.getUint16(z,!x)===45057&&(M=o.getUint32(z+8,!x));const U=E+2+R*12+4,D=[];for(let z=U;z<U+M*16;z+=16){const B={MPType:o.getUint32(z,!x),size:o.getUint32(z+4,!x),dataOffset:o.getUint32(z+8,!x),dependantImages:o.getUint32(z+12,!x),start:-1,end:-1,isFII:!1};B.dataOffset?(B.start=_+B.dataOffset,B.isFII=!1):(B.start=0,B.isFII=!0),B.end=B.start+B.size,D.push(B)}if(this.options.extractNonFII&&D.length){const z=new Blob([o]),B=[];for(const F of D){if(F.isFII&&!this.options.extractFII)continue;const G=z.slice(F.start,F.end+1,"image/jpeg");B.push(G)}e(B)}}}h+=2+o.getUint16(h+2)}})}}const vG=async n=>{const t=mG(n);if(!t)throw new T3("Gain map XMP metadata not found");const i=await new gG({extractFII:!0,extractNonFII:!0}).extract(n);if(i.length!==2)throw new E3("Gain map recovery image not found");return{sdr:new Uint8Array(await i[0].arrayBuffer()),gainMap:new Uint8Array(await i[1].arrayBuffer()),metadata:t}},Yw=n=>new Promise((t,e)=>{const i=document.createElement("img");i.onload=()=>{t(i)},i.onerror=a=>{e(a)},i.src=URL.createObjectURL(n)});class A3 extends wr{constructor(t,e){super(e),t&&(this._renderer=t),this._internalLoadingManager=new Ux}setRenderer(t){return this._renderer=t,this}setRenderTargetOptions(t){return this._renderTargetOptions=t,this}prepareQuadRenderer(){this._renderer||console.warn("WARNING: An existing WebGL Renderer was not passed to this Loader constructor or in setRenderer, the result of this Loader will need to be converted to a Data Texture with toDataTexture() before you can use it in your renderer.");const t=new pG({gainMapMax:[1,1,1],gainMapMin:[0,0,0],gamma:[1,1,1],offsetHdr:[1,1,1],offsetSdr:[1,1,1],hdrCapacityMax:1,hdrCapacityMin:0,maxDisplayBoost:1,gainMap:new ci,sdr:new ci});return new qM({width:16,height:16,type:Ra,colorSpace:Ro,material:t,renderer:this._renderer,renderTargetOptions:this._renderTargetOptions})}async render(t,e,i,a){const o=a?new Blob([a],{type:"image/jpeg"}):void 0,u=new Blob([i],{type:"image/jpeg"});let h,d,p=!1;if(typeof createImageBitmap>"u"){const x=await Promise.all([o?Yw(o):Promise.resolve(void 0),Yw(u)]);d=x[0],h=x[1],p=!0}else{const x=await Promise.all([o?createImageBitmap(o,{imageOrientation:"flipY"}):Promise.resolve(void 0),createImageBitmap(u,{imageOrientation:"flipY"})]);d=x[0],h=x[1]}const v=new ci(d||new ImageData(2,2),Ru,la,la,ai,gb,ea,jr,1,Ro);v.flipY=p,v.needsUpdate=!0;const _=new ci(h,Ru,la,la,ai,gb,ea,jr,1,Va);_.flipY=p,_.needsUpdate=!0,t.width=h.width,t.height=h.height,t.material.gainMap=v,t.material.sdr=_,t.material.gainMapMin=e.gainMapMin,t.material.gainMapMax=e.gainMapMax,t.material.offsetHdr=e.offsetHdr,t.material.offsetSdr=e.offsetSdr,t.material.gamma=e.gamma,t.material.hdrCapacityMin=e.hdrCapacityMin,t.material.hdrCapacityMax=e.hdrCapacityMax,t.material.maxDisplayBoost=Math.pow(2,e.hdrCapacityMax),t.material.needsUpdate=!0,t.render()}}class _G extends A3{load([t,e,i],a,o,u){const h=this.prepareQuadRenderer();let d,p,v;const _=async()=>{if(d&&p&&v){try{await this.render(h,v,d,p)}catch(L){this.manager.itemError(t),this.manager.itemError(e),this.manager.itemError(i),typeof u=="function"&&u(L),h.disposeOnDemandRenderer();return}typeof a=="function"&&a(h),this.manager.itemEnd(t),this.manager.itemEnd(e),this.manager.itemEnd(i),h.disposeOnDemandRenderer()}};let x=!0,b=0,E=0,R=!0,w=0,M=0,C=!0,U=0,D=0;const z=()=>{if(typeof o=="function"){const L=b+w+U,O=E+M+D,V=x&&R&&C;o(new ProgressEvent("progress",{lengthComputable:V,loaded:O,total:L}))}};this.manager.itemStart(t),this.manager.itemStart(e),this.manager.itemStart(i);const B=new ms(this._internalLoadingManager);B.setResponseType("arraybuffer"),B.setRequestHeader(this.requestHeader),B.setPath(this.path),B.setWithCredentials(this.withCredentials),B.load(t,async L=>{if(typeof L=="string")throw new Error("Invalid sdr buffer");d=L,await _()},L=>{x=L.lengthComputable,E=L.loaded,b=L.total,z()},L=>{this.manager.itemError(t),typeof u=="function"&&u(L)});const F=new ms(this._internalLoadingManager);F.setResponseType("arraybuffer"),F.setRequestHeader(this.requestHeader),F.setPath(this.path),F.setWithCredentials(this.withCredentials),F.load(e,async L=>{if(typeof L=="string")throw new Error("Invalid gainmap buffer");p=L,await _()},L=>{R=L.lengthComputable,M=L.loaded,w=L.total,z()},L=>{this.manager.itemError(e),typeof u=="function"&&u(L)});const G=new ms(this._internalLoadingManager);return G.setRequestHeader(this.requestHeader),G.setPath(this.path),G.setWithCredentials(this.withCredentials),G.load(i,async L=>{if(typeof L!="string")throw new Error("Invalid metadata string");v=JSON.parse(L),await _()},L=>{C=L.lengthComputable,D=L.loaded,U=L.total,z()},L=>{this.manager.itemError(i),typeof u=="function"&&u(L)}),h}}class yG extends A3{load(t,e,i,a){const o=this.prepareQuadRenderer(),u=new ms(this._internalLoadingManager);return u.setResponseType("arraybuffer"),u.setRequestHeader(this.requestHeader),u.setPath(this.path),u.setWithCredentials(this.withCredentials),this.manager.itemStart(t),u.load(t,async h=>{if(typeof h=="string")throw new Error("Invalid buffer, received [string], was expecting [ArrayBuffer]");const d=new Uint8Array(h);let p,v,_;try{const x=await vG(d);p=x.sdr,v=x.gainMap,_=x.metadata}catch(x){if(x instanceof T3||x instanceof E3)console.warn(`Failure to reconstruct an HDR image from ${t}: Gain map metadata not found in the file, HDRJPGLoader will render the SDR jpeg`),_={gainMapMin:[0,0,0],gainMapMax:[1,1,1],gamma:[1,1,1],hdrCapacityMin:0,hdrCapacityMax:1,offsetHdr:[0,0,0],offsetSdr:[0,0,0]},p=d;else throw x}try{await this.render(o,_,p,v)}catch(x){this.manager.itemError(t),typeof a=="function"&&a(x),o.disposeOnDemandRenderer();return}typeof e=="function"&&e(o),this.manager.itemEnd(t),o.disposeOnDemandRenderer()},i,h=>{this.manager.itemError(t),typeof a=="function"&&a(h)}),o}}const I0={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"},w3="https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/",kd=n=>Array.isArray(n),ZM=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"];function Bx({files:n=ZM,path:t="",preset:e=void 0,colorSpace:i=void 0,extensions:a}={}){e&&(WM(e),n=I0[e],t=w3);const o=kd(n),{extension:u,isCubemap:h}=jM(n),d=KM(u);if(!d)throw new Error("useEnvironment: Unrecognized file extension: "+n);const p=Yr(b=>b.gl);kt.useLayoutEffect(()=>{if(u!=="webp"&&u!=="jpg"&&u!=="jpeg")return;function b(){Jd.clear(d,o?[n]:n)}p.domElement.addEventListener("webglcontextlost",b,{once:!0})},[n,p.domElement]);const v=Jd(d,o?[n]:n,b=>{(u==="webp"||u==="jpg"||u==="jpeg")&&b.setRenderer(p),b.setPath==null||b.setPath(t),a&&a(b)});let _=o?v[0]:v;if(u==="jpg"||u==="jpeg"||u==="webp"){var x;_=(x=_.renderTarget)==null?void 0:x.texture}return _.mapping=h?wl:sh,_.colorSpace=i??(h?"srgb":"srgb-linear"),_}const xG={files:ZM,path:"",preset:void 0,extensions:void 0};Bx.preload=n=>{const t={...xG,...n};let{files:e,path:i=""}=t;const{preset:a,extensions:o}=t;a&&(WM(a),e=I0[a],i=w3);const{extension:u}=jM(e);if(u==="webp"||u==="jpg"||u==="jpeg")throw new Error("useEnvironment: Preloading gainmaps is not supported");const h=KM(u);if(!h)throw new Error("useEnvironment: Unrecognized file extension: "+e);Jd.preload(h,kd(e)?[e]:e,d=>{d.setPath==null||d.setPath(i),o&&o(d)})};const SG={files:ZM,preset:void 0};Bx.clear=n=>{const t={...SG,...n};let{files:e}=t;const{preset:i}=t;i&&(WM(i),e=I0[i]);const{extension:a}=jM(e),o=KM(a);if(!o)throw new Error("useEnvironment: Unrecognized file extension: "+e);Jd.clear(o,kd(e)?[e]:e)};function WM(n){if(!(n in I0))throw new Error("Preset must be one of: "+Object.keys(I0).join(", "))}function jM(n){var t;const e=kd(n)&&n.length===6,i=kd(n)&&n.length===3&&n.some(u=>u.endsWith("json")),a=kd(n)?n[0]:n;return{extension:e?"cube":i?"webp":a.startsWith("data:application/exr")?"exr":a.startsWith("data:application/hdr")?"hdr":a.startsWith("data:image/jpeg")?"jpg":(t=a.split(".").pop())==null||(t=t.split("?"))==null||(t=t.shift())==null?void 0:t.toLowerCase(),isCubemap:e,isGainmap:i}}function KM(n){return n==="cube"?TC:n==="hdr"?b3:n==="exr"?cG:n==="jpg"||n==="jpeg"?yG:n==="webp"?_G:null}const bG=n=>n.current&&n.current.isScene,MG=n=>bG(n)?n.current:n;function QM(n,t,e,i,a={}){var o,u,h,d;a={backgroundBlurriness:0,backgroundIntensity:1,backgroundRotation:[0,0,0],environmentIntensity:1,environmentRotation:[0,0,0],...a};const p=MG(t||e),v=p.background,_=p.environment,x={backgroundBlurriness:p.backgroundBlurriness,backgroundIntensity:p.backgroundIntensity,backgroundRotation:(o=(u=p.backgroundRotation)==null||u.clone==null?void 0:u.clone())!==null&&o!==void 0?o:[0,0,0],environmentIntensity:p.environmentIntensity,environmentRotation:(h=(d=p.environmentRotation)==null||d.clone==null?void 0:d.clone())!==null&&h!==void 0?h:[0,0,0]};return n!=="only"&&(p.environment=i),n&&(p.background=i),yl(p,a),()=>{n!=="only"&&(p.environment=_),n&&(p.background=v),yl(p,x)}}function JM({scene:n,background:t=!1,map:e,...i}){const a=Yr(o=>o.scene);return kt.useLayoutEffect(()=>{if(e)return QM(t,n,a,e,i)}),null}function R3({background:n=!1,scene:t,blur:e,backgroundBlurriness:i,backgroundIntensity:a,backgroundRotation:o,environmentIntensity:u,environmentRotation:h,...d}){const p=Bx(d),v=Yr(_=>_.scene);return kt.useLayoutEffect(()=>QM(n,t,v,p,{backgroundBlurriness:e??i,backgroundIntensity:a,backgroundRotation:o,environmentIntensity:u,environmentRotation:h})),kt.useEffect(()=>()=>{p.dispose()},[p]),null}function EG({children:n,near:t=.1,far:e=1e3,resolution:i=256,frames:a=1,map:o,background:u=!1,blur:h,backgroundBlurriness:d,backgroundIntensity:p,backgroundRotation:v,environmentIntensity:_,environmentRotation:x,scene:b,files:E,path:R,preset:w=void 0,extensions:M}){const C=Yr(G=>G.gl),U=Yr(G=>G.scene),D=kt.useRef(null),[z]=kt.useState(()=>new ig),B=kt.useMemo(()=>{const G=new hM(i);return G.texture.type=Ra,G},[i]);kt.useEffect(()=>()=>{B.dispose()},[B]),kt.useLayoutEffect(()=>{if(a===1){const G=C.autoClear;C.autoClear=!0,D.current.update(C,z),C.autoClear=G}return QM(u,b,U,B.texture,{backgroundBlurriness:h??d,backgroundIntensity:p,backgroundRotation:v,environmentIntensity:_,environmentRotation:x})},[n,z,B.texture,b,U,u,a,C]);let F=1;return r3(()=>{if(a===1/0||F<a){const G=C.autoClear;C.autoClear=!0,D.current.update(C,z),C.autoClear=G,F++}}),kt.createElement(kt.Fragment,null,A8(kt.createElement(kt.Fragment,null,n,kt.createElement("cubeCamera",{ref:D,args:[t,e,B]}),E||w?kt.createElement(R3,{background:!0,files:E,preset:w,path:R,extensions:M}):o?kt.createElement(JM,{background:!0,map:o,extensions:M}):null),z))}function TG(n){var t,e,i,a;const o=Bx(n),u=n.map||o;kt.useMemo(()=>l3({GroundProjectedEnvImpl:tG}),[]),kt.useEffect(()=>()=>{o.dispose()},[o]);const h=kt.useMemo(()=>[u],[u]),d=(t=n.ground)==null?void 0:t.height,p=(e=n.ground)==null?void 0:e.radius,v=(i=(a=n.ground)==null?void 0:a.scale)!==null&&i!==void 0?i:1e3;return kt.createElement(kt.Fragment,null,kt.createElement(JM,ny({},n,{map:u})),kt.createElement("groundProjectedEnvImpl",{args:h,scale:v,height:d,radius:p}))}function AG(n){return n.ground?kt.createElement(TG,n):n.map?kt.createElement(JM,n):n.children?kt.createElement(EG,n):kt.createElement(R3,n)}function wG(n){const t=new wu,e=1.1;return t.moveTo(n[0][0]*e,n[0][1]*e),n.slice(1).forEach(([i,a])=>t.lineTo(i*e,a*e)),new sg(t,{depth:25,bevelEnabled:!0,bevelSize:5,bevelThickness:2})}const C3={};Object.entries(xr).forEach(([n,t])=>{C3[n]=wG(t.points)});const RG=({type:n,x:t,y:e,rotation:i,color:a,game:o,index:u})=>{var h=Co(1);try{const d=kt.useRef(),p=1,v=o.zIndexOffset.value*u;return Oe.jsx("mesh",{ref:d,geometry:C3[n],position:[t*p,0,e*p],rotation:[Math.PI/2,0,i*Math.PI/180],scale:[p,p,-(1+v)],children:Oe.jsx("meshStandardMaterial",{color:a,roughness:0})})}finally{h.f()}},CG=({game:n})=>{const e=n.projectManager.getSelectedProject().data.pieces,{centerX:i,centerY:a}=kt.useMemo(()=>{if(e.length===0)return{centerX:0,centerY:0};let h=0,d=0;return e.forEach(p=>{h+=p.x,d+=p.y}),{centerX:h/e.length,centerY:d/e.length}},[e]),{scene:o}=Yr(),u="/ReactTangrams/hdri/C.hdr";return kt.useEffect(()=>{const h=u;new b3().load(h,d=>{d.mapping=sh,o.environment=d})},[o]),Oe.jsxs(Oe.Fragment,{children:[Oe.jsx("ambientLight",{intensity:0}),Oe.jsx("directionalLight",{position:[10,10,10],intensity:.7}),Oe.jsx(uG,{target:[i,0,a],makeDefault:!0}),Oe.jsx(AG,{files:u,background:!1}),e.map((h,d)=>Oe.jsx(RG,{...h,index:d,game:n},h.id))]})};class DG extends kt.Component{constructor(t){super(t),this.state={hasError:!1}}static getDerivedStateFromError(t){return{hasError:!0}}componentDidCatch(t,e){console.error("Error in R3F Canvas:",t,e)}render(){return this.state.hasError?Oe.jsx("h1",{children:"Something went wrong in the 3D Renderer."}):this.props.children}}const NG=({game:n})=>Oe.jsx("div",{style:{width:"100%",height:"100%",position:"relative"},children:Oe.jsx(DG,{children:Oe.jsx(H8,{children:Oe.jsx(CG,{game:n})})})}),UG=({game:n,onClose:t})=>{const e=kt.useRef(null),i=(o,u)=>{switch(o){case"close":e.current.close();break}},a=()=>{t&&t()};return dn(W0,{ref:e,game:n,modalKey:ka.MODALS.THREED,showClose:!0,title:"Live 3D View",materialIcon:"3d_rotation",onClose:a,style:{width:"900px",maxHeight:"70%"},children:[zt("div",{css:OG,children:zt("div",{className:"cancelMargin",children:zt(NG,{game:n})})}),zt(j0,{buttonsList:[["close","close",!0]],onButtonClicked:i})]})},OG={name:"dywl1h",styles:"position:relative;width:900px;height:600px;border-bottom:1px solid #858585;margin-bottom:10px;.cancelMargin{position:absolute;inset:-18px -20px 0px -20px;}"},LG=({game:n})=>{var t=Co(1);try{const e=n.modalManager,i=()=>{e.closeModal()};return dn(lz,{game:n,children:[e.currentModal.value==ka.MODALS.WELCOME&&zt(hz,{game:n,onClose:i}),e.currentModal.value==ka.MODALS.IMPORT_EXPORT&&zt(pz,{game:n,onClose:i}),e.currentModal.value==ka.MODALS.SHARE_URL&&zt(vz,{game:n,onClose:i}),e.currentModal.value==ka.MODALS.HELP&&zt(yz,{game:n,onClose:i}),e.currentModal.value==ka.MODALS.THREED&&zt(UG,{game:n,onClose:i})]})}finally{t.f()}};function zG(){const t=kt.useRef(new zL).current;return window.game=t,dn("div",{className:"App",css:BG,tabIndex:"0",onContextMenu:a=>{(!a.shiftKey||!a.altKey)&&(a.preventDefault(),a.stopPropagation())},onKeyDown:a=>{a.key===" "&&a.target.tagName!=="INPUT"&&(a.preventDefault(),t.addShapePieMenu.toggle())},children:[zt(BL,{game:t}),zt(kL,{game:t}),zt(az,{game:t}),zt(rz,{game:t}),zt(LG,{game:t})]})}const BG=a2("","");ED.createRoot(document.getElementById("root")).render(Oe.jsx(kt.StrictMode,{children:Oe.jsx(zG,{})}));
